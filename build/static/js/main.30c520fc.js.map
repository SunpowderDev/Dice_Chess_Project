{"version":3,"file":"static/js/main.30c520fc.js","mappings":"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","sources":["../node_modules/react/index.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/cjs/react.production.min.js","../node_modules/scheduler/cjs/scheduler.production.min.js","../node_modules/react-dom/client.js","../node_modules/react/jsx-runtime.js","../node_modules/react-dom/cjs/react-dom.production.min.js","../node_modules/scheduler/index.js","../node_modules/react-dom/index.js","../webpack/bootstrap","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","levelConfig.ts","constants.ts","StoryCard.tsx","MainMenu.tsx","MusicManager.tsx","Market.tsx","ObjectiveManager.ts","VictoryPopup.tsx","TutorialPopup.tsx","Dice_Chess.tsx","index.tsx"],"sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","/**\n * @license React\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=Symbol.for(\"react.element\"),n=Symbol.for(\"react.portal\"),p=Symbol.for(\"react.fragment\"),q=Symbol.for(\"react.strict_mode\"),r=Symbol.for(\"react.profiler\"),t=Symbol.for(\"react.provider\"),u=Symbol.for(\"react.context\"),v=Symbol.for(\"react.forward_ref\"),w=Symbol.for(\"react.suspense\"),x=Symbol.for(\"react.memo\"),y=Symbol.for(\"react.lazy\"),z=Symbol.iterator;function A(a){if(null===a||\"object\"!==typeof a)return null;a=z&&a[z]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}\nvar B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function E(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}E.prototype.isReactComponent={};\nE.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(\"setState(...): takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,a,b,\"setState\")};E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function F(){}F.prototype=E.prototype;function G(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}var H=G.prototype=new F;\nH.constructor=G;C(H,E.prototype);H.isPureReactComponent=!0;var I=Array.isArray,J=Object.prototype.hasOwnProperty,K={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,e){var d,c={},k=null,h=null;if(null!=b)for(d in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)J.call(b,d)&&!L.hasOwnProperty(d)&&(c[d]=b[d]);var g=arguments.length-2;if(1===g)c.children=e;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];c.children=f}if(a&&a.defaultProps)for(d in g=a.defaultProps,g)void 0===c[d]&&(c[d]=g[d]);return{$$typeof:l,type:a,key:k,ref:h,props:c,_owner:K.current}}\nfunction N(a,b){return{$$typeof:l,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===l}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var P=/\\/+/g;function Q(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction R(a,b,e,d,c){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case l:case n:h=!0}}if(h)return h=a,c=c(h),a=\"\"===d?\".\"+Q(h,0):d,I(c)?(e=\"\",null!=a&&(e=a.replace(P,\"$&/\")+\"/\"),R(c,b,e,\"\",function(a){return a})):null!=c&&(O(c)&&(c=N(c,e+(!c.key||h&&h.key===c.key?\"\":(\"\"+c.key).replace(P,\"$&/\")+\"/\")+a)),b.push(c)),1;h=0;d=\"\"===d?\".\":d+\":\";if(I(a))for(var g=0;g<a.length;g++){k=\na[g];var f=d+Q(k,g);h+=R(k,b,e,f,c)}else if(f=A(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=d+Q(k,g++),h+=R(k,b,e,f,c);else if(\"object\"===k)throw b=String(a),Error(\"Objects are not valid as a React child (found: \"+(\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b)+\"). If you meant to render a collection of children, use an array instead.\");return h}\nfunction S(a,b,e){if(null==a)return a;var d=[],c=0;R(a,d,\"\",\"\",function(a){return b.call(e,a,c++)});return d}function T(a){if(-1===a._status){var b=a._result;b=b();b.then(function(b){if(0===a._status||-1===a._status)a._status=1,a._result=b},function(b){if(0===a._status||-1===a._status)a._status=2,a._result=b});-1===a._status&&(a._status=0,a._result=b)}if(1===a._status)return a._result.default;throw a._result;}\nvar U={current:null},V={transition:null},W={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:V,ReactCurrentOwner:K};function X(){throw Error(\"act(...) is not supported in production builds of React.\");}\nexports.Children={map:S,forEach:function(a,b,e){S(a,function(){b.apply(this,arguments)},e)},count:function(a){var b=0;S(a,function(){b++});return b},toArray:function(a){return S(a,function(a){return a})||[]},only:function(a){if(!O(a))throw Error(\"React.Children.only expected to receive a single React element child.\");return a}};exports.Component=E;exports.Fragment=p;exports.Profiler=r;exports.PureComponent=G;exports.StrictMode=q;exports.Suspense=w;\nexports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W;exports.act=X;\nexports.cloneElement=function(a,b,e){if(null===a||void 0===a)throw Error(\"React.cloneElement(...): The argument must be a React element, but you passed \"+a+\".\");var d=C({},a.props),c=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=K.current);void 0!==b.key&&(c=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)J.call(b,f)&&!L.hasOwnProperty(f)&&(d[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){g=Array(f);\nfor(var m=0;m<f;m++)g[m]=arguments[m+2];d.children=g}return{$$typeof:l,type:a.type,key:c,ref:k,props:d,_owner:h}};exports.createContext=function(a){a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};a.Provider={$$typeof:t,_context:a};return a.Consumer=a};exports.createElement=M;exports.createFactory=function(a){var b=M.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};\nexports.forwardRef=function(a){return{$$typeof:v,render:a}};exports.isValidElement=O;exports.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T}};exports.memo=function(a,b){return{$$typeof:x,type:a,compare:void 0===b?null:b}};exports.startTransition=function(a){var b=V.transition;V.transition={};try{a()}finally{V.transition=b}};exports.unstable_act=X;exports.useCallback=function(a,b){return U.current.useCallback(a,b)};exports.useContext=function(a){return U.current.useContext(a)};\nexports.useDebugValue=function(){};exports.useDeferredValue=function(a){return U.current.useDeferredValue(a)};exports.useEffect=function(a,b){return U.current.useEffect(a,b)};exports.useId=function(){return U.current.useId()};exports.useImperativeHandle=function(a,b,e){return U.current.useImperativeHandle(a,b,e)};exports.useInsertionEffect=function(a,b){return U.current.useInsertionEffect(a,b)};exports.useLayoutEffect=function(a,b){return U.current.useLayoutEffect(a,b)};\nexports.useMemo=function(a,b){return U.current.useMemo(a,b)};exports.useReducer=function(a,b,e){return U.current.useReducer(a,b,e)};exports.useRef=function(a){return U.current.useRef(a)};exports.useState=function(a){return U.current.useState(a)};exports.useSyncExternalStore=function(a,b,e){return U.current.useSyncExternalStore(a,b,e)};exports.useTransition=function(){return U.current.useTransition()};exports.version=\"18.3.1\";\n","/**\n * @license React\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';function f(a,b){var c=a.length;a.push(b);a:for(;0<c;){var d=c-1>>>1,e=a[d];if(0<g(e,b))a[d]=b,a[c]=e,c=d;else break a}}function h(a){return 0===a.length?null:a[0]}function k(a){if(0===a.length)return null;var b=a[0],c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length,w=e>>>1;d<w;){var m=2*(d+1)-1,C=a[m],n=m+1,x=a[n];if(0>g(C,c))n<e&&0>g(x,C)?(a[d]=x,a[n]=c,d=n):(a[d]=C,a[m]=c,d=m);else if(n<e&&0>g(x,c))a[d]=x,a[n]=c,d=n;else break a}}return b}\nfunction g(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}var r=[],t=[],u=1,v=null,y=3,z=!1,A=!1,B=!1,D=\"function\"===typeof setTimeout?setTimeout:null,E=\"function\"===typeof clearTimeout?clearTimeout:null,F=\"undefined\"!==typeof setImmediate?setImmediate:null;\n\"undefined\"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(a){for(var b=h(t);null!==b;){if(null===b.callback)k(t);else if(b.startTime<=a)k(t),b.sortIndex=b.expirationTime,f(r,b);else break;b=h(t)}}function H(a){B=!1;G(a);if(!A)if(null!==h(r))A=!0,I(J);else{var b=h(t);null!==b&&K(H,b.startTime-a)}}\nfunction J(a,b){A=!1;B&&(B=!1,E(L),L=-1);z=!0;var c=y;try{G(b);for(v=h(r);null!==v&&(!(v.expirationTime>b)||a&&!M());){var d=v.callback;if(\"function\"===typeof d){v.callback=null;y=v.priorityLevel;var e=d(v.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?v.callback=e:v===h(r)&&k(r);G(b)}else k(r);v=h(r)}if(null!==v)var w=!0;else{var m=h(t);null!==m&&K(H,m.startTime-b);w=!1}return w}finally{v=null,y=c,z=!1}}var N=!1,O=null,L=-1,P=5,Q=-1;\nfunction M(){return exports.unstable_now()-Q<P?!1:!0}function R(){if(null!==O){var a=exports.unstable_now();Q=a;var b=!0;try{b=O(!0,a)}finally{b?S():(N=!1,O=null)}}else N=!1}var S;if(\"function\"===typeof F)S=function(){F(R)};else if(\"undefined\"!==typeof MessageChannel){var T=new MessageChannel,U=T.port2;T.port1.onmessage=R;S=function(){U.postMessage(null)}}else S=function(){D(R,0)};function I(a){O=a;N||(N=!0,S())}function K(a,b){L=D(function(){a(exports.unstable_now())},b)}\nexports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){A||z||(A=!0,I(J))};\nexports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):P=0<a?Math.floor(1E3/a):5};exports.unstable_getCurrentPriorityLevel=function(){return y};exports.unstable_getFirstCallbackNode=function(){return h(r)};exports.unstable_next=function(a){switch(y){case 1:case 2:case 3:var b=3;break;default:b=y}var c=y;y=b;try{return a()}finally{y=c}};exports.unstable_pauseExecution=function(){};\nexports.unstable_requestPaint=function(){};exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=y;y=a;try{return b()}finally{y=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:u++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,f(t,a),null===h(r)&&a===h(t)&&(B?(E(L),L=-1):B=!0,K(H,c-d))):(a.sortIndex=e,f(r,a),A||z||(A=!0,I(J)));return a};\nexports.unstable_shouldYield=M;exports.unstable_wrapCallback=function(a){var b=y;return function(){var c=y;y=b;try{return a.apply(this,arguments)}finally{y=c}}};\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),ca=require(\"scheduler\");function p(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var da=new Set,ea={};function fa(a,b){ha(a,b);ha(a+\"Capture\",b)}\nfunction ha(a,b){ea[a]=b;for(a=0;a<b.length;a++)da.add(b[a])}\nvar ia=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,la=\n{},ma={};function oa(a){if(ja.call(ma,a))return!0;if(ja.call(la,a))return!1;if(ka.test(a))return ma[a]=!0;la[a]=!0;return!1}function pa(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction qa(a,b,c,d){if(null===b||\"undefined\"===typeof b||pa(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function v(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var z={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){z[a]=new v(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];z[b]=new v(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){z[a]=new v(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){z[a]=new v(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){z[a]=new v(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){z[a]=new v(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){z[a]=new v(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){z[a]=new v(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){z[a]=new v(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(ra,\nsa);z[b]=new v(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!1,!1)});\nz.xlinkHref=new v(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction ta(a,b,c,d){var e=z.hasOwnProperty(b)?z[b]:null;if(null!==e?0!==e.type:d||!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1])qa(b,c,e,d)&&(c=null),d||null===e?oa(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c)))}\nvar ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for(\"react.element\"),wa=Symbol.for(\"react.portal\"),ya=Symbol.for(\"react.fragment\"),za=Symbol.for(\"react.strict_mode\"),Aa=Symbol.for(\"react.profiler\"),Ba=Symbol.for(\"react.provider\"),Ca=Symbol.for(\"react.context\"),Da=Symbol.for(\"react.forward_ref\"),Ea=Symbol.for(\"react.suspense\"),Fa=Symbol.for(\"react.suspense_list\"),Ga=Symbol.for(\"react.memo\"),Ha=Symbol.for(\"react.lazy\");Symbol.for(\"react.scope\");Symbol.for(\"react.debug_trace_mode\");\nvar Ia=Symbol.for(\"react.offscreen\");Symbol.for(\"react.legacy_hidden\");Symbol.for(\"react.cache\");Symbol.for(\"react.tracing_marker\");var Ja=Symbol.iterator;function Ka(a){if(null===a||\"object\"!==typeof a)return null;a=Ja&&a[Ja]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var A=Object.assign,La;function Ma(a){if(void 0===La)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);La=b&&b[1]||\"\"}return\"\\n\"+La+a}var Na=!1;\nfunction Oa(a,b){if(!a||Na)return\"\";Na=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(l){var d=l}Reflect.construct(a,[],b)}else{try{b.call()}catch(l){d=l}a.call(b.prototype)}else{try{throw Error();}catch(l){d=l}a()}}catch(l){if(l&&d&&\"string\"===typeof l.stack){for(var e=l.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h]){var k=\"\\n\"+e[g].replace(\" at new \",\" at \");a.displayName&&k.includes(\"<anonymous>\")&&(k=k.replace(\"<anonymous>\",a.displayName));return k}while(1<=g&&0<=h)}break}}}finally{Na=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Ma(a):\"\"}\nfunction Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma(\"Lazy\");case 13:return Ma(\"Suspense\");case 19:return Ma(\"SuspenseList\");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return\"\"}}\nfunction Qa(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ya:return\"Fragment\";case wa:return\"Portal\";case Aa:return\"Profiler\";case za:return\"StrictMode\";case Ea:return\"Suspense\";case Fa:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case Ca:return(a.displayName||\"Context\")+\".Consumer\";case Ba:return(a._context.displayName||\"Context\")+\".Provider\";case Da:var b=a.render;a=a.displayName;a||(a=b.displayName||\nb.name||\"\",a=\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");return a;case Ga:return b=a.displayName||null,null!==b?b:Qa(a.type)||\"Memo\";case Ha:b=a._payload;a=a._init;try{return Qa(a(b))}catch(c){}}return null}\nfunction Ra(a){var b=a.type;switch(a.tag){case 24:return\"Cache\";case 9:return(b.displayName||\"Context\")+\".Consumer\";case 10:return(b._context.displayName||\"Context\")+\".Provider\";case 18:return\"DehydratedFragment\";case 11:return a=b.render,a=a.displayName||a.name||\"\",b.displayName||(\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");case 7:return\"Fragment\";case 5:return b;case 4:return\"Portal\";case 3:return\"Root\";case 6:return\"Text\";case 16:return Qa(b);case 8:return b===za?\"StrictMode\":\"Mode\";case 22:return\"Offscreen\";\ncase 12:return\"Profiler\";case 21:return\"Scope\";case 13:return\"Suspense\";case 19:return\"SuspenseList\";case 25:return\"TracingMarker\";case 1:case 0:case 17:case 2:case 14:case 15:if(\"function\"===typeof b)return b.displayName||b.name||null;if(\"string\"===typeof b)return b}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"string\":case \"undefined\":return a;case \"object\":return a;default:return\"\"}}\nfunction Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return A({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function ab(a,b){b=b.checked;null!=b&&ta(a,\"checked\",b,!1)}\nfunction bb(a,b){ab(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?cb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&cb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction db(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction cb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}var eb=Array.isArray;\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(p(91));return A({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(p(92));if(eb(c)){if(1<c.length)throw Error(p(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}function kb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}\nfunction lb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?kb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar mb,nb=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(\"http://www.w3.org/2000/svg\"!==a.namespaceURI||\"innerHTML\"in a)a.innerHTML=b;else{mb=mb||document.createElement(\"div\");mb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction ob(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,\nzoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(pb).forEach(function(a){qb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);pb[b]=pb[a]})});function rb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||pb.hasOwnProperty(a)&&pb[a]?(\"\"+b).trim():b+\"px\"}\nfunction sb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=rb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction ub(a,b){if(b){if(tb[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(p(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(p(60));if(\"object\"!==typeof b.dangerouslySetInnerHTML||!(\"__html\"in b.dangerouslySetInnerHTML))throw Error(p(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(p(62));}}\nfunction vb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}var wb=null;function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(p(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(){}var Ib=!1;function Jb(a,b,c){if(Ib)return a(b,c);Ib=!0;try{return Gb(a,b,c)}finally{if(Ib=!1,null!==zb||null!==Ab)Hb(),Fb()}}\nfunction Kb(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(p(231,b,typeof c));return c}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,\"passive\",{get:function(){Lb=!0}});window.addEventListener(\"test\",Mb,Mb);window.removeEventListener(\"test\",Mb,Mb)}catch(a){Lb=!1}function Nb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0;Pb=a}};function Tb(a,b,c,d,e,f,g,h,k){Ob=!1;Pb=null;Nb.apply(Sb,arguments)}\nfunction Ub(a,b,c,d,e,f,g,h,k){Tb.apply(this,arguments);if(Ob){if(Ob){var l=Pb;Ob=!1;Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=l)}}function Vb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&4098)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Wb(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p(188));}\nfunction Yb(a){var b=a.alternate;if(!b){b=Vb(a);if(null===b)throw Error(p(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Xb(e),a;if(f===d)return Xb(e),b;f=f.sibling}throw Error(p(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(p(189));}}if(c.alternate!==d)throw Error(p(190));}if(3!==c.tag)throw Error(p(188));return c.stateNode.current===c?a:b}function Zb(a){a=Yb(a);return null!==a?$b(a):null}function $b(a){if(5===a.tag||6===a.tag)return a;for(a=a.child;null!==a;){var b=$b(a);if(null!==b)return b;a=a.sibling}return null}\nvar ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&\"function\"===typeof lc.onCommitFiberRoot)try{lc.onCommitFiberRoot(kc,a,void 0,128===(a.current.flags&128))}catch(b){}}\nvar oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){a>>>=0;return 0===a?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;\nfunction tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;\ndefault:return a}}function uc(a,b){var c=a.pendingLanes;if(0===c)return 0;var d=0,e=a.suspendedLanes,f=a.pingedLanes,g=c&268435455;if(0!==g){var h=g&~e;0!==h?d=tc(h):(f&=g,0!==f&&(d=tc(f)))}else g=c&~e,0!==g?d=tc(g):0!==f&&(d=tc(f));if(0===d)return 0;if(0!==b&&b!==d&&0===(b&e)&&(e=d&-d,f=b&-b,e>=f||16===e&&0!==(f&4194240)))return b;0!==(d&4)&&(d|=c&16);b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-oc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction vc(a,b){switch(a){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5E3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}\nfunction wc(a,b){for(var c=a.suspendedLanes,d=a.pingedLanes,e=a.expirationTimes,f=a.pendingLanes;0<f;){var g=31-oc(f),h=1<<g,k=e[g];if(-1===k){if(0===(h&c)||0!==(h&d))e[g]=vc(h,b)}else k<=b&&(a.expiredLanes|=h);f&=~h}}function xc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function yc(){var a=rc;rc<<=1;0===(rc&4194240)&&(rc=64);return a}function zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction Ac(a,b,c){a.pendingLanes|=b;536870912!==b&&(a.suspendedLanes=0,a.pingedLanes=0);a=a.eventTimes;b=31-oc(b);a[b]=c}function Bc(a,b){var c=a.pendingLanes&~b;a.pendingLanes=b;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=b;a.mutableReadLanes&=b;a.entangledLanes&=b;b=a.entanglements;var d=a.eventTimes;for(a=a.expirationTimes;0<c;){var e=31-oc(c),f=1<<e;b[e]=0;d[e]=-1;a[e]=-1;c&=~f}}\nfunction Cc(a,b){var c=a.entangledLanes|=b;for(a=a.entanglements;c;){var d=31-oc(c),e=1<<d;e&b|a[d]&b&&(a[d]|=b);c&=~e}}var C=0;function Dc(a){a&=-a;return 1<a?4<a?0!==(a&268435455)?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction Sc(a,b){switch(a){case \"focusin\":case \"focusout\":Lc=null;break;case \"dragenter\":case \"dragleave\":Mc=null;break;case \"mouseover\":case \"mouseout\":Nc=null;break;case \"pointerover\":case \"pointerout\":Oc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":Pc.delete(b.pointerId)}}\nfunction Tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a={blockedOn:b,domEventName:c,eventSystemFlags:d,nativeEvent:f,targetContainers:[e]},null!==b&&(b=Cb(b),null!==b&&Fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction Uc(a,b,c,d,e){switch(b){case \"focusin\":return Lc=Tc(Lc,a,b,c,d,e),!0;case \"dragenter\":return Mc=Tc(Mc,a,b,c,d,e),!0;case \"mouseover\":return Nc=Tc(Nc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;Oc.set(f,Tc(Oc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,Pc.set(f,Tc(Pc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction Vc(a){var b=Wc(a.target);if(null!==b){var c=Vb(b);if(null!==c)if(b=c.tag,13===b){if(b=Wb(c),null!==b){a.blockedOn=b;Ic(a.priority,function(){Gc(c)});return}}else if(3===b&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction Xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=Yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null===c){c=a.nativeEvent;var d=new c.constructor(c.type,c);wb=d;c.target.dispatchEvent(d);wb=null}else return b=Cb(c),null!==b&&Fc(b),a.blockedOn=c,!1;b.shift()}return!0}function Zc(a,b,c){Xc(a)&&c.delete(b)}function $c(){Jc=!1;null!==Lc&&Xc(Lc)&&(Lc=null);null!==Mc&&Xc(Mc)&&(Mc=null);null!==Nc&&Xc(Nc)&&(Nc=null);Oc.forEach(Zc);Pc.forEach(Zc)}\nfunction ad(a,b){a.blockedOn===b&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}\nfunction bd(a){function b(b){return ad(b,a)}if(0<Kc.length){ad(Kc[0],a);for(var c=1;c<Kc.length;c++){var d=Kc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==Lc&&ad(Lc,a);null!==Mc&&ad(Mc,a);null!==Nc&&ad(Nc,a);Oc.forEach(b);Pc.forEach(b);for(c=0;c<Qc.length;c++)d=Qc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<Qc.length&&(c=Qc[0],null===c.blockedOn);)Vc(c),null===c.blockedOn&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;\nfunction ed(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=1,fd(a,b,c,d)}finally{C=e,cd.transition=f}}function gd(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=4,fd(a,b,c,d)}finally{C=e,cd.transition=f}}\nfunction fd(a,b,c,d){if(dd){var e=Yc(a,b,c,d);if(null===e)hd(a,b,d,id,c),Sc(a,d);else if(Uc(e,a,b,c,d))d.stopPropagation();else if(Sc(a,d),b&4&&-1<Rc.indexOf(a)){for(;null!==e;){var f=Cb(e);null!==f&&Ec(f);f=Yc(a,b,c,d);null===f&&hd(a,b,d,id,c);if(f===e)break;e=f}null!==e&&d.stopPropagation()}else hd(a,b,d,null,c)}}var id=null;\nfunction Yc(a,b,c,d){id=null;a=xb(d);a=Wc(a);if(null!==a)if(b=Vb(a),null===b)a=null;else if(c=b.tag,13===c){a=Wb(b);if(null!==a)return a;a=null}else if(3===c){if(b.stateNode.current.memoizedState.isDehydrated)return 3===b.tag?b.stateNode.containerInfo:null;a=null}else b!==a&&(a=null);id=a;return null}\nfunction jd(a){switch(a){case \"cancel\":case \"click\":case \"close\":case \"contextmenu\":case \"copy\":case \"cut\":case \"auxclick\":case \"dblclick\":case \"dragend\":case \"dragstart\":case \"drop\":case \"focusin\":case \"focusout\":case \"input\":case \"invalid\":case \"keydown\":case \"keypress\":case \"keyup\":case \"mousedown\":case \"mouseup\":case \"paste\":case \"pause\":case \"play\":case \"pointercancel\":case \"pointerdown\":case \"pointerup\":case \"ratechange\":case \"reset\":case \"resize\":case \"seeked\":case \"submit\":case \"touchcancel\":case \"touchend\":case \"touchstart\":case \"volumechange\":case \"change\":case \"selectionchange\":case \"textInput\":case \"compositionstart\":case \"compositionend\":case \"compositionupdate\":case \"beforeblur\":case \"afterblur\":case \"beforeinput\":case \"blur\":case \"fullscreenchange\":case \"focus\":case \"hashchange\":case \"popstate\":case \"select\":case \"selectstart\":return 1;case \"drag\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"mousemove\":case \"mouseout\":case \"mouseover\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"scroll\":case \"toggle\":case \"touchmove\":case \"wheel\":case \"mouseenter\":case \"mouseleave\":case \"pointerenter\":case \"pointerleave\":return 4;\ncase \"message\":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}\nfunction od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}A(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=A({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&\"CompositionEvent\"in window,be=null;ia&&\"documentMode\"in document&&(be=document.documentMode);var ce=ia&&\"TextEvent\"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(ia){var xe;if(ia){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));Jb(re,b)}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge;\nfunction Ie(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var e=c[d];if(!ja.call(b,e)||!He(a[e],b[e]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Ke(a,b){var c=Je(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Je(c)}}function Le(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Le(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Me(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Ne(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nfunction Oe(a){var b=Me(),c=a.focusedElem,d=a.selectionRange;if(b!==c&&c&&c.ownerDocument&&Le(c.ownerDocument.documentElement,c)){if(null!==d&&Ne(c))if(b=d.start,a=d.end,void 0===a&&(a=b),\"selectionStart\"in c)c.selectionStart=b,c.selectionEnd=Math.min(a,c.value.length);else if(a=(b=c.ownerDocument||document)&&b.defaultView||window,a.getSelection){a=a.getSelection();var e=c.textContent.length,f=Math.min(d.start,e);d=void 0===d.end?f:Math.min(d.end,e);!a.extend&&f>d&&(e=d,d=f,f=e);e=Ke(c,f);var g=Ke(c,\nd);e&&g&&(1!==a.rangeCount||a.anchorNode!==e.node||a.anchorOffset!==e.offset||a.focusNode!==g.node||a.focusOffset!==g.offset)&&(b=b.createRange(),b.setStart(e.node,e.offset),a.removeAllRanges(),f>d?(a.addRange(b),a.extend(g.node,g.offset)):(b.setEnd(g.node,g.offset),a.addRange(b)))}b=[];for(a=c;a=a.parentNode;)1===a.nodeType&&b.push({element:a,left:a.scrollLeft,top:a.scrollTop});\"function\"===typeof c.focus&&c.focus();for(c=0;c<b.length;c++)a=b[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}\nvar Pe=ia&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nfunction Ve(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var We={animationend:Ve(\"Animation\",\"AnimationEnd\"),animationiteration:Ve(\"Animation\",\"AnimationIteration\"),animationstart:Ve(\"Animation\",\"AnimationStart\"),transitionend:Ve(\"Transition\",\"TransitionEnd\")},Xe={},Ye={};\nia&&(Ye=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),\"TransitionEvent\"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var b=We[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Ye)return Xe[a]=b[c];return a}var $e=Ze(\"animationend\"),af=Ze(\"animationiteration\"),bf=Ze(\"animationstart\"),cf=Ze(\"transitionend\"),df=new Map,ef=\"abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\" \");\nfunction ff(a,b){df.set(a,b);fa(b,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,\"on\"+kf)}ff($e,\"onAnimationEnd\");ff(af,\"onAnimationIteration\");ff(bf,\"onAnimationStart\");ff(\"dblclick\",\"onDoubleClick\");ff(\"focusin\",\"onFocus\");ff(\"focusout\",\"onBlur\");ff(cf,\"onTransitionEnd\");ha(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);ha(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ha(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);\nha(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);fa(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));fa(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));fa(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);fa(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));fa(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));\nfa(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var lf=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),mf=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(lf));\nfunction nf(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Ub(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a;}\nfunction D(a,b){var c=b[of];void 0===c&&(c=b[of]=new Set);var d=a+\"__bubble\";c.has(d)||(pf(b,a,2,!1),c.add(d))}function qf(a,b,c){var d=0;b&&(d|=4);pf(c,a,d,b)}var rf=\"_reactListening\"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0;da.forEach(function(b){\"selectionchange\"!==b&&(mf.has(b)||qf(b,!1,a),qf(b,!0,a))});var b=9===a.nodeType?a:a.ownerDocument;null===b||b[rf]||(b[rf]=!0,qf(\"selectionchange\",!1,b))}}\nfunction pf(a,b,c,d){switch(jd(b)){case 1:var e=ed;break;case 4:e=gd;break;default:e=fd}c=e.bind(null,b,c,a);e=void 0;!Lb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction hd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=Wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Jb(function(){var d=f,e=xb(c),g=[];\na:{var h=df.get(a);if(void 0!==h){var k=td,n=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":n=\"focus\";k=Fd;break;case \"focusout\":n=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case $e:case af:case bf:k=Hd;break;case cf:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var t=0!==(b&4),J=!t&&\"scroll\"===a,x=t?null!==h?h+\"Capture\":null:h;t=[];for(var w=d,u;null!==\nw;){u=w;var F=u.stateNode;5===u.tag&&null!==F&&(u=F,null!==x&&(F=Kb(w,x),null!=F&&t.push(tf(w,F,u))));if(J)break;w=w.return}0<t.length&&(h=new k(h,n,null,c,e),g.push({event:h,listeners:t}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&c!==wb&&(n=c.relatedTarget||c.fromElement)&&(Wc(n)||n[uf]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(n=c.relatedTarget||c.toElement,k=d,n=n?Wc(n):null,null!==\nn&&(J=Vb(n),n!==J||5!==n.tag&&6!==n.tag))n=null}else k=null,n=d;if(k!==n){t=Bd;F=\"onMouseLeave\";x=\"onMouseEnter\";w=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)t=Td,F=\"onPointerLeave\",x=\"onPointerEnter\",w=\"pointer\";J=null==k?h:ue(k);u=null==n?h:ue(n);h=new t(F,w+\"leave\",k,c,e);h.target=J;h.relatedTarget=u;F=null;Wc(e)===d&&(t=new t(x,w+\"enter\",n,c,e),t.target=u,t.relatedTarget=J,F=t);J=F;if(k&&n)b:{t=k;x=n;w=0;for(u=t;u;u=vf(u))w++;u=0;for(F=x;F;F=vf(F))u++;for(;0<w-u;)t=vf(t),w--;for(;0<u-w;)x=\nvf(x),u--;for(;w--;){if(t===x||null!==x&&t===x.alternate)break b;t=vf(t);x=vf(x)}t=null}else t=null;null!==k&&wf(g,h,k,t,!1);null!==n&&null!==J&&wf(g,J,n,t,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var na=ve;else if(me(h))if(we)na=Fe;else{na=De;var xa=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(na=Ee);if(na&&(na=na(a,d))){ne(g,na,c,e);break a}xa&&xa(a,h,d);\"focusout\"===a&&(xa=h._wrapperState)&&\nxa.controlled&&\"number\"===h.type&&cb(h,\"number\",h.value)}xa=d?ue(d):window;switch(a){case \"focusin\":if(me(xa)||\"true\"===xa.contentEditable)Qe=xa,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var $a;if(ae)b:{switch(a){case \"compositionstart\":var ba=\"onCompositionStart\";break b;case \"compositionend\":ba=\"onCompositionEnd\";\nbreak b;case \"compositionupdate\":ba=\"onCompositionUpdate\";break b}ba=void 0}else ie?ge(a,c)&&(ba=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(ba=\"onCompositionStart\");ba&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==ba?\"onCompositionEnd\"===ba&&ie&&($a=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),xa=oe(d,ba),0<xa.length&&(ba=new Ld(ba,a,null,c,e),g.push({event:ba,listeners:xa}),$a?ba.data=$a:($a=he(c),null!==$a&&(ba.data=$a))));if($a=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),\n0<d.length&&(e=new Ld(\"onBeforeInput\",\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=$a)}se(g,b)})}function tf(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Kb(a,c),null!=f&&d.unshift(tf(a,f,e)),f=Kb(a,b),null!=f&&d.push(tf(a,f,e)));a=a.return}return d}function vf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction wf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Kb(c,f),null!=k&&g.unshift(tf(c,k,h))):e||(k=Kb(c,f),null!=k&&g.push(tf(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}var xf=/\\r\\n?/g,yf=/\\u0000|\\uFFFD/g;function zf(a){return(\"string\"===typeof a?a:\"\"+a).replace(xf,\"\\n\").replace(yf,\"\")}function Af(a,b,c){b=zf(b);if(zf(a)!==b&&c)throw Error(p(425));}function Bf(){}\nvar Cf=null,Df=null;function Ef(a,b){return\"textarea\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}\nvar Ff=\"function\"===typeof setTimeout?setTimeout:void 0,Gf=\"function\"===typeof clearTimeout?clearTimeout:void 0,Hf=\"function\"===typeof Promise?Promise:void 0,Jf=\"function\"===typeof queueMicrotask?queueMicrotask:\"undefined\"!==typeof Hf?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a;})}\nfunction Kf(a,b){var c=b,d=0;do{var e=c.nextSibling;a.removeChild(c);if(e&&8===e.nodeType)if(c=e.data,\"/$\"===c){if(0===d){a.removeChild(e);bd(b);return}d--}else\"$\"!==c&&\"$?\"!==c&&\"$!\"!==c||d++;c=e}while(c);bd(b)}function Lf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break;if(8===b){b=a.data;if(\"$\"===b||\"$!\"===b||\"$?\"===b)break;if(\"/$\"===b)return null}}return a}\nfunction Mf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of=\"__reactFiber$\"+Nf,Pf=\"__reactProps$\"+Nf,uf=\"__reactContainer$\"+Nf,of=\"__reactEvents$\"+Nf,Qf=\"__reactListeners$\"+Nf,Rf=\"__reactHandles$\"+Nf;\nfunction Wc(a){var b=a[Of];if(b)return b;for(var c=a.parentNode;c;){if(b=c[uf]||c[Of]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=Mf(a);null!==a;){if(c=a[Of])return c;a=Mf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[Of]||a[uf];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(p(33));}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}\nfunction E(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(a,b){Tf++;Sf[Tf]=a.current;a.current=b}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,b){var c=a.type.contextTypes;if(!c)return Vf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}\nfunction Zf(a){a=a.childContextTypes;return null!==a&&void 0!==a}function $f(){E(Wf);E(H)}function ag(a,b,c){if(H.current!==Vf)throw Error(p(168));G(H,b);G(Wf,c)}function bg(a,b,c){var d=a.stateNode;b=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in b))throw Error(p(108,Ra(a)||\"Unknown\",e));return A({},c,d)}\nfunction cg(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf;Xf=H.current;G(H,a);G(Wf,Wf.current);return!0}function dg(a,b,c){var d=a.stateNode;if(!d)throw Error(p(169));c?(a=bg(a,b,Xf),d.__reactInternalMemoizedMergedChildContext=a,E(Wf),E(H),G(H,a)):E(Wf);G(Wf,c)}var eg=null,fg=!1,gg=!1;function hg(a){null===eg?eg=[a]:eg.push(a)}function ig(a){fg=!0;hg(a)}\nfunction jg(){if(!gg&&null!==eg){gg=!0;var a=0,b=C;try{var c=eg;for(C=1;a<c.length;a++){var d=c[a];do d=d(!0);while(null!==d)}eg=null;fg=!1}catch(e){throw null!==eg&&(eg=eg.slice(a+1)),ac(fc,jg),e;}finally{C=b,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg=\"\";function tg(a,b){kg[lg++]=ng;kg[lg++]=mg;mg=a;ng=b}\nfunction ug(a,b,c){og[pg++]=rg;og[pg++]=sg;og[pg++]=qg;qg=a;var d=rg;a=sg;var e=32-oc(d)-1;d&=~(1<<e);c+=1;var f=32-oc(b)+e;if(30<f){var g=e-e%5;f=(d&(1<<g)-1).toString(32);d>>=g;e-=g;rg=1<<32-oc(b)+e|c<<e|d;sg=f+a}else rg=1<<f|c<<e|d,sg=a}function vg(a){null!==a.return&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;\nfunction Ag(a,b){var c=Bg(5,null,null,0);c.elementType=\"DELETED\";c.stateNode=b;c.return=a;b=a.deletions;null===b?(a.deletions=[c],a.flags|=16):b.push(c)}\nfunction Cg(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,xg=a,yg=Lf(b.firstChild),!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,xg=a,yg=null,!0):!1;case 13:return b=8!==b.nodeType?null:b,null!==b?(c=null!==qg?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:b,treeContext:c,retryLane:1073741824},c=Bg(18,null,null,0),c.stateNode=b,c.return=a,a.child=c,xg=a,yg=\nnull,!0):!1;default:return!1}}function Dg(a){return 0!==(a.mode&1)&&0===(a.flags&128)}function Eg(a){if(I){var b=yg;if(b){var c=b;if(!Cg(a,b)){if(Dg(a))throw Error(p(418));b=Lf(c.nextSibling);var d=xg;b&&Cg(a,b)?Ag(d,c):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p(418));a.flags=a.flags&-4097|2;I=!1;xg=a}}}function Fg(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;xg=a}\nfunction Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var b;(b=3!==a.tag)&&!(b=5!==a.tag)&&(b=a.type,b=\"head\"!==b&&\"body\"!==b&&!Ef(a.type,a.memoizedProps));if(b&&(b=yg)){if(Dg(a))throw Hg(),Error(p(418));for(;b;)Ag(a,b),b=Lf(b.nextSibling)}Fg(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(p(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){yg=Lf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}yg=\nnull}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null;I=!1}function Jg(a){null===zg?zg=[a]:zg.push(a)}var Kg=ua.ReactCurrentBatchConfig;\nfunction Lg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(p(309));var d=c.stateNode}if(!d)throw Error(p(147,a));var e=d,f=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===f)return b.ref;b=function(a){var b=e.refs;null===a?delete b[f]:b[f]=a};b._stringRef=f;return b}if(\"string\"!==typeof a)throw Error(p(284));if(!c._owner)throw Error(p(290,a));}return a}\nfunction Mg(a,b){a=Object.prototype.toString.call(b);throw Error(p(31,\"[object Object]\"===a?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":a));}function Ng(a){var b=a._init;return b(a._payload)}\nfunction Og(a){function b(b,c){if(a){var d=b.deletions;null===d?(b.deletions=[c],b.flags|=16):d.push(c)}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Pg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return b.flags|=1048576,c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags|=2,c):d;b.flags|=2;return c}function g(b){a&&\nnull===b.alternate&&(b.flags|=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Qg(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){var f=c.type;if(f===ya)return m(a,b,c.props.children,d,c.key);if(null!==b&&(b.elementType===f||\"object\"===typeof f&&null!==f&&f.$$typeof===Ha&&Ng(f)===b.type))return d=e(b,c.props),d.ref=Lg(a,b,c),d.return=a,d;d=Rg(c.type,c.key,c.props,null,a.mode,d);d.ref=Lg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||\nb.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=Sg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function m(a,b,c,d,f){if(null===b||7!==b.tag)return b=Tg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function q(a,b,c){if(\"string\"===typeof b&&\"\"!==b||\"number\"===typeof b)return b=Qg(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case va:return c=Rg(b.type,b.key,b.props,null,a.mode,c),\nc.ref=Lg(a,null,b),c.return=a,c;case wa:return b=Sg(b,a.mode,c),b.return=a,b;case Ha:var d=b._init;return q(a,d(b._payload),c)}if(eb(b)||Ka(b))return b=Tg(b,a.mode,c,null),b.return=a,b;Mg(a,b)}return null}function r(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c&&\"\"!==c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case va:return c.key===e?k(a,b,c,d):null;case wa:return c.key===e?l(a,b,c,d):null;case Ha:return e=c._init,r(a,\nb,e(c._payload),d)}if(eb(c)||Ka(c))return null!==e?null:m(a,b,c,d,null);Mg(a,c)}return null}function y(a,b,c,d,e){if(\"string\"===typeof d&&\"\"!==d||\"number\"===typeof d)return a=a.get(c)||null,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case va:return a=a.get(null===d.key?c:d.key)||null,k(b,a,d,e);case wa:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e);case Ha:var f=d._init;return y(a,b,c,f(d._payload),e)}if(eb(d)||Ka(d))return a=a.get(c)||null,m(b,a,d,e,null);Mg(b,d)}return null}\nfunction n(e,g,h,k){for(var l=null,m=null,u=g,w=g=0,x=null;null!==u&&w<h.length;w++){u.index>w?(x=u,u=null):x=u.sibling;var n=r(e,u,h[w],k);if(null===n){null===u&&(u=x);break}a&&u&&null===n.alternate&&b(e,u);g=f(n,g,w);null===m?l=n:m.sibling=n;m=n;u=x}if(w===h.length)return c(e,u),I&&tg(e,w),l;if(null===u){for(;w<h.length;w++)u=q(e,h[w],k),null!==u&&(g=f(u,g,w),null===m?l=u:m.sibling=u,m=u);I&&tg(e,w);return l}for(u=d(e,u);w<h.length;w++)x=y(u,e,w,h[w],k),null!==x&&(a&&null!==x.alternate&&u.delete(null===\nx.key?w:x.key),g=f(x,g,w),null===m?l=x:m.sibling=x,m=x);a&&u.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function t(e,g,h,k){var l=Ka(h);if(\"function\"!==typeof l)throw Error(p(150));h=l.call(h);if(null==h)throw Error(p(151));for(var u=l=null,m=g,w=g=0,x=null,n=h.next();null!==m&&!n.done;w++,n=h.next()){m.index>w?(x=m,m=null):x=m.sibling;var t=r(e,m,n.value,k);if(null===t){null===m&&(m=x);break}a&&m&&null===t.alternate&&b(e,m);g=f(t,g,w);null===u?l=t:u.sibling=t;u=t;m=x}if(n.done)return c(e,\nm),I&&tg(e,w),l;if(null===m){for(;!n.done;w++,n=h.next())n=q(e,n.value,k),null!==n&&(g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);I&&tg(e,w);return l}for(m=d(e,m);!n.done;w++,n=h.next())n=y(m,e,w,n.value,k),null!==n&&(a&&null!==n.alternate&&m.delete(null===n.key?w:n.key),g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);a&&m.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function J(a,d,f,h){\"object\"===typeof f&&null!==f&&f.type===ya&&null===f.key&&(f=f.props.children);if(\"object\"===typeof f&&null!==f){switch(f.$$typeof){case va:a:{for(var k=\nf.key,l=d;null!==l;){if(l.key===k){k=f.type;if(k===ya){if(7===l.tag){c(a,l.sibling);d=e(l,f.props.children);d.return=a;a=d;break a}}else if(l.elementType===k||\"object\"===typeof k&&null!==k&&k.$$typeof===Ha&&Ng(k)===l.type){c(a,l.sibling);d=e(l,f.props);d.ref=Lg(a,l,f);d.return=a;a=d;break a}c(a,l);break}else b(a,l);l=l.sibling}f.type===ya?(d=Tg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Rg(f.type,f.key,f.props,null,a.mode,h),h.ref=Lg(a,d,f),h.return=a,a=h)}return g(a);case wa:a:{for(l=f.key;null!==\nd;){if(d.key===l)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=Sg(f,a.mode,h);d.return=a;a=d}return g(a);case Ha:return l=f._init,J(a,d,l(f._payload),h)}if(eb(f))return n(a,d,f,h);if(Ka(f))return t(a,d,f,h);Mg(a,f)}return\"string\"===typeof f&&\"\"!==f||\"number\"===typeof f?(f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):\n(c(a,d),d=Qg(f,a.mode,h),d.return=a,a=d),g(a)):c(a,d)}return J}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(a){var b=Wg.current;E(Wg);a._currentValue=b}function bh(a,b,c){for(;null!==a;){var d=a.alternate;(a.childLanes&b)!==b?(a.childLanes|=b,null!==d&&(d.childLanes|=b)):null!==d&&(d.childLanes&b)!==b&&(d.childLanes|=b);if(a===c)break;a=a.return}}\nfunction ch(a,b){Xg=a;Zg=Yg=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(dh=!0),a.firstContext=null)}function eh(a){var b=a._currentValue;if(Zg!==a)if(a={context:a,memoizedValue:b,next:null},null===Yg){if(null===Xg)throw Error(p(308));Yg=a;Xg.dependencies={lanes:0,firstContext:a}}else Yg=Yg.next=a;return b}var fh=null;function gh(a){null===fh?fh=[a]:fh.push(a)}\nfunction hh(a,b,c,d){var e=b.interleaved;null===e?(c.next=c,gh(b)):(c.next=e.next,e.next=c);b.interleaved=c;return ih(a,d)}function ih(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}var jh=!1;function kh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}\nfunction lh(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function mh(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}\nfunction nh(a,b,c){var d=a.updateQueue;if(null===d)return null;d=d.shared;if(0!==(K&2)){var e=d.pending;null===e?b.next=b:(b.next=e.next,e.next=b);d.pending=b;return ih(a,c)}e=d.interleaved;null===e?(b.next=b,gh(d)):(b.next=e.next,e.next=b);d.interleaved=b;return ih(a,c)}function oh(a,b,c){b=b.updateQueue;if(null!==b&&(b=b.shared,0!==(c&4194240))){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nfunction ph(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction qh(a,b,c,d){var e=a.updateQueue;jh=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var m=a.alternate;null!==m&&(m=m.updateQueue,h=m.lastBaseUpdate,h!==g&&(null===h?m.firstBaseUpdate=l:h.next=l,m.lastBaseUpdate=k))}if(null!==f){var q=e.baseState;g=0;m=l=k=null;h=f;do{var r=h.lane,y=h.eventTime;if((d&r)===r){null!==m&&(m=m.next={eventTime:y,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,\nnext:null});a:{var n=a,t=h;r=b;y=c;switch(t.tag){case 1:n=t.payload;if(\"function\"===typeof n){q=n.call(y,q,r);break a}q=n;break a;case 3:n.flags=n.flags&-65537|128;case 0:n=t.payload;r=\"function\"===typeof n?n.call(y,q,r):n;if(null===r||void 0===r)break a;q=A({},q,r);break a;case 2:jh=!0}}null!==h.callback&&0!==h.lane&&(a.flags|=64,r=e.effects,null===r?e.effects=[h]:r.push(h))}else y={eventTime:y,lane:r,tag:h.tag,payload:h.payload,callback:h.callback,next:null},null===m?(l=m=y,k=q):m=m.next=y,g|=r;\nh=h.next;if(null===h)if(h=e.shared.pending,null===h)break;else r=h,h=r.next,r.next=null,e.lastBaseUpdate=r,e.shared.pending=null}while(1);null===m&&(k=q);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=m;b=e.shared.interleaved;if(null!==b){e=b;do g|=e.lane,e=e.next;while(e!==b)}else null===f&&(e.shared.lanes=0);rh|=g;a.lanes=g;a.memoizedState=q}}\nfunction sh(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(p(191,e));e.call(d)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(a){if(a===th)throw Error(p(174));return a}\nfunction yh(a,b){G(wh,b);G(vh,a);G(uh,th);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:lb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=lb(b,a)}E(uh);G(uh,b)}function zh(){E(uh);E(vh);E(wh)}function Ah(a){xh(wh.current);var b=xh(uh.current);var c=lb(b,a.type);b!==c&&(G(vh,a),G(uh,c))}function Bh(a){vh.current===a&&(E(uh),E(vh))}var L=Uf(0);\nfunction Ch(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&128))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var Dh=[];\nfunction Eh(){for(var a=0;a<Dh.length;a++)Dh[a]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321));}function Mh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Nh(a,b,c,d,e,f){Hh=f;M=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;Fh.current=null===a||null===a.memoizedState?Oh:Ph;a=c(d,e);if(Jh){f=0;do{Jh=!1;Kh=0;if(25<=f)throw Error(p(301));f+=1;O=N=null;b.updateQueue=null;Fh.current=Qh;a=c(d,e)}while(Jh)}Fh.current=Rh;b=null!==N&&null!==N.next;Hh=0;O=N=M=null;Ih=!1;if(b)throw Error(p(300));return a}function Sh(){var a=0!==Kh;Kh=0;return a}\nfunction Th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===O?M.memoizedState=O=a:O=O.next=a;return O}function Uh(){if(null===N){var a=M.alternate;a=null!==a?a.memoizedState:null}else a=N.next;var b=null===O?M.memoizedState:O.next;if(null!==b)O=b,N=a;else{if(null===a)throw Error(p(310));N=a;a={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null};null===O?M.memoizedState=O=a:O=O.next=a}return O}\nfunction Vh(a,b){return\"function\"===typeof b?b(a):b}\nfunction Wh(a){var b=Uh(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=N,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){f=e.next;d=d.baseState;var h=g=null,k=null,l=f;do{var m=l.lane;if((Hh&m)===m)null!==k&&(k=k.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),d=l.hasEagerState?l.eagerState:a(d,l.action);else{var q={lane:m,action:l.action,hasEagerState:l.hasEagerState,\neagerState:l.eagerState,next:null};null===k?(h=k=q,g=d):k=k.next=q;M.lanes|=m;rh|=m}l=l.next}while(null!==l&&l!==f);null===k?g=d:k.next=h;He(d,b.memoizedState)||(dh=!0);b.memoizedState=d;b.baseState=g;b.baseQueue=k;c.lastRenderedState=d}a=c.interleaved;if(null!==a){e=a;do f=e.lane,M.lanes|=f,rh|=f,e=e.next;while(e!==a)}else null===e&&(c.lanes=0);return[b.memoizedState,c.dispatch]}\nfunction Xh(a){var b=Uh(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(dh=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function Yh(){}\nfunction Zh(a,b){var c=M,d=Uh(),e=b(),f=!He(d.memoizedState,e);f&&(d.memoizedState=e,dh=!0);d=d.queue;$h(ai.bind(null,c,d,a),[a]);if(d.getSnapshot!==b||f||null!==O&&O.memoizedState.tag&1){c.flags|=2048;bi(9,ci.bind(null,c,d,e,b),void 0,null);if(null===Q)throw Error(p(349));0!==(Hh&30)||di(c,b,e)}return e}function di(a,b,c){a.flags|=16384;a={getSnapshot:b,value:c};b=M.updateQueue;null===b?(b={lastEffect:null,stores:null},M.updateQueue=b,b.stores=[a]):(c=b.stores,null===c?b.stores=[a]:c.push(a))}\nfunction ci(a,b,c,d){b.value=c;b.getSnapshot=d;ei(b)&&fi(a)}function ai(a,b,c){return c(function(){ei(b)&&fi(a)})}function ei(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!He(a,c)}catch(d){return!0}}function fi(a){var b=ih(a,1);null!==b&&gi(b,a,1,-1)}\nfunction hi(a){var b=Th();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:a};b.queue=a;a=a.dispatch=ii.bind(null,M,a);return[b.memoizedState,a]}\nfunction bi(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=M.updateQueue;null===b?(b={lastEffect:null,stores:null},M.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function ji(){return Uh().memoizedState}function ki(a,b,c,d){var e=Th();M.flags|=a;e.memoizedState=bi(1|b,c,void 0,void 0===d?null:d)}\nfunction li(a,b,c,d){var e=Uh();d=void 0===d?null:d;var f=void 0;if(null!==N){var g=N.memoizedState;f=g.destroy;if(null!==d&&Mh(d,g.deps)){e.memoizedState=bi(b,c,f,d);return}}M.flags|=a;e.memoizedState=bi(1|b,c,f,d)}function mi(a,b){return ki(8390656,8,a,b)}function $h(a,b){return li(2048,8,a,b)}function ni(a,b){return li(4,2,a,b)}function oi(a,b){return li(4,4,a,b)}\nfunction pi(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function qi(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return li(4,4,pi.bind(null,b,a),c)}function ri(){}function si(a,b){var c=Uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Mh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}\nfunction ti(a,b){var c=Uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Mh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function ui(a,b,c){if(0===(Hh&21))return a.baseState&&(a.baseState=!1,dh=!0),a.memoizedState=c;He(c,b)||(c=yc(),M.lanes|=c,rh|=c,a.baseState=!0);return b}function vi(a,b){var c=C;C=0!==c&&4>c?c:4;a(!0);var d=Gh.transition;Gh.transition={};try{a(!1),b()}finally{C=c,Gh.transition=d}}function wi(){return Uh().memoizedState}\nfunction xi(a,b,c){var d=yi(a);c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(b,c);else if(c=hh(a,b,c,d),null!==c){var e=R();gi(c,a,d,e);Bi(c,b,d)}}\nfunction ii(a,b,c){var d=yi(a),e={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(b,e);else{var f=a.alternate;if(0===a.lanes&&(null===f||0===f.lanes)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,h=f(g,c);e.hasEagerState=!0;e.eagerState=h;if(He(h,g)){var k=b.interleaved;null===k?(e.next=e,gh(b)):(e.next=k.next,k.next=e);b.interleaved=e;return}}catch(l){}finally{}c=hh(a,b,e,d);null!==c&&(e=R(),gi(c,a,d,e),Bi(c,b,d))}}\nfunction zi(a){var b=a.alternate;return a===M||null!==b&&b===M}function Ai(a,b){Jh=Ih=!0;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}function Bi(a,b,c){if(0!==(c&4194240)){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nvar Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(a,b){Th().memoizedState=[a,void 0===b?null:b];return a},useContext:eh,useEffect:mi,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ki(4194308,\n4,pi.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ki(4194308,4,a,b)},useInsertionEffect:function(a,b){return ki(4,2,a,b)},useMemo:function(a,b){var c=Th();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Th();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};d.queue=a;a=a.dispatch=xi.bind(null,M,a);return[d.memoizedState,a]},useRef:function(a){var b=\nTh();a={current:a};return b.memoizedState=a},useState:hi,useDebugValue:ri,useDeferredValue:function(a){return Th().memoizedState=a},useTransition:function(){var a=hi(!1),b=a[0];a=vi.bind(null,a[1]);Th().memoizedState=a;return[b,a]},useMutableSource:function(){},useSyncExternalStore:function(a,b,c){var d=M,e=Th();if(I){if(void 0===c)throw Error(p(407));c=c()}else{c=b();if(null===Q)throw Error(p(349));0!==(Hh&30)||di(d,b,c)}e.memoizedState=c;var f={value:c,getSnapshot:b};e.queue=f;mi(ai.bind(null,d,\nf,a),[a]);d.flags|=2048;bi(9,ci.bind(null,d,f,c,b),void 0,null);return c},useId:function(){var a=Th(),b=Q.identifierPrefix;if(I){var c=sg;var d=rg;c=(d&~(1<<32-oc(d)-1)).toString(32)+c;b=\":\"+b+\"R\"+c;c=Kh++;0<c&&(b+=\"H\"+c.toString(32));b+=\":\"}else c=Lh++,b=\":\"+b+\"r\"+c.toString(32)+\":\";return a.memoizedState=b},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},\nuseDebugValue:ri,useDeferredValue:function(a){var b=Uh();return ui(b,N.memoizedState,a)},useTransition:function(){var a=Wh(Vh)[0],b=Uh().memoizedState;return[a,b]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(a){var b=Uh();return null===\nN?b.memoizedState=a:ui(b,N.memoizedState,a)},useTransition:function(){var a=Xh(Vh)[0],b=Uh().memoizedState;return[a,b]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(a,b){if(a&&a.defaultProps){b=A({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}function Di(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:A({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar Ei={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=R(),e=yi(a),f=mh(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=nh(a,f,e);null!==b&&(gi(b,a,e,d),oh(b,a,e))},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=R(),e=yi(a),f=mh(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=nh(a,f,e);null!==b&&(gi(b,a,e,d),oh(b,a,e))},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=R(),d=\nyi(a),e=mh(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=b);b=nh(a,e,d);null!==b&&(gi(b,a,d,c),oh(b,a,d))}};function Fi(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Ie(c,d)||!Ie(e,f):!0}\nfunction Gi(a,b,c){var d=!1,e=Vf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=eh(f):(e=Zf(b)?Xf:H.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Yf(a,e):Vf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Ei;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Hi(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Ei.enqueueReplaceState(b,b.state,null)}\nfunction Ii(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs={};kh(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=eh(f):(f=Zf(b)?Xf:H.current,e.context=Yf(a,f));e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Di(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||(b=e.state,\n\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Ei.enqueueReplaceState(e,e.state,null),qh(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4194308)}function Ji(a,b){try{var c=\"\",d=b;do c+=Pa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e,digest:null}}\nfunction Ki(a,b,c){return{value:a,source:null,stack:null!=c?c:null,digest:null!=b?b:null}}function Li(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Mi=\"function\"===typeof WeakMap?WeakMap:Map;function Ni(a,b,c){c=mh(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Oi||(Oi=!0,Pi=d);Li(a,b)};return c}\nfunction Qi(a,b,c){c=mh(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){return d(e)};c.callback=function(){Li(a,b)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){Li(a,b);\"function\"!==typeof d&&(null===Ri?Ri=new Set([this]):Ri.add(this));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}\nfunction Si(a,b,c){var d=a.pingCache;if(null===d){d=a.pingCache=new Mi;var e=new Set;d.set(b,e)}else e=d.get(b),void 0===e&&(e=new Set,d.set(b,e));e.has(c)||(e.add(c),a=Ti.bind(null,a,b,c),b.then(a,a))}function Ui(a){do{var b;if(b=13===a.tag)b=a.memoizedState,b=null!==b?null!==b.dehydrated?!0:!1:!0;if(b)return a;a=a.return}while(null!==a);return null}\nfunction Vi(a,b,c,d,e){if(0===(a.mode&1))return a===b?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:(b=mh(-1,1),b.tag=2,nh(c,b,1))),c.lanes|=1),a;a.flags|=65536;a.lanes=e;return a}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(a,b,c,d){b.child=null===a?Vg(b,null,c,d):Ug(b,a.child,c,d)}\nfunction Yi(a,b,c,d,e){c=c.render;var f=b.ref;ch(b,e);d=Nh(a,b,c,d,f,e);c=Sh();if(null!==a&&!dh)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zi(a,b,e);I&&c&&vg(b);b.flags|=1;Xi(a,b,d,e);return b.child}\nfunction $i(a,b,c,d,e){if(null===a){var f=c.type;if(\"function\"===typeof f&&!aj(f)&&void 0===f.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=f,bj(a,b,f,d,e);a=Rg(c.type,null,d,b,b.mode,e);a.ref=b.ref;a.return=b;return b.child=a}f=a.child;if(0===(a.lanes&e)){var g=f.memoizedProps;c=c.compare;c=null!==c?c:Ie;if(c(g,d)&&a.ref===b.ref)return Zi(a,b,e)}b.flags|=1;a=Pg(f,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction bj(a,b,c,d,e){if(null!==a){var f=a.memoizedProps;if(Ie(f,d)&&a.ref===b.ref)if(dh=!1,b.pendingProps=d=f,0!==(a.lanes&e))0!==(a.flags&131072)&&(dh=!0);else return b.lanes=a.lanes,Zi(a,b,e)}return cj(a,b,c,d,e)}\nfunction dj(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode)if(0===(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=c;else{if(0===(c&1073741824))return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a,cachePool:null,transitions:null},b.updateQueue=null,G(ej,fj),fj|=a,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null};d=null!==f?f.baseLanes:c;G(ej,fj);fj|=d}else null!==\nf?(d=f.baseLanes|c,b.memoizedState=null):d=c,G(ej,fj),fj|=d;Xi(a,b,e,c);return b.child}function gj(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=512,b.flags|=2097152}function cj(a,b,c,d,e){var f=Zf(c)?Xf:H.current;f=Yf(b,f);ch(b,e);c=Nh(a,b,c,d,f,e);d=Sh();if(null!==a&&!dh)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zi(a,b,e);I&&d&&vg(b);b.flags|=1;Xi(a,b,c,e);return b.child}\nfunction hj(a,b,c,d,e){if(Zf(c)){var f=!0;cg(b)}else f=!1;ch(b,e);if(null===b.stateNode)ij(a,b),Gi(b,c,d),Ii(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=eh(l):(l=Zf(c)?Xf:H.current,l=Yf(b,l));var m=c.getDerivedStateFromProps,q=\"function\"===typeof m||\"function\"===typeof g.getSnapshotBeforeUpdate;q||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||\n(h!==d||k!==l)&&Hi(b,g,d,l);jh=!1;var r=b.memoizedState;g.state=r;qh(b,d,g,e);k=b.memoizedState;h!==d||r!==k||Wf.current||jh?(\"function\"===typeof m&&(Di(b,c,m,d),k=b.memoizedState),(h=jh||Fi(b,c,h,d,r,k,l))?(q||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===typeof g.componentDidMount&&(b.flags|=4194308)):\n(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),d=!1)}else{g=b.stateNode;lh(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:Ci(b.type,h);g.props=l;q=b.pendingProps;r=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=eh(k):(k=Zf(c)?Xf:H.current,k=Yf(b,k));var y=c.getDerivedStateFromProps;(m=\"function\"===typeof y||\"function\"===typeof g.getSnapshotBeforeUpdate)||\n\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==q||r!==k)&&Hi(b,g,d,k);jh=!1;r=b.memoizedState;g.state=r;qh(b,d,g,e);var n=b.memoizedState;h!==q||r!==n||Wf.current||jh?(\"function\"===typeof y&&(Di(b,c,y,d),n=b.memoizedState),(l=jh||Fi(b,c,l,d,r,n,k)||!1)?(m||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,n,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&\ng.UNSAFE_componentWillUpdate(d,n,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=1024)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),b.memoizedProps=d,b.memoizedState=n),g.props=d,g.state=n,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===\na.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),d=!1)}return jj(a,b,c,d,f,e)}\nfunction jj(a,b,c,d,e,f){gj(a,b);var g=0!==(b.flags&128);if(!d&&!g)return e&&dg(b,c,!1),Zi(a,b,f);d=b.stateNode;Wi.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Ug(b,a.child,null,f),b.child=Ug(b,null,h,f)):Xi(a,b,h,f);b.memoizedState=d.state;e&&dg(b,c,!0);return b.child}function kj(a){var b=a.stateNode;b.pendingContext?ag(a,b.pendingContext,b.pendingContext!==b.context):b.context&&ag(a,b.context,!1);yh(a,b.containerInfo)}\nfunction lj(a,b,c,d,e){Ig();Jg(e);b.flags|=256;Xi(a,b,c,d);return b.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(a){return{baseLanes:a,cachePool:null,transitions:null}}\nfunction oj(a,b,c){var d=b.pendingProps,e=L.current,f=!1,g=0!==(b.flags&128),h;(h=g)||(h=null!==a&&null===a.memoizedState?!1:0!==(e&2));if(h)f=!0,b.flags&=-129;else if(null===a||null!==a.memoizedState)e|=1;G(L,e&1);if(null===a){Eg(b);a=b.memoizedState;if(null!==a&&(a=a.dehydrated,null!==a))return 0===(b.mode&1)?b.lanes=1:\"$!\"===a.data?b.lanes=8:b.lanes=1073741824,null;g=d.children;a=d.fallback;return f?(d=b.mode,f=b.child,g={mode:\"hidden\",children:g},0===(d&1)&&null!==f?(f.childLanes=0,f.pendingProps=\ng):f=pj(g,d,0,null),a=Tg(a,d,c,null),f.return=b,a.return=b,f.sibling=a,b.child=f,b.child.memoizedState=nj(c),b.memoizedState=mj,a):qj(b,g)}e=a.memoizedState;if(null!==e&&(h=e.dehydrated,null!==h))return rj(a,b,g,d,h,e,c);if(f){f=d.fallback;g=b.mode;e=a.child;h=e.sibling;var k={mode:\"hidden\",children:d.children};0===(g&1)&&b.child!==e?(d=b.child,d.childLanes=0,d.pendingProps=k,b.deletions=null):(d=Pg(e,k),d.subtreeFlags=e.subtreeFlags&14680064);null!==h?f=Pg(h,f):(f=Tg(f,g,c,null),f.flags|=2);f.return=\nb;d.return=b;d.sibling=f;b.child=d;d=f;f=b.child;g=a.child.memoizedState;g=null===g?nj(c):{baseLanes:g.baseLanes|c,cachePool:null,transitions:g.transitions};f.memoizedState=g;f.childLanes=a.childLanes&~c;b.memoizedState=mj;return d}f=a.child;a=f.sibling;d=Pg(f,{mode:\"visible\",children:d.children});0===(b.mode&1)&&(d.lanes=c);d.return=b;d.sibling=null;null!==a&&(c=b.deletions,null===c?(b.deletions=[a],b.flags|=16):c.push(a));b.child=d;b.memoizedState=null;return d}\nfunction qj(a,b){b=pj({mode:\"visible\",children:b},a.mode,0,null);b.return=a;return a.child=b}function sj(a,b,c,d){null!==d&&Jg(d);Ug(b,a.child,null,c);a=qj(b,b.pendingProps.children);a.flags|=2;b.memoizedState=null;return a}\nfunction rj(a,b,c,d,e,f,g){if(c){if(b.flags&256)return b.flags&=-257,d=Ki(Error(p(422))),sj(a,b,g,d);if(null!==b.memoizedState)return b.child=a.child,b.flags|=128,null;f=d.fallback;e=b.mode;d=pj({mode:\"visible\",children:d.children},e,0,null);f=Tg(f,e,g,null);f.flags|=2;d.return=b;f.return=b;d.sibling=f;b.child=d;0!==(b.mode&1)&&Ug(b,a.child,null,g);b.child.memoizedState=nj(g);b.memoizedState=mj;return f}if(0===(b.mode&1))return sj(a,b,g,null);if(\"$!\"===e.data){d=e.nextSibling&&e.nextSibling.dataset;\nif(d)var h=d.dgst;d=h;f=Error(p(419));d=Ki(f,d,void 0);return sj(a,b,g,d)}h=0!==(g&a.childLanes);if(dh||h){d=Q;if(null!==d){switch(g&-g){case 4:e=2;break;case 16:e=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:e=32;break;case 536870912:e=268435456;break;default:e=0}e=0!==(e&(d.suspendedLanes|g))?0:e;\n0!==e&&e!==f.retryLane&&(f.retryLane=e,ih(a,e),gi(d,a,e,-1))}tj();d=Ki(Error(p(421)));return sj(a,b,g,d)}if(\"$?\"===e.data)return b.flags|=128,b.child=a.child,b=uj.bind(null,a),e._reactRetry=b,null;a=f.treeContext;yg=Lf(e.nextSibling);xg=b;I=!0;zg=null;null!==a&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=b);b=qj(b,d.children);b.flags|=4096;return b}function vj(a,b,c){a.lanes|=b;var d=a.alternate;null!==d&&(d.lanes|=b);bh(a.return,b,c)}\nfunction wj(a,b,c,d,e){var f=a.memoizedState;null===f?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e}:(f.isBackwards=b,f.rendering=null,f.renderingStartTime=0,f.last=d,f.tail=c,f.tailMode=e)}\nfunction xj(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;Xi(a,b,d.children,c);d=L.current;if(0!==(d&2))d=d&1|2,b.flags|=128;else{if(null!==a&&0!==(a.flags&128))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&vj(a,c,b);else if(19===a.tag)vj(a,c,b);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}G(L,d);if(0===(b.mode&1))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Ch(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);wj(b,!1,e,c,f);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Ch(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}wj(b,!0,c,null,f);break;case \"together\":wj(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}\nfunction ij(a,b){0===(b.mode&1)&&null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2)}function Zi(a,b,c){null!==a&&(b.dependencies=a.dependencies);rh|=b.lanes;if(0===(c&b.childLanes))return null;if(null!==a&&b.child!==a.child)throw Error(p(153));if(null!==b.child){a=b.child;c=Pg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Pg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}\nfunction yj(a,b,c){switch(b.tag){case 3:kj(b);Ig();break;case 5:Ah(b);break;case 1:Zf(b.type)&&cg(b);break;case 4:yh(b,b.stateNode.containerInfo);break;case 10:var d=b.type._context,e=b.memoizedProps.value;G(Wg,d._currentValue);d._currentValue=e;break;case 13:d=b.memoizedState;if(null!==d){if(null!==d.dehydrated)return G(L,L.current&1),b.flags|=128,null;if(0!==(c&b.child.childLanes))return oj(a,b,c);G(L,L.current&1);a=Zi(a,b,c);return null!==a?a.sibling:null}G(L,L.current&1);break;case 19:d=0!==(c&\nb.childLanes);if(0!==(a.flags&128)){if(d)return xj(a,b,c);b.flags|=128}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);G(L,L.current);if(d)break;else return null;case 22:case 23:return b.lanes=0,dj(a,b,c)}return Zi(a,b,c)}var zj,Aj,Bj,Cj;\nzj=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Aj=function(){};\nBj=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;xh(uh.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"select\":e=A({},e,{value:void 0});d=A({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=Bf)}ub(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===l){var h=e[l];for(g in h)h.hasOwnProperty(g)&&\n(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ea.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,\nc)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ea.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&D(\"scroll\",a),f||h===k||(f=[])):(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",c);var l=f;if(b.updateQueue=l)b.flags|=4}};Cj=function(a,b,c,d){c!==d&&(b.flags|=4)};\nfunction Dj(a,b){if(!I)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction S(a){var b=null!==a.alternate&&a.alternate.child===a.child,c=0,d=0;if(b)for(var e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags&14680064,d|=e.flags&14680064,e.return=a,e=e.sibling;else for(e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags,d|=e.flags,e.return=a,e=e.sibling;a.subtreeFlags|=d;a.childLanes=c;return b}\nfunction Ej(a,b,c){var d=b.pendingProps;wg(b);switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(b),null;case 1:return Zf(b.type)&&$f(),S(b),null;case 3:d=b.stateNode;zh();E(Wf);E(H);Eh();d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)Gg(b)?b.flags|=4:null===a||a.memoizedState.isDehydrated&&0===(b.flags&256)||(b.flags|=1024,null!==zg&&(Fj(zg),zg=null));Aj(a,b);S(b);return null;case 5:Bh(b);var e=xh(wh.current);\nc=b.type;if(null!==a&&null!=b.stateNode)Bj(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!d){if(null===b.stateNode)throw Error(p(166));S(b);return null}a=xh(uh.current);if(Gg(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[Of]=b;d[Pf]=f;a=0!==(b.mode&1);switch(c){case \"dialog\":D(\"cancel\",d);D(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",d);break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],d);break;case \"source\":D(\"error\",d);break;case \"img\":case \"image\":case \"link\":D(\"error\",\nd);D(\"load\",d);break;case \"details\":D(\"toggle\",d);break;case \"input\":Za(d,f);D(\"invalid\",d);break;case \"select\":d._wrapperState={wasMultiple:!!f.multiple};D(\"invalid\",d);break;case \"textarea\":hb(d,f),D(\"invalid\",d)}ub(c,f);e=null;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];\"children\"===g?\"string\"===typeof h?d.textContent!==h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,h,a),e=[\"children\",h]):\"number\"===typeof h&&d.textContent!==\"\"+h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,\nh,a),e=[\"children\",\"\"+h]):ea.hasOwnProperty(g)&&null!=h&&\"onScroll\"===g&&D(\"scroll\",d)}switch(c){case \"input\":Va(d);db(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=Bf)}d=e;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;\"http://www.w3.org/1999/xhtml\"===a&&(a=kb(c));\"http://www.w3.org/1999/xhtml\"===a?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\n\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[Of]=b;a[Pf]=d;zj(a,b,!1,!1);b.stateNode=a;a:{g=vb(c,d);switch(c){case \"dialog\":D(\"cancel\",a);D(\"close\",a);e=d;break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],a);e=d;break;case \"source\":D(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":D(\"error\",\na);D(\"load\",a);e=d;break;case \"details\":D(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);D(\"invalid\",a);break;case \"option\":e=d;break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=A({},d,{value:void 0});D(\"invalid\",a);break;case \"textarea\":hb(a,d);e=gb(a,d);D(\"invalid\",a);break;default:e=d}ub(c,e);h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?sb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&nb(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==\nc||\"\"!==k)&&ob(a,k):\"number\"===typeof k&&ob(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ea.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&D(\"scroll\",a):null!=k&&ta(a,f,k,g))}switch(c){case \"input\":Va(a);db(a,d,!1);break;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,\n!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=Bf)}switch(c){case \"button\":case \"input\":case \"select\":case \"textarea\":d=!!d.autoFocus;break a;case \"img\":d=!0;break a;default:d=!1}}d&&(b.flags|=4)}null!==b.ref&&(b.flags|=512,b.flags|=2097152)}S(b);return null;case 6:if(a&&null!=b.stateNode)Cj(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(p(166));c=xh(wh.current);xh(uh.current);if(Gg(b)){d=b.stateNode;c=b.memoizedProps;d[Of]=b;if(f=d.nodeValue!==c)if(a=\nxg,null!==a)switch(a.tag){case 3:Af(d.nodeValue,c,0!==(a.mode&1));break;case 5:!0!==a.memoizedProps.suppressHydrationWarning&&Af(d.nodeValue,c,0!==(a.mode&1))}f&&(b.flags|=4)}else d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[Of]=b,b.stateNode=d}S(b);return null;case 13:E(L);d=b.memoizedState;if(null===a||null!==a.memoizedState&&null!==a.memoizedState.dehydrated){if(I&&null!==yg&&0!==(b.mode&1)&&0===(b.flags&128))Hg(),Ig(),b.flags|=98560,f=!1;else if(f=Gg(b),null!==d&&null!==d.dehydrated){if(null===\na){if(!f)throw Error(p(318));f=b.memoizedState;f=null!==f?f.dehydrated:null;if(!f)throw Error(p(317));f[Of]=b}else Ig(),0===(b.flags&128)&&(b.memoizedState=null),b.flags|=4;S(b);f=!1}else null!==zg&&(Fj(zg),zg=null),f=!0;if(!f)return b.flags&65536?b:null}if(0!==(b.flags&128))return b.lanes=c,b;d=null!==d;d!==(null!==a&&null!==a.memoizedState)&&d&&(b.child.flags|=8192,0!==(b.mode&1)&&(null===a||0!==(L.current&1)?0===T&&(T=3):tj()));null!==b.updateQueue&&(b.flags|=4);S(b);return null;case 4:return zh(),\nAj(a,b),null===a&&sf(b.stateNode.containerInfo),S(b),null;case 10:return ah(b.type._context),S(b),null;case 17:return Zf(b.type)&&$f(),S(b),null;case 19:E(L);f=b.memoizedState;if(null===f)return S(b),null;d=0!==(b.flags&128);g=f.rendering;if(null===g)if(d)Dj(f,!1);else{if(0!==T||null!==a&&0!==(a.flags&128))for(a=b.child;null!==a;){g=Ch(a);if(null!==g){b.flags|=128;Dj(f,!1);d=g.updateQueue;null!==d&&(b.updateQueue=d,b.flags|=4);b.subtreeFlags=0;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=14680066,\ng=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,f.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;G(L,L.current&1|2);return b.child}a=\na.sibling}null!==f.tail&&B()>Gj&&(b.flags|=128,d=!0,Dj(f,!1),b.lanes=4194304)}else{if(!d)if(a=Ch(g),null!==a){if(b.flags|=128,d=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Dj(f,!0),null===f.tail&&\"hidden\"===f.tailMode&&!g.alternate&&!I)return S(b),null}else 2*B()-f.renderingStartTime>Gj&&1073741824!==c&&(b.flags|=128,d=!0,Dj(f,!1),b.lanes=4194304);f.isBackwards?(g.sibling=b.child,b.child=g):(c=f.last,null!==c?c.sibling=g:b.child=g,f.last=g)}if(null!==f.tail)return b=f.tail,f.rendering=\nb,f.tail=b.sibling,f.renderingStartTime=B(),b.sibling=null,c=L.current,G(L,d?c&1|2:c&1),b;S(b);return null;case 22:case 23:return Hj(),d=null!==b.memoizedState,null!==a&&null!==a.memoizedState!==d&&(b.flags|=8192),d&&0!==(b.mode&1)?0!==(fj&1073741824)&&(S(b),b.subtreeFlags&6&&(b.flags|=8192)):S(b),null;case 24:return null;case 25:return null}throw Error(p(156,b.tag));}\nfunction Ij(a,b){wg(b);switch(b.tag){case 1:return Zf(b.type)&&$f(),a=b.flags,a&65536?(b.flags=a&-65537|128,b):null;case 3:return zh(),E(Wf),E(H),Eh(),a=b.flags,0!==(a&65536)&&0===(a&128)?(b.flags=a&-65537|128,b):null;case 5:return Bh(b),null;case 13:E(L);a=b.memoizedState;if(null!==a&&null!==a.dehydrated){if(null===b.alternate)throw Error(p(340));Ig()}a=b.flags;return a&65536?(b.flags=a&-65537|128,b):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(b.type._context),null;case 22:case 23:return Hj(),\nnull;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=\"function\"===typeof WeakSet?WeakSet:Set,V=null;function Lj(a,b){var c=a.ref;if(null!==c)if(\"function\"===typeof c)try{c(null)}catch(d){W(a,b,d)}else c.current=null}function Mj(a,b,c){try{c()}catch(d){W(a,b,d)}}var Nj=!1;\nfunction Oj(a,b){Cf=dd;a=Me();if(Ne(a)){if(\"selectionStart\"in a)var c={start:a.selectionStart,end:a.selectionEnd};else a:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&0!==d.rangeCount){c=d.anchorNode;var e=d.anchorOffset,f=d.focusNode;d=d.focusOffset;try{c.nodeType,f.nodeType}catch(F){c=null;break a}var g=0,h=-1,k=-1,l=0,m=0,q=a,r=null;b:for(;;){for(var y;;){q!==c||0!==e&&3!==q.nodeType||(h=g+e);q!==f||0!==d&&3!==q.nodeType||(k=g+d);3===q.nodeType&&(g+=\nq.nodeValue.length);if(null===(y=q.firstChild))break;r=q;q=y}for(;;){if(q===a)break b;r===c&&++l===e&&(h=g);r===f&&++m===d&&(k=g);if(null!==(y=q.nextSibling))break;q=r;r=q.parentNode}q=y}c=-1===h||-1===k?null:{start:h,end:k}}else c=null}c=c||{start:0,end:0}}else c=null;Df={focusedElem:a,selectionRange:c};dd=!1;for(V=b;null!==V;)if(b=V,a=b.child,0!==(b.subtreeFlags&1028)&&null!==a)a.return=b,V=a;else for(;null!==V;){b=V;try{var n=b.alternate;if(0!==(b.flags&1024))switch(b.tag){case 0:case 11:case 15:break;\ncase 1:if(null!==n){var t=n.memoizedProps,J=n.memoizedState,x=b.stateNode,w=x.getSnapshotBeforeUpdate(b.elementType===b.type?t:Ci(b.type,t),J);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var u=b.stateNode.containerInfo;1===u.nodeType?u.textContent=\"\":9===u.nodeType&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163));}}catch(F){W(b,b.return,F)}a=b.sibling;if(null!==a){a.return=b.return;V=a;break}V=b.return}n=Nj;Nj=!1;return n}\nfunction Pj(a,b,c){var d=b.updateQueue;d=null!==d?d.lastEffect:null;if(null!==d){var e=d=d.next;do{if((e.tag&a)===a){var f=e.destroy;e.destroy=void 0;void 0!==f&&Mj(b,c,f)}e=e.next}while(e!==d)}}function Qj(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function Rj(a){var b=a.ref;if(null!==b){var c=a.stateNode;switch(a.tag){case 5:a=c;break;default:a=c}\"function\"===typeof b?b(a):b.current=a}}\nfunction Sj(a){var b=a.alternate;null!==b&&(a.alternate=null,Sj(b));a.child=null;a.deletions=null;a.sibling=null;5===a.tag&&(b=a.stateNode,null!==b&&(delete b[Of],delete b[Pf],delete b[of],delete b[Qf],delete b[Rf]));a.stateNode=null;a.return=null;a.dependencies=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.stateNode=null;a.updateQueue=null}function Tj(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction Uj(a){a:for(;;){for(;null===a.sibling;){if(null===a.return||Tj(a.return))return null;a=a.return}a.sibling.return=a.return;for(a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(a.flags&2)continue a;if(null===a.child||4===a.tag)continue a;else a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}\nfunction Vj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=Bf));else if(4!==d&&(a=a.child,null!==a))for(Vj(a,b,c),a=a.sibling;null!==a;)Vj(a,b,c),a=a.sibling}\nfunction Wj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Wj(a,b,c),a=a.sibling;null!==a;)Wj(a,b,c),a=a.sibling}var X=null,Xj=!1;function Yj(a,b,c){for(c=c.child;null!==c;)Zj(a,b,c),c=c.sibling}\nfunction Zj(a,b,c){if(lc&&\"function\"===typeof lc.onCommitFiberUnmount)try{lc.onCommitFiberUnmount(kc,c)}catch(h){}switch(c.tag){case 5:U||Lj(c,b);case 6:var d=X,e=Xj;X=null;Yj(a,b,c);X=d;Xj=e;null!==X&&(Xj?(a=X,c=c.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):X.removeChild(c.stateNode));break;case 18:null!==X&&(Xj?(a=X,c=c.stateNode,8===a.nodeType?Kf(a.parentNode,c):1===a.nodeType&&Kf(a,c),bd(a)):Kf(X,c.stateNode));break;case 4:d=X;e=Xj;X=c.stateNode.containerInfo;Xj=!0;\nYj(a,b,c);X=d;Xj=e;break;case 0:case 11:case 14:case 15:if(!U&&(d=c.updateQueue,null!==d&&(d=d.lastEffect,null!==d))){e=d=d.next;do{var f=e,g=f.destroy;f=f.tag;void 0!==g&&(0!==(f&2)?Mj(c,b,g):0!==(f&4)&&Mj(c,b,g));e=e.next}while(e!==d)}Yj(a,b,c);break;case 1:if(!U&&(Lj(c,b),d=c.stateNode,\"function\"===typeof d.componentWillUnmount))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(h){W(c,b,h)}Yj(a,b,c);break;case 21:Yj(a,b,c);break;case 22:c.mode&1?(U=(d=U)||null!==\nc.memoizedState,Yj(a,b,c),U=d):Yj(a,b,c);break;default:Yj(a,b,c)}}function ak(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Kj);b.forEach(function(b){var d=bk.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction ck(a,b){var c=b.deletions;if(null!==c)for(var d=0;d<c.length;d++){var e=c[d];try{var f=a,g=b,h=g;a:for(;null!==h;){switch(h.tag){case 5:X=h.stateNode;Xj=!1;break a;case 3:X=h.stateNode.containerInfo;Xj=!0;break a;case 4:X=h.stateNode.containerInfo;Xj=!0;break a}h=h.return}if(null===X)throw Error(p(160));Zj(f,g,e);X=null;Xj=!1;var k=e.alternate;null!==k&&(k.return=null);e.return=null}catch(l){W(e,b,l)}}if(b.subtreeFlags&12854)for(b=b.child;null!==b;)dk(b,a),b=b.sibling}\nfunction dk(a,b){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ck(b,a);ek(a);if(d&4){try{Pj(3,a,a.return),Qj(3,a)}catch(t){W(a,a.return,t)}try{Pj(5,a,a.return)}catch(t){W(a,a.return,t)}}break;case 1:ck(b,a);ek(a);d&512&&null!==c&&Lj(c,c.return);break;case 5:ck(b,a);ek(a);d&512&&null!==c&&Lj(c,c.return);if(a.flags&32){var e=a.stateNode;try{ob(e,\"\")}catch(t){W(a,a.return,t)}}if(d&4&&(e=a.stateNode,null!=e)){var f=a.memoizedProps,g=null!==c?c.memoizedProps:f,h=a.type,k=a.updateQueue;\na.updateQueue=null;if(null!==k)try{\"input\"===h&&\"radio\"===f.type&&null!=f.name&&ab(e,f);vb(h,g);var l=vb(h,f);for(g=0;g<k.length;g+=2){var m=k[g],q=k[g+1];\"style\"===m?sb(e,q):\"dangerouslySetInnerHTML\"===m?nb(e,q):\"children\"===m?ob(e,q):ta(e,m,q,l)}switch(h){case \"input\":bb(e,f);break;case \"textarea\":ib(e,f);break;case \"select\":var r=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!f.multiple;var y=f.value;null!=y?fb(e,!!f.multiple,y,!1):r!==!!f.multiple&&(null!=f.defaultValue?fb(e,!!f.multiple,\nf.defaultValue,!0):fb(e,!!f.multiple,f.multiple?[]:\"\",!1))}e[Pf]=f}catch(t){W(a,a.return,t)}}break;case 6:ck(b,a);ek(a);if(d&4){if(null===a.stateNode)throw Error(p(162));e=a.stateNode;f=a.memoizedProps;try{e.nodeValue=f}catch(t){W(a,a.return,t)}}break;case 3:ck(b,a);ek(a);if(d&4&&null!==c&&c.memoizedState.isDehydrated)try{bd(b.containerInfo)}catch(t){W(a,a.return,t)}break;case 4:ck(b,a);ek(a);break;case 13:ck(b,a);ek(a);e=a.child;e.flags&8192&&(f=null!==e.memoizedState,e.stateNode.isHidden=f,!f||\nnull!==e.alternate&&null!==e.alternate.memoizedState||(fk=B()));d&4&&ak(a);break;case 22:m=null!==c&&null!==c.memoizedState;a.mode&1?(U=(l=U)||m,ck(b,a),U=l):ck(b,a);ek(a);if(d&8192){l=null!==a.memoizedState;if((a.stateNode.isHidden=l)&&!m&&0!==(a.mode&1))for(V=a,m=a.child;null!==m;){for(q=V=m;null!==V;){r=V;y=r.child;switch(r.tag){case 0:case 11:case 14:case 15:Pj(4,r,r.return);break;case 1:Lj(r,r.return);var n=r.stateNode;if(\"function\"===typeof n.componentWillUnmount){d=r;c=r.return;try{b=d,n.props=\nb.memoizedProps,n.state=b.memoizedState,n.componentWillUnmount()}catch(t){W(d,c,t)}}break;case 5:Lj(r,r.return);break;case 22:if(null!==r.memoizedState){gk(q);continue}}null!==y?(y.return=r,V=y):gk(q)}m=m.sibling}a:for(m=null,q=a;;){if(5===q.tag){if(null===m){m=q;try{e=q.stateNode,l?(f=e.style,\"function\"===typeof f.setProperty?f.setProperty(\"display\",\"none\",\"important\"):f.display=\"none\"):(h=q.stateNode,k=q.memoizedProps.style,g=void 0!==k&&null!==k&&k.hasOwnProperty(\"display\")?k.display:null,h.style.display=\nrb(\"display\",g))}catch(t){W(a,a.return,t)}}}else if(6===q.tag){if(null===m)try{q.stateNode.nodeValue=l?\"\":q.memoizedProps}catch(t){W(a,a.return,t)}}else if((22!==q.tag&&23!==q.tag||null===q.memoizedState||q===a)&&null!==q.child){q.child.return=q;q=q.child;continue}if(q===a)break a;for(;null===q.sibling;){if(null===q.return||q.return===a)break a;m===q&&(m=null);q=q.return}m===q&&(m=null);q.sibling.return=q.return;q=q.sibling}}break;case 19:ck(b,a);ek(a);d&4&&ak(a);break;case 21:break;default:ck(b,\na),ek(a)}}function ek(a){var b=a.flags;if(b&2){try{a:{for(var c=a.return;null!==c;){if(Tj(c)){var d=c;break a}c=c.return}throw Error(p(160));}switch(d.tag){case 5:var e=d.stateNode;d.flags&32&&(ob(e,\"\"),d.flags&=-33);var f=Uj(a);Wj(a,f,e);break;case 3:case 4:var g=d.stateNode.containerInfo,h=Uj(a);Vj(a,h,g);break;default:throw Error(p(161));}}catch(k){W(a,a.return,k)}a.flags&=-3}b&4096&&(a.flags&=-4097)}function hk(a,b,c){V=a;ik(a,b,c)}\nfunction ik(a,b,c){for(var d=0!==(a.mode&1);null!==V;){var e=V,f=e.child;if(22===e.tag&&d){var g=null!==e.memoizedState||Jj;if(!g){var h=e.alternate,k=null!==h&&null!==h.memoizedState||U;h=Jj;var l=U;Jj=g;if((U=k)&&!l)for(V=e;null!==V;)g=V,k=g.child,22===g.tag&&null!==g.memoizedState?jk(e):null!==k?(k.return=g,V=k):jk(e);for(;null!==f;)V=f,ik(f,b,c),f=f.sibling;V=e;Jj=h;U=l}kk(a,b,c)}else 0!==(e.subtreeFlags&8772)&&null!==f?(f.return=e,V=f):kk(a,b,c)}}\nfunction kk(a){for(;null!==V;){var b=V;if(0!==(b.flags&8772)){var c=b.alternate;try{if(0!==(b.flags&8772))switch(b.tag){case 0:case 11:case 15:U||Qj(5,b);break;case 1:var d=b.stateNode;if(b.flags&4&&!U)if(null===c)d.componentDidMount();else{var e=b.elementType===b.type?c.memoizedProps:Ci(b.type,c.memoizedProps);d.componentDidUpdate(e,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var f=b.updateQueue;null!==f&&sh(b,f,d);break;case 3:var g=b.updateQueue;if(null!==g){c=null;if(null!==b.child)switch(b.child.tag){case 5:c=\nb.child.stateNode;break;case 1:c=b.child.stateNode}sh(b,g,c)}break;case 5:var h=b.stateNode;if(null===c&&b.flags&4){c=h;var k=b.memoizedProps;switch(b.type){case \"button\":case \"input\":case \"select\":case \"textarea\":k.autoFocus&&c.focus();break;case \"img\":k.src&&(c.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(null===b.memoizedState){var l=b.alternate;if(null!==l){var m=l.memoizedState;if(null!==m){var q=m.dehydrated;null!==q&&bd(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;\ndefault:throw Error(p(163));}U||b.flags&512&&Rj(b)}catch(r){W(b,b.return,r)}}if(b===a){V=null;break}c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}function gk(a){for(;null!==V;){var b=V;if(b===a){V=null;break}var c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}\nfunction jk(a){for(;null!==V;){var b=V;try{switch(b.tag){case 0:case 11:case 15:var c=b.return;try{Qj(4,b)}catch(k){W(b,c,k)}break;case 1:var d=b.stateNode;if(\"function\"===typeof d.componentDidMount){var e=b.return;try{d.componentDidMount()}catch(k){W(b,e,k)}}var f=b.return;try{Rj(b)}catch(k){W(b,f,k)}break;case 5:var g=b.return;try{Rj(b)}catch(k){W(b,g,k)}}}catch(k){W(b,b.return,k)}if(b===a){V=null;break}var h=b.sibling;if(null!==h){h.return=b.return;V=h;break}V=b.return}}\nvar lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=Infinity,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return 0!==(K&6)?B():-1!==Ak?Ak:Ak=B()}\nfunction yi(a){if(0===(a.mode&1))return 1;if(0!==(K&2)&&0!==Z)return Z&-Z;if(null!==Kg.transition)return 0===Bk&&(Bk=yc()),Bk;a=C;if(0!==a)return a;a=window.event;a=void 0===a?16:jd(a.type);return a}function gi(a,b,c,d){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(a,c,d);if(0===(K&2)||a!==Q)a===Q&&(0===(K&2)&&(qk|=c),4===T&&Ck(a,Z)),Dk(a,d),1===c&&0===K&&0===(b.mode&1)&&(Gj=B()+500,fg&&jg())}\nfunction Dk(a,b){var c=a.callbackNode;wc(a,b);var d=uc(a,a===Q?Z:0);if(0===d)null!==c&&bc(c),a.callbackNode=null,a.callbackPriority=0;else if(b=d&-d,a.callbackPriority!==b){null!=c&&bc(c);if(1===b)0===a.tag?ig(Ek.bind(null,a)):hg(Ek.bind(null,a)),Jf(function(){0===(K&6)&&jg()}),c=null;else{switch(Dc(d)){case 1:c=fc;break;case 4:c=gc;break;case 16:c=hc;break;case 536870912:c=jc;break;default:c=hc}c=Fk(c,Gk.bind(null,a))}a.callbackPriority=b;a.callbackNode=c}}\nfunction Gk(a,b){Ak=-1;Bk=0;if(0!==(K&6))throw Error(p(327));var c=a.callbackNode;if(Hk()&&a.callbackNode!==c)return null;var d=uc(a,a===Q?Z:0);if(0===d)return null;if(0!==(d&30)||0!==(d&a.expiredLanes)||b)b=Ik(a,d);else{b=d;var e=K;K|=2;var f=Jk();if(Q!==a||Z!==b)uk=null,Gj=B()+500,Kk(a,b);do try{Lk();break}catch(h){Mk(a,h)}while(1);$g();mk.current=f;K=e;null!==Y?b=0:(Q=null,Z=0,b=T)}if(0!==b){2===b&&(e=xc(a),0!==e&&(d=e,b=Nk(a,e)));if(1===b)throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;if(6===b)Ck(a,d);\nelse{e=a.current.alternate;if(0===(d&30)&&!Ok(e)&&(b=Ik(a,d),2===b&&(f=xc(a),0!==f&&(d=f,b=Nk(a,f))),1===b))throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;a.finishedWork=e;a.finishedLanes=d;switch(b){case 0:case 1:throw Error(p(345));case 2:Pk(a,tk,uk);break;case 3:Ck(a,d);if((d&130023424)===d&&(b=fk+500-B(),10<b)){if(0!==uc(a,0))break;e=a.suspendedLanes;if((e&d)!==d){R();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),b);break}Pk(a,tk,uk);break;case 4:Ck(a,d);if((d&4194240)===\nd)break;b=a.eventTimes;for(e=-1;0<d;){var g=31-oc(d);f=1<<g;g=b[g];g>e&&(e=g);d&=~f}d=e;d=B()-d;d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*lk(d/1960))-d;if(10<d){a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),d);break}Pk(a,tk,uk);break;case 5:Pk(a,tk,uk);break;default:throw Error(p(329));}}}Dk(a,B());return a.callbackNode===c?Gk.bind(null,a):null}\nfunction Nk(a,b){var c=sk;a.current.memoizedState.isDehydrated&&(Kk(a,b).flags|=256);a=Ik(a,b);2!==a&&(b=tk,tk=c,null!==b&&Fj(b));return a}function Fj(a){null===tk?tk=a:tk.push.apply(tk,a)}\nfunction Ok(a){for(var b=a;;){if(b.flags&16384){var c=b.updateQueue;if(null!==c&&(c=c.stores,null!==c))for(var d=0;d<c.length;d++){var e=c[d],f=e.getSnapshot;e=e.value;try{if(!He(f(),e))return!1}catch(g){return!1}}}c=b.child;if(b.subtreeFlags&16384&&null!==c)c.return=b,b=c;else{if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return!0;b=b.return}b.sibling.return=b.return;b=b.sibling}}return!0}\nfunction Ck(a,b){b&=~rk;b&=~qk;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-oc(b),d=1<<c;a[c]=-1;b&=~d}}function Ek(a){if(0!==(K&6))throw Error(p(327));Hk();var b=uc(a,0);if(0===(b&1))return Dk(a,B()),null;var c=Ik(a,b);if(0!==a.tag&&2===c){var d=xc(a);0!==d&&(b=d,c=Nk(a,d))}if(1===c)throw c=pk,Kk(a,0),Ck(a,b),Dk(a,B()),c;if(6===c)throw Error(p(345));a.finishedWork=a.current.alternate;a.finishedLanes=b;Pk(a,tk,uk);Dk(a,B());return null}\nfunction Qk(a,b){var c=K;K|=1;try{return a(b)}finally{K=c,0===K&&(Gj=B()+500,fg&&jg())}}function Rk(a){null!==wk&&0===wk.tag&&0===(K&6)&&Hk();var b=K;K|=1;var c=ok.transition,d=C;try{if(ok.transition=null,C=1,a)return a()}finally{C=d,ok.transition=c,K=b,0===(K&6)&&jg()}}function Hj(){fj=ej.current;E(ej)}\nfunction Kk(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,Gf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;wg(d);switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&$f();break;case 3:zh();E(Wf);E(H);Eh();break;case 5:Bh(d);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(d.type._context);break;case 22:case 23:Hj()}c=c.return}Q=a;Y=a=Pg(a.current,null);Z=fj=b;T=0;pk=null;rk=qk=rh=0;tk=sk=null;if(null!==fh){for(b=\n0;b<fh.length;b++)if(c=fh[b],d=c.interleaved,null!==d){c.interleaved=null;var e=d.next,f=c.pending;if(null!==f){var g=f.next;f.next=e;d.next=g}c.pending=d}fh=null}return a}\nfunction Mk(a,b){do{var c=Y;try{$g();Fh.current=Rh;if(Ih){for(var d=M.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}Ih=!1}Hh=0;O=N=M=null;Jh=!1;Kh=0;nk.current=null;if(null===c||null===c.return){T=1;pk=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=Z;h.flags|=32768;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k,m=h,q=m.tag;if(0===(m.mode&1)&&(0===q||11===q||15===q)){var r=m.alternate;r?(m.updateQueue=r.updateQueue,m.memoizedState=r.memoizedState,\nm.lanes=r.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=Ui(g);if(null!==y){y.flags&=-257;Vi(y,g,h,f,b);y.mode&1&&Si(f,l,b);b=y;k=l;var n=b.updateQueue;if(null===n){var t=new Set;t.add(k);b.updateQueue=t}else n.add(k);break a}else{if(0===(b&1)){Si(f,l,b);tj();break a}k=Error(p(426))}}else if(I&&h.mode&1){var J=Ui(g);if(null!==J){0===(J.flags&65536)&&(J.flags|=256);Vi(J,g,h,f,b);Jg(Ji(k,h));break a}}f=k=Ji(k,h);4!==T&&(T=2);null===sk?sk=[f]:sk.push(f);f=g;do{switch(f.tag){case 3:f.flags|=65536;\nb&=-b;f.lanes|=b;var x=Ni(f,k,b);ph(f,x);break a;case 1:h=k;var w=f.type,u=f.stateNode;if(0===(f.flags&128)&&(\"function\"===typeof w.getDerivedStateFromError||null!==u&&\"function\"===typeof u.componentDidCatch&&(null===Ri||!Ri.has(u)))){f.flags|=65536;b&=-b;f.lanes|=b;var F=Qi(f,h,b);ph(f,F);break a}}f=f.return}while(null!==f)}Sk(c)}catch(na){b=na;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}function Jk(){var a=mk.current;mk.current=Rh;return null===a?Rh:a}\nfunction tj(){if(0===T||3===T||2===T)T=4;null===Q||0===(rh&268435455)&&0===(qk&268435455)||Ck(Q,Z)}function Ik(a,b){var c=K;K|=2;var d=Jk();if(Q!==a||Z!==b)uk=null,Kk(a,b);do try{Tk();break}catch(e){Mk(a,e)}while(1);$g();K=c;mk.current=d;if(null!==Y)throw Error(p(261));Q=null;Z=0;return T}function Tk(){for(;null!==Y;)Uk(Y)}function Lk(){for(;null!==Y&&!cc();)Uk(Y)}function Uk(a){var b=Vk(a.alternate,a,fj);a.memoizedProps=a.pendingProps;null===b?Sk(a):Y=b;nk.current=null}\nfunction Sk(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&32768)){if(c=Ej(c,b,fj),null!==c){Y=c;return}}else{c=Ij(c,b);if(null!==c){c.flags&=32767;Y=c;return}if(null!==a)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T=6;Y=null;return}}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===T&&(T=5)}function Pk(a,b,c){var d=C,e=ok.transition;try{ok.transition=null,C=1,Wk(a,b,c,d)}finally{ok.transition=e,C=d}return null}\nfunction Wk(a,b,c,d){do Hk();while(null!==wk);if(0!==(K&6))throw Error(p(327));c=a.finishedWork;var e=a.finishedLanes;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(p(177));a.callbackNode=null;a.callbackPriority=0;var f=c.lanes|c.childLanes;Bc(a,f);a===Q&&(Y=Q=null,Z=0);0===(c.subtreeFlags&2064)&&0===(c.flags&2064)||vk||(vk=!0,Fk(hc,function(){Hk();return null}));f=0!==(c.flags&15990);if(0!==(c.subtreeFlags&15990)||f){f=ok.transition;ok.transition=null;\nvar g=C;C=1;var h=K;K|=4;nk.current=null;Oj(a,c);dk(c,a);Oe(Df);dd=!!Cf;Df=Cf=null;a.current=c;hk(c,a,e);dc();K=h;C=g;ok.transition=f}else a.current=c;vk&&(vk=!1,wk=a,xk=e);f=a.pendingLanes;0===f&&(Ri=null);mc(c.stateNode,d);Dk(a,B());if(null!==b)for(d=a.onRecoverableError,c=0;c<b.length;c++)e=b[c],d(e.value,{componentStack:e.stack,digest:e.digest});if(Oi)throw Oi=!1,a=Pi,Pi=null,a;0!==(xk&1)&&0!==a.tag&&Hk();f=a.pendingLanes;0!==(f&1)?a===zk?yk++:(yk=0,zk=a):yk=0;jg();return null}\nfunction Hk(){if(null!==wk){var a=Dc(xk),b=ok.transition,c=C;try{ok.transition=null;C=16>a?16:a;if(null===wk)var d=!1;else{a=wk;wk=null;xk=0;if(0!==(K&6))throw Error(p(331));var e=K;K|=4;for(V=a.current;null!==V;){var f=V,g=f.child;if(0!==(V.flags&16)){var h=f.deletions;if(null!==h){for(var k=0;k<h.length;k++){var l=h[k];for(V=l;null!==V;){var m=V;switch(m.tag){case 0:case 11:case 15:Pj(8,m,f)}var q=m.child;if(null!==q)q.return=m,V=q;else for(;null!==V;){m=V;var r=m.sibling,y=m.return;Sj(m);if(m===\nl){V=null;break}if(null!==r){r.return=y;V=r;break}V=y}}}var n=f.alternate;if(null!==n){var t=n.child;if(null!==t){n.child=null;do{var J=t.sibling;t.sibling=null;t=J}while(null!==t)}}V=f}}if(0!==(f.subtreeFlags&2064)&&null!==g)g.return=f,V=g;else b:for(;null!==V;){f=V;if(0!==(f.flags&2048))switch(f.tag){case 0:case 11:case 15:Pj(9,f,f.return)}var x=f.sibling;if(null!==x){x.return=f.return;V=x;break b}V=f.return}}var w=a.current;for(V=w;null!==V;){g=V;var u=g.child;if(0!==(g.subtreeFlags&2064)&&null!==\nu)u.return=g,V=u;else b:for(g=w;null!==V;){h=V;if(0!==(h.flags&2048))try{switch(h.tag){case 0:case 11:case 15:Qj(9,h)}}catch(na){W(h,h.return,na)}if(h===g){V=null;break b}var F=h.sibling;if(null!==F){F.return=h.return;V=F;break b}V=h.return}}K=e;jg();if(lc&&\"function\"===typeof lc.onPostCommitFiberRoot)try{lc.onPostCommitFiberRoot(kc,a)}catch(na){}d=!0}return d}finally{C=c,ok.transition=b}}return!1}function Xk(a,b,c){b=Ji(c,b);b=Ni(a,b,1);a=nh(a,b,1);b=R();null!==a&&(Ac(a,1,b),Dk(a,b))}\nfunction W(a,b,c){if(3===a.tag)Xk(a,a,c);else for(;null!==b;){if(3===b.tag){Xk(b,a,c);break}else if(1===b.tag){var d=b.stateNode;if(\"function\"===typeof b.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ri||!Ri.has(d))){a=Ji(c,a);a=Qi(b,a,1);b=nh(b,a,1);a=R();null!==b&&(Ac(b,1,a),Dk(b,a));break}}b=b.return}}\nfunction Ti(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=R();a.pingedLanes|=a.suspendedLanes&c;Q===a&&(Z&c)===c&&(4===T||3===T&&(Z&130023424)===Z&&500>B()-fk?Kk(a,0):rk|=c);Dk(a,b)}function Yk(a,b){0===b&&(0===(a.mode&1)?b=1:(b=sc,sc<<=1,0===(sc&130023424)&&(sc=4194304)));var c=R();a=ih(a,b);null!==a&&(Ac(a,b,c),Dk(a,c))}function uj(a){var b=a.memoizedState,c=0;null!==b&&(c=b.retryLane);Yk(a,c)}\nfunction bk(a,b){var c=0;switch(a.tag){case 13:var d=a.stateNode;var e=a.memoizedState;null!==e&&(c=e.retryLane);break;case 19:d=a.stateNode;break;default:throw Error(p(314));}null!==d&&d.delete(b);Yk(a,c)}var Vk;\nVk=function(a,b,c){if(null!==a)if(a.memoizedProps!==b.pendingProps||Wf.current)dh=!0;else{if(0===(a.lanes&c)&&0===(b.flags&128))return dh=!1,yj(a,b,c);dh=0!==(a.flags&131072)?!0:!1}else dh=!1,I&&0!==(b.flags&1048576)&&ug(b,ng,b.index);b.lanes=0;switch(b.tag){case 2:var d=b.type;ij(a,b);a=b.pendingProps;var e=Yf(b,H.current);ch(b,c);e=Nh(null,b,d,a,e,c);var f=Sh();b.flags|=1;\"object\"===typeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof?(b.tag=1,b.memoizedState=null,b.updateQueue=\nnull,Zf(d)?(f=!0,cg(b)):f=!1,b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,kh(b),e.updater=Ei,b.stateNode=e,e._reactInternals=b,Ii(b,d,a,c),b=jj(null,b,d,!0,f,c)):(b.tag=0,I&&f&&vg(b),Xi(null,b,e,c),b=b.child);return b;case 16:d=b.elementType;a:{ij(a,b);a=b.pendingProps;e=d._init;d=e(d._payload);b.type=d;e=b.tag=Zk(d);a=Ci(d,a);switch(e){case 0:b=cj(null,b,d,a,c);break a;case 1:b=hj(null,b,d,a,c);break a;case 11:b=Yi(null,b,d,a,c);break a;case 14:b=$i(null,b,d,Ci(d.type,a),c);break a}throw Error(p(306,\nd,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),cj(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),hj(a,b,d,e,c);case 3:a:{kj(b);if(null===a)throw Error(p(387));d=b.pendingProps;f=b.memoizedState;e=f.element;lh(a,b);qh(b,d,null,c);var g=b.memoizedState;d=g.element;if(f.isDehydrated)if(f={element:d,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},b.updateQueue.baseState=\nf,b.memoizedState=f,b.flags&256){e=Ji(Error(p(423)),b);b=lj(a,b,d,c,e);break a}else if(d!==e){e=Ji(Error(p(424)),b);b=lj(a,b,d,c,e);break a}else for(yg=Lf(b.stateNode.containerInfo.firstChild),xg=b,I=!0,zg=null,c=Vg(b,null,d,c),b.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{Ig();if(d===e){b=Zi(a,b,c);break a}Xi(a,b,d,c)}b=b.child}return b;case 5:return Ah(b),null===a&&Eg(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,Ef(d,e)?g=null:null!==f&&Ef(d,f)&&(b.flags|=32),\ngj(a,b),Xi(a,b,g,c),b.child;case 6:return null===a&&Eg(b),null;case 13:return oj(a,b,c);case 4:return yh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Ug(b,null,d,c):Xi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),Yi(a,b,d,e,c);case 7:return Xi(a,b,b.pendingProps,c),b.child;case 8:return Xi(a,b,b.pendingProps.children,c),b.child;case 12:return Xi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;f=b.memoizedProps;\ng=e.value;G(Wg,d._currentValue);d._currentValue=g;if(null!==f)if(He(f.value,g)){if(f.children===e.children&&!Wf.current){b=Zi(a,b,c);break a}}else for(f=b.child,null!==f&&(f.return=b);null!==f;){var h=f.dependencies;if(null!==h){g=f.child;for(var k=h.firstContext;null!==k;){if(k.context===d){if(1===f.tag){k=mh(-1,c&-c);k.tag=2;var l=f.updateQueue;if(null!==l){l=l.shared;var m=l.pending;null===m?k.next=k:(k.next=m.next,m.next=k);l.pending=k}}f.lanes|=c;k=f.alternate;null!==k&&(k.lanes|=c);bh(f.return,\nc,b);h.lanes|=c;break}k=k.next}}else if(10===f.tag)g=f.type===b.type?null:f.child;else if(18===f.tag){g=f.return;if(null===g)throw Error(p(341));g.lanes|=c;h=g.alternate;null!==h&&(h.lanes|=c);bh(g,c,b);g=f.sibling}else g=f.child;if(null!==g)g.return=f;else for(g=f;null!==g;){if(g===b){g=null;break}f=g.sibling;if(null!==f){f.return=g.return;g=f;break}g=g.return}f=g}Xi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,d=b.pendingProps.children,ch(b,c),e=eh(e),d=d(e),b.flags|=1,Xi(a,b,d,c),\nb.child;case 14:return d=b.type,e=Ci(d,b.pendingProps),e=Ci(d.type,e),$i(a,b,d,e,c);case 15:return bj(a,b,b.type,b.pendingProps,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),ij(a,b),b.tag=1,Zf(d)?(a=!0,cg(b)):a=!1,ch(b,c),Gi(b,d,e),Ii(b,d,e,c),jj(null,b,d,!0,a,c);case 19:return xj(a,b,c);case 22:return dj(a,b,c)}throw Error(p(156,b.tag));};function Fk(a,b){return ac(a,b)}\nfunction $k(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function Bg(a,b,c,d){return new $k(a,b,c,d)}function aj(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction Zk(a){if(\"function\"===typeof a)return aj(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Da)return 11;if(a===Ga)return 14}return 2}\nfunction Pg(a,b){var c=a.alternate;null===c?(c=Bg(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null);c.flags=a.flags&14680064;c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Rg(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)aj(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ya:return Tg(c.children,e,f,b);case za:g=8;e|=8;break;case Aa:return a=Bg(12,c,b,e|2),a.elementType=Aa,a.lanes=f,a;case Ea:return a=Bg(13,c,b,e),a.elementType=Ea,a.lanes=f,a;case Fa:return a=Bg(19,c,b,e),a.elementType=Fa,a.lanes=f,a;case Ia:return pj(c,e,f,b);default:if(\"object\"===typeof a&&null!==a)switch(a.$$typeof){case Ba:g=10;break a;case Ca:g=9;break a;case Da:g=11;\nbreak a;case Ga:g=14;break a;case Ha:g=16;d=null;break a}throw Error(p(130,null==a?a:typeof a,\"\"));}b=Bg(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Tg(a,b,c,d){a=Bg(7,a,d,b);a.lanes=c;return a}function pj(a,b,c,d){a=Bg(22,a,d,b);a.elementType=Ia;a.lanes=c;a.stateNode={isHidden:!1};return a}function Qg(a,b,c){a=Bg(6,a,null,b);a.lanes=c;return a}\nfunction Sg(a,b,c){b=Bg(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction al(a,b,c,d,e){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=0;this.eventTimes=zc(0);this.expirationTimes=zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=zc(0);this.identifierPrefix=d;this.onRecoverableError=e;this.mutableSourceEagerHydrationData=\nnull}function bl(a,b,c,d,e,f,g,h,k){a=new al(a,b,c,h,k);1===b?(b=1,!0===f&&(b|=8)):b=0;f=Bg(3,null,null,b);a.current=f;f.stateNode=a;f.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null};kh(f);return a}function cl(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:wa,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction dl(a){if(!a)return Vf;a=a._reactInternals;a:{if(Vb(a)!==a||1!==a.tag)throw Error(p(170));var b=a;do{switch(b.tag){case 3:b=b.stateNode.context;break a;case 1:if(Zf(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break a}}b=b.return}while(null!==b);throw Error(p(171));}if(1===a.tag){var c=a.type;if(Zf(c))return bg(a,c,b)}return b}\nfunction el(a,b,c,d,e,f,g,h,k){a=bl(c,d,!0,a,e,f,g,h,k);a.context=dl(null);c=a.current;d=R();e=yi(c);f=mh(d,e);f.callback=void 0!==b&&null!==b?b:null;nh(c,f,e);a.current.lanes=e;Ac(a,e,d);Dk(a,d);return a}function fl(a,b,c,d){var e=b.current,f=R(),g=yi(e);c=dl(c);null===b.context?b.context=c:b.pendingContext=c;b=mh(f,g);b.payload={element:a};d=void 0===d?null:d;null!==d&&(b.callback=d);a=nh(e,b,g);null!==a&&(gi(a,e,g,f),oh(a,e,g));return g}\nfunction gl(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function hl(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function il(a,b){hl(a,b);(a=a.alternate)&&hl(a,b)}function jl(){return null}var kl=\"function\"===typeof reportError?reportError:function(a){console.error(a)};function ll(a){this._internalRoot=a}\nml.prototype.render=ll.prototype.render=function(a){var b=this._internalRoot;if(null===b)throw Error(p(409));fl(a,b,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var a=this._internalRoot;if(null!==a){this._internalRoot=null;var b=a.containerInfo;Rk(function(){fl(null,a,null,null)});b[uf]=null}};function ml(a){this._internalRoot=a}\nml.prototype.unstable_scheduleHydration=function(a){if(a){var b=Hc();a={blockedOn:null,target:a,priority:b};for(var c=0;c<Qc.length&&0!==b&&b<Qc[c].priority;c++);Qc.splice(c,0,a);0===c&&Vc(a)}};function nl(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType)}function ol(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}function pl(){}\nfunction ql(a,b,c,d,e){if(e){if(\"function\"===typeof d){var f=d;d=function(){var a=gl(g);f.call(a)}}var g=el(b,d,a,0,null,!1,!1,\"\",pl);a._reactRootContainer=g;a[uf]=g.current;sf(8===a.nodeType?a.parentNode:a);Rk();return g}for(;e=a.lastChild;)a.removeChild(e);if(\"function\"===typeof d){var h=d;d=function(){var a=gl(k);h.call(a)}}var k=bl(a,0,!1,null,null,!1,!1,\"\",pl);a._reactRootContainer=k;a[uf]=k.current;sf(8===a.nodeType?a.parentNode:a);Rk(function(){fl(b,k,c,d)});return k}\nfunction rl(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f;if(\"function\"===typeof e){var h=e;e=function(){var a=gl(g);h.call(a)}}fl(b,g,a,e)}else g=ql(c,b,a,e,d);return gl(g)}Ec=function(a){switch(a.tag){case 3:var b=a.stateNode;if(b.current.memoizedState.isDehydrated){var c=tc(b.pendingLanes);0!==c&&(Cc(b,c|1),Dk(b,B()),0===(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var b=ih(a,1);if(null!==b){var c=R();gi(b,a,1,c)}}),il(a,1)}};\nFc=function(a){if(13===a.tag){var b=ih(a,134217728);if(null!==b){var c=R();gi(b,a,134217728,c)}il(a,134217728)}};Gc=function(a){if(13===a.tag){var b=yi(a),c=ih(a,b);if(null!==c){var d=R();gi(c,a,b,d)}il(a,b)}};Hc=function(){return C};Ic=function(a,b){var c=C;try{return C=a,b()}finally{C=c}};\nyb=function(a,b,c){switch(b){case \"input\":bb(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(p(90));Wa(d);bb(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Qk;Hb=Rk;\nvar sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:\"18.3.1\",rendererPackageName:\"react-dom\"};\nvar ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Zb(a);return null===a?null:a.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||\njl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:\"18.3.1-next-f1338f8080-20240426\"};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;\nexports.createPortal=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nl(b))throw Error(p(200));return cl(a,b,null,c)};exports.createRoot=function(a,b){if(!nl(a))throw Error(p(299));var c=!1,d=\"\",e=kl;null!==b&&void 0!==b&&(!0===b.unstable_strictMode&&(c=!0),void 0!==b.identifierPrefix&&(d=b.identifierPrefix),void 0!==b.onRecoverableError&&(e=b.onRecoverableError));b=bl(a,1,!1,null,null,c,!1,d,e);a[uf]=b.current;sf(8===a.nodeType?a.parentNode:a);return new ll(b)};\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(p(188));a=Object.keys(a).join(\",\");throw Error(p(268,a));}a=Zb(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a){return Rk(a)};exports.hydrate=function(a,b,c){if(!ol(b))throw Error(p(200));return rl(null,a,b,!0,c)};\nexports.hydrateRoot=function(a,b,c){if(!nl(a))throw Error(p(405));var d=null!=c&&c.hydratedSources||null,e=!1,f=\"\",g=kl;null!==c&&void 0!==c&&(!0===c.unstable_strictMode&&(e=!0),void 0!==c.identifierPrefix&&(f=c.identifierPrefix),void 0!==c.onRecoverableError&&(g=c.onRecoverableError));b=el(b,null,a,1,null!=c?c:null,e,!1,f,g);a[uf]=b.current;sf(a);if(d)for(a=0;a<d.length;a++)c=d[a],e=c._getVersion,e=e(c._source),null==b.mutableSourceEagerHydrationData?b.mutableSourceEagerHydrationData=[c,e]:b.mutableSourceEagerHydrationData.push(c,\ne);return new ml(b)};exports.render=function(a,b,c){if(!ol(b))throw Error(p(200));return rl(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!ol(a))throw Error(p(40));return a._reactRootContainer?(Rk(function(){rl(null,null,a,!1,function(){a._reactRootContainer=null;a[uf]=null})}),!0):!1};exports.unstable_batchedUpdates=Qk;\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!ol(c))throw Error(p(200));if(null==a||void 0===a._reactInternals)throw Error(p(38));return rl(a,b,c,!1,d)};exports.version=\"18.3.1-next-f1338f8080-20240426\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nexport { _objectSpread2 as default };","// Level configuration for Dice Chess\nimport type { StoryCard } from \"./types\";\n\nexport type EquipType = \"sword\" | \"shield\" | \"lance\" | \"torch\" | \"bow\" | \"staff\" | \"crystal_ball\" | \"disguise\" | \"scythe\" | \"banner\" | \"curse\" | \"skull\" | \"purse\";\nexport type PieceType = \"K\" | \"Q\" | \"R\" | \"B\" | \"N\" | \"P\";\n\n// Terrain cell types with optional obstacles in parentheses\n// Examples: \"F\", \"W\", \"_\", \"n\", \"W(Rock)\", \"F(Rock)\", \"_(Rock)\"\n// Terrain: F=forest, W=water, _=none/empty, n=random\n// Obstacles: Rock (can be placed on any terrain)\nexport type TerrainConfigCell = string; // Flexible to support \"W(Rock)\" style notation\n\nexport interface NamedPiece {\n  type: PieceType;\n  name: string;\n  equip?: EquipType;\n  speechLines?: string[]; // Custom speech lines for this featured piece\n}\n\nexport type BotBehavior = \"aggressive\" | \"defensive\" | \"balanced\";\nexport type VictoryCondition = \"king_beheaded\" | \"king_captured\" | \"king_dishonored\" | \"king_escaped\";\n\nexport interface LevelConfig {\n  level: number;\n  name: string;\n  boardSize: number;\n  startingGold: number;\n  enemyArmyGold?: number; // DEPRECATED: Legacy field - falls back to this if enemyPieceGold/enemyEquipmentGold not specified. Use enemyPieceGold and enemyEquipmentGold for better control.\n  playerArmyGold?: number; // DEPRECATED: Legacy field - falls back to this if playerPieceGold/playerEquipmentGold not specified. Use playerPieceGold and playerEquipmentGold for better control.\n  // Optional: Separate gold pools for pieces and equipment (more control)\n  enemyPieceGold?: number; // Gold specifically for enemy pieces (if not set, uses enemyArmyGold as fallback)\n  enemyEquipmentGold?: number; // Gold specifically for enemy equipment randomization - controls how many pieces get equipment (if not set, uses enemyArmyGold as fallback)\n  playerPieceGold?: number; // Gold specifically for player pieces (if not set, uses playerArmyGold as fallback)\n  playerEquipmentGold?: number; // Gold specifically for player equipment randomization - controls how many pieces get equipment (if not set, uses playerArmyGold as fallback)\n  // Optional: Difficulty-specific gold overrides (if provided, these override the base values above)\n  difficultySettings?: {\n    easy?: {\n      enemyPieceGold?: number;\n      enemyEquipmentGold?: number;\n      playerPieceGold?: number;\n      playerEquipmentGold?: number;\n      guaranteedPieces?: {\n        black?: Array<{ type: PieceType; equip?: EquipType }>;\n        white?: Array<{ type: PieceType; equip?: EquipType }>;\n      };\n    };\n    hard?: {\n      enemyPieceGold?: number;\n      enemyEquipmentGold?: number;\n      playerPieceGold?: number;\n      playerEquipmentGold?: number;\n      guaranteedPieces?: {\n        black?: Array<{ type: PieceType; equip?: EquipType }>;\n        white?: Array<{ type: PieceType; equip?: EquipType }>;\n      };\n    };\n  }\n  // Optional: Pawn budget allocation (0.0 to 1.0) - percentage of piece gold to spend on pawns before generating other pieces\n  enemyPawnBudget?: number; // Percentage of enemyPieceGold to allocate for pawns (e.g., 0.3 = 30% for pawns, 70% for back-rank pieces)\n  playerPawnBudget?: number; // Percentage of playerPieceGold to allocate for pawns (e.g., 0.3 = 30% for pawns, 70% for back-rank pieces)\n  // Optional: Guaranteed pieces that must spawn (don't consume gold budget)\n  guaranteedPieces?: {\n    black?: Array<{ type: PieceType; equip?: EquipType }>; // Pieces that must spawn for black\n    white?: Array<{ type: PieceType; equip?: EquipType }>; // Pieces that must spawn for white\n  };\n  // Optional: Fixed terrain matrix. If not provided, uses random generation\n  // Each row represents a board row (from white's side to black's side)\n  // F=forest, W=water, _=empty, n=random\n  // Obstacles can be added with parentheses: \"W(Rock)\", \"F(Rock)\", \"_(Rock)\"\n  terrainMatrix?: TerrainConfigCell[][];\n  // Optional: Custom name for white king\n  whiteKingName?: string;\n  // Optional: Named white pieces with specific equipment (spawned with priority)\n  namedWhitePieces?: NamedPiece[];\n  // Optional: Named black pieces with specific equipment\n  namedBlackPieces?: NamedPiece[];\n  // Bot AI behavior for this level\n  botBehavior?: BotBehavior; // Defaults to \"balanced\" if not specified\n  // Story cards for this level (shown before market)\n  storyCards?: StoryCard[];\n  // Items available for randomization (black and white) and purchase (white only)\n  availableItems: {\n    blackRandomization: EquipType[];\n    whiteRandomization: EquipType[];\n    whitePurchase: EquipType[];\n  };\n  // Victory conditions for this level (defaults to all three if not specified)\n  victoryConditions?: VictoryCondition[];\n  // Victory conditions to display in the QUEST panel (defaults to all victoryConditions if not specified)\n  // This allows hiding some conditions from the UI while still allowing them in gameplay\n  displayedVictoryConditions?: VictoryCondition[];\n  // Pawn promotion type (defaults to \"Q\" if not specified)\n  pawnPromotionType?: PieceType;\n  // Speech lines for courtier obstacles\n  courtierSpeechLines?: string[];\n  // Chance for each courtier to speak when the timer triggers (0.0 to 1.0, defaults to 0.3)\n  courtierSpeechChance?: number;\n  // Interval range in milliseconds between courtier speech checks (defaults to [2000, 5000])\n  // Each check uses a random value between min and max for more natural timing\n  courtierSpeechInterval?: number | { min: number; max: number };\n  // Whether the market is available for this level (defaults to true)\n  marketEnabled?: boolean;\n  // Which pieces are available for purchase in the market (defaults to all except King: [\"Q\", \"R\", \"B\", \"N\", \"P\"])\n  availablePieces?: PieceType[];\n  // Which pieces are available for randomization when generating armies (defaults to all pieces: [\"Q\", \"R\", \"B\", \"N\", \"P\"])\n  randomizationPieces?: {\n    black?: PieceType[]; // Piece types that can be randomly generated for black army\n    white?: PieceType[]; // Piece types that can be randomly generated for white army\n  };\n  // Number of enemy rows initially hidden by fog (defaults to 2 if not specified)\n  // Controls how many rows from the enemy back rank are fogged at the start\n  fogRows?: number;\n  // Random terrain pool configuration for cells marked as \"n\" in terrainMatrix\n  // Specifies how many of each terrain type/obstacle should be randomly placed\n  // Example: { \"rock\": 2, \"forest\": 6, \"water\": 8 }\n  randomTerrainPool?: {\n    rock?: number;    // Number of rock obstacles to place\n    forest?: number;  // Number of forest tiles to place\n    water?: number;   // Number of water tiles to place\n  };\n  // Quest narration text displayed in the quest panel\n  questNarration?: string;\n  // Custom descriptions for victory conditions (overrides defaults)\n  // Maps condition name to description text\n  victoryConditionDescriptions?: Partial<Record<VictoryCondition, string>>;\n  // Optional objectives that award bonus gold when completed\n  optionalObjectives?: import(\"./types\").OptionalObjective[];\n}\n\n// Define all available equipment (for fallback scaling)\nconst ALL_ITEMS: EquipType[] = [\n  \"sword\",\n  \"shield\",\n  \"lance\",\n  \"torch\",\n  \"bow\",\n  \"staff\",\n  \"crystal_ball\",\n  \"disguise\",\n  \"scythe\",\n  \"banner\",\n  \"curse\",\n  \"skull\",\n  \"purse\"\n];\n\n// White-side items exclude Purse (black-only drop)\nconst WHITE_ITEMS: EquipType[] = ALL_ITEMS.filter((item) => item !== \"purse\");\n\n// Cache for loaded level configs to avoid redundant fetches\nconst configCache = new Map<number, LevelConfig>();\n\n/**\n * Loads a level configuration from a JSON file in /public/levels/\n * @param level - The level number to load\n * @returns Promise resolving to the level configuration\n */\nexport async function loadLevelConfig(level: number): Promise<LevelConfig> {\n  // ALWAYS reload during development - skip cache\n  // if (configCache.has(level)) {\n  //   return configCache.get(level)!;\n  // }\n\n  try {\n    const response = await fetch(`${process.env.PUBLIC_URL}/levels/level${level}.json?t=${Date.now()}`, {\n      cache: \"no-cache\" // Ensure fresh data during development\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to load level ${level}: ${response.statusText}`);\n    }\n\n    const config: LevelConfig = await response.json();\n    \n    // Validate the config has required fields\n    if (!config.level || !config.name || !config.boardSize) {\n      throw new Error(`Invalid level config for level ${level}`);\n    }\n\n    // Don't cache during development to allow hot reloading\n    // configCache.set(level, config);\n    \n    return config;\n  } catch (error) {\n    console.warn(`Failed to load level ${level} from JSON, using fallback`, error);\n    \n    // If level doesn't exist, return a scaled fallback based on level 5\n    const fallbackConfig: LevelConfig = {\n      level,\n      name: `Level ${level}`,\n      boardSize: Math.min(9 + Math.floor((level - 5) / 2), 12), // Cap at 12x12\n      startingGold: 0,\n      enemyArmyGold: 480 + (level - 5) * 70, // Scale up by 70 gold per level\n      playerArmyGold: 0,\n      botBehavior: \"balanced\",\n      availableItems: {\n        blackRandomization: ALL_ITEMS,\n        whiteRandomization: WHITE_ITEMS,\n        whitePurchase: WHITE_ITEMS\n      },\n      marketEnabled: true,\n      availablePieces: [\"Q\", \"R\", \"B\", \"N\", \"P\"]\n    };\n\n    // Cache the fallback\n    configCache.set(level, fallbackConfig);\n    \n    return fallbackConfig;\n  }\n}\n\n/**\n * Synchronous version for backward compatibility - uses cache only\n * @deprecated Use loadLevelConfig instead for proper async loading\n */\nexport function getLevelConfig(level: number): LevelConfig {\n  const cached = configCache.get(level);\n  if (cached) {\n    return cached;\n  }\n  \n  // Return a minimal fallback if not cached\n  console.warn(`getLevelConfig called for level ${level} before it was loaded. Use loadLevelConfig instead.`);\n  return {\n    level,\n    name: `Level ${level}`,\n    boardSize: 8,\n    startingGold: 0,\n    enemyArmyGold: 300,\n    playerArmyGold: 0,\n    availableItems: {\n      blackRandomization: ALL_ITEMS,\n      whiteRandomization: WHITE_ITEMS,\n      whitePurchase: WHITE_ITEMS\n    },\n    marketEnabled: true,\n    availablePieces: [\"Q\", \"R\", \"B\", \"N\", \"P\"]\n  };\n}\n\n/**\n * Preload a level configuration into cache\n * Useful for loading the next level in the background\n */\nexport function preloadLevelConfig(level: number): void {\n  loadLevelConfig(level).catch(err => {\n    console.warn(`Failed to preload level ${level}:`, err);\n  });\n}\n\n/**\n * Clear the configuration cache\n * Useful for development/hot reload\n */\nexport function clearConfigCache(): void {\n  configCache.clear();\n}\n","export const S = 7;\r\nexport const W = \"w\" as const;\r\nexport const B = \"b\" as const;\r\nexport const N = \"n\" as const; // Neutral color for rocks\r\nexport const RAD = 2;\r\n\r\nexport const VAL = { Q: 80, R: 50, B: 30, N: 35, P: 10 } as const;\r\n\r\nexport const PIECE_COSTS = {\r\n  Q: 80,\r\n  R: 50,\r\n  B: 30,\r\n  N: 35,\r\n  P: 10,\r\n  K: 0, // King cannot be purchased\r\n} as const;\r\n\r\nexport const ITEM_COSTS = {\r\n  sword: 10,\r\n  shield: 15,\r\n  lance: 15,\r\n  torch: 5,\r\n  bow: 20,\r\n  staff: 20,\r\n  crystal_ball: 5,\r\n  prayer_die: 70,\r\n  disguise: 15,\r\n  scythe: 50,\r\n  banner: 30,\r\n  curse: 20,\r\n  skull: 40,\r\n  purse: 0, // Not purchasable, black-only item\r\n} as const;\r\n\r\n// Animation timing presets\r\nexport const TIMING = {\r\n  normal: {\r\n    roll: 950,\r\n    linger: 400,\r\n    mods: 300,\r\n    total: 300,\r\n    winnerHold: 400,\r\n    botThink: 300,\r\n    bubble: 3500,\r\n    rerollFinish: 1500,\r\n  },\r\n  fast: {\r\n    roll: 450,\r\n    linger: 150,\r\n    mods: 150,\r\n    total: 150,\r\n    winnerHold: 200,\r\n    botThink: 100,\r\n    bubble: 1600,\r\n    rerollFinish: 650,\r\n  },\r\n} as const;\r\n\r\n// Use white-outline glyphs for BOTH colors\r\nexport const GL = {\r\n  K: { w: \"\\u2654\", b: \"\\u265A\" }, // \r\n  Q: { w: \"\\u2655\", b: \"\\u265B\" }, // \r\n  R: { w: \"\\u2656\", b: \"\\u265C\" }, // \r\n  B: { w: \"\\u2657\", b: \"\\u265D\" }, // \r\n  N: { w: \"\\u2658\", b: \"\\u265E\" }, // \r\n  P: { w: \"\\u2659\", b: \"\\u265F\" }, //  (black pawn glyph)\r\n  ROCK: { n: \"\" },\r\n  COURTIER: { n: \"\\u265F\" }, // Courtier NPC (uses black pawn glyph, colored brown)\r\n  COLUMN: { n: \"\" }, // Indestructible column\r\n  GATE: { n: \"\" }, // Gate obstacle (requires 3+ to break)\r\n  BELL: { n: \"\" }, // Bell of Names (protects black king while intact)\r\n} as const;\r\n\r\nexport const PHRASES = {\r\n  w: {\r\n    win: [\r\n      \"Have at thee, ye **muckworm**!\",\r\n      \"A **fine** blow!\",\r\n      \"Quite tidy.\",\r\n      \"Off with thee!\",\r\n      \"The scoundrel falls!\",\r\n      \"For glory!\",\r\n      \"Take that, addle-pated hedgepig!\",\r\n      \"Begone!\",\r\n      \"One **hates** to brag.\",\r\n      \"See ya in hell, ye **lubber**!\",\r\n    ],\r\n    lose: [\r\n      \"Fie and fiddlesticks!\",\r\n      \"Cursed luck!\",\r\n      \"A **pox** on thy brood, knave!\",\r\n      \"Treachery!\",\r\n      \"The knave got lucky!\",\r\n      \"**Touch**\",\r\n      \"Mustn't grumble, but I shall.\",\r\n      \"Most unsporting for me.\",\r\n      \"Most irregular.\",\r\n      \"The cur got lucky, mark me!\",\r\n      \"You goatish skainsmate!\",\r\n      \"Ya foul bogsnot.\",\r\n    ],\r\n  },\r\n  b: {\r\n    win: [\r\n      \"Magnifique!\",\r\n      \"Out you go, imbcile.\",\r\n      \"Prcis, implacable, lgant.\",\r\n      \"Get rekt, mon gars.\",\r\n      \"Quelle victoire !\",\r\n      \"Superbe!\",\r\n      \"Formidable!\",\r\n      \"C'est fini pour toi\",\r\n      \"Retourne chez maman!\",\r\n      \"Quelle gifle!\",\r\n      \"Voil l'art royal!\",\r\n    ],\r\n    lose: [\r\n      \"Merde alors\",\r\n      \"La fortune m'abandonne.\",\r\n      \"Hlas, quelle inconvenance.\",\r\n      \"Zut alors!\",\r\n      \"Sacrebleu!\",\r\n      \"Impossible!\",\r\n      \"Mon Dieu!\",\r\n      \"Quelle audaceje vous salue.\",\r\n      \"L'lgance survit  la dfaite.\",\r\n      \"Bordel, a pique.\",\r\n    ],\r\n  },\r\n};\r\n\r\nexport const NAMED_PHRASES = {\r\n  w: {\r\n    win: [\r\n      \"Triumph for [UnitName].\",\r\n      \"[UnitName] smites and stands.\",\r\n      \"Glory to [UnitName].\",\r\n      \"[UnitName] breaks them.\",\r\n      \"The day is [UnitName]'s.\",\r\n      \"[UnitName] carries the field.\",\r\n      \"Routed by [UnitName].\",\r\n      \"[UnitName] proves stout.\",\r\n      \"Make way for [UnitName].\",\r\n      \"[UnitName] wins the hour.\",\r\n      \"None stand 'gainst [UnitName].\",\r\n      \"[UnitName] hews a path.\",\r\n      \"Honor crowns [UnitName].\",\r\n      \"[UnitName] will not yield.\",\r\n      \"[UnitName] strikes true.\",\r\n      \"Another for [UnitName].\",\r\n      \"Onward, [UnitName].\",\r\n      \"Steel sang, and [UnitName] kept the tune.\",\r\n      \"[UnitName], rabblescatter\",\r\n      \"The day is [UnitName]'s; let none gainsay it.\",\r\n    ],\r\n    lose: [\r\n      \"A pox on thee! [UnitName] has fallen!\",\r\n      \"[UnitName] fought bravely.\",\r\n      \"Cursed luck! Farewell, [UnitName].\",\r\n      \"Fie! They got [UnitName]!\",\r\n      \"Silence for [UnitName].\",\r\n      \"[UnitName] pays the price.\",\r\n      \"Darkness takes [UnitName].\",\r\n      \"[UnitName] is spent.\",\r\n      \"Earth claims [UnitName].\",\r\n      \"Thus ends [UnitName]; remember it well.\",\r\n      \"[UnitName] hath breathed their last.\",\r\n      \"Lo, [UnitName] is laid low.\",\r\n      \"The earth drinketh the blood of [UnitName].\",\r\n      \"Ashes claim [UnitName]; the tale is told.\",\r\n      \"Here lieth [UnitName], undone by fate.\",\r\n      \"[UnitName] went bold; death went bolder.\",\r\n    ],\r\n    taunt: [\r\n      \"Begone, [UnitName]!\",\r\n      \"And so falls [UnitName]!\",\r\n      \"A poor showing from [UnitName].\",\r\n      \"Was that thy best, [UnitName]?\",\r\n      \"Too slow by half, [UnitName].\",\r\n      \"Your boast ends here, [UnitName].\",\r\n      \"Rest that empty helm, [UnitName].\",\r\n      \"Thus much for thee, [UnitName].\",\r\n      \"Fame dodged you, [UnitName].\",\r\n      \"Mind the worms, [UnitName].\",\r\n      \"Your legend was brief, [UnitName].\",\r\n      \"Taste mud, [UnitName].\",\r\n      \"Down you go, [UnitName].\",\r\n      \"Bested and best left, [UnitName].\",\r\n      \"Hold that pose, [UnitName].\",\r\n      \"Grave manners, [UnitName].\",\r\n      \"I'll send flowers to your sister, [UnitName].\",\r\n    ],\r\n  },\r\n  b: {\r\n    win: [\r\n      \"Magnifique, [UnitName]!\",\r\n      \"[UnitName] sends their regards.\",\r\n      \"A flawless victory for [UnitName]!\",\r\n      \"C'est fini! [UnitName] triumphs!\",\r\n      \"[UnitName] ne pardonne pas.\",\r\n      \"[UnitName] est inarrtable.\",\r\n      \"[UnitName] c'est une menace!\",\r\n    ],\r\n    lose: [\r\n      \"Merde! [UnitName] is lost!\",\r\n      \"Hlas, [UnitName]...\",\r\n      \"Impossible ! Ils ont vaincu [UnitName]!\",\r\n      \"[UnitName] sera veng!\",\r\n      \"Repos pour [UnitName].\",\r\n      \"[UnitName] perd le jour.\",\r\n      \"Fin pour [UnitName].\",\r\n      \"Putain. [UnitName] tombe.\",\r\n    ],\r\n    taunt: [\r\n      \"Adieu, [UnitName].\",\r\n      \"C'est un triste jour pour tre, [UnitName]!\",\r\n      \"Misrable, [UnitName]!\",\r\n      \"Au revoir, [UnitName]!\",\r\n      \" genoux, [UnitName] !\",\r\n    ],\r\n  },\r\n};\r\n\r\nexport const SWING_PHRASES = {\r\n  w: [\r\n    \"A turning of the tides!\",\r\n    \"A jolly good blunder.\",\r\n    \"A most satisfactory conclusion, yes?\",\r\n    \"Capital manoeuvre, if I may say.\",\r\n    \"Thou shalt not recover from this mighty blow!\",\r\n    \"A pivotal moment!\",\r\n    \"Press the advantage!\",\r\n    \"A most encouraging gift.\",\r\n  ],\r\n  b: [\r\n    \"Parbleula perfection a parl.\",\r\n    \"La position respire!\",\r\n    \"Le vent tourne!\",\r\n    \"Un coup dvastateur!\",\r\n    \"C'est le dbut de la fin!\",\r\n    \"Grosse swingtenez bon, les gars!\",\r\n    \"Un moment charnire!\",\r\n  ],\r\n};\r\n\r\nexport const ITEM_DESCRIPTIONS = {\r\n  sword: \" Sword: +1 to attack rolls.\",\r\n  shield: \" Shield: +1 to defense rolls.\",\r\n  lance:\r\n    \" Mount: Charge forward 2 squares with Advantage; Mount breaks after use.\",\r\n  scythe: \" Scythe: Always rolls a 6 against Pawns.\",\r\n  banner: \" Banner: Friendly units within 1 square gain a Shield bonus.\",\r\n  curse: \" Curse: When this unit dies, stuns adjacent pieces for 1 turn. Cannot be sold.\",\r\n  skull: \" Skull: When this unit dies, the attacker dies with it.\",\r\n  torch:\r\n    \" Torch: Unit sees 3 squares away (normally 2) and gains Advantage when attacking into a Forest.\",\r\n  bow: \" Bow: Survive your first failed attack; Bow breaks after use.\",\r\n  staff: \" Staff: On a win, convert the defender to your side; staff breaks.\",\r\n  crystal_ball:\r\n    \" Crystal Ball: One-time swap with an adjacent friendly or neutral unit.\",\r\n  prayer_die:\r\n    \" Prayer Die: Consume to reroll both dice after a failed attack or defense.\",\r\n  disguise:\r\n    \" Disguise: Unit appears and moves as a Pawn. You can break the disguise on your turn to reveal the original unit.\",\r\n  purse: \" Purse: When unit is killed, grants 25 gold.\",\r\n};\r\n\r\nexport const PIECE_DESCRIPTIONS = {\r\n  K: \" King: The leader of your army. Moves one square in any direction. Attacks with Advantage (roll 2 dice, keep highest). If captured, you lose.\",\r\n  Q: \" Queen: Moves any number of squares along a rank, file, or diagonal.\",\r\n  R: \" Rook: Moves any number of squares along a rank or file.\",\r\n  B: \" Bishop: Moves any number of squares diagonally.\",\r\n  N: ' Knight: Moves in an \"L\" shape: two squares in a cardinal direction, then one square perpendicular.',\r\n  P: \" Pawn: Moves one square forward. Captures one square diagonally forward.\",\r\n};\r\n\r\nexport const PIECE_NAMES = {\r\n  K: \"King\",\r\n  Q: \"Queen\",\r\n  R: \"Rook\",\r\n  B: \"Bishop\",\r\n  N: \"Knight\",\r\n  P: \"Pawn\",\r\n} as const;\r\n\r\n","import React, { useState, useEffect, useRef } from \"react\";\nimport type {\n  StoryCard as StoryCardType,\n  StoryEvent,\n  Equip,\n  OutcomeData,\n} from \"./types\";\nimport { GL } from \"./constants\";\n\nconst equipIcon = (e: Equip) =>\n  e === \"sword\"\n    ? \"\"\n    : e === \"shield\"\n    ? \"\"\n    : e === \"lance\"\n    ? \"\"\n    : e === \"torch\"\n    ? \"\"\n    : e === \"bow\"\n    ? \"\"\n    : e === \"staff\"\n    ? \"\"\n    : e === \"crystal_ball\"\n    ? \"\"\n    : e === \"disguise\"\n    ? \"\"\n    : e === \"scythe\"\n    ? \"\"\n    : e === \"banner\"\n    ? \"\"\n    : e === \"curse\"\n    ? \"\"\n    : e === \"skull\"\n    ? \"\"\n    : e === \"purse\"\n    ? \"\"\n    : null;\n\ninterface StoryCardProps {\n  card: StoryCardType;\n  onChoice: (events: StoryEvent[]) => void;\n  outcomeMode?: {\n    outcomes: OutcomeData[];\n    onContinue: () => void;\n  };\n  enableIdleAnimation?: boolean;\n}\n\nconst StoryCard: React.FC<StoryCardProps> = ({ card, onChoice, outcomeMode, enableIdleAnimation = false }) => {\n  const [dragX, setDragX] = useState(0);\n  const [isDragging, setIsDragging] = useState(false);\n  const [startX, setStartX] = useState(0);\n  const dragXRef = useRef(0);\n  const [displayedText, setDisplayedText] = useState(\"\");\n  const [isAnimating, setIsAnimating] = useState(false);\n  const audioCtxRef = useRef<AudioContext | null>(null);\n  const animationIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  const ensureAudioContext = () => {\n    if (!audioCtxRef.current) {\n      const Ctx = (window as any).AudioContext || (window as any).webkitAudioContext;\n      if (Ctx) {\n        audioCtxRef.current = new Ctx();\n      }\n    }\n    return audioCtxRef.current;\n  };\n\n  const playTextBlip = () => {\n    try {\n      const ctx = ensureAudioContext();\n      if (!ctx) return;\n      if (ctx.state === \"suspended\") ctx.resume().catch(() => {});\n      const osc = ctx.createOscillator();\n      const gain = ctx.createGain();\n      const filter = ctx.createBiquadFilter();\n      osc.type = \"square\";\n      osc.frequency.value = 380; // medieval-ish\n      filter.type = \"lowpass\";\n      filter.frequency.value = 1200;\n      const now = ctx.currentTime;\n      gain.gain.setValueAtTime(0.0001, now);\n      gain.gain.exponentialRampToValueAtTime(0.04, now + 0.01);\n      gain.gain.exponentialRampToValueAtTime(0.0001, now + 0.09);\n      osc.connect(filter);\n      filter.connect(gain);\n      gain.connect(ctx.destination);\n      osc.start(now);\n      osc.stop(now + 0.1);\n    } catch (e) {}\n  };\n\n  const SWIPE_THRESHOLD = 80; // pixels needed to trigger choice\n  const MAX_DRAG = 120; // maximum drag distance\n\n  // Sound effects\n  const playButtonClickSound = () => {\n    try {\n      const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2W67OeeSwwPUKvl8bVjHAU2jdXxz3ktBSh+zPLaizsKFF+z6OyoVRQKRp/g8r5sIQUrgs/y2Ik2CBlmu+znmksNEE6r5fG2YhwGOI3V8c95LQUofsvw2os4ChRgs+jrqFUUCkWd4O++bSEGKoLN8tmJNggaaLvs6Z5MEA9Nq+XytmMcBjiO1PHPeS0FJ37L8NqLOAoUYLPo66hVFApFneHvvmwhBSmCzvHaiTcIGmi77OmeSwwPTqvl8rVkHAU3');\n      audio.volume = 0.15;\n      audio.play().catch(() => {});\n    } catch (e) {}\n  };\n\n  const playSwipeSound = () => {\n    try {\n      const ctx = ensureAudioContext();\n      if (!ctx) return;\n      if (ctx.state === \"suspended\") ctx.resume().catch(() => {});\n      const duration = 0.18;\n      const sr = ctx.sampleRate;\n      const buffer = ctx.createBuffer(1, Math.floor(sr * duration), sr);\n      const data = buffer.getChannelData(0);\n      for (let i = 0; i < data.length; i++) data[i] = (Math.random() * 2 - 1) * (1 - i / data.length);\n      const src = ctx.createBufferSource();\n      src.buffer = buffer;\n      const filter = ctx.createBiquadFilter();\n      filter.type = \"bandpass\";\n      filter.frequency.value = 1000;\n      filter.Q.value = 0.6;\n      const gain = ctx.createGain();\n      const now = ctx.currentTime;\n      gain.gain.setValueAtTime(0.0001, now);\n      gain.gain.exponentialRampToValueAtTime(0.15, now + 0.02);\n      gain.gain.exponentialRampToValueAtTime(0.0001, now + duration);\n      src.connect(filter);\n      filter.connect(gain);\n      gain.connect(ctx.destination);\n      src.start(now);\n      src.stop(now + duration);\n    } catch (e) {}\n  };\n\n  const playRewardSound = () => {\n    try {\n      const ctx = ensureAudioContext();\n      if (!ctx) return;\n      if (ctx.state === \"suspended\") ctx.resume().catch(() => {});\n      \n      const now = ctx.currentTime;\n      const gain = ctx.createGain();\n      gain.gain.setValueAtTime(0.0001, now);\n      gain.gain.exponentialRampToValueAtTime(0.3, now + 0.01);\n      gain.gain.exponentialRampToValueAtTime(0.0001, now + 0.8);\n      \n      // Create ascending arpeggio for reward feel\n      const notes = [523.25, 659.25, 783.99, 1046.50]; // C5, E5, G5, C6\n      notes.forEach((freq, i) => {\n        const osc = ctx.createOscillator();\n        osc.type = \"sine\";\n        osc.frequency.setValueAtTime(freq, now + i * 0.08);\n        osc.connect(gain);\n        osc.start(now + i * 0.08);\n        osc.stop(now + i * 0.08 + 0.25);\n      });\n      \n      gain.connect(ctx.destination);\n    } catch (e) {}\n  };\n\n  // Play reward sound when outcomes appear\n  useEffect(() => {\n    if (outcomeMode && outcomeMode.outcomes.length > 0) {\n      playRewardSound();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [outcomeMode]);\n\n  // Complete text animation immediately (called when card is swiped)\n  const completeTextAnimation = () => {\n    if (animationIntervalRef.current) {\n      clearInterval(animationIntervalRef.current);\n      animationIntervalRef.current = null;\n    }\n    // Set text to full immediately\n    const fullText = card.bodyText.replace(/\\*\\*/g, '');\n    setDisplayedText(fullText);\n    setIsAnimating(false);\n  };\n\n  // Animate text letter by letter\n  useEffect(() => {\n    if (outcomeMode) return; // Don't animate in outcome mode\n    \n    // Remove ** markers from text for animation (we'll add styling via parseText)\n    const text = card.bodyText.replace(/\\*\\*/g, '');\n    setDisplayedText(\"\");\n    setIsAnimating(true);\n\n    let currentIndex = 0;\n    const interval = setInterval(() => {\n      if (currentIndex < text.length) {\n        setDisplayedText(text.substring(0, currentIndex + 1));\n        currentIndex++;\n        \n        // Play sound every few characters\n        if (currentIndex % 3 === 0) {\n          playTextBlip();\n        }\n      } else {\n        clearInterval(interval);\n        animationIntervalRef.current = null;\n        setIsAnimating(false);\n      }\n    }, 30); // 30ms per character\n\n    animationIntervalRef.current = interval;\n\n    return () => {\n      if (animationIntervalRef.current) {\n        clearInterval(animationIntervalRef.current);\n        animationIntervalRef.current = null;\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [card.bodyText, outcomeMode]);\n\n  // Parse text with **emphasis** - works with original bodyText structure\n  const parseText = (displayText: string) => {\n    // Parse original bodyText to find emphasis markers\n    const originalText = card.bodyText;\n    const parts = originalText.split(/(\\*\\*.*?\\*\\*)/g);\n    \n    let currentPos = 0;\n    const elements: JSX.Element[] = [];\n    \n    parts.forEach((part, idx) => {\n      if (!part) return;\n      \n      if (part.startsWith('**') && part.endsWith('**') && part.length > 4) {\n        const innerText = part.slice(2, -2); // Remove ** markers\n        const partLength = innerText.length;\n        \n        // Check if this part should be displayed based on displayText length\n        const visibleLength = Math.max(0, Math.min(partLength, displayText.length - currentPos));\n        \n        if (visibleLength > 0) {\n          elements.push(\n            <span key={idx} className=\"speech-emphasis\">\n              {innerText.substring(0, visibleLength).split('').map((letter, i) => (\n                <span\n                  key={i}\n                  className=\"speech-letter\"\n                  style={{ animationDelay: `${i * 0.1}s` }}\n                >\n                  {letter}\n                </span>\n              ))}\n            </span>\n          );\n        }\n        currentPos += partLength;\n      } else {\n        // Regular text\n        const partLength = part.length;\n        const visibleLength = Math.max(0, Math.min(partLength, displayText.length - currentPos));\n        \n        if (visibleLength > 0) {\n          elements.push(<span key={idx}>{part.substring(0, visibleLength)}</span>);\n        }\n        currentPos += partLength;\n      }\n    });\n    \n    return elements;\n  };\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    setIsDragging(true);\n    setStartX(e.clientX);\n  };\n\n  // Use document-level event listeners for dragging to work outside the container\n  useEffect(() => {\n    if (!isDragging) return;\n\n    const handleDocumentMouseMove = (e: MouseEvent) => {\n      const diff = e.clientX - startX;\n      // Clamp drag between -MAX_DRAG and MAX_DRAG\n      const clampedDrag = Math.max(-MAX_DRAG, Math.min(MAX_DRAG, diff));\n      dragXRef.current = clampedDrag;\n      setDragX(clampedDrag);\n      \n      // Complete text animation immediately if user crosses swipe threshold\n      if (animationIntervalRef.current && (Math.abs(clampedDrag) >= SWIPE_THRESHOLD)) {\n        completeTextAnimation();\n      }\n    };\n\n    const handleDocumentMouseUp = () => {\n      const currentDragX = dragXRef.current;\n      \n      // Complete text animation immediately if still animating (before processing swipe)\n      if (animationIntervalRef.current) {\n        completeTextAnimation();\n      }\n      \n      // Stop dragging and reset position first\n      setIsDragging(false);\n      setDragX(0);\n      dragXRef.current = 0;\n      \n      // Then handle choice after state is updated\n      setTimeout(() => {\n        if (currentDragX < -SWIPE_THRESHOLD) {\n          // Swiped left - play swipe sound\n          playSwipeSound();\n          onChoice(card.leftChoice.events);\n        } else if (currentDragX > SWIPE_THRESHOLD) {\n          // Swiped right - play swipe sound\n          playSwipeSound();\n          onChoice(card.rightChoice.events);\n        }\n      }, 0);\n    };\n\n    document.addEventListener('mousemove', handleDocumentMouseMove);\n    document.addEventListener('mouseup', handleDocumentMouseUp);\n\n    return () => {\n      document.removeEventListener('mousemove', handleDocumentMouseMove);\n      document.removeEventListener('mouseup', handleDocumentMouseUp);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isDragging, startX]);\n\n  // Calculate opacity for choice text based on drag distance\n  const leftOpacity = Math.max(0, Math.min(1, -dragX / SWIPE_THRESHOLD));\n  const rightOpacity = Math.max(0, Math.min(1, dragX / SWIPE_THRESHOLD));\n\n  // Get overlay background style for left choice\n  const getLeftOverlayStyle = () => {\n    if (card.leftChoice.overlayColor) {\n      return {\n        opacity: leftOpacity,\n        background: `linear-gradient(to right, ${card.leftChoice.overlayColor}, transparent)`,\n      };\n    }\n    // Default behavior - use CSS classes\n    return { opacity: leftOpacity };\n  };\n\n  // Get overlay background style for right choice\n  const getRightOverlayStyle = () => {\n    if (card.rightChoice.overlayColor) {\n      return {\n        opacity: rightOpacity,\n        background: `linear-gradient(to left, ${card.rightChoice.overlayColor}, transparent)`,\n      };\n    }\n    // Default behavior - use CSS classes\n    return { opacity: rightOpacity };\n  };\n\n  // Get character display (styled like board pieces)\n  const getCharacterDisplay = () => {\n    if (!card.character) return null;\n\n    const pieceGlyphSet = GL[card.character.type as keyof typeof GL];\n    const colorKey = card.character.color as \"w\" | \"b\";\n    const glyph =\n      pieceGlyphSet && colorKey in pieceGlyphSet ? pieceGlyphSet[colorKey as keyof typeof pieceGlyphSet] : \"?\";\n\n    return (\n      <div className=\"piece-container\" style={{ width: '88px', height: '88px' }}>\n        <span className={`chip ${card.character.color === \"w\" ? \"pw\" : \"pb\"}`}>\n          {glyph}\n        </span>\n        {card.character.equip && (\n          <span className=\"equip-icon\">\n            {equipIcon(card.character.equip)}\n          </span>\n        )}\n        {card.character.name && card.character.name !== \"Narrator\" && (\n          <span className=\"piece-name preconfigured\">\n            {card.character.name}\n          </span>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"story-card-container\" onMouseDown={() => ensureAudioContext()?.resume().catch(() => {})}>\n      <div className=\"story-card-overlay\" />\n\n      <div className=\"story-card\">\n        {/* Medieval framed miniature: Character + Speech - hidden in outcome mode */}\n        {!outcomeMode && card.character && card.character.name !== \"Narrator\" && (\n          <div className=\"story-miniature\">\n            <div className=\"miniature-frame\">\n              {/* Character portrait on left */}\n              <div className=\"miniature-character\">{getCharacterDisplay()}</div>\n\n              {/* Speech bubble coming from character */}\n              <div className=\"miniature-speech\">\n                <div className=\"speech-tail\" />\n                <div className=\"speech-content\">{parseText(displayedText)}</div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Body text for cards without character or Narrator mode - hidden in outcome mode */}\n        {!outcomeMode && (!card.character || card.character.name === \"Narrator\") && (\n          <div className=\"story-card-text\">{parseText(displayedText)}</div>\n        )}\n\n        {/* Outcome mode - show results */}\n        {outcomeMode ? (\n          <div className=\"story-outcome-area\">\n            <div className={outcomeMode.outcomes.length > 3 ? \"space-y-2\" : \"space-y-4\"}>\n              {outcomeMode.outcomes.map((outcome, idx) => {\n                const isCompact = outcomeMode.outcomes.length > 3;\n                return (\n                  <div\n                    key={idx}\n                    className={`${outcome.bgColor} border-2 ${outcome.borderColor} rounded-lg ${isCompact ? 'p-3' : 'p-5'} ${outcome.color} text-center font-bold shadow-lg transform transition-all duration-300`}\n                    style={{\n                      animation: `outcomeAppear 0.4s ease-out ${idx * 0.15}s both, outcomePulse 1s ease-in-out ${idx * 0.15 + 0.4}s both`,\n                    }}\n                  >\n                    <div className=\"flex items-center justify-center gap-3\">\n                      <span className={isCompact ? \"text-2xl\" : \"text-4xl\"} style={{ animation: `glyphSpin 0.6s ease-out ${idx * 0.15}s both` }}>\n                        {outcome.glyph}\n                      </span>\n                      <span className={isCompact ? \"text-lg\" : \"text-2xl\"} style={{ fontFamily: 'serif', textShadow: '2px 2px 4px rgba(0,0,0,0.8)' }}>{outcome.message}</span>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        ) : (\n          <>\n            {/* Swipeable image area */}\n            <div\n              className={`story-card-image-container ${!isDragging && !isAnimating && enableIdleAnimation ? 'idle-hint' : ''}`}\n              onMouseDown={handleMouseDown}\n            >\n              <div\n                className=\"story-card-image\"\n                style={{\n                  transform: !isDragging && !isAnimating && enableIdleAnimation \n                    ? undefined \n                    : `translateX(${dragX}px) rotate(${dragX * 0.02}deg)`,\n                  transition: isDragging ? \"none\" : \"transform 0.3s ease-out\",\n                  cursor: isDragging ? \"grabbing\" : \"grab\",\n                }}\n              >\n                {card.image ? (\n                  <img\n                    src={card.image.startsWith('http') || card.image.startsWith('data:') ? card.image : `${process.env.PUBLIC_URL}${card.image}`}\n                    alt=\"Story scene\"\n                    className=\"w-full h-full object-cover rounded-lg\"\n                    draggable=\"false\"\n                    onDragStart={(e) => e.preventDefault()}\n                    style={{ userSelect: 'none', pointerEvents: 'none' }}\n                  />\n                ) : (\n                  <div className=\"w-full h-full bg-gradient-to-br from-gray-700 to-gray-900 rounded-lg flex items-center justify-center text-gray-500\">\n                    [Image]\n                  </div>\n                )}\n\n                {/* Choice overlays when dragging */}\n                {isDragging && (\n                  <>\n                    <div\n                      className={`story-choice-overlay left ${card.character?.name === \"Narrator\" && !card.leftChoice.overlayColor ? \"narrator\" : \"\"}`}\n                      style={getLeftOverlayStyle()}\n                    >\n                      <div className=\"story-choice-text\">\n                         {card.leftChoice.text}\n                      </div>\n                    </div>\n\n                    <div\n                      className={`story-choice-overlay right ${card.character?.name === \"Narrator\" && !card.rightChoice.overlayColor ? \"narrator\" : \"\"}`}\n                      style={getRightOverlayStyle()}\n                    >\n                      <div className=\"story-choice-text\">\n                        {card.rightChoice.text} \n                      </div>\n                    </div>\n                  </>\n                )}\n\n                {/* Drag hint hand icon */}\n                {!isDragging && !isAnimating && enableIdleAnimation && (\n                  <div className=\"story-card-drag-hint\">\n                    \n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Hint text */}\n            <div className=\"story-card-hint\">Swipe the card left or right to choose</div>\n          </>\n        )}\n        {/* Continue button - positioned at bottom-right of the card when in outcome mode */}\n        {outcomeMode && (\n          <button\n            onClick={() => {\n              playButtonClickSound();\n              outcomeMode.onContinue();\n            }}\n            className=\"story-continue-arrow\"\n            aria-label=\"Continue\"\n            style={{ fontFamily: 'serif' }}\n          >\n            <span className=\"story-continue-text\">Continue</span>\n            <svg \n              width=\"28\" \n              height=\"28\" \n              viewBox=\"0 0 24 24\" \n              fill=\"none\" \n              stroke=\"currentColor\" \n              strokeWidth=\"3\" \n              strokeLinecap=\"round\" \n              strokeLinejoin=\"round\"\n            >\n              <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n              <polyline points=\"12 5 19 12 12 19\" />\n            </svg>\n          </button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default StoryCard;\n","import React, { useState } from \"react\";\r\n\r\ninterface MainMenuProps {\r\n  onEnter: () => void;\r\n}\r\n\r\nexport function MainMenu({ onEnter }: MainMenuProps) {\r\n  const [showChangelog, setShowChangelog] = useState(true);\r\n\r\n  const playButtonSound = () => {\r\n    try {\r\n      const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2W67OeeSwwPUKvl8bVjHAU2jdXxz3ktBSh+zPLaizsKFF+z6OyoVRQKRp/g8r5sIQUrgs/y2Ik2CBlmu+znmksNEE6r5fG2YhwGOI3V8c95LQUofsvw2os4ChRgs+jrqFUUCkWd4O++bSEGKoLN8tmJNggaaLvs6Z5MEA9Nq+XytmMcBjiO1PHPeS0FJ37L8NqLOAoUYLPo66hVFApFneHvvmwhBSmCzvHaiTcIGmi77OmeSwwPTqvl8rVkHAU3');\r\n      audio.volume = 0.15;\r\n      audio.play().catch(() => {});\r\n    } catch (e) {}\r\n  };\r\n\r\n  const Changelog = () => {\r\n    return (\r\n      <div className=\"space-y-3\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <h1 className=\"text-2xl font-semibold\">Changelog</h1>\r\n          <button\r\n            onClick={() => setShowChangelog((s) => !s)}\r\n            className=\"px-2 py-1 text-xs bg-amber-950 hover:bg-amber-900 rounded\"\r\n          >\r\n            {showChangelog ? \"Hide\" : \"Show\"}\r\n          </button>\r\n        </div>\r\n\r\n        {showChangelog && (\r\n          <div className=\"bg-stone-950/70 rounded-2xl p-3 text-sm space-y-2\">\r\n            <div className=\"font-semibold text-base pt-2\">\r\n              v0.6 - Tutorial, Music, & Optional Objectives\r\n            </div>\r\n            <ul className=\"ml-5 list-disc space-y-1\">\r\n              <li>\r\n                <strong>Tutorial Popups:</strong> New hint cards trigger when the player \r\n                starts a new level. These cards provide helpful tips and guidance.\r\n              </li>\r\n              <li>\r\n                <strong>Optional Objectives:</strong> Added a randomized and\r\n                level-based system to reward players for achieving optional goals.\r\n              </li>\r\n              <li>\r\n                <strong>Music:</strong> Each level now plays to its own tune.\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[1000] flex items-center justify-center p-4\"\r\n      style={{\r\n        background: 'radial-gradient(circle at 50% 50%, rgba(120, 53, 15, 0.3) 0%, rgba(28, 25, 23, 0.95) 50%, #0c0a09 100%)'\r\n      }}\r\n    >\r\n      {/* Medieval parchment-style container */}\r\n      <div className=\"relative w-full max-w-2xl\">\r\n        {/* Decorative corners */}\r\n        <div className=\"absolute -top-4 -left-4 text-6xl text-amber-600 opacity-50\"></div>\r\n        <div className=\"absolute -top-4 -right-4 text-6xl text-amber-600 opacity-50\"></div>\r\n        <div className=\"absolute -bottom-4 -left-4 text-6xl text-amber-600 opacity-50\"></div>\r\n        <div className=\"absolute -bottom-4 -right-4 text-6xl text-amber-600 opacity-50\"></div>\r\n\r\n        {/* Main parchment */}\r\n        <div \r\n          className=\"relative rounded-2xl p-8 text-center space-y-6 shadow-2xl\"\r\n          style={{\r\n            background: 'linear-gradient(135deg, #2d1810 0%, #1c1410 50%, #2d1810 100%)',\r\n            border: '4px solid',\r\n            borderImage: 'linear-gradient(135deg, #d4af37 0%, #f4e4a6 50%, #d4af37 100%) 1',\r\n            boxShadow: '0 0 40px rgba(212, 175, 55, 0.3), inset 0 0 60px rgba(0, 0, 0, 0.5)'\r\n          }}\r\n        >\r\n          {/* Title with medieval styling */}\r\n          <div className=\"space-y-2\">\r\n            <h1 \r\n              className=\"text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-b from-amber-200 via-amber-400 to-amber-600\"\r\n              style={{ \r\n                fontFamily: 'Georgia, serif',\r\n                textShadow: '0 2px 10px rgba(212, 175, 55, 0.5)'\r\n              }}\r\n            >\r\n              DiceChess\r\n            </h1>\r\n            <div className=\"flex items-center justify-center gap-3\">\r\n              <div className=\"h-px w-20 bg-gradient-to-r from-transparent via-amber-600 to-transparent\"></div>\r\n              <span className=\"text-amber-400 text-sm tracking-widest\" style={{ fontFamily: 'Georgia, serif' }}>\r\n                 PROJECT \r\n              </span>\r\n              <div className=\"h-px w-20 bg-gradient-to-r from-transparent via-amber-600 to-transparent\"></div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Enter button */}\r\n          <button\r\n            onClick={() => {\r\n              playButtonSound();\r\n              onEnter();\r\n            }}\r\n            className=\"relative px-12 py-4 rounded-xl font-bold text-2xl shadow-2xl transition-all hover:scale-105 group\"\r\n            style={{\r\n              background: 'linear-gradient(135deg, #d4af37 0%, #f4e4a6 50%, #d4af37 100%)',\r\n              color: '#1a1410',\r\n              boxShadow: '0 8px 24px rgba(212, 175, 55, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3)',\r\n              fontFamily: 'Georgia, serif',\r\n              letterSpacing: '0.1em'\r\n            }}\r\n          >\r\n            <span className=\"relative z-10\">ENTER</span>\r\n            <div className=\"absolute inset-0 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity\"\r\n              style={{\r\n                background: 'linear-gradient(135deg, #f4e4a6 0%, #d4af37 50%, #f4e4a6 100%)',\r\n              }}\r\n            ></div>\r\n          </button>\r\n\r\n          {/* Changelog section */}\r\n          <div \r\n            className=\"text-left max-h-[40vh] overflow-y-auto pr-2 rounded-lg p-4\"\r\n            style={{\r\n              background: 'rgba(28, 20, 16, 0.6)',\r\n              border: '2px solid rgba(212, 175, 55, 0.3)',\r\n              boxShadow: 'inset 0 2px 10px rgba(0, 0, 0, 0.5)'\r\n            }}\r\n          >\r\n            <Changelog />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","import { useEffect, useRef, useImperativeHandle, forwardRef } from 'react';\n\ntype MusicType = 'main_menu' | 'level' | 'end_game';\n\ninterface MusicManagerProps {\n  musicMuted: boolean;\n}\n\nexport interface MusicManagerHandle {\n  playMainMenuMusic: () => void;\n  playLevelMusic: (level: number) => void;\n  playEndGameMusic: () => void;\n  stopMusic: () => void;\n}\n\n// Music file paths\nconst MUSIC_FILES = {\n  mainMenu: `${process.env.PUBLIC_URL}/music/Main_Menu_ShadowedCrown.mp3`,\n  level1: [`${process.env.PUBLIC_URL}/music/level1_BetrayalatHighkeep.mp3`],\n  level2: [`${process.env.PUBLIC_URL}/music/level2_TheDarkHunt.mp3`, `${process.env.PUBLIC_URL}/music/level2_TheDarkHunt_2.mp3`],\n  level3: [`${process.env.PUBLIC_URL}/music/level3_PilgrimsPass.mp3`, `${process.env.PUBLIC_URL}/music/level3_PilgrimsPass_B.mp3`],\n  level4: [`${process.env.PUBLIC_URL}/music/level4_PontiffPintus.mp3`],\n  level5: [], // Placeholder - user will add files later\n  endGame: `${process.env.PUBLIC_URL}/music/End_Game_FallenThrone.mp3`,\n};\n\nexport const MusicManager = forwardRef<MusicManagerHandle, MusicManagerProps>(\n  ({ musicMuted }, ref) => {\n    const currentAudioRef = useRef<HTMLAudioElement | null>(null);\n    const currentPlaylistRef = useRef<string[]>([]);\n    const currentPlaylistIndexRef = useRef<number>(0);\n    const fadeIntervalRef = useRef<NodeJS.Timeout | null>(null);\n    const playlistActiveRef = useRef<boolean>(false);\n    const currentMusicTypeRef = useRef<{ type: MusicType; level?: number } | null>(null);\n\n    // Fade out current audio\n    const fadeOut = (onComplete?: () => void) => {\n      if (fadeIntervalRef.current) {\n        clearInterval(fadeIntervalRef.current);\n        fadeIntervalRef.current = null;\n      }\n\n      const audio = currentAudioRef.current;\n      if (!audio) {\n        onComplete?.();\n        return;\n      }\n\n      const fadeDuration = 1000; // 1 second fade\n      const fadeSteps = 20;\n      const fadeInterval = fadeDuration / fadeSteps;\n      const volumeStep = (audio.volume || 1) / fadeSteps;\n\n      let currentStep = 0;\n      fadeIntervalRef.current = setInterval(() => {\n        currentStep++;\n        if (currentStep >= fadeSteps) {\n          audio.pause();\n          audio.currentTime = 0;\n          if (fadeIntervalRef.current) {\n            clearInterval(fadeIntervalRef.current);\n            fadeIntervalRef.current = null;\n          }\n          onComplete?.();\n        } else {\n          audio.volume = Math.max(0, audio.volume - volumeStep);\n        }\n      }, fadeInterval);\n    };\n\n    // Play a single track\n    const playTrack = (src: string, volume: number = 0.5) => {\n      const audio = new Audio(src);\n      audio.loop = true;\n      audio.volume = volume;\n\n      const playPromise = audio.play();\n      if (playPromise !== undefined) {\n        playPromise.catch(() => {\n          // Auto-play was prevented - this is normal for browsers\n        });\n      }\n\n      currentAudioRef.current = audio;\n      return audio;\n    };\n\n    // Play a playlist sequentially\n    const playPlaylist = (playlist: string[], volume: number = 0.5) => {\n      if (playlist.length === 0) return;\n\n      playlistActiveRef.current = true;\n      currentPlaylistRef.current = playlist;\n      currentPlaylistIndexRef.current = 0;\n\n      const playNext = (index: number) => {\n        if (!playlistActiveRef.current) {\n          return;\n        }\n\n        if (index >= playlist.length) {\n          playNext(0);\n          return;\n        }\n\n        const audio = new Audio(playlist[index]);\n        audio.volume = volume;\n\n        const playPromise = audio.play();\n        if (playPromise !== undefined) {\n          playPromise.catch(() => {\n            // Auto-play was prevented\n          });\n        }\n\n        currentAudioRef.current = audio;\n        currentPlaylistIndexRef.current = index;\n\n        audio.addEventListener('ended', () => {\n          if (playlistActiveRef.current) {\n            playNext(index + 1);\n          }\n        });\n\n        if (playlist.length === 1) {\n          audio.loop = true;\n        }\n      };\n\n      playNext(0);\n    };\n\n    // Stop music completely\n    const stopAllMusic = () => {\n      playlistActiveRef.current = false;\n\n      if (fadeIntervalRef.current) {\n        clearInterval(fadeIntervalRef.current);\n        fadeIntervalRef.current = null;\n      }\n\n      if (currentAudioRef.current) {\n        currentAudioRef.current.pause();\n        currentAudioRef.current = null;\n      }\n\n      currentMusicTypeRef.current = null;\n    };\n\n    // Imperative methods exposed via ref\n    useImperativeHandle(ref, () => ({\n      playMainMenuMusic: () => {\n        if (musicMuted) return;\n\n        // Check if already playing main menu music\n        if (\n          currentMusicTypeRef.current?.type === 'main_menu' &&\n          currentAudioRef.current &&\n          !currentAudioRef.current.paused\n        ) {\n          return; // Already playing, don't restart\n        }\n\n        fadeOut(() => {\n          playlistActiveRef.current = false;\n\n          if (currentAudioRef.current) {\n            currentAudioRef.current.pause();\n            currentAudioRef.current = null;\n          }\n\n          playTrack(MUSIC_FILES.mainMenu, 0.5);\n          currentMusicTypeRef.current = { type: 'main_menu' };\n        });\n      },\n\n      playLevelMusic: (level: number) => {\n        if (musicMuted) return;\n\n        // Check if already playing this level's music\n        if (\n          currentMusicTypeRef.current?.type === 'level' &&\n          currentMusicTypeRef.current?.level === level &&\n          currentAudioRef.current &&\n          !currentAudioRef.current.paused\n        ) {\n          return; // Already playing, don't restart\n        }\n\n        fadeOut(() => {\n          playlistActiveRef.current = false;\n\n          if (currentAudioRef.current) {\n            currentAudioRef.current.pause();\n            currentAudioRef.current = null;\n          }\n\n          const playlist = (() => {\n            switch (level) {\n              case 1:\n                return MUSIC_FILES.level1;\n              case 2:\n                return MUSIC_FILES.level2;\n              case 3:\n                return MUSIC_FILES.level3;\n              case 4:\n                return MUSIC_FILES.level4;\n              case 5:\n                return MUSIC_FILES.level5;\n              default:\n                return [];\n            }\n          })();\n\n          if (playlist.length > 0) {\n            playPlaylist(playlist, 0.3); // Lower volume for level music\n            currentMusicTypeRef.current = { type: 'level', level };\n          }\n        });\n      },\n\n      playEndGameMusic: () => {\n        if (musicMuted) return;\n\n        // Check if already playing end game music\n        if (\n          currentMusicTypeRef.current?.type === 'end_game' &&\n          currentAudioRef.current &&\n          !currentAudioRef.current.paused\n        ) {\n          return; // Already playing, don't restart\n        }\n\n        fadeOut(() => {\n          playlistActiveRef.current = false;\n\n          if (currentAudioRef.current) {\n            currentAudioRef.current.pause();\n            currentAudioRef.current = null;\n          }\n\n          playTrack(MUSIC_FILES.endGame, 0.5);\n          currentMusicTypeRef.current = { type: 'end_game' };\n        });\n      },\n\n      stopMusic: () => {\n        stopAllMusic();\n      },\n    }));\n\n    // Stop music when muted\n    useEffect(() => {\n      if (musicMuted) {\n        stopAllMusic();\n      }\n    }, [musicMuted]);\n\n    // Cleanup on unmount\n    useEffect(() => {\n      return () => {\n        stopAllMusic();\n      };\n    }, []);\n\n    // This component doesn't render anything\n    return null;\n  }\n);\n\nMusicManager.displayName = 'MusicManager';\n","import React from \"react\";\r\nimport type { Piece, Equip, CampaignState, MarketAction } from \"./types\";\r\nimport {\r\n  ITEM_COSTS,\r\n  PIECE_COSTS,\r\n  GL,\r\n  PIECE_DESCRIPTIONS,\r\n  ITEM_DESCRIPTIONS,\r\n} from \"./constants\";\r\nimport type { LevelConfig } from \"./levelConfig\";\r\n\r\nconst equipIcon = (e: Equip) =>\r\n  e === \"sword\"\r\n    ? \"\"\r\n    : e === \"shield\"\r\n    ? \"\"\r\n    : e === \"lance\"\r\n    ? \"\"\r\n    : e === \"torch\"\r\n    ? \"\"\r\n    : e === \"bow\"\r\n    ? \"\"\r\n    : e === \"staff\"\r\n    ? \"\"\r\n    : e === \"crystal_ball\"\r\n    ? \"\"\r\n    : e === \"disguise\"\r\n    ? \"\"\r\n    : e === \"scythe\"\r\n    ? \"\"\r\n    : e === \"banner\"\r\n    ? \"\"\r\n    : e === \"curse\"\r\n    ? \"\"\r\n    : e === \"skull\"\r\n    ? \"\"\r\n    : e === \"purse\"\r\n    ? \"\"\r\n    : \"\";\r\n\r\ninterface MarketProps {\r\n  showTooltip: (text: string) => void;\r\n  hideTooltip: () => void;\r\n  levelConfig: LevelConfig | null;\r\n  campaign: CampaignState;\r\n  marketPoints: number;\r\n  setMarketPoints: (points: number | ((prev: number) => number)) => void;\r\n  setMarketAction: (action: MarketAction) => void;\r\n  setPrayerDice: (dice: number) => void;\r\n  setCampaign: (updater: (prev: CampaignState) => CampaignState) => void;\r\n  sfx: any;\r\n  setMarketViewVisible: (visible: boolean) => void;\r\n}\r\n\r\nexport function Market({\r\n  showTooltip,\r\n  hideTooltip,\r\n  levelConfig,\r\n  campaign,\r\n  marketPoints,\r\n  setMarketPoints,\r\n  setMarketAction,\r\n  setPrayerDice,\r\n  setCampaign,\r\n  sfx,\r\n  setMarketViewVisible,\r\n}: MarketProps) {\r\n  // Get available pieces from level config, default to all except King\r\n  const defaultPieces: Piece[\"type\"][] = [\"Q\", \"R\", \"B\", \"N\", \"P\"];\r\n  const availablePieces = levelConfig?.availablePieces || defaultPieces;\r\n  const pieces = availablePieces.filter(p => p !== \"K\"); // Always exclude King from market\r\n\r\n  // Get available items for purchase from level config AND unlocked items\r\n  const levelItems = levelConfig?.availableItems.whitePurchase || [];\r\n  const unlockedItems = (campaign && campaign.unlockedItems) || [];\r\n  const freeItemsList = campaign?.freeItems ? Array.from(campaign.freeItems.keys()) : [];\r\n\r\n  // Combine level items, unlocked items, and free items, removing duplicates\r\n  const allAvailableItems = [...new Set([...levelItems, ...unlockedItems, ...freeItemsList])];\r\n  const filteredItems = allAvailableItems.filter((item) => item !== \"purse\");\r\n  const items: { name: Exclude<Equip, undefined> }[] = filteredItems.map(\r\n    (itemName) => ({ name: itemName })\r\n  );\r\n\r\n  return (\r\n    <div\r\n      data-market-root\r\n      onMouseLeave={hideTooltip}\r\n      onMouseMove={(e) => {\r\n        const el = e.target as HTMLElement;\r\n        const overTipBtn = el.closest(\"[data-tip]\");\r\n        if (!overTipBtn) hideTooltip();\r\n      }}\r\n      className=\"bg-consistent-dark-brown rounded-2xl p-4 shadow-lg text-white relative\"\r\n    >\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        {/* Left Column: Buy Units and Buy Blessings */}\r\n        <div className=\"flex flex-col\">\r\n          <div className=\"mb-4\">\r\n            <h3 className=\"font-semibold mb-2 border-b border-amber-800 pb-1\">\r\n              Buy Men-at-Arms\r\n            </h3>\r\n            <div className=\"grid grid-cols-3 gap-2\">\r\n              {pieces.map((name) => {\r\n                const cost = PIECE_COSTS[name];\r\n                const freeCount = campaign.freeUnits.get(name) || 0;\r\n                const hasFree = freeCount > 0;\r\n                const canAfford = marketPoints >= cost || hasFree;\r\n                \r\n                return (\r\n                  <button\r\n                    key={name}\r\n                    data-tip\r\n                    data-buy-pawn={name === \"P\" ? \"true\" : undefined}\r\n                    onMouseEnter={() => showTooltip(PIECE_DESCRIPTIONS[name])}\r\n                    onMouseLeave={hideTooltip}\r\n                    disabled={!canAfford}\r\n                    onMouseDown={(e) => {\r\n                      e.preventDefault(); // Prevent button from taking focus and causing a scroll jump\r\n                      sfx.purchase();\r\n                      \r\n                      // Set the market action (gold and free units will be deducted when placed on board)\r\n                      setMarketAction({ type: \"piece\", name, isFree: hasFree });\r\n                    }}\r\n                    className=\"disabled:opacity-50 disabled:cursor-not-allowed bg-stone-800 hover:bg-stone-700 p-2 rounded-lg flex flex-col items-center text-white\"\r\n                  >\r\n                    <span\r\n                      className=\"text-4xl\"\r\n                      style={{ textShadow: \"0 2px 4px rgba(0,0,0,0.5)\" }}\r\n                    >\r\n                      {/* Safe access to GL */}\r\n                      {(() => {\r\n                        const glyphSet = GL[name as keyof typeof GL];\r\n                        return glyphSet && \"w\" in glyphSet ? glyphSet[\"w\" as keyof typeof glyphSet] : \"?\";\r\n                      })()}\r\n                    </span>\r\n                    <span>\r\n                      {name}{\" \"}\r\n                      {hasFree ? (\r\n                        <span className=\"text-green-400 font-bold\">{freeCount}x</span>\r\n                      ) : (\r\n                        <span className=\"text-amber-400\">{cost}g</span>\r\n                      )}\r\n                    </span>\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mb-2\">\r\n            <h3 className=\"font-semibold mb-2 border-b border-amber-800 pb-1\">\r\n              Buy Blessings\r\n            </h3>\r\n            <button\r\n              data-tip\r\n              onMouseEnter={() => showTooltip(ITEM_DESCRIPTIONS[\"prayer_die\"])}\r\n              onMouseLeave={hideTooltip}\r\n              disabled={marketPoints < (campaign.prayerDiceCost ?? ITEM_COSTS[\"prayer_die\"])}\r\n              onMouseDown={(e) => {\r\n                e.preventDefault();\r\n                sfx.purchase();\r\n                // Prayer die is purchased immediately, so deduct gold here\r\n                const prayerCost = campaign.prayerDiceCost ?? ITEM_COSTS[\"prayer_die\"];\r\n                setMarketPoints(prev => prev - prayerCost);\r\n                setPrayerDice(campaign.prayerDice + 1);\r\n                // Update campaign state\r\n                setCampaign((prev) => ({\r\n                  ...prev,\r\n                  prayerDice: prev.prayerDice + 1,\r\n                }));\r\n              }}\r\n              className=\"w-full disabled:opacity-50 disabled:cursor-not-allowed bg-stone-800 hover:bg-stone-700 p-2 rounded-lg flex items-center justify-center text-white\"\r\n            >\r\n              <span className=\"text-2xl mr-2\"></span>\r\n              <span>\r\n                Prayer Die{\" \"}\r\n                <span className=\"text-amber-400\">\r\n                  {campaign.prayerDiceCost ?? ITEM_COSTS[\"prayer_die\"]}g\r\n                </span>\r\n              </span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right Column: Buy Items */}\r\n        <div>\r\n          <div className=\"mb-4\">\r\n            <h3 className=\"font-semibold mb-2 border-b border-amber-800 pb-1\">\r\n              Buy Equipment\r\n            </h3>\r\n            <div className=\"grid grid-cols-4 gap-2\">\r\n              {items.map(({ name }) => {\r\n                const cost = ITEM_COSTS[name as keyof typeof ITEM_COSTS];\r\n                const freeCount = campaign.freeItems.get(name) || 0;\r\n                const hasFree = freeCount > 0;\r\n                const canAfford = marketPoints >= cost || hasFree;\r\n                \r\n                return (\r\n                  <button\r\n                    key={name}\r\n                    data-tip\r\n                    onMouseEnter={() =>\r\n                      showTooltip(\r\n                        ITEM_DESCRIPTIONS[name as keyof typeof ITEM_DESCRIPTIONS]\r\n                      )\r\n                    }\r\n                    onMouseLeave={hideTooltip}\r\n                    disabled={!canAfford}\r\n                    onMouseDown={(e) => {\r\n                      e.preventDefault(); // Prevent button from taking focus and causing a scroll jump\r\n                      sfx.purchase();\r\n                      \r\n                      // Set the market action (gold and free items will be deducted when placed on board)\r\n                      setMarketAction({ type: \"item\", name, isFree: hasFree });\r\n                    }}\r\n                    className=\"disabled:opacity-50 disabled:cursor-not-allowed bg-stone-800 hover:bg-stone-700 p-2 rounded-lg flex flex-col items-center\"\r\n                  >\r\n                    <span className=\"text-2xl\">{equipIcon(name)}</span>\r\n                    <span className=\"mt-1\">\r\n                      {hasFree ? (\r\n                        <span className=\"text-green-400 font-bold\">{freeCount}x</span>\r\n                      ) : (\r\n                        <span className=\"text-amber-400\">{cost}g</span>\r\n                      )}\r\n                    </span>\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n","// ObjectiveManager.ts - Manages optional objective conditions and tracking\r\nimport type {\r\n  OptionalObjective,\r\n  OptionalObjectiveCondition,\r\n  ObjectiveState,\r\n  PieceType,\r\n  Piece,\r\n  Equip,\r\n  Difficulty,\r\n  Board,\r\n  KilledPiece,\r\n  TerrainCell,\r\n} from \"./types\";\r\nimport type { VictoryCondition } from \"./levelConfig\";\r\n\r\n/**\r\n * Tracks objective-related game state during a level\r\n */\r\nexport interface ObjectiveTracking {\r\n  turnNumber: number;\r\n  whiteTurnCount: number;\r\n  playerPiecesLost: Piece[]; // Pieces lost by the player\r\n  enemyPiecesKilled: KilledPiece[]; // Enemy pieces killed by the player\r\n  pieceConversions: number; // Number of staff conversions\r\n  courtiersDestroyed: number; // Courtiers destroyed\r\n  itemsUsed: Set<Exclude<Equip, undefined>>; // Items that have been used\r\n  kingPosition: { x: number; y: number } | null; // Current king position\r\n  kingDisguiseActive: boolean; // Whether the king currently retains a disguise\r\n  victoryDelivererType?: PieceType;\r\n  victoryDelivererOriginalType?: PieceType;\r\n  victoryCondition?: VictoryCondition;\r\n  difficulty?: Difficulty; // Current game difficulty\r\n}\r\n\r\n/**\r\n * Creates initial objective tracking state\r\n */\r\nexport function createObjectiveTracking(): ObjectiveTracking {\r\n  return {\r\n    turnNumber: 0,\r\n    whiteTurnCount: 0,\r\n    playerPiecesLost: [],\r\n    enemyPiecesKilled: [],\r\n    pieceConversions: 0,\r\n    courtiersDestroyed: 0,\r\n    itemsUsed: new Set(),\r\n    kingPosition: null,\r\n    kingDisguiseActive: false,\r\n    victoryDelivererType: undefined,\r\n    victoryDelivererOriginalType: undefined,\r\n    victoryCondition: undefined,\r\n    difficulty: undefined,\r\n  };\r\n}\r\n\r\nfunction getEffectiveConditionParams(\r\n  condition: OptionalObjectiveCondition,\r\n  difficulty?: Difficulty\r\n): Record<string, any> {\r\n  const baseParams = condition.params ?? {};\r\n  const difficultyParams = condition.difficultyParams ?? {};\r\n\r\n  if (difficulty) {\r\n    const overrides = difficultyParams[difficulty];\r\n    if (overrides) {\r\n      return {\r\n        ...baseParams,\r\n        ...overrides,\r\n      };\r\n    }\r\n    return baseParams;\r\n  }\r\n\r\n  const fallbackDifficulty: Difficulty | undefined =\r\n    (difficultyParams.easy ? \"easy\" : undefined) ??\r\n    (difficultyParams.hard ? \"hard\" : undefined);\r\n\r\n  if (fallbackDifficulty && difficultyParams[fallbackDifficulty]) {\r\n    return {\r\n      ...baseParams,\r\n      ...difficultyParams[fallbackDifficulty]!,\r\n    };\r\n  }\r\n\r\n  return baseParams;\r\n}\r\n\r\nfunction splitTemplateSegments(rawContent: string): string[] {\r\n  const segments: string[] = [];\r\n  let current = \"\";\r\n  let depth = 0;\r\n\r\n  for (let index = 0; index < rawContent.length; index++) {\r\n    const char = rawContent[index];\r\n    const nextChar = rawContent[index + 1];\r\n\r\n    if (char === \"{\" && nextChar === \"{\") {\r\n      depth++;\r\n      current += \"{{\";\r\n      index++;\r\n      continue;\r\n    }\r\n\r\n    if (char === \"}\" && nextChar === \"}\") {\r\n      if (depth > 0) depth--;\r\n      current += \"}}\";\r\n      index++;\r\n      continue;\r\n    }\r\n\r\n    if (char === \"|\" && depth === 0) {\r\n      segments.push(current.trim());\r\n      current = \"\";\r\n      continue;\r\n    }\r\n\r\n    current += char;\r\n  }\r\n\r\n  segments.push(current.trim());\r\n  return segments;\r\n}\r\n\r\nfunction evaluateTemplateCommand(\r\n  rawContent: string,\r\n  params: Record<string, any>\r\n): { value: string; resolved: boolean } {\r\n  const segments = splitTemplateSegments(rawContent);\r\n  const [command, ...args] = segments;\r\n\r\n  if (!command) {\r\n    return { value: `{{${rawContent}}}`, resolved: false };\r\n  }\r\n\r\n  switch (command) {\r\n    case \"plural\": {\r\n      const [paramName, singular = \"\", plural = \"\", zero] = args;\r\n      const value = params[paramName];\r\n      if (typeof value !== \"number\") {\r\n        return { value: `{{${rawContent}}}`, resolved: false };\r\n      }\r\n      if (zero !== undefined && value === 0) {\r\n        return { value: zero, resolved: true };\r\n      }\r\n      return { value: value === 1 ? singular : plural, resolved: true };\r\n    }\r\n    case \"pluralSuffix\": {\r\n      const [paramName, suffix = \"s\", singularSuffix = \"\"] = args;\r\n      const value = params[paramName];\r\n      if (typeof value !== \"number\") {\r\n        return { value: `{{${rawContent}}}`, resolved: false };\r\n      }\r\n      return {\r\n        value: value === 1 ? singularSuffix : suffix,\r\n        resolved: true,\r\n      };\r\n    }\r\n    case \"ifZero\": {\r\n      const [paramName, zeroValue = \"\", elseValue = \"\"] = args;\r\n      const value = params[paramName];\r\n      if (typeof value !== \"number\") {\r\n        return { value: `{{${rawContent}}}`, resolved: false };\r\n      }\r\n      return {\r\n        value: value === 0 ? zeroValue : elseValue,\r\n        resolved: true,\r\n      };\r\n    }\r\n    case \"ifOne\": {\r\n      const [paramName, oneValue = \"\", elseValue = \"\"] = args;\r\n      const value = params[paramName];\r\n      if (typeof value !== \"number\") {\r\n        return { value: `{{${rawContent}}}`, resolved: false };\r\n      }\r\n      return {\r\n        value: value === 1 ? oneValue : elseValue,\r\n        resolved: true,\r\n      };\r\n    }\r\n    default: {\r\n      const value = params[command];\r\n      if (value === undefined || value === null) {\r\n        return { value: `{{${rawContent}}}`, resolved: false };\r\n      }\r\n      return { value: String(value), resolved: true };\r\n    }\r\n  }\r\n}\r\n\r\nfunction findNextTemplateToken(\r\n  input: string,\r\n  fromIndex = 0\r\n): { start: number; end: number; content: string } | null {\r\n  const startIndex = input.indexOf(\"{{\", fromIndex);\r\n  if (startIndex === -1) return null;\r\n\r\n  let depth = 0;\r\n  let index = startIndex;\r\n\r\n  while (index < input.length - 1) {\r\n    const pair = input[index] + input[index + 1];\r\n\r\n    if (pair === \"{{\") {\r\n      depth++;\r\n      index += 2;\r\n      continue;\r\n    }\r\n\r\n    if (pair === \"}}\") {\r\n      depth--;\r\n      const endIndex = index + 2;\r\n      index += 2;\r\n      if (depth === 0) {\r\n        return {\r\n          start: startIndex,\r\n          end: endIndex,\r\n          content: input.slice(startIndex + 2, endIndex - 2),\r\n        };\r\n      }\r\n      continue;\r\n    }\r\n\r\n    index++;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nfunction applyDescriptionTemplate(\r\n  template: string,\r\n  params: Record<string, any>\r\n): string {\r\n  let result = template;\r\n\r\n  for (let iteration = 0; iteration < 10; iteration++) {\r\n    if (!result.includes(\"{{\")) break;\r\n\r\n    let searchIndex = 0;\r\n    let resolvedAny = false;\r\n\r\n    while (searchIndex < result.length) {\r\n      const token = findNextTemplateToken(result, searchIndex);\r\n      if (!token) break;\r\n\r\n      const rawContent = token.content.trim();\r\n      const originalToken = result.slice(token.start, token.end);\r\n      const { value, resolved } = evaluateTemplateCommand(rawContent, params);\r\n\r\n      const beforeLength = token.start;\r\n      result =\r\n        result.slice(0, token.start) + value + result.slice(token.end);\r\n\r\n      if (resolved) {\r\n        resolvedAny = true;\r\n      }\r\n\r\n      if (!resolved && value === originalToken) {\r\n        // Move past this token to prevent re-processing it indefinitely\r\n        searchIndex = beforeLength + originalToken.length;\r\n      } else {\r\n        searchIndex = beforeLength + value.length;\r\n      }\r\n    }\r\n\r\n    if (!resolvedAny) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport function getObjectiveDescription(\r\n  objective: OptionalObjective,\r\n  difficulty?: Difficulty\r\n): string {\r\n  const params = getEffectiveConditionParams(objective.condition, difficulty);\r\n  const originalDescription = objective.description ?? \"\";\r\n  const hasTemplate = originalDescription.includes(\"{{\");\r\n  let description = originalDescription;\r\n\r\n  if (hasTemplate) {\r\n    const templated = applyDescriptionTemplate(originalDescription, params);\r\n    if (!templated.includes(\"{{\")) {\r\n      return templated.trim();\r\n    }\r\n    description = templated.trim();\r\n  }\r\n\r\n  if (description && !description.includes(\"{{\")) {\r\n    return description.trim();\r\n  }\r\n\r\n  switch (objective.condition.type) {\r\n    case \"max_casualties\": {\r\n      const maxLosses = params.maxLosses as number | undefined;\r\n      if (typeof maxLosses === \"number\") {\r\n        if (maxLosses === 0) return \"Win without losing any units\";\r\n        return `Win with no more than ${maxLosses} ${\r\n          maxLosses === 1 ? \"casualty\" : \"casualties\"\r\n        }`;\r\n      }\r\n      break;\r\n    }\r\n\r\n    case \"dont_kill_courtiers\": {\r\n      const maxCourtiers = params.maxCourtiers as number | undefined;\r\n      if (typeof maxCourtiers === \"number\") {\r\n        if (maxCourtiers === 0) return \"Don't destroy any Courtiers\";\r\n        return `Don't destroy more than ${maxCourtiers} ${\r\n          maxCourtiers === 1 ? \"Courtier\" : \"Courtiers\"\r\n        }`;\r\n      }\r\n      break;\r\n    }\r\n\r\n    case \"win_under_turns\": {\r\n      const maxTurns = params.maxTurns as number | undefined;\r\n      if (typeof maxTurns === \"number\") {\r\n        const term = maxTurns === 1 ? \"turn\" : \"turns\";\r\n        return objective.description.replace(/\\d+/, String(maxTurns)).replace(\r\n          /\\bturns?\\b/i,\r\n          term\r\n        );\r\n      }\r\n      break;\r\n    }\r\n  }\r\n\r\n  return description;\r\n}\r\n\r\n/**\r\n * Initializes objective states from level config\r\n */\r\nexport function initializeObjectiveStates(\r\n  objectives: OptionalObjective[]\r\n): ObjectiveState[] {\r\n  return objectives.map((obj) => ({\r\n    objectiveId: obj.id,\r\n    isCompleted: false,\r\n    isFailed: false,\r\n    progress: obj.progress ? { ...obj.progress } : undefined,\r\n    completedOnTurn: undefined,\r\n    failedOnTurn: undefined,\r\n  }));\r\n}\r\n\r\n/**\r\n * Gets the reward amount for an objective based on difficulty\r\n */\r\nexport function getObjectiveReward(\r\n  objective: OptionalObjective,\r\n  difficulty?: Difficulty\r\n): number {\r\n  if (difficulty && objective.rewardByDifficulty?.[difficulty] !== undefined) {\r\n    return objective.rewardByDifficulty[difficulty]!;\r\n  }\r\n  const fallbackDifficulty: Difficulty | undefined =\r\n    (objective.rewardByDifficulty?.easy !== undefined ? \"easy\" : undefined) ??\r\n    (objective.rewardByDifficulty?.hard !== undefined ? \"hard\" : undefined);\r\n  if (\r\n    fallbackDifficulty &&\r\n    objective.rewardByDifficulty?.[fallbackDifficulty] !== undefined\r\n  ) {\r\n    return objective.rewardByDifficulty[fallbackDifficulty]!;\r\n  }\r\n  return objective.reward;\r\n}\r\n\r\n/**\r\n * Checks if a specific objective condition is met or failed\r\n */\r\nexport interface ObjectiveCheckResult {\r\n  isMet: boolean;\r\n  isFailed: boolean;\r\n  isPermanentlyMet: boolean;\r\n  progress?: { current: number; target: number };\r\n}\r\n\r\nexport function checkObjectiveCondition(\r\n  condition: OptionalObjectiveCondition,\r\n  tracking: ObjectiveTracking,\r\n  board?: Board\r\n): ObjectiveCheckResult {\r\n  const params = getEffectiveConditionParams(\r\n    condition,\r\n    tracking.difficulty\r\n  );\r\n  const { type } = condition;\r\n\r\n  switch (type) {\r\n    case \"no_piece_type_lost\": {\r\n      const pieceType = params.pieceType as PieceType;\r\n      const pieceName = params.pieceName as string | undefined;\r\n\r\n      const lostPieces = tracking.playerPiecesLost.filter(\r\n        (p) => p.type === pieceType\r\n      );\r\n\r\n      let isFailed = lostPieces.length > 0; // Failed if any pieces of this type were lost\r\n\r\n      if (pieceName && board) {\r\n        let found = false;\r\n        for (let y = 0; y < board.length && !found; y++) {\r\n          for (let x = 0; x < board[y].length; x++) {\r\n            const piece = board[y][x];\r\n            if (piece?.name === pieceName && piece.color === \"w\") {\r\n              found = true;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        if (!found) {\r\n          isFailed = true;\r\n        }\r\n      }\r\n\r\n      const isMet = !isFailed;\r\n\r\n      return {\r\n        isMet,\r\n        isFailed,\r\n        isPermanentlyMet: false, // Only fully satisfied once the level ends\r\n        progress:\r\n          !pieceName && lostPieces.length > 0\r\n            ? { current: lostPieces.length, target: 0 }\r\n            : undefined,\r\n      };\r\n    }\r\n\r\n    case \"win_under_turns\": {\r\n      const maxTurns = params.maxTurns as number;\r\n      const turnCount = tracking.whiteTurnCount ?? tracking.turnNumber;\r\n      const isMet = turnCount <= maxTurns;\r\n      const isFailed = turnCount > maxTurns; // Failed if exceeded turn limit\r\n      return {\r\n        isMet,\r\n        isFailed,\r\n        isPermanentlyMet: false, // Confirmed only when the level is cleared\r\n        progress: { current: turnCount, target: maxTurns },\r\n      };\r\n    }\r\n\r\n    case \"king_at_position\": {\r\n      if (!tracking.kingPosition || !board) {\r\n        return { isMet: false, isFailed: false, isPermanentlyMet: false };\r\n      }\r\n      \r\n      const targetRank = params.rank as number | undefined;\r\n      const targetFile = params.file as number | undefined;\r\n      const targetArea = params.area as \"top\" | \"bottom\" | \"left\" | \"right\" | undefined;\r\n      \r\n      let isMet = true;\r\n      \r\n      if (targetRank !== undefined) {\r\n        isMet = isMet && tracking.kingPosition.y === targetRank;\r\n      }\r\n      \r\n      if (targetFile !== undefined) {\r\n        isMet = isMet && tracking.kingPosition.x === targetFile;\r\n      }\r\n      \r\n      if (targetArea && board) {\r\n        const boardSize = board.length;\r\n        switch (targetArea) {\r\n          case \"top\":\r\n            isMet = isMet && tracking.kingPosition.y === boardSize - 1;\r\n            break;\r\n          case \"bottom\":\r\n            isMet = isMet && tracking.kingPosition.y === 0;\r\n            break;\r\n          case \"left\":\r\n            isMet = isMet && tracking.kingPosition.x === 0;\r\n            break;\r\n          case \"right\":\r\n            isMet = isMet && tracking.kingPosition.x === boardSize - 1;\r\n            break;\r\n        }\r\n      }\r\n      \r\n      // Only check at end of level, so never failed mid-game\r\n      return { isMet, isFailed: false, isPermanentlyMet: false };\r\n    }\r\n\r\n    case \"convert_pieces\": {\r\n      const targetCount = params.count as number;\r\n      const isMet = tracking.pieceConversions >= targetCount;\r\n      // Can only be evaluated at end of level\r\n      return {\r\n        isMet,\r\n        isFailed: false,\r\n        isPermanentlyMet: isMet, // Once achieved, cannot be undone\r\n        progress: { current: tracking.pieceConversions, target: targetCount },\r\n      };\r\n    }\r\n\r\n    case \"kill_count\": {\r\n      const targetCount = params.count as number;\r\n      const comparison =\r\n        (params.comparison as \"exact\" | \"atleast\" | \"atmost\") || \"atleast\";\r\n      const pieceType = params.pieceType as PieceType | undefined;\r\n      const killerPieceType = params.killerPieceType as PieceType | undefined;\r\n      const killerName = params.killerName as string | undefined;\r\n      const killerTerrain = params.killerTerrain as TerrainCell | string | undefined;\r\n      const victimStunned = params.victimStunned as boolean | undefined;\r\n\r\n      let kills = tracking.enemyPiecesKilled;\r\n      if (pieceType) {\r\n        kills = kills.filter((p) => p.piece.type === pieceType);\r\n      }\r\n      if (killerPieceType) {\r\n        kills = kills.filter((p) => p.killerType === killerPieceType);\r\n      }\r\n      if (killerName) {\r\n        kills = kills.filter((p) => {\r\n          if (!p.killerName) return false;\r\n          return p.killerName === killerName;\r\n        });\r\n      }\r\n      if (killerTerrain) {\r\n        kills = kills.filter((p) => p.killerTerrain === killerTerrain);\r\n      }\r\n      if (victimStunned !== undefined) {\r\n        kills = kills.filter((p) => (!!p.targetStunned) === victimStunned);\r\n      }\r\n\r\n      const killCount = kills.length;\r\n\r\n      let isMet = false;\r\n      let isFailed = false;\r\n      let isPermanentlyMet = false;\r\n      switch (comparison) {\r\n        case \"exact\":\r\n          isMet = killCount === targetCount;\r\n          // Can only check exact at end\r\n          isFailed = false;\r\n          isPermanentlyMet = false;\r\n          break;\r\n        case \"atleast\":\r\n          isMet = killCount >= targetCount;\r\n          // Can't fail this type\r\n          isFailed = false;\r\n          isPermanentlyMet = isMet; // Once minimum reached it stays met\r\n          break;\r\n        case \"atmost\":\r\n          isMet = killCount <= targetCount;\r\n          isFailed = killCount > targetCount; // Failed if exceeded\r\n          isPermanentlyMet = false; // Only finalised at end\r\n          break;\r\n      }\r\n      \r\n      return {\r\n        isMet,\r\n        isFailed,\r\n        isPermanentlyMet,\r\n        progress: { current: killCount, target: targetCount },\r\n      };\r\n    }\r\n\r\n    case \"no_item_used\": {\r\n      const itemType = params.itemType as Exclude<Equip, undefined>;\r\n      const isMet = !tracking.itemsUsed.has(itemType);\r\n      const isFailed = tracking.itemsUsed.has(itemType); // Failed if item was used\r\n      return { isMet, isFailed, isPermanentlyMet: false };\r\n    }\r\n\r\n    case \"max_casualties\": {\r\n      const maxLosses = params.maxLosses as number;\r\n      const isMet = tracking.playerPiecesLost.length <= maxLosses;\r\n      const isFailed = tracking.playerPiecesLost.length > maxLosses; // Failed if exceeded\r\n      return {\r\n        isMet,\r\n        isFailed,\r\n        isPermanentlyMet: false,\r\n        progress: { current: tracking.playerPiecesLost.length, target: maxLosses },\r\n      };\r\n    }\r\n\r\n    case \"keep_king_disguised\": {\r\n      const hasDisguise = tracking.kingDisguiseActive;\r\n      return {\r\n        isMet: hasDisguise,\r\n        isFailed: !hasDisguise,\r\n        isPermanentlyMet: false,\r\n      };\r\n    }\r\n\r\n    case \"checkmate_with_piece\": {\r\n      const requiredType = params.pieceType as PieceType;\r\n      const delivererType =\r\n        tracking.victoryDelivererOriginalType ?? tracking.victoryDelivererType;\r\n\r\n      if (!delivererType) {\r\n        return { isMet: false, isFailed: false, isPermanentlyMet: false };\r\n      }\r\n\r\n      const isMet = delivererType === requiredType;\r\n      return {\r\n        isMet,\r\n        isFailed: !isMet,\r\n        isPermanentlyMet: isMet,\r\n      };\r\n    }\r\n\r\n    case \"dont_kill_courtiers\": {\r\n      const maxCourtiers = params.maxCourtiers as number;\r\n      const isMet = tracking.courtiersDestroyed <= maxCourtiers;\r\n      const isFailed = tracking.courtiersDestroyed > maxCourtiers; // Failed if exceeded\r\n      return {\r\n        isMet,\r\n        isFailed,\r\n        isPermanentlyMet: false,\r\n        progress: { current: tracking.courtiersDestroyed, target: maxCourtiers },\r\n      };\r\n    }\r\n\r\n    case \"custom\": {\r\n      // Custom conditions would need to be handled separately\r\n      // For now, return not met\r\n      console.warn(\"Custom objective conditions not yet implemented\");\r\n      return { isMet: false, isFailed: false, isPermanentlyMet: false };\r\n    }\r\n\r\n    default:\r\n      console.warn(`Unknown objective condition type: ${type}`);\r\n      return { isMet: false, isFailed: false, isPermanentlyMet: false };\r\n  }\r\n}\r\n\r\n/**\r\n * Checks all objectives and updates their states\r\n * Returns object with newly completed and failed objective IDs\r\n */\r\nexport function checkAllObjectives(\r\n  objectives: OptionalObjective[],\r\n  objectiveStates: ObjectiveState[],\r\n  tracking: ObjectiveTracking,\r\n  board?: Board,\r\n  options?: { allowCompletion?: boolean }\r\n): { newlyCompleted: string[]; newlyFailed: string[] } {\r\n  const newlyCompleted: string[] = [];\r\n  const newlyFailed: string[] = [];\r\n  const allowCompletion = options?.allowCompletion ?? false;\r\n\r\n  objectiveStates.forEach((state) => {\r\n    // Skip if already completed or failed\r\n    if (state.isCompleted || state.isFailed) return;\r\n\r\n    const objective = objectives.find((obj) => obj.id === state.objectiveId);\r\n    if (!objective) return;\r\n\r\n    const result = checkObjectiveCondition(objective.condition, tracking, board);\r\n    \r\n    // Update progress\r\n    if (result.progress) {\r\n      state.progress = result.progress;\r\n    }\r\n\r\n    // Check if newly completed\r\n    const canCompleteNow = result.isPermanentlyMet || allowCompletion;\r\n    if (result.isMet && !state.isCompleted && canCompleteNow) {\r\n      state.isCompleted = true;\r\n      state.completedOnTurn = tracking.turnNumber;\r\n      newlyCompleted.push(state.objectiveId);\r\n    }\r\n    \r\n    // Check if newly failed\r\n    if (result.isFailed && !state.isFailed) {\r\n      state.isFailed = true;\r\n      state.failedOnTurn = tracking.turnNumber;\r\n      newlyFailed.push(state.objectiveId);\r\n    }\r\n  });\r\n\r\n  return { newlyCompleted, newlyFailed };\r\n}\r\n\r\n/**\r\n * Calculate total bonus gold from completed objectives\r\n */\r\nexport function calculateObjectiveBonus(\r\n  objectives: OptionalObjective[],\r\n  objectiveStates: ObjectiveState[],\r\n  difficulty?: Difficulty\r\n): number {\r\n  return objectiveStates.reduce((total, state) => {\r\n    if (!state.isCompleted) return total;\r\n    \r\n    const objective = objectives.find((obj) => obj.id === state.objectiveId);\r\n    if (!objective) return total;\r\n    \r\n    return total + getObjectiveReward(objective, difficulty);\r\n  }, 0);\r\n}\r\n\r\n/**\r\n * Formats an objective description with current progress (if applicable)\r\n */\r\nexport function formatObjectiveDescription(\r\n  objective: OptionalObjective,\r\n  state?: ObjectiveState,\r\n  options?: { difficulty?: Difficulty; includeProgress?: boolean }\r\n): string {\r\n  const { difficulty, includeProgress = true } = options || {};\r\n\r\n  const description = getObjectiveDescription(objective, difficulty);\r\n\r\n  if (\r\n    !includeProgress ||\r\n    !state ||\r\n    state.isCompleted ||\r\n    state.isFailed ||\r\n    !state.progress ||\r\n    state.progress.target === 0\r\n  ) {\r\n    return description;\r\n  }\r\n\r\n  const { current, target } = state.progress;\r\n  return `${description} (${current}/${target})`;\r\n}\r\n\r\n","import React from \"react\";\nimport type { Equip, Color, KilledPiece, ObjectiveState, Difficulty } from \"./types\";\nimport type { LevelConfig } from \"./levelConfig\";\nimport { VAL, ITEM_COSTS, GL, ITEM_DESCRIPTIONS } from \"./constants\";\nimport { getObjectiveDescription } from \"./ObjectiveManager\";\n\nconst equipIcon = (e: Equip) =>\n  e === \"sword\"\n    ? \"\"\n    : e === \"shield\"\n    ? \"\"\n    : e === \"lance\"\n    ? \"\"\n    : e === \"torch\"\n    ? \"\"\n    : e === \"bow\"\n    ? \"\"\n    : e === \"staff\"\n    ? \"\"\n    : e === \"crystal_ball\"\n    ? \"\"\n    : e === \"disguise\"\n    ? \"\"\n    : e === \"scythe\"\n    ? \"\"\n    : e === \"banner\"\n    ? \"\"\n    : e === \"curse\"\n    ? \"\"\n    : e === \"skull\"\n    ? \"\"\n    : e === \"purse\"\n    ? \"\"\n    : \"\";\n\ninterface VictoryPopupProps {\n  win: Color | null;\n  showVictoryDetails: boolean;\n  phrase: string | null;\n  thisLevelUnlockedItems: Exclude<Equip, undefined>[];\n  killedEnemyPieces: KilledPiece[];\n  destroyedCourtiers: number;\n  handleNextLevel: () => void;\n  handleTryAgain: () => void;\n  handleRetryLevel: () => void;\n  winModalPosition: { top: number; left: number } | null;\n  currentLevelConfig: LevelConfig | null;\n  objectiveStates?: ObjectiveState[];\n  activeObjectiveIds?: string[];\n  difficulty?: Difficulty;\n}\n\nexport function VictoryPopup({\n  win,\n  showVictoryDetails,\n  phrase,\n  thisLevelUnlockedItems,\n  killedEnemyPieces,\n  destroyedCourtiers,\n  handleNextLevel,\n  handleTryAgain,\n  handleRetryLevel,\n  winModalPosition,\n  currentLevelConfig,\n  objectiveStates = [],\n  activeObjectiveIds = [],\n  difficulty,\n}: VictoryPopupProps) {\n  const W = \"w\" as const;\n\n  if (!win || !winModalPosition) return null;\n\n  // Format victory condition names (same as quest component)\n  const formatVictoryCondition = (condition: string) => {\n    switch (condition) {\n      case \"king_beheaded\":\n        return \"Regicide\";\n      case \"king_captured\":\n        return \"King Captured (Checkmate)\";\n      case \"king_dishonored\":\n        return \"King Dishonored\";\n      case \"king_escaped\":\n        return \"King Crossing\";\n      default:\n        return condition;\n    }\n  };\n\n  // Get victory condition description (same as quest component)\n  const getVictoryConditionDescription = (condition: string) => {\n    // Check for level-specific description first\n    if (currentLevelConfig?.victoryConditionDescriptions?.[condition as keyof typeof currentLevelConfig.victoryConditionDescriptions]) {\n      return currentLevelConfig.victoryConditionDescriptions[condition as keyof typeof currentLevelConfig.victoryConditionDescriptions];\n    }\n    // Default descriptions\n    switch (condition) {\n      case \"king_beheaded\":\n        return \"Capture the enemy King in combat\";\n      case \"king_captured\":\n        return \"Checkmate the enemy King\";\n      case \"king_dishonored\":\n        return \"Capture the enemy King with a Staff\";\n      case \"king_escaped\":\n        return \"Bring your King to the golden squares\";\n      default:\n        return \"\";\n    }\n  };\n\n  // Get victory conditions to display (same logic as quest component)\n  const victoryConditions = currentLevelConfig?.displayedVictoryConditions || currentLevelConfig?.victoryConditions || [];\n\n  // Determine which victory condition was fulfilled\n  const getFulfilledVictoryCondition = (): string | null => {\n    if (win !== W) return null;\n    \n    // Check for king_escaped first (phrase-based)\n    if (phrase === \"King Crossing!\") {\n      return \"king_escaped\";\n    }\n    \n    // Check killedEnemyPieces for defeated king\n    const defeatedKing = killedEnemyPieces.find(kp => kp.piece.type === \"K\");\n    if (defeatedKing?.defeatType) {\n      switch (defeatedKing.defeatType) {\n        case \"beheaded\":\n          return \"king_beheaded\";\n        case \"checkmate\":\n          return \"king_captured\";\n        case \"dishonored\":\n          return \"king_dishonored\";\n      }\n    }\n    \n    // Fallback: check phrase for other victory types\n    if (phrase === \"Regicide!\" || phrase?.includes(\"Regicide\")) {\n      return \"king_beheaded\";\n    }\n    if (phrase === \"King captured! Checkmate!\" || phrase?.includes(\"Checkmate\")) {\n      return \"king_captured\";\n    }\n    \n    // If we can't determine, return the first victory condition as fallback\n    return victoryConditions.length > 0 ? victoryConditions[0] : null;\n  };\n\n  const fulfilledCondition = getFulfilledVictoryCondition();\n\n  const showDetails = showVictoryDetails || win !== W;\n  const frameBorderClass =\n    win === W ? \"border-amber-700/50\" : \"border-red-700/60\";\n  const topBottomBarClass =\n    win === W\n      ? \"bg-gradient-to-r from-amber-600 via-yellow-500 to-amber-600\"\n      : \"bg-gradient-to-r from-red-700 via-amber-600 to-red-700\";\n  const headerGradientClass =\n    win === W\n      ? \"bg-gradient-to-r from-amber-800/30 to-amber-900/30 border-b-2 border-amber-700/40\"\n      : \"bg-gradient-to-r from-red-900/30 to-amber-900/30 border-b-2 border-red-700/40\";\n  const headerTitle =\n    win === W ? \" QUEST COMPLETED! \" : \" Edran's Tale Ended \";\n\n  const questNarration = currentLevelConfig?.questNarration;\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const isQuestVictory =\n    win === W && fulfilledCondition === \"king_escaped\" && !!questNarration;\n\n  const summaryContent = (() => {\n    const questDescription =\n      questNarration ??\n      (fulfilledCondition\n        ? getVictoryConditionDescription(fulfilledCondition)\n        : undefined) ??\n      (fulfilledCondition ? formatVictoryCondition(fulfilledCondition) : undefined);\n    const fallbackVictoryText =\n      phrase ||\n      (fulfilledCondition ? formatVictoryCondition(fulfilledCondition) : undefined) ||\n      \"Victory is yours, my liege.\";\n    const victoryDisplayText = questDescription ?? fallbackVictoryText;\n\n    if (win === W) {\n      if (!showDetails && fulfilledCondition) {\n        return (\n          <div className=\"flex flex-col gap-2 items-center text-green-200\">\n            <div\n              className=\"flex items-center gap-2 font-semibold text-lg\"\n              style={{ fontFamily: 'serif' }}\n            >\n              <span\n                className=\"text-green-300 text-xl\"\n                style={{\n                  animation: \"checkmarkDraw 0.6s ease-out forwards\",\n                  opacity: 0,\n                  display: \"inline-block\",\n                }}\n              >\n                \n              </span>\n              <span>Quest Completed</span>\n            </div>\n            {victoryDisplayText && (\n              <span\n                className=\"text-sm italic text-green-100 text-center\"\n                style={{ fontFamily: 'serif' }}\n              >\n                {victoryDisplayText}\n              </span>\n            )}\n          </div>\n        );\n      }\n\n      return (\n        <div\n          className=\"text-amber-100 text-sm leading-relaxed text-center italic\"\n          style={{ fontFamily: \"serif\" }}\n        >\n          {victoryDisplayText}\n        </div>\n      );\n    }\n\n    return (\n      <div\n        className=\"text-red-200 text-sm leading-relaxed text-center italic\"\n        style={{ fontFamily: \"serif\" }}\n      >\n        {phrase || \"Edran's tale is written in grief this day.\"}\n      </div>\n    );\n  })();\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-black/70\">\n      <div\n        className=\"stand absolute\"\n        style={{\n          top: winModalPosition.top,\n          left: winModalPosition.left,\n          transform: \"translate(-50%, -50%)\",\n        }}\n      >\n        <div\n          className={`bg-gradient-to-b from-amber-900/40 via-stone-950/90 to-stone-950/95 rounded-lg shadow-2xl border-4 ${frameBorderClass} backdrop-blur-sm overflow-hidden`}\n          style={{\n            minWidth: \"360px\",\n            width: \"min(420px, calc(100vw - 32px))\",\n            maxWidth: \"420px\",\n          }}\n        >\n          <div className={`h-2 ${topBottomBarClass}`}></div>\n          <div className={`px-6 py-4 ${headerGradientClass}`}>\n            <h2\n              className={`text-2xl font-bold text-center tracking-wide ${win === W ? 'text-amber-200' : 'text-red-500'}`}\n              style={{ fontFamily: 'serif', textShadow: '2px 2px 4px rgba(0,0,0,0.8)' }}\n            >\n              {headerTitle}\n            </h2>\n          </div>\n          <div className=\"px-6 py-4 bg-gradient-to-b from-stone-950/50 to-stone-950/70\">\n            {summaryContent}\n          </div>\n          {showDetails && (\n            <div className=\"h-px bg-gradient-to-r from-transparent via-amber-600 to-transparent mx-6\"></div>\n          )}\n          {showDetails && (\n            <div className=\"px-6 py-4 bg-gradient-to-b from-stone-950/70 to-stone-950/85 space-y-4\">\n              {win !== W && (\n                <>\n                  {victoryConditions.length > 0 && (\n                    <div className=\"flex flex-col gap-2 text-sm\">\n                      {victoryConditions.map((condition: string, idx: number) => {\n                        const description = getVictoryConditionDescription(condition);\n                        return (\n                          <div\n                            key={idx}\n                            className=\"flex flex-col gap-1 bg-black/20 rounded p-2 border border-red-700/30\"\n                          >\n                            <div className=\"flex items-center gap-2\">\n                              <span className=\"text-red-500 text-lg\"></span>\n                              <span className=\"font-semibold text-red-400\">\n                                {formatVictoryCondition(condition)}\n                              </span>\n                            </div>\n                            {description && (\n                              <span className=\"text-gray-300 italic text-xs ml-6\">\n                                {description}\n                              </span>\n                            )}\n                          </div>\n                        );\n                      })}\n                    </div>\n                  )}\n                </>\n              )}\n\n              {win === W && thisLevelUnlockedItems.length > 0 && (\n                <div className=\"bg-gradient-to-r from-amber-600 to-amber-800 p-3 rounded-xl\">\n                  <div className=\"font-bold text-white mb-1 text-center\">\n                    Unlocked New Item\n                    {thisLevelUnlockedItems.length > 1 ? \"s\" : \"\"}!\n                  </div>\n                  <div className=\"flex flex-wrap justify-center gap-2 text-2xl\">\n                    {thisLevelUnlockedItems.map((item) => (\n                      <span\n                        key={item}\n                        title={\n                          ITEM_DESCRIPTIONS[\n                            item as keyof typeof ITEM_DESCRIPTIONS\n                          ]\n                        }\n                      >\n                        {equipIcon(item)}\n                      </span>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {win === W &&\n                killedEnemyPieces.length > 0 &&\n                (() => {\n                  const purseCount = killedEnemyPieces.filter(\n                    (kp) => kp.piece.equip === \"purse\"\n                  ).length;\n                  const purseGold = purseCount * 25;\n\n                  const regularValue = killedEnemyPieces.reduce(\n                    (sum, killedPiece) => {\n                      const piece = killedPiece.piece;\n                      if (piece.type === \"K\") return sum;\n                      const pieceValue = VAL[piece.type as keyof typeof VAL] || 0;\n                      let itemValue = 0;\n                      if (piece.equip && piece.equip !== \"purse\") {\n                        itemValue =\n                          ITEM_COSTS[piece.equip as keyof typeof ITEM_COSTS] || 0;\n                      }\n                      return sum + pieceValue + itemValue;\n                    },\n                    0\n                  );\n                  const ransomGold = Math.floor(regularValue * 0.35);\n\n                  const kingGold = killedEnemyPieces.reduce((sum, killedPiece) => {\n                    const piece = killedPiece.piece;\n                    if (piece.type === \"K\" && killedPiece.defeatType) {\n                      switch (killedPiece.defeatType) {\n                        case \"beheaded\":\n                          return sum + 20;\n                        case \"dishonored\":\n                          return sum + 10;\n                        case \"checkmate\":\n                          return sum + 40;\n                      }\n                    }\n                    return sum;\n                  }, 0);\n\n                  const casualtiesPenalty = destroyedCourtiers * 5;\n\n                  const activeObjectives =\n                    currentLevelConfig?.optionalObjectives?.filter((obj) =>\n                      activeObjectiveIds.includes(obj.id)\n                    ) || [];\n                  const completedObjectives = objectiveStates.filter(\n                    (state) =>\n                      state.isCompleted &&\n                      activeObjectiveIds.includes(state.objectiveId)\n                  );\n                  const objectiveBonus = completedObjectives.reduce((total, state) => {\n                    const objective = activeObjectives.find(\n                      (obj) => obj.id === state.objectiveId\n                    );\n                    if (!objective) return total;\n\n                    const reward =\n                      difficulty &&\n                      objective.rewardByDifficulty?.[difficulty] !== undefined\n                        ? objective.rewardByDifficulty[difficulty]!\n                        : objective.reward;\n\n                    return total + reward;\n                  }, 0);\n\n                  const totalGold =\n                    ransomGold +\n                    purseGold +\n                    kingGold -\n                    casualtiesPenalty +\n                    objectiveBonus;\n\n                  return (\n                    <div className=\"bg-gradient-to-r from-yellow-600 to-yellow-800 p-3 rounded-xl\">\n                      <div className=\"flex flex-wrap justify-center gap-2 mb-2\">\n                        {killedEnemyPieces.map((killedPiece, index) => (\n                          <span\n                            key={index}\n                            style={{ animationDelay: `${index * 100}ms` }}\n                            className=\"animate-fade-in relative\"\n                          >\n                            <span\n                              className=\"chip pb\"\n                              style={{ width: \"48px\", height: \"48px\", fontSize: \"40px\" }}\n                            >\n                              {(() => {\n                                const glyphSet =\n                                  GL[killedPiece.piece.type as keyof typeof GL];\n                                return glyphSet && \"b\" in glyphSet\n                                  ? (glyphSet[\"b\" as keyof typeof glyphSet] as string)\n                                  : \"?\";\n                              })()}\n                            </span>\n                            {killedPiece.piece.equip && (\n                              <span className=\"text-xl absolute top-0 right-0 translate-x-1 -translate-y-1\">\n                                {equipIcon(killedPiece.piece.equip)}\n                              </span>\n                            )}\n                          </span>\n                        ))}\n                        {Array.from({ length: destroyedCourtiers }).map((_, index) => (\n                          <span\n                            key={`courtier-${index}`}\n                            style={{ animationDelay: `${(killedEnemyPieces.length + index) * 100}ms` }}\n                            className=\"animate-fade-in relative\"\n                          >\n                            <span\n                              className=\"obstacle-chip\"\n                              style={{ width: \"48px\", height: \"48px\", fontSize: \"40px\" }}\n                            >\n                              {GL.COURTIER.n}\n                            </span>\n                          </span>\n                        ))}\n                      </div>\n                      <div className=\"text-sm mt-2 space-y-1 text-amber-200\">\n                        {ransomGold > 0 && (\n                          <div className=\"flex items-center justify-between font-semibold\">\n                            <span className=\"text-amber-200\">Units Ransom</span>\n                            <span className=\"text-amber-400\">+{ransomGold}g</span>\n                          </div>\n                        )}\n                        {purseCount > 0 && (\n                          <div className=\"flex items-center justify-between font-semibold\">\n                            <span className=\"text-amber-200\">\n                              Purses Collected (x{purseCount})\n                            </span>\n                            <span className=\"text-amber-400\">+{purseGold}g</span>\n                          </div>\n                        )}\n                        {kingGold > 0 && (\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"font-semibold text-amber-200\">\n                              {(() => {\n                                const defeatedKing = killedEnemyPieces.find(\n                                  (kp) => kp.piece.type === \"K\"\n                                );\n                                if (defeatedKing?.defeatType) {\n                                  return defeatedKing.defeatType === \"checkmate\"\n                                    ? \"King Captured\"\n                                    : defeatedKing.defeatType === \"beheaded\"\n                                    ? \"Regicide\"\n                                    : \"King Dishonored\";\n                                }\n                                return \"King\";\n                              })()}\n                            </span>\n                            <span className=\"font-semibold text-amber-400\">\n                              +{kingGold}g\n                            </span>\n                          </div>\n                        )}\n                        {destroyedCourtiers > 0 && (\n                          <div className=\"flex items-center justify-between font-semibold\">\n                            <span className=\"text-red-900\">Peasants Casualties</span>\n                            <span className=\"text-red-900\">-{casualtiesPenalty}g</span>\n                          </div>\n                        )}\n                      </div>\n                      {objectiveBonus > 0 && (\n                        <>\n                          <div className=\"h-px bg-gradient-to-r from-transparent via-yellow-400 to-transparent my-3\"></div>\n                          <div className=\"space-y-1 text-sm text-amber-200\">\n                            <div className=\"flex items-center justify-between font-semibold\">\n                              <span className=\"text-amber-200\">Objectives Bonus</span>\n                              <span className=\"text-amber-400\">\n                                +{objectiveBonus}g\n                              </span>\n                            </div>\n                            {completedObjectives.map((state) => {\n                              const objective = activeObjectives.find(\n                                (obj) => obj.id === state.objectiveId\n                              );\n                              if (!objective) return null;\n\n                              const description = getObjectiveDescription(\n                                objective,\n                                difficulty\n                              );\n\n                              return (\n                                <div\n                                  key={state.objectiveId}\n                                  className=\"flex items-center gap-2 text-xs text-amber-200\"\n                                >\n                                  <span className=\"text-amber-400\"></span>\n                                  <span className=\"text-amber-200\">{description}</span>\n                                </div>\n                              );\n                            })}\n                          </div>\n                        </>\n                      )}\n                      <div className=\"h-px bg-gradient-to-r from-transparent via-yellow-400 to-transparent my-3\"></div>\n                      <div className=\"font-bold text-2xl text-amber-200 flex justify-between\">\n                        <span className=\"text-amber-200\">Total Gold Earned:</span>\n                        <span className=\"text-amber-400\">+{totalGold}g</span>\n                      </div>\n                    </div>\n                  );\n                })()}\n\n              {win === W && (\n                <div className=\"bg-gradient-to-b from-stone-950/70 to-stone-950/90 px-0 pt-2\">\n                  <button\n                    onClick={handleNextLevel}\n                    className=\"px-4 py-2 w-full rounded-xl bg-emerald-600 hover:bg-emerald-500 text-white font-semibold\"\n                    style={{ fontFamily: 'serif' }}\n                  >\n                    Next Level\n                  </button>\n                </div>\n              )}\n\n              {win !== W && (\n                <div className=\"bg-gradient-to-b from-stone-950/70 to-stone-950/90 px-0 pt-2 flex flex-col gap-3\">\n                  <button\n                    onClick={handleRetryLevel}\n                    className=\"victory-popup-btn victory-popup-btn-retry\"\n                    style={{ fontFamily: 'serif' }}\n                  >\n                    Retry Level\n                  </button>\n                  <button\n                    onClick={handleTryAgain}\n                    className=\"victory-popup-btn victory-popup-btn-restart\"\n                    style={{ fontFamily: 'serif' }}\n                  >\n                    Restart Campaign\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n          <div className={`h-2 ${topBottomBarClass}`}></div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\r\nimport type { TutorialType } from './types';\r\n\r\ninterface TutorialPopupProps {\r\n  message: string;\r\n  subMessage?: string;\r\n  onCancel?: () => void;\r\n  onConfirm: () => void;\r\n  cancelText?: string;\r\n  confirmText?: string;\r\n  position?: {\r\n    top: number;\r\n    left: number;\r\n  };\r\n  imageBanner?: string; // Path to banner image for mechanic tutorials\r\n  centered?: boolean; // If true, centers the popup instead of positioning by coordinates\r\n}\r\n\r\n// Tutorial content definitions\r\nexport const TUTORIAL_CONTENT: Record<TutorialType, {\r\n  title: string;\r\n  body: string;\r\n  imageBanner: string;\r\n}> = {\r\n  single_combat: {\r\n    title: \"Single Combat\",\r\n    body: \"Both units roll 1d6. Attacker wins ties.\",\r\n    imageBanner: `${process.env.PUBLIC_URL}/tutorial_imgs/tutorial_SingleCombat.png`,\r\n  },\r\n  supporting_units: {\r\n    title: \"Supporting Units\",\r\n    body: \"Add +1 to attack rolls for each other friendly Unit attacking the same square.\",\r\n    imageBanner: `${process.env.PUBLIC_URL}/tutorial_imgs/tutorial_SupportingUnits.png`,\r\n  },\r\n  king_advantage: {\r\n    title: \"King Advantage\",\r\n    body: \"King always attacks with Advantage (roll 2d6, keep highest).\",\r\n    imageBanner: `${process.env.PUBLIC_URL}/tutorial_imgs/tutorial_KingAdvantage.png`,\r\n  },\r\n  king_escape_hint: {\r\n    title: \"To win this scenario, lead your King to the golden squares at the board's edge.\",\r\n    body: \"\",\r\n    imageBanner: \"\",\r\n  },\r\n  stunned_units: {\r\n    title: \"Stunned Units\",\r\n    body: \"Stunned Units always roll 1.\",\r\n    imageBanner: `${process.env.PUBLIC_URL}/tutorial_imgs/tutorial_StunnedUnits.png`,\r\n  },\r\n  exhausted_units: {\r\n    title: \"Exhausted Units\",\r\n    body: \"After a Unit performs the same move 3 times, they are Stunned for one turn in exhaustion.\",\r\n    imageBanner: `${process.env.PUBLIC_URL}/tutorial_imgs/tutorial_ExhaustedUnits.png`,\r\n  },\r\n  veterans: {\r\n    title: \" Veterans\",\r\n    body: \"Units that win 5 single combats become Veterans. They always roll with Advantage (both attacking and defending).\",\r\n    imageBanner: `${process.env.PUBLIC_URL}/tutorial_imgs/tutorial_Veterans.png`,\r\n  },\r\n  market_buy_pawn: {\r\n    title: \"Market\",\r\n    body: \"Your King needs an army. Hire Men-at-Arms and outfit them for war.\",\r\n    imageBanner: `${process.env.PUBLIC_URL}/tutorial_imgs/tutorial_Market.png`,\r\n  },\r\n  market_view_battlefield: {\r\n    title: \" View Battlefield\",\r\n    body: \"Some battlefields are covered in a dense fog. To avoid ambushes, equip some units with  Torches to scout ahead and dispel the dark.\",\r\n    imageBanner: `${process.env.PUBLIC_URL}/tutorial_imgs/tutorial_ViewBattlefield.png`,\r\n  },\r\n  prayer_dice: {\r\n    title: \" Pray to the Eye\",\r\n    body: \"When a combat fails, you can use a Prayer Die to reroll a dice. This gives you a second chance to turn the tide of battle.\",\r\n    imageBanner: `${process.env.PUBLIC_URL}/tutorial_imgs/tutorial_PrayerDice.png`,\r\n  },\r\n};\r\n\r\n// Helper to get tutorial content by type\r\nexport const getTutorialContent = (type: TutorialType) => TUTORIAL_CONTENT[type];\r\n\r\nexport const TutorialPopup: React.FC<TutorialPopupProps> = ({\r\n  message,\r\n  subMessage,\r\n  onCancel,\r\n  onConfirm,\r\n  cancelText = 'GO BACK',\r\n  confirmText = 'CONTINUE',\r\n  position,\r\n  imageBanner,\r\n  centered = false,\r\n}) => {\r\n  // For mechanic tutorials with image banner\r\n  const isMechanicTutorial = !!imageBanner;\r\n  // Use position if provided, otherwise center\r\n  const shouldCenter = centered || !position;\r\n\r\n  return (\r\n    <div \r\n      className=\"fixed inset-0 bg-black/70 z-50\"\r\n      style={shouldCenter ? { display: 'flex', alignItems: 'center', justifyContent: 'center' } : {}}\r\n    >\r\n      <div\r\n        className={`tutorial-popup ${isMechanicTutorial ? 'tutorial-popup-mechanic' : ''}`}\r\n        style={\r\n          shouldCenter\r\n            ? {}\r\n            : {\r\n                position: 'fixed',\r\n                top: `${position.top}px`,\r\n                left: `${position.left}px`,\r\n                transform: 'translateX(-50%)',\r\n                margin: 0,\r\n                animation: 'tutorial-appear-positioned 0.3s ease-out',\r\n              }\r\n        }\r\n      >\r\n        {imageBanner && (\r\n          <div className=\"tutorial-popup-banner\">\r\n            <img src={imageBanner} alt=\"\" />\r\n          </div>\r\n        )}\r\n        <div className=\"tutorial-popup-content\">\r\n          <h3 className=\"tutorial-popup-title\">{message}</h3>\r\n          {subMessage && <p className=\"tutorial-popup-subtitle\">{subMessage}</p>}\r\n          <div className=\"tutorial-popup-buttons\">\r\n            {onCancel && (\r\n              <button\r\n                onClick={onCancel}\r\n                className=\"tutorial-popup-btn tutorial-popup-btn-cancel\"\r\n              >\r\n                {cancelText}\r\n              </button>\r\n            )}\r\n            <button\r\n              onClick={onConfirm}\r\n              className=\"tutorial-popup-btn tutorial-popup-btn-confirm\"\r\n            >\r\n              {confirmText}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n","import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { createPortal } from \"react-dom\";\nimport {\n  loadLevelConfig,\n  type TerrainConfigCell,\n  type NamedPiece,\n  type LevelConfig,\n  type VictoryCondition,\n} from \"./levelConfig\";\nimport StoryCard from \"./StoryCard\";\nimport { MainMenu } from \"./MainMenu\";\nimport { MusicManager, type MusicManagerHandle } from \"./MusicManager\";\nimport type {\n  PieceType,\n  Color,\n  PieceColor,\n  Equip,\n  Piece,\n  Board,\n  StoryCard as StoryCardType,\n  StoryEvent,\n  Phase,\n  TerrainCell,\n  Terrain,\n  ObstacleType,\n  Obstacle,\n  MarketAction,\n  CampaignState,\n  MoveRecord,\n  KilledPiece,\n  KingDefeatType,\n  OutcomeData,\n  TutorialType,\n  Difficulty,\n} from \"./types\";\nimport {\n  S,\n  W,\n  B,\n  RAD,\n  VAL,\n  ITEM_COSTS,\n  TIMING,\n  GL,\n  PHRASES,\n  NAMED_PHRASES,\n  SWING_PHRASES,\n  ITEM_DESCRIPTIONS,\n  PIECE_NAMES,\n} from \"./constants\";\nimport { Market } from \"./Market\";\nimport { VictoryPopup } from \"./VictoryPopup\";\nimport { TutorialPopup, getTutorialContent } from \"./TutorialPopup\";\nimport {\n  checkAllObjectives,\n  calculateObjectiveBonus,\n  formatObjectiveDescription,\n  type ObjectiveTracking,\n} from \"./ObjectiveManager\";\nimport \"./styles.css\";\n\n// --- Error Boundary & Tooltip Components ---\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction ErrorBoundary({ children }: { children: React.ReactNode }) {\n  const [err, setErr] = useState<Error | null>(null);\n  if (err) {\n    return (\n      <div style={{ color: \"white\", padding: 16 }}>\n        <h2>Something went wrong.</h2>\n        <pre>{String(err.stack || err.message || err)}</pre>\n      </div>\n    );\n  }\n  return (\n    <React.Suspense\n      fallback={<div style={{ color: \"white\", padding: 16 }}>Loading</div>}\n    >\n      <BoundaryInner onError={setErr}>{children}</BoundaryInner>\n    </React.Suspense>\n  );\n}\n\nfunction BoundaryInner({\n  children,\n  onError,\n}: {\n  children: React.ReactNode;\n  onError: (e: Error) => void;\n}) {\n  // Capture render errors\n  try {\n    return <>{children}</>;\n  } catch (e: any) {\n    onError(e);\n    return null;\n  }\n}\n\nfunction TooltipLayer({\n  tip,\n}: {\n  tip: { text: string; x: number; y: number } | null;\n}) {\n  if (!tip) return null;\n  return createPortal(\n    <div\n      className=\"tooltip\"\n      role=\"tooltip\"\n      aria-hidden=\"true\"\n      style={{\n        position: \"fixed\",\n        left: tip.x,\n        top: tip.y,\n        zIndex: 9999,\n        pointerEvents: \"none\", // <- crucial\n      }}\n    >\n      {tip.text}\n    </div>,\n    document.body\n  );\n}\n\nfunction useGlobalMousePos(enabled: boolean) {\n  const [pos, setPos] = useState<{ x: number; y: number }>({ x: 0, y: 0 });\n  useEffect(() => {\n    if (!enabled) return;\n    const onMove = (e: MouseEvent) => {\n      setPos({ x: e.clientX + 16, y: e.clientY + 16 }); // slight offset so cursor doesn't cover it\n    };\n    window.addEventListener(\"mousemove\", onMove, { passive: true });\n    return () => window.removeEventListener(\"mousemove\", onMove);\n  }, [enabled]);\n  return pos;\n}\n\n// --- Game Constants & Types ---\n/* Dice Chess 77  Slim\n * Keeps: brown board, black/white chips (high-contrast black pawns), fog on top rank, hover % odds,\n * support rings, King check aura, dice badges with base+mods then total bump, \"King Captured\", New Game.\n * Items:  Sword,  Shield,  Mount,  Torch,  Bow,  Staff,  Crystal Ball,  Disguise\n */\n\n// --- Sound Engine ---\nconst sfx = {\n  muted: false,\n  audioContext: new (window.AudioContext ||\n    (window as any).webkitAudioContext)(),\n\n  _play(\n    freq: number,\n    vol: number,\n    duration: number,\n    type: OscillatorType = \"sine\"\n  ) {\n    if (this.muted) return;\n    if (this.audioContext.state === \"suspended\") {\n      this.audioContext.resume();\n    }\n    const osc = this.audioContext.createOscillator();\n    const gain = this.audioContext.createGain();\n    osc.connect(gain);\n    gain.connect(this.audioContext.destination);\n\n    osc.type = type;\n    osc.frequency.setValueAtTime(freq, this.audioContext.currentTime);\n    gain.gain.setValueAtTime(vol, this.audioContext.currentTime);\n\n    gain.gain.exponentialRampToValueAtTime(\n      0.00001,\n      this.audioContext.currentTime + duration\n    );\n    osc.start(this.audioContext.currentTime);\n    osc.stop(this.audioContext.currentTime + duration);\n  },\n\n  purchase() {\n    this._play(880, 0.1, 0.1);\n    setTimeout(() => this._play(1046, 0.1, 0.15), 100);\n  },\n  deploy() {\n    this._play(220, 0.3, 0.15, \"square\");\n  },\n  equip() {\n    this._play(1200, 0.2, 0.1, \"triangle\");\n    setTimeout(() => this._play(1800, 0.2, 0.1, \"triangle\"), 50);\n  },\n  move() {\n    this._play(660, 0.25, 0.1, \"triangle\");\n  },\n  capture() {\n    this._play(150, 0.4, 0.2, \"sawtooth\");\n  },\n  combatLose() {\n    this._play(220, 0.4, 0.25, \"sawtooth\");\n    setTimeout(() => this._play(110, 0.5, 0.35, \"sawtooth\"), 120);\n  },\n  convert() {\n    this._play(523, 0.1, 0.1);\n    setTimeout(() => this._play(659, 0.1, 0.1), 100);\n    setTimeout(() => this._play(784, 0.1, 0.15), 200);\n  },\n  reveal() {\n    this._play(300, 0.2, 0.05, \"sawtooth\");\n    setTimeout(() => this._play(600, 0.3, 0.2, \"sawtooth\"), 50);\n  },\n  crystalBall() {\n    this._play(400, 0.2, 0.3);\n    setTimeout(() => this._play(800, 0.2, 0.3), 50);\n  },\n  spear() {\n    this._play(300, 0.3, 0.2, \"sawtooth\");\n  },\n  bowBreak() {\n    this._play(100, 0.5, 0.15, \"square\");\n  },\n  rockDestroy() {\n    this._play(80, 0.6, 0.3, \"sawtooth\");\n  },\n  prayer() {\n    this._play(600, 0.3, 0.2, \"triangle\");\n    setTimeout(() => this._play(900, 0.3, 0.3, \"triangle\"), 100);\n  },\n  winCheckmate() {\n    this._play(523, 0.2, 0.1);\n    setTimeout(() => this._play(659, 0.2, 0.1), 120);\n    setTimeout(() => this._play(784, 0.25, 0.15), 240);\n    setTimeout(() => this._play(1046, 0.3, 0.5), 360);\n  },\n  loseCheckmate() {\n    this._play(440, 0.4, 0.25, \"sawtooth\");\n    setTimeout(() => this._play(220, 0.5, 0.35, \"sawtooth\"), 200);\n    setTimeout(() => this._play(110, 0.6, 0.8, \"sawtooth\"), 400);\n  },\n  cashOut() {\n    this._play(800, 0.2, 0.1, \"triangle\");\n    setTimeout(() => this._play(1000, 0.2, 0.1, \"triangle\"), 80);\n    setTimeout(() => this._play(1200, 0.25, 0.15, \"triangle\"), 160);\n  },\n  unlock() {\n    this._play(523, 0.3, 0.15, \"triangle\");\n    setTimeout(() => this._play(659, 0.3, 0.15, \"triangle\"), 120);\n    setTimeout(() => this._play(784, 0.4, 0.2, \"triangle\"), 240);\n    setTimeout(() => this._play(1046, 0.5, 0.3, \"triangle\"), 360);\n  },\n};\n\n// --- RNG Helpers ---\nfunction xmur3(s: string) {\n  let h = 1779033703 ^ s.length;\n  for (let i = 0; i < s.length; i++) {\n    h = Math.imul(h ^ s.charCodeAt(i), 3432918353);\n    h = (h << 13) | (h >>> 19);\n  }\n  return () => {\n    h = Math.imul(h ^ (h >>> 16), 2246822507);\n    h = Math.imul(h ^ (h >>> 13), 3266489909);\n    h ^= h >>> 16;\n    return h >>> 0;\n  };\n}\nfunction sfc32(a: number, b: number, c: number, d: number) {\n  return function () {\n    a >>>= 0;\n    b >>>= 0;\n    c >>>= 0;\n    d >>>= 0;\n    let t = (a + b) | 0;\n    a = b ^ (b >>> 9);\n    b = (c + (c << 3)) | 0;\n    c = (c << 21) | (c >>> 11);\n    d = (d + 1) | 0;\n    t = (t + d) | 0;\n    c = (c + t) | 0;\n    return (t >>> 0) / 4294967296;\n  };\n}\nconst rngFrom = (seed: string) => {\n  const f = xmur3(seed);\n  return sfc32(f(), f(), f(), f());\n};\nconst rand = <T,>(r: () => number, a: T[]) => a[Math.floor(r() * a.length)];\n\n// --- Utils ---\nconst inb = (x: number, y: number) => x >= 0 && x < S && y >= 0 && y < S;\nconst inBounds = (x: number, y: number, size: number) =>\n  x >= 0 && x < size && y >= 0 && y < size;\nconst cheb = (a: { x: number; y: number }, b: { x: number; y: number }) =>\n  Math.max(Math.abs(a.x - b.x), Math.abs(a.y - b.y));\nconst manhattan = (a: { x: number; y: number }, b: { x: number; y: number }) =>\n  Math.abs(a.x - b.x) + Math.abs(a.y - b.y);\nconst cloneB = (b: Board) => b.map((r) => r.map((p) => (p ? { ...p } : null)));\nconst isKingPiece = (piece: Piece | null | undefined) =>\n  !!piece && (piece.type === \"K\" || piece.originalType === \"K\");\n\n// Campaign utility functions\nfunction serializePiece(p: Piece): {\n  id: string;\n  type: PieceType;\n  color: PieceColor;\n  equip?: Equip;\n  originalType?: PieceType;\n  name?: string;\n  kills?: number;\n  isPreconfigured?: boolean;\n  isExhausted?: boolean;\n  speechLines?: string[];\n} {\n  return {\n    id: p.id,\n    type: p.type,\n    color: p.color,\n    equip: p.equip,\n    originalType: p.originalType,\n    name: p.name,\n    kills: p.kills,\n    isPreconfigured: p.isPreconfigured,\n    isExhausted: p.isExhausted,\n    speechLines: p.speechLines,\n  };\n}\n\nfunction deserializePiece(s: {\n  id: string;\n  type: PieceType;\n  color: PieceColor;\n  equip?: Equip;\n  originalType?: PieceType;\n  name?: string;\n  kills?: number;\n  isPreconfigured?: boolean;\n  isExhausted?: boolean;\n  speechLines?: string[];\n}): Piece {\n  return {\n    id: s.id,\n    type: s.type,\n    color: s.color,\n    equip: s.equip,\n    originalType: s.originalType,\n    name: s.name,\n    kills: s.kills,\n    isPreconfigured: s.isPreconfigured,\n    isExhausted: s.isExhausted,\n    speechLines: s.speechLines,\n    stunnedForTurns: undefined, // Reset transient combat state\n  };\n}\n\nfunction placeRoster(B: Board, O: Obstacle, roster: Piece[], boardSize: number) {\n  const slots: Array<{ x: number; y: number }> = [];\n  // rows 0..1 first, then row 2\n  for (let y of [0, 1, 2]) {\n    for (let x = 0; x < boardSize; x++) slots.push({ x, y });\n  }\n\n  // Sort roster to prioritize King placement\n  const sortedRoster = roster.slice().sort((a, b) => {\n    if (a.type === \"K\") return -1; // King gets highest priority\n    if (b.type === \"K\") return 1;\n    return 0; // Keep other pieces in original order\n  });\n\n  // Try to place the King in the most central available square (defaulting to row 0)\n  const kingIndex = sortedRoster.findIndex((piece) => piece.type === \"K\");\n  if (kingIndex !== -1) {\n    const king = sortedRoster[kingIndex];\n    const center = (boardSize - 1) / 2;\n    const xCandidates = Array.from({ length: boardSize }, (_, x) => x).sort((a, b) => {\n      const diff = Math.abs(a - center) - Math.abs(b - center);\n      return diff !== 0 ? diff : a - b;\n    });\n    let placedKing = false;\n    for (const y of [0, 1, 2]) {\n      if (placedKing) break;\n      for (const x of xCandidates) {\n        const obstacleRow = O[y];\n        if (obstacleRow && obstacleRow[x] !== \"none\") continue;\n        if (!B[y]) B[y] = [];\n        if (B[y][x]) continue;\n        B[y][x] = { ...king };\n        sortedRoster.splice(kingIndex, 1);\n        placedKing = true;\n        break;\n      }\n    }\n  }\n\n  // Place pieces in available slots, avoiding obstacles\n  let pieceIndex = 0;\n  for (let i = 0; i < slots.length && pieceIndex < sortedRoster.length; i++) {\n    const { x, y } = slots[i];\n    // Check if position is empty (not occupied by obstacle or other piece)\n    if (!B[y]?.[x] && O[y]?.[x] === \"none\") {\n      B[y][x] = { ...sortedRoster[pieceIndex] }; // clone to avoid accidental mutation\n      pieceIndex++;\n    }\n  }\n}\nconst FILES = \"abcdefghijkl\"; // Support boards up to 12x12\nconst getChessNotation = (\n  from: { x: number; y: number },\n  to: { x: number; y: number },\n  piece: Piece,\n  isCapture: boolean\n) => {\n  let notation = \"\";\n  // The glyph is now handled in MoveCell, so we only need the coordinates part of the notation.\n  if (piece.type === \"P\" && isCapture) {\n    notation += FILES[from.x];\n  }\n  if (isCapture) {\n    notation += \"x\";\n  }\n  notation += FILES[to.x];\n  notation += to.y + 1; // y=0 is rank 1\n  return notation;\n};\n\n// ---- Stun / Curse helpers ----\nfunction applyStunAround(\n  b: Board,\n  pos: { x: number; y: number },\n  currentTurn: Color\n) {\n  for (let dy = -1; dy <= 1; dy++) {\n    for (let dx = -1; dx <= 1; dx++) {\n      if (dx === 0 && dy === 0) continue;\n      const nx = pos.x + dx,\n        ny = pos.y + dy;\n      if (!inb(nx, ny)) continue;\n      const adj = b[ny]?.[nx]; // Safe navigation\n      if (adj) {\n        const cur = adj.stunnedForTurns ?? 0;\n        // Unified stun rule: A stunned piece is stunned from the moment it triggers\n        // until the START of their next-next turn. This is always 2 turns.\n        const turns = 2;\n        adj.stunnedForTurns = Math.max(cur, turns);\n      }\n    }\n  }\n}\n/** Call this EXACTLY when a piece is removed from the board. */\nfunction onPieceDeath(\n  b: Board,\n  piece: Piece | null,\n  pos: { x: number; y: number },\n  turn: Color,\n  onPlayerPieceLost?: (piece: Piece) => void\n) {\n  if (!piece) return;\n  if (piece.color === \"w\" && onPlayerPieceLost) {\n    onPlayerPieceLost(piece);\n  }\n  if (piece.equip === \"curse\") {\n    applyStunAround(b, pos, turn);\n  }\n}\n\n// Helper function to track King defeats for ransom\nfunction trackKingDefeat(\n  defeatedKing: Piece,\n  defeatType: KingDefeatType,\n  setKilledEnemies: React.Dispatch<React.SetStateAction<KilledPiece[]>>\n) {\n  // Only track if it's the enemy (black) king\n  if (defeatedKing.color === B) {\n    setKilledEnemies((prev) => [...prev, { piece: defeatedKing, defeatType }]);\n  }\n}\n\ntype KillRecordContext = {\n  killerPiece?: Piece | null;\n  killerPosition?: { x: number; y: number } | null;\n  terrain?: Terrain;\n};\n\n// Helper function to check and unlock items, and track killed enemies for ransom\nfunction checkUnlockItem(\n  killedPiece: Piece | null,\n  killerColor: Color,\n  setUnlocked: React.Dispatch<\n    React.SetStateAction<Exclude<Equip, undefined>[]>\n  >,\n  setCampaign: React.Dispatch<React.SetStateAction<CampaignState>>,\n  campaign: CampaignState,\n  setKilledEnemies: React.Dispatch<React.SetStateAction<KilledPiece[]>>,\n  setMarketPoints?: React.Dispatch<React.SetStateAction<number>>,\n  setUnspentGold?: React.Dispatch<React.SetStateAction<number>>,\n  defeatType?: KingDefeatType,\n  context?: KillRecordContext\n) {\n  // Track killed enemies for ransom\n  if (killedPiece && killerColor === W && (killedPiece.color as string) === B) {\n    const killerPiece = context?.killerPiece || null;\n    const terrainGrid = context?.terrain;\n    const killerPosition = context?.killerPosition;\n    let killerTerrain: TerrainCell | undefined;\n    const targetStunned =\n      !!(killedPiece && killedPiece.stunnedForTurns !== undefined && killedPiece.stunnedForTurns > 0);\n\n    if (terrainGrid && killerPosition) {\n      const row = terrainGrid[killerPosition.y];\n      if (row) {\n        killerTerrain = row[killerPosition.x] ?? undefined;\n      }\n    }\n\n    setKilledEnemies((prev) => [\n      ...prev,\n      {\n        piece: killedPiece,\n        defeatType,\n        killerType: killerPiece?.type,\n        killerName: killerPiece?.name,\n        killerId: killerPiece?.id,\n        killerTerrain,\n        targetStunned,\n      },\n    ]);\n  }\n\n  // Only process if white (player) killed black (enemy)\n  if (!killedPiece || killerColor !== W || (killedPiece.color as string) !== B)\n    return;\n\n  // Check if the killed piece has an item\n  if (killedPiece.equip && killedPiece.equip !== undefined) {\n    const item = killedPiece.equip;\n\n    // Handle purse special case - gives gold but is not unlockable\n    if (item === \"purse\") {\n      sfx.cashOut();\n      // Note: Purse gold is added during ransom calculation, not immediately\n      return; // Don't unlock purse\n    }\n\n    // Ensure unlockedItems exists, default to empty array\n    const unlockedItems = campaign.unlockedItems || [];\n\n    // Check if this item is already unlocked\n    if (unlockedItems.indexOf(item) === -1) {\n      // Unlock this item\n      setCampaign((prev) => ({\n        ...prev,\n        unlockedItems: [...(prev.unlockedItems || []), item],\n      }));\n      setUnlocked((prev) => [...prev, item]);\n      sfx.unlock();\n    }\n  }\n}\n/** Decrement stun for the side that just finished its turn. */\nfunction decrementStunFor(side: Color, b: Board, boardSize: number = S) {\n  for (let y = 0; y < boardSize; y++) {\n    for (let x = 0; x < boardSize; x++) {\n      const p = b[y]?.[x]; // Safe navigation\n      if (p && p.color === side) {\n        if (p.stunnedForTurns && p.stunnedForTurns > 0) {\n          p.stunnedForTurns -= 1;\n          // Clear exhausted flag when stun wears off\n          if (p.stunnedForTurns === 0) {\n            p.isExhausted = false;\n          }\n        }\n        // Decrement shadow turns (for Bell of Names protection visual)\n        if (p.shadowForTurns && p.shadowForTurns > 0) {\n          p.shadowForTurns -= 1;\n        }\n      }\n    }\n  }\n}\n\nconst isProtectedByBanner = (\n  b: Board,\n  pieceColor: PieceColor,\n  pos: { x: number; y: number },\n  boardSize: number = S\n) => {\n  for (let y = 0; y < boardSize; y++) {\n    for (let x = 0; x < boardSize; x++) {\n      const p = b[y]?.[x]; // Safe navigation\n      if (p && p.color === pieceColor && p.equip === \"banner\") {\n        if (cheb(pos, { x, y }) <= 1 && !(pos.x === x && pos.y === y)) {\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n};\n\nconst equipIcon = (e: Equip) =>\n  e === \"sword\"\n    ? \"\"\n    : e === \"shield\"\n    ? \"\"\n    : e === \"lance\"\n    ? \"\"\n    : e === \"torch\"\n    ? \"\"\n    : e === \"bow\"\n    ? \"\"\n    : e === \"staff\"\n    ? \"\"\n    : e === \"crystal_ball\"\n    ? \"\"\n    : e === \"disguise\"\n    ? \"\"\n    : e === \"scythe\"\n    ? \"\"\n    : e === \"banner\"\n    ? \"\"\n    : e === \"curse\"\n    ? \"\"\n    : e === \"skull\"\n    ? \"\"\n    : e === \"purse\"\n    ? \"\"\n    : \"\";\n\n// --- Army Generation ---\nfunction specPool(totalGold: number, allowedPieceTypes?: PieceType[]) {\n  const o: Array<{ q: number; r: number; b: number; n: number; p: number }> =\n    [];\n\n  // Default to all piece types if none specified\n  const allowed = allowedPieceTypes && allowedPieceTypes.length > 0 \n    ? new Set(allowedPieceTypes)\n    : new Set<PieceType>([\"Q\", \"R\", \"B\", \"N\", \"P\"]);\n\n  // Piece gold values (matching VAL constant)\n  const Q_COST = 80;\n  const R_COST = 50;\n  const B_COST = 30;\n  const N_COST = 35;\n  const P_COST = 10;\n\n  // Determine max counts for each piece type (only if allowed)\n  const maxQ = allowed.has(\"Q\") ? 1 : 0;\n  const maxR = allowed.has(\"R\") ? 3 : 0;\n  const maxB = allowed.has(\"B\") ? 3 : 0;\n  const maxN = allowed.has(\"N\") ? 3 : 0;\n\n  for (let q = 0; q <= maxQ; q++) {\n    for (let r = 0; r <= maxR; r++) {\n      for (let b = 0; b <= maxB; b++) {\n        for (let n = 0; n <= maxN; n++) {\n          const back = q + r + b + n;\n          if (back > 6) continue; // Max 6 back rank pieces (excluding King)\n\n          const goldSpent = q * Q_COST + r * R_COST + b * B_COST + n * N_COST;\n          const remainingGold = totalGold - goldSpent;\n\n          // Calculate how many pawns we can afford (only if pawns are allowed)\n          const maxPawns = allowed.has(\"P\") ? Math.floor(remainingGold / P_COST) : 0;\n          const p = maxPawns;\n\n          // No minimum pawn requirement - generate all valid combinations\n          if (remainingGold >= 0) {\n            // Generate specs even with 0 pawns if we have back rank pieces or if pawns aren't allowed\n            if (back > 0 || (allowed.has(\"P\") && p >= 0)) {\n              o.push({ q, r, b, n, p });\n            }\n          }\n        }\n      }\n    }\n  }\n\n  return o;\n}\n\nfunction build(\n  color: Color,\n  r: () => number,\n  initialGold: number = 200,\n  isPlayer: boolean = false,\n  availableItems?: Exclude<Equip, undefined>[], // Optional override for available items\n  boardSize: number = S,\n  namedPieces?: NamedPiece[], // Optional named pieces with equipment\n  kingName?: string, // Optional custom king name\n  board?: Board, // Optional board to check available slots\n  backRankRow?: number, // Which row is the back rank\n  frontRankRow?: number, // Which row is the front rank\n  skipKing?: boolean, // Optional flag to skip creating the King (for king_escaped only mode)\n  guaranteedItems?: Exclude<Equip, undefined>[], // Items that MUST be equipped (from story events)\n  allowedPieceTypes?: PieceType[], // Optional: which piece types can be randomly generated\n  guaranteedPieces?: Array<{ type: PieceType; equip?: Equip }>, // Optional: guaranteed pieces that must spawn (don't consume gold)\n  equipmentGold?: number, // Optional: gold specifically for equipment randomization (if not set, uses a default allocation)\n  obstacles?: Obstacle, // Optional: obstacles grid to check which slots are blocked\n  pawnBudget?: number // Optional: percentage (0.0-1.0) of gold to allocate for pawns before generating other pieces\n) {\n  const EQ: Exclude<Equip, undefined>[] = availableItems ?? [\n    \"sword\",\n    \"shield\",\n    \"lance\",\n    \"torch\",\n    \"bow\",\n    \"staff\",\n    \"crystal_ball\",\n    \"disguise\",\n    \"scythe\",\n    \"banner\",\n    \"curse\",\n    \"skull\",\n  ];\n  const EQ_FOR_PAWNS = EQ.filter((item) => item !== \"disguise\");\n  const EQ_FOR_BACK_RANK = EQ.filter((item) => item !== \"disguise\"); // Kings cannot be disguised\n\n  const id = (t: string) =>\n    `${color}${t}-${Math.random().toString(36).slice(2, 8)}`;\n\n  // Step 1: Count available slots if board is provided\n  // We need to count slots that are empty on the board AND don't have obstacles\n  let availableBackSlots = boardSize;\n  let availableFrontSlots = boardSize;\n\n  if (board && backRankRow !== undefined && frontRankRow !== undefined) {\n    // Count actual empty slots (no pieces AND no obstacles)\n    availableBackSlots = 0;\n    availableFrontSlots = 0;\n    const blockedBackSlots: number[] = [];\n    const blockedFrontSlots: number[] = [];\n    for (let x = 0; x < boardSize; x++) {\n      const backHasObstacle = obstacles && obstacles[backRankRow]?.[x] && obstacles[backRankRow][x] !== \"none\";\n      const frontHasObstacle = obstacles && obstacles[frontRankRow]?.[x] && obstacles[frontRankRow][x] !== \"none\";\n      const backHasPiece = board[backRankRow]?.[x] !== null && board[backRankRow]?.[x] !== undefined;\n      const frontHasPiece = board[frontRankRow]?.[x] !== null && board[frontRankRow]?.[x] !== undefined;\n      \n      if (board[backRankRow]?.[x] === null && !backHasObstacle) {\n        availableBackSlots++;\n      } else if (backHasObstacle || backHasPiece) {\n        blockedBackSlots.push(x);\n      }\n      \n      if (board[frontRankRow]?.[x] === null && !frontHasObstacle) {\n        availableFrontSlots++;\n      } else if (frontHasObstacle || frontHasPiece) {\n        blockedFrontSlots.push(x);\n      }\n    }\n    \n    // Debug logging for slot calculation\n    if (color === B) {\n      // console.log(\"[Difficulty Debug] Slot calculation:\", {\n      //   backRankRow,\n      //   frontRankRow,\n      //   boardSize,\n      //   availableBackSlots,\n      //   availableFrontSlots,\n      //   blockedBackSlots,\n      //   blockedFrontSlots,\n      //   backRankObstacles: Array.from({length: boardSize}, (_, i) => obstacles?.[backRankRow]?.[i]),\n      //   frontRankObstacles: Array.from({length: boardSize}, (_, i) => obstacles?.[frontRankRow]?.[i]),\n      //   backRankPieces: Array.from({length: boardSize}, (_, i) => board?.[backRankRow]?.[i] ? board[backRankRow][i]?.type : null),\n      //   frontRankPieces: Array.from({length: boardSize}, (_, i) => board?.[frontRankRow]?.[i] ? board[frontRankRow][i]?.type : null)\n      // });\n    }\n  }\n\n  // Step 2: Create named pieces first (they don't consume gold budget and have priority placement)\n  const namedBackRankPieces: Piece[] = [];\n  const namedFrontRankPieces: Piece[] = [];\n  let kingFromNamedPieces: Piece | null = null;\n\n  if (namedPieces && namedPieces.length > 0) {\n    for (const namedPiece of namedPieces) {\n      // If this is a King and we're not skipping King creation, handle it specially\n      if (namedPiece.type === \"K\" && !skipKing) {\n        kingFromNamedPieces = {\n          id: id(namedPiece.type),\n          type: namedPiece.type,\n          color,\n          name: namedPiece.name,\n          equip: namedPiece.equip,\n          isPreconfigured: true, // Mark as preconfigured for gold background\n          speechLines: namedPiece.speechLines, // Store custom speech lines\n        };\n      } else {\n        const piece: Piece = {\n          id: id(namedPiece.type),\n          type: namedPiece.type,\n          color,\n          name: namedPiece.name,\n          equip: namedPiece.equip,\n          isPreconfigured: true, // Mark as preconfigured for gold background\n          speechLines: namedPiece.speechLines, // Store custom speech lines\n        };\n\n        if (namedPiece.type === \"P\") {\n          namedFrontRankPieces.push(piece);\n        } else {\n          namedBackRankPieces.push(piece);\n        }\n      }\n    }\n  }\n\n  // Step 3: Create King FIRST (with optional name), unless skipKing is true\n  const back: Piece[] = [];\n  let kingCreated = false;\n  \n  if (!skipKing) {\n    // If King was defined in namedPieces, use that; otherwise create a basic King\n    if (kingFromNamedPieces) {\n      back.push(kingFromNamedPieces);\n    } else {\n      const king: Piece = { id: `${color}-K`, type: \"K\", color };\n      if (kingName) {\n        king.name = kingName;\n        king.isPreconfigured = true; // Mark king as preconfigured if named\n      }\n      back.push(king);\n    }\n    kingCreated = true;\n  }\n\n  // Add named back rank pieces IMMEDIATELY after King (guaranteed placement)\n  back.push(...namedBackRankPieces);\n\n  // Step 3.5: Add guaranteed pieces (don't consume gold budget)\n  const guaranteedBackRankPieces: Piece[] = [];\n  const guaranteedFrontRankPieces: Piece[] = [];\n  let overflowPawnsCount = 0; // Track how many pawns will overflow to back rank\n  \n  if (guaranteedPieces && guaranteedPieces.length > 0) {\n    for (const gp of guaranteedPieces) {\n      // Skip creating a King if one was already created (from namedPieces or regular king creation)\n      if (gp.type === \"K\" && kingCreated) {\n        continue; // Skip this guaranteed King since we already have one\n      }\n      \n      const piece: Piece = {\n        id: id(gp.type),\n        type: gp.type,\n        color,\n        equip: gp.equip,\n      };\n      if (gp.type === \"P\") {\n        guaranteedFrontRankPieces.push(piece);\n      } else {\n        guaranteedBackRankPieces.push(piece);\n      }\n    }\n    \n    // Calculate how many guaranteed pawns will overflow to back rank\n    // This happens when guaranteed pawns + named pawns exceed available front slots\n    const totalFrontRankPieces = namedFrontRankPieces.length + guaranteedFrontRankPieces.length;\n    if (totalFrontRankPieces > availableFrontSlots) {\n      overflowPawnsCount = totalFrontRankPieces - availableFrontSlots;\n    }\n  }\n  \n  // Add guaranteed back rank pieces\n  back.push(...guaranteedBackRankPieces);\n\n  // Step 4: Calculate how many slots remain for random pieces (accounting for actual board space)\n  // Account for overflow pawns that will be placed in back rank\n  const remainingBackSlots =\n    availableBackSlots - (kingCreated ? 1 : 0) - namedBackRankPieces.length - guaranteedBackRankPieces.length - overflowPawnsCount;\n\n  // Step 5: Generate army spec based on remaining slots and gold\n  const allowed = allowedPieceTypes && allowedPieceTypes.length > 0 \n    ? new Set(allowedPieceTypes)\n    : new Set<PieceType>([\"Q\", \"R\", \"B\", \"N\", \"P\"]);\n  \n  let s: { q: number; r: number; b: number; n: number; p: number };\n  \n  // If pawnBudget is specified, allocate gold for pawns first, then generate back-rank pieces\n  if (pawnBudget !== undefined && pawnBudget > 0 && allowed.has(\"P\")) {\n    const P_COST = 10;\n    const pawnGold = Math.floor(initialGold * pawnBudget);\n    const backRankGold = initialGold - pawnGold;\n    \n    // Calculate how many pawns we can afford with the pawn budget\n    const pawnCount = Math.floor(pawnGold / P_COST);\n    \n    // Generate back-rank pieces with remaining gold (exclude pawns from allowed types)\n    const backRankAllowed = Array.from(allowed).filter(t => t !== \"P\") as PieceType[];\n    const BACK_SPECS = specPool(backRankGold, backRankAllowed);\n    const backSpec = BACK_SPECS.length > 0 ? rand(r, BACK_SPECS) : { q: 0, r: 0, b: 0, n: 0, p: 0 };\n    \n    s = {\n      q: backSpec.q,\n      r: backSpec.r,\n      b: backSpec.b,\n      n: backSpec.n,\n      p: pawnCount\n    };\n  } else {\n    // Original behavior: generate all pieces together\n    const SPECS = specPool(initialGold, allowedPieceTypes);\n    // Fallback to minimal army spec if specPool returns empty (when gold is too low)\n    const defaultSpec = { q: 0, r: 0, b: 0, n: 0, p: 0 };\n    s = SPECS.length > 0 ? rand(r, SPECS) : defaultSpec;\n    \n    // Debug logging for spec generation\n    if (color === B) {\n      // console.log(\"[Difficulty Debug] Spec generation:\", {\n      //   initialGold,\n      //   allowedPieceTypes,\n      //   specsGenerated: SPECS.length,\n      //   selectedSpec: s,\n      //   specsArray: SPECS\n      // });\n    }\n  }\n\n  // Add randomly generated pieces (only up to remaining back rank slots and only if allowed)\n  let addedPieces = 0;\n  if (s && s.q && allowed.has(\"Q\") && addedPieces < remainingBackSlots) {\n    back.push({ id: id(\"Q\"), type: \"Q\", color });\n    addedPieces++;\n  }\n  if (s) {\n    for (let i = 0; i < s.r && allowed.has(\"R\") && addedPieces < remainingBackSlots; i++) {\n      back.push({ id: id(\"R\"), type: \"R\", color });\n      addedPieces++;\n    }\n    for (let i = 0; i < s.b && allowed.has(\"B\") && addedPieces < remainingBackSlots; i++) {\n      back.push({ id: id(\"B\"), type: \"B\", color });\n      addedPieces++;\n    }\n    for (let i = 0; i < s.n && allowed.has(\"N\") && addedPieces < remainingBackSlots; i++) {\n      back.push({ id: id(\"N\"), type: \"N\", color });\n      addedPieces++;\n    }\n  }\n\n  // Place back rank pieces on the board (including overflow pawns from guaranteed pieces)\n  const br = Array(boardSize).fill(null) as (Piece | null)[];\n  \n  // Add overflow pawns to back rank before placing\n  if (overflowPawnsCount > 0) {\n    const overflowPawns = guaranteedFrontRankPieces.splice(-overflowPawnsCount);\n    back.push(...overflowPawns);\n  }\n  \n  const idx = Array.from({ length: boardSize }, (_, i) => i).sort(\n    () => r() - 0.5\n  );\n  back.forEach((p, i) => {\n    br[idx[i]] = p;\n  });\n\n  // Step 6: Create front rank with named pawns FIRST (priority), then generated pawns\n  const fr = Array(boardSize).fill(null) as (Piece | null)[];\n  const slots = Array.from({ length: boardSize }, (_, i) => i).sort(\n    () => r() - 0.5\n  );\n\n  // Calculate equipment budget - use equipmentGold if provided, otherwise use a default allocation\n  const equipmentBudget = equipmentGold ?? (isPlayer ? 20 : 40); // Default: 20 for player, 40 for enemy\n  let remainingEquipmentGold = equipmentBudget;\n  \n  // Guaranteed items (from story events) don't consume the randomization budget\n  // They are always equipped regardless of the equipment gold setting\n  \n  // Get available items for randomization (use passed parameter or default)\n  const EQ_AVAILABLE = availableItems && availableItems.length > 0 ? availableItems : EQ;\n  const EQ_FOR_PAWNS_AVAILABLE = EQ_AVAILABLE.filter(item => EQ_FOR_PAWNS.includes(item as any));\n  const EQ_FOR_BACK_RANK_AVAILABLE = EQ_AVAILABLE.filter(item => EQ_FOR_BACK_RANK.includes(item as any));\n  \n  // Get average item cost from available items for budget calculations\n  const availableItemCosts = EQ_AVAILABLE.map(item => ITEM_COSTS[item as keyof typeof ITEM_COSTS] || 10);\n  const averageItemCost = availableItemCosts.length > 0 \n    ? availableItemCosts.reduce((a, b) => a + b, 0) / availableItemCosts.length\n    : 10;\n  \n  // Calculate how many pieces can be equipped based on remaining budget\n  const maxPawnItemsToEquip = Math.floor(remainingEquipmentGold / averageItemCost);\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const maxBackItemsToEquip = Math.floor(remainingEquipmentGold / averageItemCost);\n  \n  // Place named pawns FIRST (guaranteed placement)\n  for (let i = 0; i < namedFrontRankPieces.length; i++) {\n    if (i < boardSize) {\n      fr[slots[i]] = namedFrontRankPieces[i];\n    }\n  }\n  \n  // Place guaranteed pawns AFTER named pawns\n  // Note: overflow pawns have already been moved to back rank\n  for (let i = 0; i < guaranteedFrontRankPieces.length; i++) {\n    const slotIndex = namedFrontRankPieces.length + i;\n    if (slotIndex < availableFrontSlots && slots[slotIndex] !== undefined) {\n      fr[slots[slotIndex]] = guaranteedFrontRankPieces[i];\n    }\n  }\n\n  // Calculate how many slots remain for random pawns (accounting for actual board space)\n  // Only generate pawns if they are in the allowed piece types\n  const remainingPawnSlots =\n    Math.min(availableFrontSlots, boardSize) - namedFrontRankPieces.length - guaranteedFrontRankPieces.length;\n  const actualPawnsToGenerate = allowed.has(\"P\") \n    ? Math.min(s?.p || 0, remainingPawnSlots)\n    : 0;\n  \n  // Debug logging for pawn generation\n  if (color === B) {\n    // console.log(\"[Difficulty Debug] Pawn generation:\", {\n    //   availableFrontSlots,\n    //   boardSize,\n    //   namedFrontRankPiecesCount: namedFrontRankPieces.length,\n    //   guaranteedFrontRankPiecesCount: guaranteedFrontRankPieces.length,\n    //   remainingPawnSlots,\n    //   specPawns: s?.p || 0,\n    //   actualPawnsToGenerate,\n    //   allowedHasP: allowed.has(\"P\")\n    // });\n  }\n\n  // Generate random pawns (only up to remaining slots and only if allowed)\n  if (actualPawnsToGenerate > 0) {\n    for (let i = 0; i < actualPawnsToGenerate; i++) {\n      const slotIndex = namedFrontRankPieces.length + guaranteedFrontRankPieces.length + i;\n      const k = slots[slotIndex];\n      fr[k] = { id: id(\"P\"), type: \"P\", color };\n    }\n  }\n  \n  // Step 5a: Equip random items to ALL unequipped pawns (both guaranteed and random, in front AND back ranks)\n  // This ensures guaranteed pawns can also get random equipment, even if they overflow to back rank\n  const allUnequippedPawns: Piece[] = [];\n  fr.forEach((p) => {\n    if (p && p.type === \"P\" && !p.equip) {\n      allUnequippedPawns.push(p);\n    }\n  });\n  // Also check back rank for pawns (can happen when front rank is full)\n  br.forEach((p) => {\n    if (p && p.type === \"P\" && !p.equip) {\n      allUnequippedPawns.push(p);\n    }\n  });\n  \n  if (allUnequippedPawns.length > 0 && remainingEquipmentGold > 0 && EQ_FOR_PAWNS_AVAILABLE.length > 0) {\n    // Calculate how many pawns to equip based on budget\n    const pawnsToEquipCount = Math.min(maxPawnItemsToEquip, allUnequippedPawns.length);\n    \n    // Randomly select which pawns to equip\n    const pawnIndicesToEquip = Array.from({ length: allUnequippedPawns.length }, (_, i) => i)\n      .sort(() => r() - 0.5)\n      .slice(0, pawnsToEquipCount);\n    \n    for (const idx of pawnIndicesToEquip) {\n      if (remainingEquipmentGold <= 0) break;\n      \n      const randomItem = EQ_FOR_PAWNS_AVAILABLE[Math.floor(r() * EQ_FOR_PAWNS_AVAILABLE.length)] as Equip;\n      const itemCost = ITEM_COSTS[randomItem as keyof typeof ITEM_COSTS] || 10;\n      \n      if (remainingEquipmentGold >= itemCost) {\n        allUnequippedPawns[idx].equip = randomItem;\n        remainingEquipmentGold -= itemCost;\n      }\n    }\n  }\n\n  // Step 5b: Equip random back rank pieces (but don't override named piece equipment)\n  const nonKingBackRank = br.filter((x) => x && x.type !== \"K\") as Piece[];\n  const unequippedBackRank = nonKingBackRank.filter((p) => !p.equip);\n  \n  // Select which back rank pieces to equip based on remaining equipment budget\n  const backItemsToEquipCount = Math.min(\n    Math.floor(remainingEquipmentGold / averageItemCost),\n    unequippedBackRank.length\n  );\n  const piecesToEquip = unequippedBackRank\n    .sort(() => r() - 0.5)\n    .slice(0, backItemsToEquipCount);\n\n  piecesToEquip.forEach((p) => {\n    // Select item from available items that fits the budget\n    if (remainingEquipmentGold <= 0 || EQ_FOR_BACK_RANK_AVAILABLE.length === 0) return;\n    \n    // Ensure King doesn't get disguise\n    let equip: Equip;\n    let itemCost = 0;\n    let attempts = 0;\n    do {\n      equip = EQ_FOR_BACK_RANK_AVAILABLE[\n        Math.floor(r() * EQ_FOR_BACK_RANK_AVAILABLE.length)\n      ] as Equip;\n      itemCost = ITEM_COSTS[equip as keyof typeof ITEM_COSTS] || 10;\n      attempts++;\n    } while ((p.type === \"K\" && equip === \"disguise\") || (remainingEquipmentGold < itemCost && attempts < 10));\n    \n    // Only equip if we have budget for it\n    if (remainingEquipmentGold >= itemCost && equip) {\n      if (equip === \"disguise\" && p.type !== \"P\") {\n        p.originalType = p.type;\n        p.type = \"P\";\n      }\n      p.equip = equip;\n      remainingEquipmentGold -= itemCost;\n    }\n  });\n\n  // Step 6: Equip guaranteed items (from story events) to unequipped pieces\n  // Note: These items have already been accounted for in the equipment budget\n  if (guaranteedItems && guaranteedItems.length > 0) {\n    // Collect all unequipped pieces (front and back rank)\n    const allPieces: Piece[] = [];\n    br.forEach(p => { if (p && !p.equip) allPieces.push(p); });\n    fr.forEach(p => { if (p && !p.equip) allPieces.push(p); });\n    \n    // Shuffle and assign guaranteed items\n    allPieces.sort(() => r() - 0.5);\n    \n    for (let i = 0; i < Math.min(guaranteedItems.length, allPieces.length); i++) {\n      const item = guaranteedItems[i];\n      allPieces[i].equip = item;\n      \n      // Handle disguise special case\n      if (item === \"disguise\" && allPieces[i].type !== \"P\") {\n        allPieces[i].originalType = allPieces[i].type;\n        allPieces[i].type = \"P\";\n      }\n    }\n  }\n\n  return { back: br, front: fr };\n}\n\n// --- Terrain Generation ---\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst emptyT = (): Terrain =>\n  Array.from({ length: S }, () => Array(S).fill(\"none\")) as Terrain;\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst emptyTerrain = (size: number): Terrain =>\n  Array.from({ length: size }, () => Array(size).fill(\"none\")) as Terrain;\n\nconst emptyObstacles = (size: number): Obstacle =>\n  Array.from({ length: size }, () => Array(size).fill(\"none\")) as Obstacle;\n\n// Parse terrain notation like \"W(Rock)\" into terrain and obstacle parts\nfunction parseTerrainCell(cell: string): { terrain: string; obstacle: ObstacleType } {\n  const match = cell.match(/^([FW_n]+)\\((.*)\\)$/);\n  if (match) {\n    return { terrain: match[1], obstacle: match[2].toLowerCase() as ObstacleType };\n  }\n  return { terrain: cell, obstacle: \"none\" };\n}\n\n// Updated placeFeatures function for clustered water and configurable terrain with obstacles\nfunction placeFeatures(\n  B: Board,\n  T: Terrain,\n  O: Obstacle, // Obstacles grid\n  r: () => number,\n  boardSize: number,\n  terrainMatrix?: TerrainConfigCell[][],\n  skipTerrainRow?: number, // Row index where water/forest should not be placed (for escape row)\n  randomTerrainPool?: { rock?: number; forest?: number; water?: number } // Configuration for random terrain placement\n) {\n  const occupied = new Set<string>(); // Keep track of obstacles, forests, and water tiles\n  const waterCoords: { x: number; y: number }[] = []; // Store coordinates of placed water tiles\n\n  // Helper to place terrain, obstacles, and update occupied set\n  const placeFeature = (\n    terrainType: TerrainCell, \n    obstacleType: ObstacleType, \n    x: number, \n    y: number\n  ) => {\n    // Skip water and forest on the escape row (but allow obstacles)\n    if ((terrainType === \"water\" || terrainType === \"forest\") && skipTerrainRow !== undefined && y === skipTerrainRow) {\n      return; // Don't place water/forest on escape row\n    }\n    \n    // Place terrain\n    T[y][x] = terrainType;\n    if (terrainType === \"water\") {\n      waterCoords.push({ x, y });\n    }\n    \n    // Place obstacle\n    O[y][x] = obstacleType;\n    \n    // Mark as occupied if there's an obstacle\n    if (obstacleType !== \"none\") {\n      occupied.add(`${x},${y}`);\n    }\n  };\n\n  // Helper to get valid empty neighbor coordinates\n  const getValidNeighbors = (\n    x: number,\n    y: number\n  ): { x: number; y: number }[] => {\n    const neighbors: { x: number; y: number }[] = [];\n    for (let dy = -1; dy <= 1; dy++) {\n      for (let dx = -1; dx <= 1; dx++) {\n        if (dx === 0 && dy === 0) continue; // Skip self\n        const nx = x + dx;\n        const ny = y + dy;\n        if (inBounds(nx, ny, boardSize) && !occupied.has(`${nx},${ny}`)) {\n          neighbors.push({ x: nx, y: ny });\n        }\n      }\n    }\n    return neighbors;\n  };\n\n  // --- Placement Logic ---\n\n  // If a terrain matrix is provided, use it for initial placement\n  const randomCells: { x: number; y: number }[] = [];\n\n  if (terrainMatrix && terrainMatrix.length === boardSize) {\n    // Process matrix: terrainMatrix[0] = board row 0 (white's back rank, bottom visual)\n    // Board rendering flips y-axis: board[0] displays at bottom, board[boardSize-1] at top\n    // So: white starts at board[0,1] (bottom), black starts at board[boardSize-1, boardSize-2] (top)\n    for (let y = 0; y < boardSize; y++) {\n      const row = terrainMatrix[y];\n      if (row && row.length === boardSize) {\n        for (let x = 0; x < boardSize; x++) {\n          const cell = row[x];\n          const { terrain, obstacle } = parseTerrainCell(cell);\n          \n          // Handle terrain placement\n          if (terrain === \"F\" && !(skipTerrainRow !== undefined && y === skipTerrainRow)) {\n            placeFeature(\"forest\", obstacle, x, y);\n          } else if (terrain === \"W\" && !(skipTerrainRow !== undefined && y === skipTerrainRow)) {\n            placeFeature(\"water\", obstacle, x, y);\n          } else if (terrain === \"_\") {\n            // Explicitly empty terrain\n            placeFeature(\"none\", obstacle, x, y);\n          } else if (terrain === \"n\") {\n            // Random cell - save for random generation\n            randomCells.push({ x, y });\n            // If there's an obstacle specified with random terrain, place it now\n            if (obstacle !== \"none\") {\n              O[y][x] = obstacle;\n              occupied.add(`${x},${y}`);\n            }\n          } else {\n            // Default to none if unrecognized\n            placeFeature(\"none\", obstacle, x, y);\n          }\n        }\n      }\n    }\n\n    // Now apply random generation to cells marked as \"n\"\n    if (randomCells.length > 0) {\n      // Use custom terrain pool if provided, otherwise use defaults\n      const rockCount = randomTerrainPool?.rock ?? 1;\n      const forestCount = randomTerrainPool?.forest ?? 2;\n      const waterCount = randomTerrainPool?.water ?? 3;\n\n      // Track available cells for placement (initially all random cells)\n      const availableCells = new Set<string>();\n      randomCells.forEach(cell => {\n        if (!occupied.has(`${cell.x},${cell.y}`)) {\n          availableCells.add(`${cell.x},${cell.y}`);\n        }\n      });\n\n      // Helper to get a random available cell from the set\n      const getRandomAvailableCell = (): { x: number; y: number } | null => {\n        const cells = Array.from(availableCells).map(key => {\n          const [x, y] = key.split(',').map(Number);\n          return { x, y };\n        });\n        if (cells.length === 0) return null;\n        return cells[Math.floor(r() * cells.length)];\n      };\n\n      // Helper to remove a cell from available cells\n      const removeAvailableCell = (x: number, y: number) => {\n        availableCells.delete(`${x},${y}`);\n      };\n\n      // Place rock obstacles\n      for (let i = 0; i < rockCount && availableCells.size > 0; i++) {\n        const cell = getRandomAvailableCell();\n        if (cell && !occupied.has(`${cell.x},${cell.y}`)) {\n          placeFeature(\"none\", \"rock\", cell.x, cell.y);\n          removeAvailableCell(cell.x, cell.y);\n        }\n      }\n\n      // Place forests\n      for (let i = 0; i < forestCount && availableCells.size > 0; i++) {\n        const cell = getRandomAvailableCell();\n        if (cell && !occupied.has(`${cell.x},${cell.y}`)) {\n          placeFeature(\"forest\", \"none\", cell.x, cell.y);\n          removeAvailableCell(cell.x, cell.y);\n        }\n      }\n\n      // Place water tiles with clustering behavior\n      const CLUSTER_CHANCE = 0.75;\n      for (let i = 0; i < waterCount && availableCells.size > 0; i++) {\n        let waterPlaced = false;\n\n        // Attempt clustered placement first (if not the first water tile and chance allows)\n        if (waterCoords.length > 0 && r() < CLUSTER_CHANCE) {\n          // Get all neighbors of existing water tiles that are still available in random cells\n          const allNeighbors: { x: number; y: number }[] = [];\n          waterCoords.forEach((coord) => {\n            const neighbors = getValidNeighbors(coord.x, coord.y);\n            neighbors.forEach(neighbor => {\n              const key = `${neighbor.x},${neighbor.y}`;\n              // Check if this neighbor is available (in random cells pool) and doesn't have terrain yet\n              if (availableCells.has(key) && !occupied.has(key) && T[neighbor.y]?.[neighbor.x] === \"none\") {\n                allNeighbors.push(neighbor);\n              }\n            });\n          });\n\n          // Remove duplicates\n          const uniqueNeighbors = Array.from(\n            new Map(allNeighbors.map(n => [`${n.x},${n.y}`, n])).values()\n          );\n\n          if (uniqueNeighbors.length > 0) {\n            const neighbor = uniqueNeighbors[Math.floor(r() * uniqueNeighbors.length)];\n            placeFeature(\"water\", \"none\", neighbor.x, neighbor.y);\n            removeAvailableCell(neighbor.x, neighbor.y);\n            waterPlaced = true;\n          }\n        }\n\n        // If clustered placement failed or wasn't attempted, place randomly\n        if (!waterPlaced) {\n          const cell = getRandomAvailableCell();\n          if (cell && !occupied.has(`${cell.x},${cell.y}`)) {\n            placeFeature(\"water\", \"none\", cell.x, cell.y);\n            removeAvailableCell(cell.x, cell.y);\n            waterPlaced = true;\n          }\n        }\n\n        if (!waterPlaced && availableCells.size > 0) {\n          console.warn(\"Could not place water tile despite available cells.\");\n        }\n      }\n    }\n\n    // Exit early if terrain matrix was used\n    return;\n  }\n\n  // --- Default Random Generation (if no terrain matrix provided) ---\n\n  // Place 1 rock obstacle randomly\n  let rockPlaced = false;\n  let rockTries = 0;\n  while (!rockPlaced && rockTries < 50) {\n    const rx = Math.floor(r() * boardSize);\n    const ry = Math.floor(r() * boardSize);\n    if (!occupied.has(`${rx},${ry}`)) {\n      placeFeature(\"none\", \"rock\", rx, ry);\n      rockPlaced = true;\n    }\n    rockTries++;\n  }\n\n  // Place 4 forests randomly\n  for (let i = 0; i < 4; i++) {\n    let forestPlaced = false;\n    let forestTries = 0;\n    while (!forestPlaced && forestTries < 50) {\n      const fx = Math.floor(r() * boardSize);\n      const fy = Math.floor(r() * boardSize);\n      if (!occupied.has(`${fx},${fy}`)) {\n        placeFeature(\"forest\", \"none\", fx, fy);\n        forestPlaced = true;\n      }\n      forestTries++;\n    }\n  }\n\n  // Place 6 water tiles with clustering\n  const CLUSTER_CHANCE = 0.75;\n  for (let i = 0; i < 6; i++) {\n    let waterPlaced = false;\n    let placementTries = 0;\n\n    // Attempt clustered placement first (if not the first water tile and chance allows)\n    if (waterCoords.length > 0 && r() < CLUSTER_CHANCE) {\n      const allNeighbors: { x: number; y: number }[] = [];\n      waterCoords.forEach((coord) => {\n        allNeighbors.push(...getValidNeighbors(coord.x, coord.y));\n      });\n\n      if (allNeighbors.length > 0) {\n        const neighbor = rand(r, allNeighbors);\n        placeFeature(\"water\", \"none\", neighbor.x, neighbor.y);\n        waterPlaced = true;\n      }\n    }\n\n    // If clustered placement failed or wasn't attempted, place randomly\n    while (!waterPlaced && placementTries < 50) {\n      const wx = Math.floor(r() * boardSize);\n      const wy = Math.floor(r() * boardSize);\n      if (inBounds(wx, wy, boardSize) && !occupied.has(`${wx},${wy}`)) {\n        // Ensure in bounds before placing\n        placeFeature(\"water\", \"none\", wx, wy);\n        waterPlaced = true;\n      }\n      placementTries++;\n    }\n\n    if (!waterPlaced) {\n      console.warn(\"Could not place water tile after 50 attempts.\");\n    }\n  }\n}\n\n// --- Move Logic ---\nfunction moves(\n  b: Board,\n  T: Terrain,\n  O: Obstacle,\n  x: number,\n  y: number,\n  boardSize: number = S\n) {\n  const p = b[y]?.[x]; // Safe navigation\n  if (!p || (p.stunnedForTurns && p.stunnedForTurns > 0)) return [];\n  const col = p.color;\n  const dir = col === W ? 1 : -1;\n  const out: { x: number; y: number }[] = [];\n  const slide = (dx: number, dy: number) => {\n    let nx = x + dx,\n      ny = y + dy;\n  while (inBounds(nx, ny, boardSize)) {\n      const t = b[ny]?.[nx]; // Safe navigation\n      const obstacle = O[ny]?.[nx]; // Check for obstacles\n      if (obstacle !== \"none\") {\n        // Obstacle blocks movement and can be attacked\n        out.push({ x: nx, y: ny });\n        break;\n      }\n      if (t) {\n        if (t.color !== col) out.push({ x: nx, y: ny });\n        break;\n      } else out.push({ x: nx, y: ny });\n      nx += dx;\n      ny += dy;\n    }\n  };\n  switch (p.type) {\n    case \"K\":\n      for (let dx = -1; dx <= 1; dx++)\n        for (let dy = -1; dy <= 1; dy++)\n          if (dx || dy) {\n            const nx = x + dx,\n              ny = y + dy;\n            if (!inBounds(nx, ny, boardSize)) continue;\n            const t = b[ny]?.[nx]; // Safe navigation\n            const obstacle = O[ny]?.[nx]; // Check for obstacles\n            // Can move to empty squares or attack enemies/obstacles\n            if (obstacle !== \"none\" || !t || t.color !== col) out.push({ x: nx, y: ny });\n          }\n      break;\n    case \"Q\":\n      slide(1, 0);\n      slide(-1, 0);\n      slide(0, 1);\n      slide(0, -1);\n      slide(1, 1);\n      slide(-1, -1);\n      slide(1, -1);\n      slide(-1, 1);\n      break;\n    case \"R\":\n      slide(1, 0);\n      slide(-1, 0);\n      slide(0, 1);\n      slide(0, -1);\n      break;\n    case \"B\":\n      slide(1, 1);\n      slide(-1, -1);\n      slide(1, -1);\n      slide(-1, 1);\n      break;\n    case \"N\":\n      [\n        [1, 2],\n        [2, 1],\n        [-1, 2],\n        [-2, 1],\n        [1, -2],\n        [2, -1],\n        [-1, -2],\n        [-2, -1],\n      ].forEach(([dx, dy]) => {\n        const nx = x + dx,\n          ny = y + dy;\n        if (!inBounds(nx, ny, boardSize)) return;\n        const t = b[ny]?.[nx]; // Safe navigation\n        const obstacle = O[ny]?.[nx]; // Check for obstacles\n        // Can move to empty squares or attack enemies/obstacles\n        if (obstacle !== \"none\" || !t || t.color !== col) out.push({ x: nx, y: ny });\n      });\n      break;\n    case \"P\":\n      {\n        const ny = y + dir;\n        const obstacle = O[ny]?.[x]; // Check for obstacle in front\n        // Pawns can only move forward if no piece AND no obstacle\n        if (inBounds(x, ny, boardSize) && !b[ny]?.[x] && obstacle === \"none\") out.push({ x, y: ny });\n        for (const dx of [-1, 1]) {\n          const cx = x + dx,\n            cy = y + dir;\n          if (!inBounds(cx, cy, boardSize)) continue;\n          const t = b[cy]?.[cx]; // Safe navigation\n          const diagObstacle = O[cy]?.[cx]; // Check for diagonal obstacle\n          // Pawns can attack diagonally to capture pieces OR obstacles\n          if ((t && t.color !== col) || (diagObstacle !== \"none\")) out.push({ x: cx, y: cy });\n        }\n      }\n      break;\n  }\n  // Lance: one-time 2-square forward attack, cannot jump.\n  if (p.equip === \"lance\") {\n    const midY = y + dir;\n    const targetY = y + 2 * dir;\n    const midObstacle = O[midY]?.[x]; // Check for obstacle in path\n    // Check if path is clear (no pieces AND no obstacles)\n    if (inBounds(x, midY, boardSize) && !b[midY]?.[x] && midObstacle === \"none\") {\n      // Safe navigation\n      // Check if target is in bounds\n      if (inBounds(x, targetY, boardSize)) {\n        const targetPiece = b[targetY]?.[x]; // Safe navigation\n        const targetObstacle = O[targetY]?.[x]; // Check for obstacle at target\n        // Can attack enemy pieces OR obstacles\n        if ((targetPiece && targetPiece.color !== col) || (targetObstacle !== \"none\")) {\n          out.push({ x, y: targetY });\n        }\n      }\n    }\n  }\n  // Crystal Ball: swap with adjacent ally or Courtier\n  if (p.equip === \"crystal_ball\") {\n    for (let dx = -1; dx <= 1; dx++) {\n      for (let dy = -1; dy <= 1; dy++) {\n        if (dx === 0 && dy === 0) continue;\n        const nx = x + dx;\n        const ny = y + dy;\n        if (inBounds(nx, ny, boardSize)) {\n          const targetPiece = b[ny]?.[nx]; // Safe navigation\n          const targetObstacle = O[ny]?.[nx]; // Check for obstacle\n          // Can swap with allied piece or Courtier\n          if (\n            (targetPiece && targetPiece.color === p.color) ||\n            targetObstacle === \"courtier\"\n          ) {\n            out.push({ x: nx, y: ny });\n          }\n        }\n      }\n    }\n  }\n  return out;\n}\n\n// Helper function to get King moves ignoring stun status (for checkmate detection)\nfunction kingMovesIgnoringStun(\n  b: Board,\n  T: Terrain,\n  O: Obstacle,\n  x: number,\n  y: number,\n  boardSize: number = S\n) {\n  const p = b[y]?.[x]; // Safe navigation\n  if (!p || p.type !== \"K\") return [];\n  const col = p.color;\n  const out: { x: number; y: number }[] = [];\n  \n  // Get all adjacent squares (King can move one square in any direction)\n  for (let dx = -1; dx <= 1; dx++) {\n    for (let dy = -1; dy <= 1; dy++) {\n      if (dx || dy) {\n        const nx = x + dx;\n        const ny = y + dy;\n        if (!inBounds(nx, ny, boardSize)) continue;\n        const t = b[ny]?.[nx]; // Safe navigation\n        const obstacle = O[ny]?.[nx]; // Check for obstacles\n        // Can move to empty squares or attack enemies/obstacles\n        if (obstacle !== \"none\" || !t || t.color !== col) {\n          out.push({ x: nx, y: ny });\n        }\n      }\n    }\n  }\n  return out;\n}\n\n// --- Threat helpers ---\nconst attacks = (\n  b: Board,\n  T: Terrain,\n  O: Obstacle,\n  sx: number,\n  sy: number,\n  tx: number,\n  ty: number,\n  boardSize: number = S\n) => {\n  const p = b[sy]?.[sx]; // Safe navigation\n  if (!p || (p.stunnedForTurns && p.stunnedForTurns > 0)) return false;\n  return moves(b, T, O, sx, sy, boardSize).some((s) => s.x === tx && s.y === ty);\n};\n\nfunction supportCount(\n  b: Board,\n  T: Terrain,\n  O: Obstacle,\n  a: Piece | null, // <- widen type\n  from: { x: number; y: number },\n  to: { x: number; y: number },\n  boardSize: number = S\n) {\n  if (!a) return 0; // <- guard\n  let c = 0;\n  for (let y = 0; y < boardSize; y++)\n    for (let x = 0; x < boardSize; x++) {\n      if (x === from.x && y === from.y) continue;\n      const p = b[y]?.[x]; // Safe navigation\n      if (!p || p.color !== a.color) continue;\n      if (attacks(b, T, O, x, y, to.x, to.y, boardSize)) c++;\n    }\n  return c;\n}\n\nconst findK = (b: Board, c: Color, boardSize: number = S) => {\n  for (let y = 0; y < boardSize; y++)\n    for (let x = 0; x < boardSize; x++) {\n      const p = b[y]?.[x]; // Safe navigation\n      if (p && p.type === \"K\" && p.color === c) return { p, x, y };\n    }\n  return null;\n};\nconst findPieceById = (b: Board, id: string, boardSize: number = S) => {\n  for (let y = 0; y < boardSize; y++)\n    for (let x = 0; x < boardSize; x++) {\n      const p = b[y]?.[x]; // Safe navigation\n      if (p && p.id === id) return { p, x, y };\n    }\n  return null;\n};\nconst threatened = (\n  b: Board,\n  T: Terrain,\n  O: Obstacle,\n  sq: { x: number; y: number },\n  by: Color,\n  boardSize: number = S\n) => {\n  for (let y = 0; y < boardSize; y++)\n    for (let x = 0; x < boardSize; x++) {\n      const p = b[y]?.[x]; // Safe navigation\n      if (!p || p.color !== by) continue;\n      if (attacks(b, T, O, x, y, sq.x, sq.y, boardSize)) return true;\n    }\n  return false;\n};\n\n// --- Fog (Torch extends sight) ---\nconst visibility = (b: Board, phase: Phase, boardSize: number = S, fogRows: number = 2, marketViewVisible: boolean = false, marketEnabled: boolean = true) => {\n  const v: boolean[][] = Array.from({ length: boardSize }, () =>\n    Array(boardSize).fill(true)\n  );\n  \n  // Special fog logic when market is visible during market phase AND market is enabled\n  // If market is disabled, always use normal fog rules\n  if (phase === \"market\" && marketViewVisible && marketEnabled) {\n    // Hide all rows except the bottom 2 deployment rows\n    for (let y = 0; y < boardSize; y++) {\n      for (let x = 0; x < boardSize; x++) {\n        // Only show the bottom 2 rows (y <= 1)\n        if (v[y]) v[y][x] = y <= 1; // Safe check\n      }\n    }\n    return v;\n  }\n  \n  // Normal fog logic (for playing phase, when market is hidden, or when market is disabled)\n  // Hide the last N rows (enemy back ranks) based on fogRows parameter\n  for (let y = boardSize - fogRows; y < boardSize; y++) {\n    for (let x = 0; x < boardSize; x++) {\n      if (v[y]) v[y][x] = false; // Safe check - hide fogged rows\n    }\n  }\n\n  for (let y = 0; y < boardSize; y++)\n    for (let x = 0; x < boardSize; x++) {\n      const p = b[y]?.[x]; // Safe navigation\n      if (!p || p.color !== W) continue;\n      const R = p.equip === \"torch\" ? 3 : RAD;\n      for (let yy = 0; yy < boardSize; yy++)\n        for (let xx = 0; xx < boardSize; xx++)\n          if (v[yy] && manhattan({ x, y }, { x: xx, y: yy }) <= R) v[yy][xx] = true; // Safe check - using Manhattan distance so diagonals don't count\n      if (v[y]) v[y][x] = true; // Safe check\n    }\n  return v;\n};\n\n// --- Dice + mods ---\nconst d6 = (r: () => number) => 1 + Math.floor(r() * 6);\ntype Mod = { value: number; kind?: \"sword\" | \"shield\" | \"support\" | \"terrain\" };\nconst sumMods = (mods: Mod[]) =>\n  mods.reduce(\n    (acc, { value, kind }) => {\n      // Ensure kind defaults to something if undefined, though terrain/water needs specific handling\n      const k = (kind || \"shield\") as\n        | \"sword\"\n        | \"shield\"\n        | \"support\"\n        | \"terrain\";\n      acc[k] = (acc[k] || 0) + value;\n      return acc;\n    },\n    // Initialize all possible kinds including 'water' although we won't sum water directly here\n    { sword: 0, shield: 0, support: 0, terrain: 0 } as Record<\n      \"sword\" | \"shield\" | \"support\" | \"terrain\",\n      number\n    >\n  );\n\n// Updated resolve function for water terrain and Scythe defense\nfunction resolve(\n  r: () => number,\n  a: Piece, // Attacker\n  d: Piece, // Defender\n  b: Board,\n  T: Terrain,\n  O: Obstacle,\n  from: { x: number; y: number },\n  to: { x: number; y: number },\n  boardSize: number = S,\n  adv: boolean, // Advantage flag (usually for attacker King or special items)\n  currentLevel?: number // Optional current level for tutorial mechanics\n) {\n  const terrainAtTarget = T[to.y]?.[to.x]; // Safe navigation\n  const isTorchAdvantage = a.equip === \"torch\" && terrainAtTarget === \"forest\";\n  const isVeteranAttacker = (a.kills || 0) >= 5;\n  const isVeteranDefender = (d.kills || 0) >= 5;\n  const useAdv = a.type === \"K\" || adv || isTorchAdvantage || isVeteranAttacker;\n\n  // Tutorial mechanic: Force first combat die roll in level 1 to be won by white\n  const tutorialUsed = localStorage.getItem(\"dicechess_first_combat_tutorial_used\") === \"true\";\n  const isFirstCombatTutorial = \n    !tutorialUsed && \n    currentLevel === 1 && \n    (a.color === W || d.color === W); // White is either attacking or defending\n\n  // --- Attacker Roll ---\n  let rollsA = [d6(r)];\n  if (useAdv) rollsA.push(d6(r));\n  let A = useAdv ? Math.max(...rollsA) : rollsA[0];\n  let aForced = false;\n\n  // Scythe effect for ATTACKER (skip if tutorial is active)\n  if (!isFirstCombatTutorial && a.equip === \"scythe\" && d.type === \"P\") {\n    A = 6;\n    rollsA = [6]; // Update rolls array for UI\n    aForced = true;\n  }\n\n  // --- Defender Roll ---\n  let rollsD = [d6(r)];\n  // Veterans also roll with advantage when defending\n  if (isVeteranDefender) {\n    rollsD.push(d6(r));\n  }\n  let D = isVeteranDefender ? Math.max(...rollsD) : rollsD[0];\n  let dForced = false;\n\n  // Stun effect for DEFENDER (overrides veteran advantage, skip if tutorial is active)\n  if (!isFirstCombatTutorial && d.stunnedForTurns && d.stunnedForTurns > 0) {\n    rollsD = [1];\n    D = 1;\n    dForced = true;\n  }\n  // Scythe effect for DEFENDER (overrides veteran advantage, skip if tutorial is active)\n  else if (!isFirstCombatTutorial && d.equip === \"scythe\" && a.type === \"P\") {\n    D = 6;\n    rollsD = [6]; // Update rolls array for UI\n    dForced = true;\n  }\n\n  // Tutorial: Force white to win on first combat in level 1 (applied after other effects to take precedence)\n  if (isFirstCombatTutorial) {\n    // Mark tutorial as used immediately to prevent it from triggering again\n    localStorage.setItem(\"dicechess_first_combat_tutorial_used\", \"true\");\n    if (a.color === W) {\n      // White is attacking: give white high roll, black low roll\n      A = 6;\n      rollsA = [6];\n      if (useAdv) rollsA = [6, 6]; // If advantage, both dice are 6\n      aForced = true;\n      D = 1;\n      rollsD = [1];\n      if (isVeteranDefender) rollsD = [1, 1]; // If veteran, both dice are 1\n      dForced = true;\n    } else {\n      // Black is attacking white: give black low roll, white high roll\n      A = 1;\n      rollsA = [1];\n      if (useAdv) rollsA = [1, 1]; // If advantage, both dice are 1\n      aForced = true;\n      D = 6;\n      rollsD = [6];\n      if (isVeteranDefender) rollsD = [6, 6]; // If veteran, both dice are 6\n      dForced = true;\n    }\n  }\n\n  // --- Modifiers ---\n  const am: Mod[] = [],\n    dm: Mod[] = [];\n\n  // Attacker mods\n  if (a.equip === \"sword\") am.push({ value: 1, kind: \"sword\" });\n  const sup = supportCount(b, T, O, a, from, to, boardSize);\n  if (sup > 0) am.push({ value: sup, kind: \"support\" });\n\n  // Defender mods\n  const hasShield =\n    d.equip === \"shield\" || isProtectedByBanner(b, d.color, to, boardSize);\n  if (hasShield) dm.push({ value: 1, kind: \"shield\" });\n\n  // Apply terrain modifiers for defense\n  if (terrainAtTarget === \"forest\") {\n    dm.push({ value: 1, kind: \"terrain\" });\n  } else if (terrainAtTarget === \"water\") {\n    dm.push({ value: -1, kind: \"terrain\" }); // Negative modifier for water\n  }\n\n  // --- Totals & Result ---\n  const at = A + am.reduce((s, m) => s + m.value, 0);\n  const dt = D + dm.reduce((s, m) => s + m.value, 0);\n  return {\n    a: { base: A, total: at, mods: am, rolls: rollsA, forced: aForced },\n    d: { base: D, total: dt, mods: dm, rolls: rollsD, forced: dForced },\n    win: at >= dt, // Attacker wins on tie or higher\n    adv: useAdv || isVeteranAttacker, // Include veteran attacker advantage\n    defAdv: isVeteranDefender, // Track defender advantage\n  };\n}\n\n// Helper function to check if the Bell of Names exists on the board\nfunction bellOfNamesExists(obstacles: Obstacle, boardSize: number): boolean {\n  for (let y = 0; y < boardSize; y++) {\n    for (let x = 0; x < boardSize; x++) {\n      if (obstacles[y]?.[x] === \"bell\") {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction resolveObstacle(\n  r: () => number,\n  a: Piece,\n  b: Board,\n  T: Terrain,\n  O: Obstacle,\n  from: { x: number; y: number },\n  to: { x: number; y: number },\n  adv: boolean,\n  boardSize: number = S\n) {\n  const obstacleType = O[to.y]?.[to.x];\n  \n  // Determine threshold based on obstacle type\n  let threshold = 5; // Rock default\n  if (obstacleType === \"courtier\") {\n    threshold = 1; // Courtier is easier to destroy\n  } else if (obstacleType === \"gate\") {\n    threshold = 3; // Gate requires 3+ to break\n  } else if (obstacleType === \"bell\") {\n    threshold = 4; // Bell requires 4+ to break\n  } else if (obstacleType === \"column\") {\n    threshold = 6; // Column requires 6+ to break\n  }\n  \n  const useAdv = a.type === \"K\" || adv;\n  const rolls = [d6(r)];\n  if (useAdv) rolls.push(d6(r));\n  const A = useAdv ? Math.max(...rolls) : rolls[0];\n\n  const am: Mod[] = [];\n  if (a.equip === \"sword\") am.push({ value: 1, kind: \"sword\" });\n  const sup = supportCount(b, T, O, a, from, to, boardSize);\n  if (sup > 0) am.push({ value: sup, kind: \"support\" });\n  const at = A + am.reduce((s, m) => s + m.value, 0);\n  return {\n    a: { base: A, total: at, mods: am, rolls },\n    ok: at >= threshold,\n    adv: useAdv,\n  };\n}\n\n// --- Bot Logic ---\nconst val = (p: Piece) => (p.type === \"K\" ? 1000 : (VAL as any)[p.type] || 0);\n\n// Calculate sell value (50% of piece + equipment value)\nconst getSellValue = (p: Piece): number => {\n  const pieceValue = val(p);\n  const equipmentValue = p.equip ? ITEM_COSTS[p.equip] || 0 : 0;\n  return Math.floor((pieceValue + equipmentValue) * 0.5);\n};\nconst tryMove = (\n  b: Board,\n  T: Terrain,\n  from: { x: number; y: number },\n  to: { x: number; y: number }\n) => {\n  // No longer need ROCK check since they're obstacles now, not pieces\n  const nb = cloneB(b);\n  const mv = nb[from.y]?.[from.x]; // Safe navigation\n  if (!mv) return null;\n  nb[to.y][to.x] = mv;\n  nb[from.y][from.x] = null;\n  return nb;\n};\nfunction bot(\n  b: Board,\n  T: Terrain,\n  O: Obstacle,\n  c: Color,\n  r: () => number,\n  boardSize: number = S,\n  behavior: \"aggressive\" | \"defensive\" | \"balanced\" = \"balanced\"\n) {\n  const opp = c === W ? B : W;\n  const ms: {\n    from: { x: number; y: number };\n    to: { x: number; y: number };\n    score: number;\n  }[] = [];\n\n  // Behavior modifiers\n  const isAggressive = behavior === \"aggressive\";\n  const isDefensive = behavior === \"defensive\";\n  const isBalanced = behavior === \"balanced\";\n\n  for (let y = 0; y < boardSize; y++) {\n    for (let x = 0; x < boardSize; x++) {\n      const p = b[y]?.[x]; // Safe navigation\n      if (!p || p.color !== c) continue;\n      for (const t of moves(b, T, O, x, y, boardSize)) {\n        const cap = b[t.y]?.[t.x]; // Safe navigation\n        const targetObstacle = O[t.y]?.[t.x]; // Check for obstacle at target\n        let sc = 0;\n        if (cap) {\n          // --- CAPTURE MOVE SCORING ---\n          if (p.equip === \"crystal_ball\" && cap.color === p.color) {\n            // Crystal Ball swap\n            sc = 0.1; // Small positive score to encourage using item\n          } else {\n            const winProb =\n              winPercent(b, T, O, p, cap, { x, y }, t, boardSize) / 100;\n            const riskProb = 1 - winProb;\n\n            let valueGain = val(cap);\n\n            // AI LOGIC UPGRADE: Staff conversion is a huge gain\n            if (p.equip === \"staff\") {\n              // Winning converts the piece, so the value is gaining their piece without losing yours.\n              valueGain = val(cap) + val(p);\n            }\n\n            // AI LOGIC UPGRADE: Attacking a skull piece is a trade at best\n            if (cap.equip === \"skull\") {\n              // If you win, you trade pieces. Net gain is their value minus your value.\n              valueGain = val(cap) - val(p);\n            }\n\n            sc = winProb * valueGain - riskProb * val(p);\n\n            // Behavior-specific adjustments for captures\n            if (isAggressive) {\n              // Aggressive: More willing to take risky trades (lower threshold)\n              if (winProb >= 0.58) {\n                sc += 5; // Bonus for 58%+ trades\n              }\n              // Extra bonus for attacking the enemy King - prioritize even with lower win%\n              if (cap.type === \"K\") {\n                // Give huge bonus even for risky king attacks\n                if (winProb >= 0.4) {\n                  sc += 80; // Massive bonus for 40%+ chance to kill king\n                } else if (winProb >= 0.25) {\n                  sc += 40; // Still pursue king even with 25%+ chance\n                } else {\n                  sc += 20; // Consider any king attack\n                }\n                // Extra bonus if the king is already threatened or isolated\n                const kingAllies = supportCount(b, T, O, cap, t, t, boardSize);\n                if (kingAllies === 0) {\n                  sc += 30; // Isolated king is prime target\n                }\n              }\n              // Slight bonus for any capture\n              if (valueGain > 0) {\n                sc += 2;\n              }\n            } else if (isDefensive) {\n              // Defensive: Only take favorable trades\n              if (winProb < 0.7) {\n                sc -= 10; // Heavy penalty for risky trades\n              }\n              // Avoid trading valuable pieces\n              if (val(p) >= 30 && riskProb > 0.2) {\n                sc -= val(p) * 0.5;\n              }\n              // Extra caution: Check if this capture leaves the king vulnerable\n              const afterCapture = tryMove(b, T, { x, y }, t);\n              if (afterCapture) {\n                const myKingAfter = findK(afterCapture, c, boardSize);\n                if (myKingAfter) {\n                  const kingThreatenedAfterCapture = threatened(\n                    afterCapture,\n                    T,\n                    O,\n                    { x: myKingAfter.x, y: myKingAfter.y },\n                    opp,\n                    boardSize\n                  );\n                  if (kingThreatenedAfterCapture) {\n                    // Major penalty if this capture exposes our king\n                    sc -= 30;\n                  }\n                  // Also check if we're removing a defender of the king\n                  const myKingNow = findK(b, c, boardSize);\n                  if (myKingNow) {\n                    const distToKingBefore =\n                      Math.abs(x - myKingNow.x) + Math.abs(y - myKingNow.y);\n                    const distToKingAfter =\n                      Math.abs(t.x - myKingNow.x) + Math.abs(t.y - myKingNow.y);\n                    // Penalty for moving key defenders away from king\n                    if (distToKingBefore <= 2 && distToKingAfter > 2) {\n                      sc -= 15; // Don't leave king undefended\n                    }\n                  }\n                }\n              }\n            } else if (isBalanced) {\n              // Balanced: Favor good trades but consider position\n              if (cap.type === \"K\" && winProb >= 0.65) {\n                sc += 30; // Good bonus for likely king kills\n              }\n            }\n\n            // AI LOGIC UPGRADE: Add incentive to use one-time Lance on good trades\n            const dir = p.color === W ? 1 : -1;\n            const isLanceMove =\n              p.equip === \"lance\" && t.y === y + 2 * dir && t.x === x;\n            if (isLanceMove && valueGain > 0) {\n              sc += 5; // Bonus for using this powerful one-time item\n            }\n          }\n        } else if (targetObstacle !== \"none\") {\n          // --- CRYSTAL BALL SWAP WITH COURTIER SCORING ---\n          if (p.equip === \"crystal_ball\" && targetObstacle === \"courtier\") {\n            // Crystal Ball swap with Courtier - small positive score to encourage using item\n            // This allows repositioning without destroying the Courtier\n            sc = 0.1;\n          } else {\n            // --- OBSTACLE ATTACK SCORING ---\n            // Black bot should NEVER attack the bell (it protects their king)\n            if (targetObstacle === \"bell\" && c === B) {\n              continue; // Skip bell attacks for black\n            }\n            const winProb =\n              obstacleWinPercent(b, T, O, p, { x, y }, t, boardSize) / 100;\n            sc = winProb * 1 - (1 - winProb) * 0.1; // Small penalty for failure\n            \n            // Defensive bots should avoid attacking rock obstacles\n            if (isDefensive && targetObstacle === \"rock\") {\n              sc -= 15; // Heavy penalty for defensive bots attacking rocks\n            }\n          }\n        } else {\n          // --- QUIET MOVE SCORING (AI LOGIC UPGRADE) ---\n          const nb = tryMove(b, T, { x, y }, t);\n          if (!nb) continue;\n\n          sc = r() * 0.01; // Start with random tie-breaker\n\n          // 1. Pawn Advancement (for black, a lower y-value is an advance)\n          if (p.type === \"P\") {\n            const advancementScore = (boardSize - 1 - t.y) * 0.2;\n            sc += advancementScore;\n            // Aggressive: Push pawns forward more aggressively\n            if (isAggressive) {\n              sc += advancementScore * 0.5;\n            }\n          }\n\n          // 2. Piece Safety\n          const isSafeNow = !threatened(nb, T, O, t, opp, boardSize);\n          const wasThreatenedBefore = threatened(\n            b,\n            T,\n            O,\n            { x, y },\n            opp,\n            boardSize\n          );\n          if (!isSafeNow) {\n            const hangingPenalty = val(p);\n            sc -= hangingPenalty; // Heavy penalty for moving to a square where this piece can be captured\n            // Defensive: Extra penalty for hanging pieces\n            if (isDefensive) {\n              sc -= hangingPenalty * 0.5;\n            }\n          } else if (wasThreatenedBefore) {\n            sc += val(p) * 0.5; // Reward moving a threatened piece to safety\n            // Defensive: Extra reward for saving threatened pieces\n            if (isDefensive) {\n              sc += val(p) * 0.3;\n            }\n          }\n\n          // Balanced: Center control bonus (middle squares of the board)\n          if (isBalanced) {\n            const center = Math.floor(boardSize / 2);\n            const distToCenter =\n              Math.abs(t.x - center) + Math.abs(t.y - center);\n            sc += (4 - distToCenter) * 0.5; // Higher score for moves closer to center\n          }\n\n          // Aggressive: Forward movement bonus\n          if (isAggressive) {\n            const direction = c === W ? 1 : -1;\n            const forwardProgress = (t.y - y) * direction;\n            if (forwardProgress > 0) {\n              sc += forwardProgress * 1.5; // Bonus for moving toward enemy\n            }\n\n            // Aggressive: Prioritize threatening the enemy king\n            const enemyKing = findK(nb, opp, boardSize);\n            if (enemyKing) {\n              const enemyKingPos = { x: enemyKing.x, y: enemyKing.y };\n              // Check if this move puts the king in check\n              const threateningKing = attacks(\n                nb,\n                T,\n                O,\n                t.x,\n                t.y,\n                enemyKingPos.x,\n                enemyKingPos.y,\n                boardSize\n              );\n              if (threateningKing) {\n                sc += 35; // Big bonus for threatening the king\n              }\n\n              // Bonus for moving closer to the enemy king\n              const distToKing =\n                Math.abs(t.x - enemyKingPos.x) + Math.abs(t.y - enemyKingPos.y);\n              const oldDistToKing =\n                Math.abs(x - enemyKingPos.x) + Math.abs(y - enemyKingPos.y);\n              if (distToKing < oldDistToKing) {\n                sc += 3; // Reward for advancing toward the king\n              }\n              if (distToKing <= 3) {\n                sc += (4 - distToKing) * 2; // Extra bonus for being near the king\n              }\n            }\n          }\n\n          // Defensive: King safety - keep king in back rank or protected\n          if (isDefensive && p.type === \"K\") {\n            const backRank = c === W ? 0 : boardSize - 1;\n            if (t.y !== backRank) {\n              sc -= 5; // Penalty for moving king away from back rank\n            }\n            // Bonus for king being surrounded by allies\n            let adjacentAllies = 0;\n            for (let dy = -1; dy <= 1; dy++) {\n              for (let dx = -1; dx <= 1; dx++) {\n                if (dx === 0 && dy === 0) continue;\n                const neighbor = nb[t.y + dy]?.[t.x + dx];\n                if (neighbor && neighbor.color === c) adjacentAllies++;\n              }\n            }\n            sc += adjacentAllies * 2;\n          }\n\n          // Defensive: Proactive king defense - foresee opponent attacks\n          if (isDefensive) {\n            const myKing = findK(nb, c, boardSize);\n            const myKingBefore = findK(b, c, boardSize);\n            if (myKing) {\n              const kingPos = { x: myKing.x, y: myKing.y };\n              // Check if king is threatened after this move\n              const kingThreatenedAfter = threatened(\n                nb,\n                T,\n                O,\n                kingPos,\n                opp,\n                boardSize\n              );\n              const kingThreatenedBefore = myKingBefore\n                ? threatened(b, T, O, { x: myKingBefore.x, y: myKingBefore.y }, opp, boardSize)\n                : false;\n\n              if (kingThreatenedAfter && !kingThreatenedBefore) {\n                // Severe penalty for moves that expose the king to attack\n                sc -= 50;\n              } else if (kingThreatenedBefore && !kingThreatenedAfter) {\n                // Big reward for moves that remove king from danger\n                sc += 40;\n              }\n\n              // Count how many enemy pieces can attack the king position after this move\n              let enemyAttackers = 0;\n              for (let yy = 0; yy < boardSize; yy++) {\n                for (let xx = 0; xx < boardSize; xx++) {\n                  const enemy = nb[yy]?.[xx];\n                  if (enemy && enemy.color === opp) {\n                    if (attacks(nb, T, O, xx, yy, kingPos.x, kingPos.y, boardSize)) {\n                      enemyAttackers++;\n                    }\n                  }\n                }\n              }\n\n              // Penalty for each enemy piece that can attack the king\n              sc -= enemyAttackers * 8;\n\n              // Reward for blocking enemy attacks to the king\n              if (p.type !== \"K\") {\n                // Check if this piece is now between an enemy attacker and the king\n                let blocksAttack = false;\n                for (let yy = 0; yy < boardSize; yy++) {\n                  for (let xx = 0; xx < boardSize; xx++) {\n                    const enemy = b[yy]?.[xx];\n                    if (enemy && enemy.color === opp) {\n                      const couldAttackBefore = attacks(\n                        b,\n                        T,\n                        O,\n                        xx,\n                        yy,\n                        kingPos.x,\n                        kingPos.y,\n                        boardSize\n                      );\n                      const canAttackAfter = attacks(\n                        nb,\n                        T,\n                        O,\n                        xx,\n                        yy,\n                        kingPos.x,\n                        kingPos.y,\n                        boardSize\n                      );\n                      if (couldAttackBefore && !canAttackAfter) {\n                        blocksAttack = true;\n                        break;\n                      }\n                    }\n                  }\n                  if (blocksAttack) break;\n                }\n                if (blocksAttack) {\n                  sc += 25; // Reward for blocking attacks to the king\n                }\n              }\n\n              // Reward for keeping defenders near the king\n              if (p.type !== \"K\") {\n                const distToKing =\n                  Math.abs(t.x - kingPos.x) + Math.abs(t.y - kingPos.y);\n                const oldDistToKing = myKingBefore\n                  ? Math.abs(x - myKingBefore.x) + Math.abs(y - myKingBefore.y)\n                  : 999;\n                if (distToKing <= 2) {\n                  sc += (3 - distToKing) * 3; // Stay close to king\n                }\n                if (distToKing < oldDistToKing) {\n                  sc += 5; // Moving closer to king\n                }\n              }\n            }\n          }\n\n          // 3. Item & Positional Synergy\n          // Encourage moving pieces to be protected by a banner\n          if (\n            isProtectedByBanner(nb, p.color, t, boardSize) &&\n            !isProtectedByBanner(b, p.color, { x, y }, boardSize)\n          ) {\n            sc += 3;\n          }\n          // Encourage banner carriers to move towards allies to protect them\n          if (p.equip === \"banner\") {\n            for (let dy = -1; dy <= 1; dy++) {\n              for (let dx = -1; dx <= 1; dx++) {\n                if (dx === 0 && dy === 0) continue;\n                const ally = b[t.y + dy]?.[t.x + dx];\n                if (ally && ally.color === p.color) sc += 1;\n              }\n            }\n          }\n        }\n        ms.push({ from: { x, y }, to: t, score: sc });\n      }\n    }\n  }\n  if (!ms.length) return null;\n\n  // Check logic\n  const k = findK(b, c, boardSize);\n  const inChk = k\n    ? threatened(b, T, O, { x: k.x, y: k.y }, opp, boardSize)\n    : false;\n  if (inChk) {\n    const ev = ms.filter((m) => {\n      const nb = tryMove(b, T, m.from, m.to);\n      if (!nb) return false;\n      const k2 = findK(nb, c, boardSize);\n      if (!k2) return false; // This move gets king captured, not an evasion\n      return !threatened(nb, T, O, { x: k2.x, y: k2.y }, opp, boardSize);\n    });\n    if (ev.length) {\n      const best = Math.max(...ev.map((m) => m.score));\n      return rand(\n        r,\n        ev.filter((m) => m.score >= best - 0.5)\n      );\n    } else {\n      // Before declaring checkmate, check if the King has any escape squares available\n      // (ignoring stun status, since stun is temporary and doesn't mean checkmate)\n      if (k) {\n        const kingEscapeSquares = kingMovesIgnoringStun(b, T, O, k.x, k.y, boardSize);\n        for (const escapeSquare of kingEscapeSquares) {\n          const nb = tryMove(b, T, { x: k.x, y: k.y }, escapeSquare);\n          if (!nb) continue;\n          const k2 = findK(nb, c, boardSize);\n          if (!k2) continue; // This move gets king captured, not an evasion\n          if (!threatened(nb, T, O, { x: k2.x, y: k2.y }, opp, boardSize)) {\n            // King has an escape square available, so it's not checkmate\n            // Return null to indicate no moves can be made this turn (due to stun),\n            // but don't declare checkmate\n            return null;\n          }\n        }\n      }\n      // No escape squares available - this is truly checkmate\n      return null; // This is checkmate\n    }\n  }\n\n  // Behavior-specific move filtering\n  let movePool = ms;\n\n  if (isAggressive) {\n    // Aggressive: Prioritize king attacks, even risky ones\n    const enemyKing = findK(b, opp, boardSize);\n    const kingAttackMoves = enemyKing\n      ? ms.filter((m) => {\n          const target = b[m.to.y]?.[m.to.x];\n          return target && target.type === \"K\";\n        })\n      : [];\n    \n    // Debug: Log all moves with their scores\n    console.log(\" Aggressive Bot - All moves:\", ms.map(m => ({\n      from: m.from,\n      to: m.to,\n      score: m.score.toFixed(2),\n      target: b[m.to.y]?.[m.to.x]?.type || 'empty'\n    })).sort((a, b) => parseFloat(b.score) - parseFloat(a.score)).slice(0, 10)); // Top 10\n    \n    if (kingAttackMoves.length > 0) {\n      // If we have any king attack moves, strongly consider them\n      // Include king attacks with score >= -20 (very permissive)\n      movePool = kingAttackMoves.filter((m) => m.score >= -20);\n      if (movePool.length === 0) movePool = kingAttackMoves; // Take any king attack\n      console.log(\" King attack moves available:\", kingAttackMoves.length);\n    } else {\n      // No king attacks available, consider all moves (score >= -5)\n      movePool = ms.filter((m) => m.score >= -5);\n      if (movePool.length === 0) movePool = ms; // Fallback\n      console.log(\" No king attacks, considering moves with score >= -5:\", movePool.length);\n    }\n  } else if (isDefensive) {\n    // Defensive: Only safe moves (score >= 5)\n    const safeMoves = ms.filter((m) => m.score >= 5);\n    movePool =\n      safeMoves.length > 0 ? safeMoves : ms.filter((m) => m.score >= 0);\n    if (movePool.length === 0) movePool = ms; // Fallback\n  } else {\n    // Balanced: Sensible moves (score >= 0)\n    const sensibleMoves = ms.filter((m) => m.score >= 0);\n    movePool = sensibleMoves.length > 0 ? sensibleMoves : ms;\n  }\n\n  const best = Math.max(...movePool.map((m) => m.score));\n\n  // Behavior-specific best move selection tolerance\n  let tolerance = 1;\n  if (isAggressive) {\n    tolerance = 3; // More random, less calculated\n  } else if (isDefensive) {\n    tolerance = 0.5; // Very precise, pick only best moves\n  } else {\n    tolerance = 1; // Balanced\n  }\n\n  const bestMoves = movePool.filter((m) => m.score >= best - tolerance);\n  return rand(r, bestMoves);\n}\n\n// --- Odds helpers (used by Board) ---\nconst advPMF = (k: number) => (2 * k - 1) / 36;\nfunction winPercent(\n  BD: Board,\n  TD: Terrain,\n  OD: Obstacle,\n  att: Piece,\n  def: Piece,\n  from: { x: number; y: number },\n  to: { x: number; y: number },\n  boardSize: number = S\n) {\n  const aSup = supportCount(BD, TD, OD, att, from, to, boardSize);\n  const aMod = (att.equip === \"sword\" ? 1 : 0) + aSup;\n  // Adjusted defense modifier calculation for water\n  const terrainMod =\n    TD[to.y]?.[to.x] === \"forest\" ? 1 : TD[to.y]?.[to.x] === \"water\" ? -1 : 0; // Safe navigation\n  const dMod =\n    (def.equip === \"shield\" || isProtectedByBanner(BD, def.color, to, boardSize)\n      ? 1\n      : 0) + terrainMod;\n  const dir = att.color === W ? 1 : -1;\n  const lanceLungeUsed =\n    att.equip === \"lance\" && to.y === from.y + 2 * dir && to.x === from.x;\n  const isTorchAdvantage =\n    att.equip === \"torch\" && TD[to.y]?.[to.x] === \"forest\"; // Safe navigation\n  const useAdv = att.type === \"K\" || lanceLungeUsed || isTorchAdvantage;\n\n  // Calculate Attacker's roll probability (considering Scythe)\n  let aPMF = new Array(7).fill(0);\n  if (att.equip === \"scythe\" && def.type === \"P\") {\n    aPMF[6] = 1; // Always rolls 6\n  } else if (useAdv) {\n    for (let k = 1; k <= 6; k++) aPMF[k] = advPMF(k);\n  } else {\n    for (let k = 1; k <= 6; k++) aPMF[k] = 1 / 6;\n  }\n\n  // Calculate Defender's roll probability (considering Scythe and Stun)\n  let dPMF = new Array(7).fill(0);\n  if (def.stunnedForTurns && def.stunnedForTurns > 0) {\n    dPMF[1] = 1; // Always rolls 1 if stunned\n  } else if (def.equip === \"scythe\" && att.type === \"P\") {\n    dPMF[6] = 1; // Always rolls 6 if defending vs Pawn with Scythe\n  } else {\n    for (let k = 1; k <= 6; k++) dPMF[k] = 1 / 6; // Standard roll otherwise\n  }\n\n  let p = 0;\n  for (let a = 1; a <= 6; a++)\n    for (let d = 1; d <= 6; d++) {\n      if (a + aMod >= d + dMod) p += aPMF[a] * dPMF[d];\n    }\n  return Math.round(p * 100);\n}\nfunction obstacleWinPercent(\n  BD: Board,\n  TD: Terrain,\n  OD: Obstacle,\n  att: Piece,\n  from: { x: number; y: number },\n  to: { x: number; y: number },\n  boardSize: number = S\n) {\n  const obstacleType = OD[to.y]?.[to.x];\n  \n  // Determine threshold based on obstacle type\n  let threshold = 5; // Rock default\n  if (obstacleType === \"courtier\") {\n    threshold = 1; // Courtier is easier to destroy\n  } else if (obstacleType === \"gate\") {\n    threshold = 3; // Gate requires 3+ to break\n  } else if (obstacleType === \"bell\") {\n    threshold = 4; // Bell requires 4+ to break\n  } else if (obstacleType === \"column\") {\n    threshold = 6; // Column requires 6+ to break\n  }\n  \n  const aSup = supportCount(BD, TD, OD, att, from, to, boardSize);\n  const aMod = (att.equip === \"sword\" ? 1 : 0) + aSup;\n  const dir = att.color === W ? 1 : -1;\n  const lanceLungeUsed =\n    att.equip === \"lance\" && to.y === from.y + 2 * dir && to.x === from.x;\n  const useAdv = att.type === \"K\" || lanceLungeUsed;\n  const target = threshold - aMod;\n  if (target <= 1) return 100;\n  if (target > 6) return 0;\n  let p = 0;\n  if (useAdv) {\n    const probSingleLessThan = (target - 1) / 6;\n    p = 1 - probSingleLessThan * probSingleLessThan;\n  } else {\n    p = (6 - (target - 1)) / 6;\n  }\n  return Math.round(p * 100);\n}\n\n// --- UI Components ---\n\nconst AnimatedSpeechBubble = ({ text }: { text: string }) => {\n  const [charCount, setCharCount] = useState(0);\n\n  useEffect(() => {\n    setCharCount(0);\n    if (text) {\n      // Strip markers to get the actual character count (without **)\n      const cleanText = text.replace(/\\*\\*/g, \"\");\n      let i = 0;\n      const intervalId = setInterval(() => {\n        i++;\n        setCharCount(i);\n        if (i >= cleanText.length) {\n          clearInterval(intervalId);\n        }\n      }, 50);\n      return () => clearInterval(intervalId);\n    }\n  }, [text]);\n\n  // Parse text for **emphasized** sections and handle partial display\n  const parseEmphasis = (str: string, displayedChars: number) => {\n    const parts: Array<{ text: string; emphasized: boolean }> = [];\n    const regex = /\\*\\*(.*?)\\*\\*/g;\n    let lastIndex = 0;\n    let match;\n    let charsProcessed = 0;\n\n    while ((match = regex.exec(str)) !== null) {\n      // Add text before the match\n      const beforeText = str.slice(lastIndex, match.index);\n      if (beforeText.length > 0) {\n        const visibleChars = Math.max(\n          0,\n          Math.min(beforeText.length, displayedChars - charsProcessed)\n        );\n        if (visibleChars > 0) {\n          parts.push({\n            text: beforeText.slice(0, visibleChars),\n            emphasized: false,\n          });\n        }\n        charsProcessed += beforeText.length;\n      }\n\n      // Add the emphasized text\n      const emphasizedText = match[1];\n      const visibleChars = Math.max(\n        0,\n        Math.min(emphasizedText.length, displayedChars - charsProcessed)\n      );\n      if (visibleChars > 0) {\n        parts.push({\n          text: emphasizedText.slice(0, visibleChars),\n          emphasized: true,\n        });\n      }\n      charsProcessed += emphasizedText.length;\n      lastIndex = regex.lastIndex;\n\n      if (charsProcessed >= displayedChars) break;\n    }\n\n    // Add remaining text\n    if (lastIndex < str.length && charsProcessed < displayedChars) {\n      const remainingText = str.slice(lastIndex);\n      const visibleChars = Math.max(\n        0,\n        Math.min(remainingText.length, displayedChars - charsProcessed)\n      );\n      if (visibleChars > 0) {\n        parts.push({\n          text: remainingText.slice(0, visibleChars),\n          emphasized: false,\n        });\n      }\n    }\n\n    return parts;\n  };\n\n  const parts = parseEmphasis(text, charCount);\n\n  return (\n    <>\n      {parts.map((part, idx) =>\n        part.emphasized ? (\n          <span key={idx} className=\"speech-emphasis\">\n            {part.text.split(\"\").map((char, charIdx) => (\n              <span\n                key={charIdx}\n                className=\"speech-letter\"\n                style={{ animationDelay: `${charIdx * 0.1}s` }}\n              >\n                {char}\n              </span>\n            ))}\n          </span>\n        ) : (\n          <span key={idx}>{part.text}</span>\n        )\n      )}\n    </>\n  );\n};\n\n/**\n * DiceD6  a dropin, juicy 1d6 rolling animation.\n */\nfunction DiceD6({\n  rolling,\n  result,\n  size = 24,\n  seed = 0,\n}: {\n  rolling: boolean;\n  result: number | null; // 1..6 when known, otherwise null while computing\n  size?: number;\n  seed?: number; // optional: use fx id to vary animation subtly\n}) {\n  const [face, setFace] = useState<number>(result ?? 1);\n  const [t, setT] = useState(rolling ? 0 : 1); // 0..1 animation progress\n  const rafRef = useRef<number | null>(null);\n  const runningRef = useRef(false);\n  const startRef = useRef<number>(0);\n  const lastTickRef = useRef<number>(0);\n\n  // Small deterministic RNG so both attacker/defender feel different but consistent\n  const rng = useMemo(() => {\n    let s = (seed || 0) + 1337;\n    return () => {\n      s ^= s << 13;\n      s ^= s >>> 17;\n      s ^= s << 5; // xorshift32\n      return (s >>> 0) / 0xffffffff;\n    };\n  }, [seed]);\n\n  // Pick a new face different from current\n  const nextFace = (cur: number) => {\n    let f = Math.floor(rng() * 6) + 1;\n    if (f === cur) f = (f % 6) + 1;\n    return f;\n  };\n\n  useEffect(() => {\n    if (rolling) {\n      // Start a new roll sequence\n      runningRef.current = true;\n      startRef.current = performance.now();\n      lastTickRef.current = startRef.current;\n      const spinMs = 950; // total roll duration\n\n      const step = (now: number) => {\n        if (!runningRef.current) return;\n        const elapsed = now - startRef.current;\n        const raw = Math.min(1, elapsed / spinMs);\n        // Ease-out with a little overshoot to feel physical\n        const eased = easeOutBack(raw);\n        setT(eased);\n\n        // Flip frequency decelerates: fast at start, slow at end\n        // freq goes from ~40 flips/sec  ~5 flips/sec over time\n        const flipsPerSec = lerp(40, 5, eased);\n        const minDelta = 1000 / flipsPerSec;\n        if (now - lastTickRef.current > minDelta) {\n          setFace((cur) => nextFace(cur));\n          lastTickRef.current = now;\n        }\n\n        if (elapsed < spinMs) {\n          rafRef.current = requestAnimationFrame(step);\n        } else {\n          // Snap to the final result if provided\n          if (result && result >= 1 && result <= 6) setFace(result);\n          runningRef.current = false;\n          setT(1);\n        }\n      };\n\n      rafRef.current = requestAnimationFrame(step);\n      return () => {\n        runningRef.current = false;\n        if (rafRef.current) cancelAnimationFrame(rafRef.current);\n      };\n    } else {\n      // Not rolling: ensure we show the final, if we have it\n      if (result) setFace(result);\n      setT(1);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [rolling, result]); // Added result to dependencies\n\n  useEffect(() => {\n    // When a new result arrives mid-roll, let the sequence finish; otherwise snap\n    if (!rolling && result) setFace(result);\n  }, [result, rolling]);\n\n  // Pose transforms\n  const spin = useMemo(() => {\n    // A subtle tumbling motion in 3D-ish space\n    const rotZ = lerp(540, 0, t) + rng() * 6; // degrees\n    const rotX = lerp(35, 0, t);\n    const rotY = lerp(25, 0, t);\n    const bob = Math.sin(t * Math.PI) * (size / 6); // jump arc\n    const squash =\n      1 + (t < 1 ? Math.max(0, 0.14 - Math.abs(0.86 - t) * 0.4) : 0);\n    return { rotZ, rotX, rotY, bob, squash };\n  }, [t, size, rng]);\n\n  // Slight jitter for hand-rolled feel\n  const jitter = useMemo(\n    () => (rolling ? (rng() - 0.5) * 0.6 : 0),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [rolling, t]\n  );\n\n  const s = size;\n  const pip = s * 0.12;\n  const r = s * 0.18; // corner radius\n\n  return (\n    <div\n      style={{\n        width: s,\n        height: s,\n        perspective: 600,\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        filter: `drop-shadow(0 ${Math.max(0, 5 - spin.bob * 0.2)}px ${Math.max(\n          6,\n          12 - spin.bob\n        )}px rgba(0,0,0,${0.35 + (rolling ? 0.15 : 0)}))`,\n      }}\n      aria-label={rolling ? \"Rolling d6\" : `d6: ${face}`}\n    >\n      <div\n        style={{\n          width: s,\n          height: s,\n          transform: `translateY(${-spin.bob}px) rotateX(${\n            spin.rotX\n          }deg) rotateY(${spin.rotY}deg) rotate(${\n            spin.rotZ + jitter\n          }deg) scale(${spin.squash}, ${1 / spin.squash})`,\n          transition: rolling ? \"none\" : \"transform 120ms ease-out\",\n        }}\n      >\n        <svg width={s} height={s} viewBox={`0 0 ${s} ${s}`}>\n          {/* Die body */}\n          <rect\n            x={0}\n            y={0}\n            width={s}\n            height={s}\n            rx={r}\n            ry={r}\n            fill=\"white\"\n            stroke=\"#111\"\n            strokeWidth={s * 0.03}\n          />\n          {/* Bevel */}\n          <rect\n            x={s * 0.02}\n            y={s * 0.02}\n            width={s * 0.96}\n            height={s * 0.96}\n            rx={r * 0.75}\n            ry={r * 0.75}\n            fill=\"#f3f3f3\"\n          />\n          {/* Pips */}\n          {renderPips(face, s, pip)}\n        </svg>\n      </div>\n    </div>\n  );\n}\n\nfunction renderPips(n: number, s: number, pip: number) {\n  const dot = (cx: number, cy: number) => (\n    <circle key={`${cx}-${cy}`} cx={cx} cy={cy} r={pip} fill=\"#111\" />\n  );\n  const m = s / 2;\n  const g = s / 4; // grid step\n  const TL = [g, g],\n    TR = [s - g, g],\n    BL = [g, s - g],\n    BR = [s - g, s - g],\n    ML = [g, m],\n    MR = [s - g, m];\n  const mid = [m, m];\n  switch (n) {\n    case 1:\n      return [dot(mid[0], mid[1])];\n    case 2:\n      return [dot(TL[0], TL[1]), dot(BR[0], BR[1])];\n    case 3:\n      return [dot(TL[0], TL[1]), dot(mid[0], mid[1]), dot(BR[0], BR[1])];\n    case 4:\n      return [\n        dot(TL[0], TL[1]),\n        dot(TR[0], TR[1]),\n        dot(BL[0], BL[1]),\n        dot(BR[0], BR[1]),\n      ];\n    case 5:\n      return [\n        dot(TL[0], TL[1]),\n        dot(TR[0], TR[1]),\n        dot(mid[0], mid[1]),\n        dot(BL[0], BL[1]),\n        dot(BR[0], BR[1]),\n      ];\n    case 6:\n      return [\n        dot(TL[0], TL[1]),\n        dot(TR[0], TR[1]),\n        dot(ML[0], ML[1]),\n        dot(MR[0], MR[1]),\n        dot(BL[0], BL[1]),\n        dot(BR[0], BR[1]),\n      ];\n    default:\n      return [dot(mid[0], mid[1])];\n  }\n}\n\nconst lerp = (a: number, b: number, t: number) => a + (b - a) * t;\nfunction easeOutBack(x: number) {\n  const c1 = 1.70158;\n  const c3 = c1 + 1;\n  return 1 + c3 * Math.pow(x - 1, 3) + c1 * Math.pow(x - 1, 2);\n}\n\n// --- Board Component ---\n// Updated to render water tiles and terrain glyphs/tooltips\nfunction BoardComponent({\n  board,\n  T,\n  obstacles,\n  V,\n  sel,\n  legal,\n  click,\n  fx,\n  phase,\n  dispA,\n  dispD,\n  bumpA,\n  bumpD,\n  wChk,\n  bChk,\n  speechBubble,\n  marketAction,\n  rerollState,\n  rerollTarget,\n  combatId,\n  destroyedPieceIds,\n  failedAttackId,\n  showBoardTooltips,\n  showTooltip,\n  hideTooltip,\n  drag,\n  startDrag,\n  lastMove,\n  moveAnim,\n  sellPiece,\n  sellButtonPos,\n  setSellButtonPos,\n  boardSize,\n  victoryConditions,\n  setSpeechBubble,\n  currentLevelConfig,\n  kingEscapeGuideActive,\n  kingEscapeGuideOpacity,\n}: {\n  board: Board;\n  T: Terrain;\n  obstacles: Obstacle;\n  V: boolean[][];\n  sel: { x: number; y: number } | null;\n  legal: { x: number; y: number }[];\n  click: (x: number, y: number) => void;\n  fx: any;\n  phase: Phase;\n  dispA: number | null;\n  dispD: number | null;\n  bumpA: boolean;\n  bumpD: boolean;\n  wChk: boolean;\n  bChk: boolean;\n  speechBubble: { text: string; id: number; targetId: string } | null;\n  marketAction: MarketAction;\n  rerollState: {\n    from: { x: number; y: number };\n    to: { x: number; y: number };\n    kind: \"piece\" | \"obstacle\";\n    obstacleType?: ObstacleType;\n  } | null;\n  rerollTarget: \"attacker\" | \"defender\" | null;\n  combatId: number;\n  destroyedPieceIds: string[];\n  failedAttackId: string | null;\n  showBoardTooltips: boolean;\n  showTooltip: (text: string) => void;\n  hideTooltip: () => void;\n  drag: any;\n  startDrag: (e: React.MouseEvent, x: number, y: number) => void;\n  lastMove: {\n    from: { x: number; y: number };\n    to: { x: number; y: number };\n  } | null;\n  moveAnim: any;\n  sellPiece: (x: number, y: number) => void;\n  sellButtonPos: { x: number; y: number } | null;\n  setSellButtonPos: (pos: { x: number; y: number } | null) => void;\n  boardSize: number;\n  victoryConditions: string[];\n  setSpeechBubble: (bubble: { text: string; id: number; targetId: string } | null) => void;\n  currentLevelConfig: any;\n  kingEscapeGuideActive: boolean;\n  kingEscapeGuideOpacity: number;\n}) {\n  const [hover, setHover] = useState<{ x: number; y: number } | null>(null);\n  const [chipPositions, setChipPositions] = useState<Map<string, { x: number; y: number }>>(new Map());\n  const boardContainerRef = React.useRef<HTMLDivElement>(null);\n  const isL = useCallback(\n    (x: number, y: number) => legal.some((s) => s.x === x && s.y === y),\n    [legal]\n  );\n\n  // Memoize sums calculations to avoid recomputing on every render\n  const sumsA = useMemo(\n    () =>\n      fx ? sumMods(fx.a.mods) : { sword: 0, shield: 0, support: 0, terrain: 0 },\n    [fx]\n  );\n  const sumsD = useMemo(\n    () =>\n      fx && fx.kind === \"piece\"\n        ? sumMods(fx.d.mods)\n        : { sword: 0, shield: 0, support: 0, terrain: 0 },\n    [fx]\n  );\n\n  // Collect supporting pieces for visual connection lines\n  const supportingPieces = useMemo(() => {\n    if (!hover || !sel || !board[sel.y]?.[sel.x]) return [];\n    \n    const hoveredAttackTarget =\n      isL(hover.x, hover.y) &&\n      (board[hover.y]?.[hover.x] || obstacles[hover.y]?.[hover.x] !== \"none\");\n    \n    if (!hoveredAttackTarget) return [];\n    \n    const selectedPiece = board[sel.y]?.[sel.x];\n    if (!selectedPiece) return [];\n    \n    const supporting: { x: number; y: number }[] = [];\n    \n    for (let y = 0; y < boardSize; y++) {\n      for (let x = 0; x < boardSize; x++) {\n        const p = board[y]?.[x];\n        if (\n          p &&\n          p.id !== selectedPiece.id &&\n          p.color === selectedPiece.color &&\n          attacks(board, T, obstacles, x, y, hover.x, hover.y, boardSize)\n        ) {\n          supporting.push({ x, y });\n        }\n      }\n    }\n    \n    return supporting;\n  }, [hover, sel, board, T, obstacles, boardSize, isL]);\n\n  // Calculate chip positions mathematically from grid layout\n  // This avoids measurement issues during animations/transforms\n  useEffect(() => {\n    if (!hover || !sel || supportingPieces.length === 0) {\n      setChipPositions((prev) => prev.size === 0 ? prev : new Map());\n      return;\n    }\n\n    const positions = new Map<string, { x: number; y: number }>();\n    const tileSize = 88; // Each tile is 88px  88px\n    const labelOffset = 24; // Horizontal offset for rank labels\n    const halfTile = tileSize / 2; // Center of a tile\n\n    // Calculate supporting piece positions\n    supportingPieces.forEach((support) => {\n      const visualY = boardSize - 1 - support.y;\n      const centerX = labelOffset + support.x * tileSize + halfTile;\n      const centerY = visualY * tileSize + halfTile;\n      \n      positions.set(`support-${support.x}-${support.y}`, {\n        x: centerX,\n        y: centerY,\n      });\n    });\n\n    // Calculate target position\n    const visualY = boardSize - 1 - hover.y;\n    const centerX = labelOffset + hover.x * tileSize + halfTile;\n    const centerY = visualY * tileSize + halfTile;\n    \n    positions.set(`target-${hover.x}-${hover.y}`, {\n      x: centerX,\n      y: centerY,\n    });\n\n    setChipPositions((prev) => {\n      // Check if positions have changed to avoid unnecessary re-renders\n      if (prev.size !== positions.size) return positions;\n      for (const [key, value] of positions.entries()) {\n        const prevValue = prev.get(key);\n        if (!prevValue || prevValue.x !== value.x || prevValue.y !== value.y) {\n          return positions;\n        }\n      }\n      return prev; // No change, return previous to avoid re-render\n    });\n  }, [hover, sel, supportingPieces, boardSize]);\n\n  const kingEscapeGuideLinePoints = useMemo(() => {\n    if (!kingEscapeGuideActive) return null;\n    if (!victoryConditions.includes(\"king_escaped\")) return null;\n\n    let kingPos: { x: number; y: number } | null = null;\n    for (let y = 0; y < boardSize; y++) {\n      for (let x = 0; x < boardSize; x++) {\n        const piece = board[y]?.[x];\n        if (piece && piece.type === \"K\" && piece.color === W) {\n          kingPos = { x, y };\n          break;\n        }\n      }\n      if (kingPos) break;\n    }\n\n    if (!kingPos) return null;\n\n    const targetY = boardSize - 1;\n    if (kingPos.y === targetY) return null;\n\n    const tileSize = 88;\n    const labelOffset = 24;\n    const halfTile = tileSize / 2;\n\n    const kingVisualY = boardSize - 1 - kingPos.y;\n    const targetVisualY = boardSize - 1 - targetY;\n\n    const centerX = labelOffset + kingPos.x * tileSize + halfTile;\n    const kingCenterY = kingVisualY * tileSize + halfTile;\n    const targetCenterY = targetVisualY * tileSize + halfTile;\n\n    return {\n      x1: centerX,\n      y1: kingCenterY,\n      x2: centerX,\n      y2: targetCenterY,\n    };\n  }, [kingEscapeGuideActive, victoryConditions, board, boardSize]);\n\n  // Generate file labels (A-L for boards up to 12x12)\n  const files = \"ABCDEFGHIJKL\";\n\n  // Find speech bubble target - can be a piece or an obstacle (courtier)\n  let speechBubbleTarget: { p: Piece; x: number; y: number } | null = null;\n  let speechBubbleObstaclePos: { x: number; y: number } | null = null;\n  \n  if (speechBubble) {\n    // Check if it's an obstacle target (format: \"courtier-x-y\")\n    if (speechBubble.targetId.startsWith(\"courtier-\")) {\n      const match = speechBubble.targetId.match(/courtier-(\\d+)-(\\d+)/);\n      if (match) {\n        const x = parseInt(match[1], 10);\n        const y = parseInt(match[2], 10);\n        if (inBounds(x, y, boardSize) && obstacles[y]?.[x] === \"courtier\") {\n          speechBubbleObstaclePos = { x, y };\n          // Create a dummy piece for rendering purposes (speech bubble expects a piece)\n          speechBubbleTarget = {\n            p: { id: speechBubble.targetId, type: \"P\", color: \"b\" } as Piece,\n            x,\n            y\n          };\n        }\n      }\n    } else {\n      // Regular piece target\n      speechBubbleTarget = findPieceById(board, speechBubble.targetId, boardSize);\n    }\n  }\n\n  const showRerollPopup = phase === \"awaiting_reroll\" && rerollState;\n  const rerollTargetPos =\n    showRerollPopup && rerollState // Add check for rerollState\n      ? board[rerollState.from.y]?.[rerollState.from.x]?.color === W // Safe navigation\n        ? rerollState.from\n        : rerollState.to // Corrected: should be 'to' for defender\n      : null;\n\n  // Format victory condition names\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const formatVictoryCondition = (condition: string) => {\n    switch (condition) {\n      case \"king_beheaded\":\n        return \"Regicide\";\n      case \"king_captured\":\n        return \"King Captured (Checkmate)\";\n      case \"king_dishonored\":\n        return \"King Dishonored\";\n      case \"king_escaped\":\n        return \"King Crossing\";\n      default:\n        return condition;\n    }\n  };\n\n  // Get victory condition description\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const getVictoryConditionDescription = (condition: string) => {\n    // Check for level-specific description first\n    if (currentLevelConfig?.victoryConditionDescriptions?.[condition as keyof typeof currentLevelConfig.victoryConditionDescriptions]) {\n      return currentLevelConfig.victoryConditionDescriptions[condition as keyof typeof currentLevelConfig.victoryConditionDescriptions];\n    }\n    // Default descriptions\n    switch (condition) {\n      case \"king_beheaded\":\n        return \"Kill the enemy King in combat\";\n      case \"king_captured\":\n        return \"Checkmate the enemy King\";\n      case \"king_dishonored\":\n        return \"Let the enemy King attack you and fail\";\n      case \"king_escaped\":\n        return \"Bring your King to the golden squares\";\n      default:\n        return \"\";\n    }\n  };\n\n  // All possible victory conditions\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const allVictoryConditions = [\"king_captured\", \"king_beheaded\", \"king_dishonored\", \"king_escaped\"];\n\n  return (\n    <div className=\"inline-block relative\" ref={boardContainerRef}>\n      <div\n        className=\"grid\"\n        style={{\n          gridTemplateColumns: `24px repeat(${boardSize},88px)`,\n          gridTemplateRows: `repeat(${boardSize},88px) 24px`,\n        }}\n      >\n        {/* File Labels */}\n        {Array.from({ length: boardSize }, (_, x) => (\n          <div\n            key={\"b\" + x}\n            className=\"text-sm font-bold text-white/90 flex items-center justify-center\"\n            style={{ gridColumn: x + 2, gridRow: boardSize + 1 }}\n          >\n            {files[x]}\n          </div>\n        ))}\n        {/* Rank Labels */}\n        {Array.from({ length: boardSize }, (_, r) => (\n          <div\n            key={\"l\" + r}\n            className=\"text-sm font-bold text-white/90 flex items-center justify-center\"\n            style={{ gridColumn: 1, gridRow: r + 1 }}\n          >\n            {boardSize - r}\n          </div>\n        ))}\n\n        {/* The Board Grid */}\n        <div\n          style={{\n            gridColumn: `2 / span ${boardSize}`,\n            gridRow: `1 / span ${boardSize}`,\n            display: \"block\",\n          }}\n        >\n          <div\n            className=\"grid\"\n            style={{ gridTemplateColumns: `repeat(${boardSize},88px)` }}\n          >\n            {Array.from({ length: boardSize * boardSize }, (_, i) => {\n              const x = i % boardSize,\n                y = boardSize - 1 - Math.floor(i / boardSize);\n              const p = board[y]?.[x]; // Safe navigation\n              const currentObstacle = obstacles[y]?.[x]; // Get obstacle at this position\n              const hasObstacle = currentObstacle !== \"none\";\n              const light = (x + y) % 2 === 0;\n              const isSel = !!sel && sel.x === x && sel.y === y;\n              const isMove = isL(x, y);\n              const inFog = !V[y]?.[x]; // Safe navigation\n              const show =\n                !!p && (p.color === W || !inFog);\n              const targetPiece = board[y]?.[x]; // Safe navigation for target piece\n              const targetObstacle = obstacles[y]?.[x]; // Safe navigation for target obstacle\n              const willCap =\n                isMove && !!targetPiece;\n              const isObstacleAttack = isMove && targetObstacle !== \"none\" && !targetPiece; // Attacking an obstacle\n              const currentTerrain = T[y]?.[x]; // Safe navigation\n              const forest = currentTerrain === \"forest\";\n              const water = currentTerrain === \"water\"; // Check for water\n\n              const attacker = sel ? board[sel.y]?.[sel.x] : null; // Safe navigation\n\n              let obstaclePct: number | undefined;\n              if (isObstacleAttack && sel && attacker) {\n                const a = attacker as Piece;\n                obstaclePct = obstacleWinPercent(board, T, obstacles, a, sel, { x, y }, boardSize);\n              }\n\n              const atk = fx && fx.from.x === x && fx.from.y === y;\n              const def = fx && fx.to.x === x && fx.to.y === y;\n\n              // Check king aura safely\n              const kingAura =\n                p &&\n                p.type === \"K\" &&\n                ((p.color === W && wChk) || (p.color === B && bChk));\n\n              // Get obstacle glyph\n              const getObstacleGlyph = (obstacleType: ObstacleType): string | null => {\n                if (obstacleType === \"rock\") return GL.ROCK.n;\n                if (obstacleType === \"courtier\") return GL.COURTIER.n;\n                if (obstacleType === \"column\") return GL.COLUMN.n;\n                if (obstacleType === \"gate\") return GL.GATE.n;\n                if (obstacleType === \"bell\") return GL.BELL.n;\n                return null;\n              };\n\n              const isCrystalBallSwap =\n                isMove &&\n                attacker?.equip === \"crystal_ball\" &&\n                ((p && p.color === attacker.color) || targetObstacle === \"courtier\");\n              \n              // Check if this piece or Courtier is a valid Crystal Ball swap target\n              const isCrystalBallSwapTarget =\n                sel &&\n                attacker?.equip === \"crystal_ball\" &&\n                isMove &&\n                ((p && p.color === attacker.color) || targetObstacle === \"courtier\");\n\n              const showPct =\n                !!sel &&\n                !!attacker && // <- guard\n                isMove &&\n                !!targetPiece && // Check if there's a target piece\n                !isCrystalBallSwap;\n\n              let pct: number | undefined;\n              if (showPct && attacker && targetPiece) {\n                // Ensure attacker and targetPiece exist\n                const a = attacker as Piece;\n                let d = targetPiece as Piece;\n                \n                // FOG OF WAR FIX: If the defender is in fog, strip their equipment\n                // so win percentage doesn't reveal hidden information\n                const inFog = !V[y]?.[x];\n                if (inFog && d.equip) {\n                  // Create a copy of the defender without equipment for win% calculation\n                  d = { ...d, equip: undefined };\n                }\n                \n                pct = winPercent(board, T, obstacles, a, d, sel!, { x, y }, boardSize);\n              }\n\n              let sup = 0;\n              if (isMove && attacker) {\n                if (targetPiece && targetPiece.color !== attacker.color) {\n                  // Check targetPiece exists before checking color\n                  sup = supportCount(\n                    board,\n                    T,\n                    obstacles,\n                    attacker,\n                    sel!,\n                    { x, y },\n                    boardSize\n                  );\n                }\n              }\n\n              const isAttack = willCap || isObstacleAttack;\n              const currentPct = isObstacleAttack ? obstaclePct : pct;\n              const ringClass =\n                currentPct != null && currentPct < 50\n                  ? \"warn\"\n                  : sup > 0\n                  ? \"sup\"\n                  : \"cap\";\n\n              const hoveredAttackTarget =\n                hover &&\n                sel &&\n                isL(hover.x, hover.y) &&\n                (board[hover.y]?.[hover.x] || obstacles[hover.y]?.[hover.x] !== \"none\"); // Check piece or obstacle\n              const isSupporting =\n                p &&\n                sel &&\n                board[sel.y]?.[sel.x] && // Safe navigation\n                p.id !== board[sel.y][sel.x]?.id &&\n                p.color === board[sel.y][sel.x]?.color &&\n                hoveredAttackTarget &&\n                hover && // Ensure hover exists before accessing hover.x/y\n                attacks(board, T, obstacles, x, y, hover.x, hover.y, boardSize);\n\n              const showSpeechBubble =\n                speechBubble &&\n                ((speechBubbleTarget &&\n                  speechBubbleTarget.x === x &&\n                  speechBubbleTarget.y === y) ||\n                 (speechBubbleObstaclePos &&\n                  speechBubbleObstaclePos.x === x &&\n                  speechBubbleObstaclePos.y === y &&\n                  obstacles[y]?.[x] === \"courtier\"));\n              const isMarketPlacement =\n                marketAction?.type === \"piece\" && y <= 1 && !p && obstacles[y]?.[x] === \"none\";\n              const isMarketEquipTarget =\n                marketAction?.type === \"item\" &&\n                p?.color === W &&\n                !p?.equip;\n              \n              // Check if this is a valid move or swap target during market phase\n              const isMarketMoveTarget = \n                phase === \"market\" &&\n                !marketAction &&\n                sel &&\n                sel.y <= 1 &&\n                y <= 1 &&\n                !p &&\n                obstacles[y]?.[x] === \"none\";\n              \n              const isMarketSwapTarget =\n                phase === \"market\" &&\n                !marketAction &&\n                sel &&\n                sel.y <= 1 &&\n                y <= 1 &&\n                p?.color === W &&\n                !(sel.x === x && sel.y === y);\n\n              const isRerollTarget =\n                rerollTargetPos &&\n                rerollTargetPos.x === x &&\n                rerollTargetPos.y === y;\n\n              const isHovered = hover && hover.x === x && hover.y === y;\n              const isPlayerDisguisedPiece =\n                p?.equip === \"disguise\" && p.color === W && p.originalType;\n              const showAsOriginalOnHover = isHovered && isPlayerDisguisedPiece;\n\n              const isDestroyed = p && destroyedPieceIds.includes(p.id);\n              const hasFailedAttack = p && p.id === failedAttackId;\n              \n              // Check if this is the escape row (top row) and king_escaped is enabled\n              const isEscapeRow = victoryConditions.includes(\"king_escaped\") && y === boardSize - 1;\n              const isBannerProtected =\n                p &&\n                p.equip !== \"shield\" &&\n                isProtectedByBanner(board, p.color, { x, y });\n\n              const isLastMoveFrom =\n                lastMove && lastMove.from.x === x && lastMove.from.y === y;\n              const isLastMoveTo =\n                lastMove && lastMove.to.x === x && lastMove.to.y === y;\n\n              const isAnimating = moveAnim && moveAnim.id === p?.id;\n              const isDragging = drag && drag.id === p?.id;\n              const isOriginHidden = isAnimating || isDragging;\n\n              const isTargetHidden =\n                moveAnim && moveAnim.to.x === x && moveAnim.to.y === y;\n\n              const getPieceSymbol = (piece: Piece | null) => {\n                // Allow null\n                if (!piece) return null;\n                let typeToShow = piece.type;\n                if (showAsOriginalOnHover && piece.originalType) {\n                  typeToShow = piece.originalType;\n                }\n\n                const colorKey = piece.color as \"w\" | \"b\";\n                // Check if GL has the type and color before accessing\n                // Also ensure typeToShow is a valid key for GL\n                const pieceGlyphSet = GL[typeToShow as keyof typeof GL];\n                if (pieceGlyphSet && colorKey in pieceGlyphSet) {\n                  return pieceGlyphSet[colorKey as keyof typeof pieceGlyphSet];\n                }\n                return \"?\"; // Fallback symbol\n              };\n\n              // Determine terrain glyph and tooltip text\n              let terrainGlyph = null;\n              let terrainTooltip = \"\";\n              if (p && currentTerrain === \"water\") {\n                terrainGlyph = \"\";\n                terrainTooltip = \" -1 to defense rolls\";\n              } else if (p && currentTerrain === \"forest\") {\n                terrainGlyph = \"\";\n                terrainTooltip = \" +1 to defense rolls\";\n              }\n\n              return (\n                <button\n                  key={x + \"-\" + y}\n                  onMouseDown={(e) => startDrag(e, x, y)}\n                  onMouseEnter={() => {\n                    setHover({ x, y });\n                    if (\n                      phase === \"market\" &&\n                      currentLevelConfig?.marketEnabled !== false &&\n                      board[y]?.[x]?.color === W &&\n                      board[y]?.[x]?.type !== \"K\"\n                    ) {\n                      setSellButtonPos({ x, y });\n                    }\n                  }}\n                  onMouseLeave={(e) => {\n                    const rt = (e as React.MouseEvent)\n                      .relatedTarget as HTMLElement | null;\n                    // Only clear hover; keep sellButtonPos unless we truly left board/overlay\n                    setHover(null);\n                    hideTooltip();\n                    if (\n                      !rt ||\n                      !(rt instanceof HTMLElement) ||\n                      !rt.closest(\".sell-button-overlay\")\n                    ) {\n                      // pointer not going into the overlay  clear it\n                      setSellButtonPos(null);\n                    }\n                  }}\n                  onClick={() => click(x, y)}\n                  className={`tile ${light ? \"tL\" : \"tD\"} ${\n                    isSel ? \"ring-4 ring-white/60\" : \"\"\n                  } ${isEscapeRow ? \"escape-row\" : \"\"}`}\n                >\n                  {(isLastMoveFrom || isLastMoveTo) &&\n                    V[y]?.[x] && ( // Safe navigation\n                      <div className=\"last-move\" />\n                    )}\n                  {/* --- Visual Layers (Rendered Bottom-to-Top) --- */}\n                  {isMarketPlacement && (\n                    <div className=\"market-placement-overlay\" />\n                  )}\n                  \n                  {/* Market move/swap indicator */}\n                  {isMarketMoveTarget && (\n                    <span className=\"ind\">\n                      <span className=\"dot\" style={{ background: \"#34d399\" }} />\n                    </span>\n                  )}\n                  \n                  {/* Market swap indicator for allied pieces */}\n                  {isMarketSwapTarget && (\n                    <span className=\"ind\">\n                      <span className=\"ring\" style={{ \n                        boxShadow: \"0 0 32px 8px rgba(34, 197, 94, 0.7), 0 0 0 4px rgba(34, 197, 94, 0.35) inset\",\n                        background: \"radial-gradient(circle, rgba(34, 197, 94, 0.22) 0 55%, transparent 60%)\"\n                      }}></span>\n                    </span>\n                  )}\n\n                  {/* 1. Terrain Layer */}\n                  {forest && !isEscapeRow && (\n                    <span\n                      className=\"forest\"\n                      style={{ position: \"absolute\", inset: 0, zIndex: 1 }}\n                    />\n                  )}\n                  {/* Render water tile */}\n                  {water && !isEscapeRow && <span className=\"water\" />}\n\n                  {/* 1.5. Obstacle Layer */}\n                  {hasObstacle && !inFog && (\n                    <span\n                      className=\"obstacle-container\"\n                      style={{\n                        position: \"absolute\",\n                        inset: 0,\n                        zIndex: 5,\n                        display: \"flex\",\n                        alignItems: \"center\",\n                        justifyContent: \"center\",\n                        pointerEvents: \"none\"\n                      }}\n                    >\n                      <span \n                        className={`obstacle-chip ${currentObstacle}`} \n                        id={`courtier-${x}-${y}`}\n                        style={\n                          isCrystalBallSwapTarget && targetObstacle === \"courtier\"\n                            ? {\n                                boxShadow: \"0 0 32px 8px rgba(192, 132, 252, 0.7), 0 0 0 4px rgba(192, 132, 252, 0.35) inset\",\n                                background: \"radial-gradient(circle, rgba(192, 132, 252, 0.22) 0 55%, transparent 60%)\"\n                              }\n                            : undefined\n                        }\n                      >\n                        {getObstacleGlyph(currentObstacle)}\n                      </span>\n                    </span>\n                  )}\n\n                  {/* 2. Move Indicator Layer */}\n                  {isMove && !isAttack && (\n                    <span className=\"ind\">\n                      <span className=\"dot\" />\n                    </span>\n                  )}\n                  {isAttack && (\n                    <span className=\"ind\">\n                      <span className={`ring ${ringClass}`}></span>\n                    </span>\n                  )}\n\n                  {/* 3. Odds Preview Layer */}\n                  <div className=\"odds-container\">\n                    {isAttack && sup > 0 && (\n                      <span className=\"supB-odds\">+{sup}</span>\n                    )}\n                    {(showPct || isObstacleAttack) && ( // Combined condition for odds display\n                      <span\n                        className={`pct ${\n                          isObstacleAttack\n                            ? \"pct-rock\" // Specific style for obstacle attack\n                            : currentPct != null && currentPct < 50\n                            ? \"text-orange-400\" // Warning for low odds\n                            : sup > 0\n                            ? \"pctS\" // Support style\n                            : \"pctG\" // Good odds style\n                        }`}\n                      >\n                        {currentPct}% {/* Display either obstacle or piece odds */}\n                      </span>\n                    )}\n                  </div>\n\n                  {/* 4. Piece Layer */}\n                  {show &&\n                    !isOriginHidden &&\n                    !isTargetHidden &&\n                    p && ( // Ensure p exists\n                      <span\n                        className={`piece-container ${\n                          atk && !hasFailedAttack ? \"pbmp\" : \"\"\n                        } ${def || hasFailedAttack ? \"hit\" : \"\"} ${\n                          isSupporting ? \"supporting-piece\" : \"\"\n                        } ${isMarketEquipTarget ? \"market-equip-target\" : \"\"} ${\n                          isDestroyed ? \"destroyed\" : \"\"\n                        } ${\n                          phase === \"market\" &&\n                          p.color === W &&\n                          (isHovered ||\n                            (sellButtonPos &&\n                              sellButtonPos.x === x &&\n                              sellButtonPos.y === y))\n                            ? \"hover-scale\"\n                            : \"\"\n                        } ${isSel ? \"selected-piece\" : \"\"}`}\n                      >\n                      <span\n                        data-chip-x={x}\n                        data-chip-y={y}\n                        data-piece-container=\"true\"\n                        className={`chip ${\n                          p.color === W ? \"pw\" : p.color === \"b\" ? \"pb\" : \"pn\"\n                        } ${\n                          p.stunnedForTurns && p.stunnedForTurns > 0\n                            ? \"stunned-piece\"\n                            : \"\"\n                        } ${p.shadowForTurns && p.shadowForTurns > 0 ? \"shadow-piece\" : \"\"}`}\n                        style={\n                          isCrystalBallSwapTarget && p && p.color === attacker?.color\n                            ? {\n                                boxShadow: \"0 8px 18px rgba(0, 0, 0, 0.35), inset 0 2px 0 rgba(255, 255, 255, 0.25), 0 0 32px 8px rgba(192, 132, 252, 0.7), 0 0 0 4px rgba(192, 132, 252, 0.35) inset\"\n                              }\n                            : undefined\n                        }\n                      >\n                        {getPieceSymbol(p)}\n                      </span>\n                        {p.name && (\n                          <span\n                            className={`piece-name${\n                              p.isPreconfigured ? \" preconfigured\" : \"\"\n                            }`}\n                            onMouseEnter={(e) => {\n                              if (\n                                e.currentTarget.scrollWidth >\n                                e.currentTarget.clientWidth\n                              ) {\n                                showTooltip(p.name!);\n                              }\n                            }}\n                            onMouseLeave={hideTooltip}\n                          >\n                            {p.name}\n                          </span>\n                        )}\n                        {!showAsOriginalOnHover &&\n                          p.equip &&\n                          (p.equip !== \"disguise\" || p.color === W) && (\n                            <span\n                              className=\"equip-icon\"\n                              onMouseEnter={(e) => {\n                                if (showBoardTooltips && p && p.equip) {\n                                  showTooltip(ITEM_DESCRIPTIONS[p.equip]);\n                                  e.stopPropagation();\n                                }\n                              }}\n                              onMouseLeave={hideTooltip}\n                            >\n                              {equipIcon(p.equip)}\n                            </span>\n                          )}\n                        {isBannerProtected && (\n                          <span\n                            className=\"banner-shield-icon\"\n                            onMouseEnter={(e) => {\n                              if (showBoardTooltips) {\n                                showTooltip(\n                                  \" Shield: +1 to defense rolls (from Banner).\"\n                                );\n                                e.stopPropagation();\n                              }\n                            }}\n                            onMouseLeave={hideTooltip}\n                          >\n                            \n                          </span>\n                        )}\n                        {/* Veteran Badge */}\n                        {p && (p.kills || 0) >= 5 && (\n                          <span\n                            className=\"veteran-badge\"\n                            onMouseEnter={(e) => {\n                              if (showBoardTooltips) {\n                                showTooltip(\n                                  \" Veteran: This unit has killed 5+ enemy units and always rolls with advantage in combat.\"\n                                );\n                                e.stopPropagation();\n                              }\n                            }}\n                            onMouseLeave={hideTooltip}\n                          >\n                            \n                          </span>\n                        )}\n                        {/* Terrain Glyph and Tooltip */}\n                        {terrainGlyph && (\n                          <span\n                            className=\"terrain-glyph\"\n                            onMouseEnter={(e) => {\n                              if (showBoardTooltips) {\n                                showTooltip(terrainTooltip);\n                                e.stopPropagation();\n                              }\n                            }}\n                            onMouseLeave={hideTooltip}\n                          >\n                            {terrainGlyph}\n                          </span>\n                        )}\n                        {kingAura && <span className=\"check\" />}\n                      </span>\n                    )}\n                  {showSpeechBubble &&\n                    speechBubble && ( // Ensure target and speechBubble exist\n                      <div\n                        key={speechBubble.id}\n                        className={`speech-bubble ${\n                          speechBubbleObstaclePos\n                            ? \"black-king-bubble\" // Courtiers use black bubble style\n                            : speechBubbleTarget && speechBubbleTarget.p.color === \"w\"\n                            ? \"white-king-bubble\"\n                            : \"black-king-bubble\"\n                        }`}\n                      >\n                        <AnimatedSpeechBubble text={speechBubble.text} />\n                      </div>\n                    )}\n\n                  {/* 5. Stun Layer (under fog) */}\n                  {p && p.stunnedForTurns !== undefined && p.stunnedForTurns > 0 && (\n                    <>\n                      {p.isExhausted ? (\n                        <span\n                          className=\"exhausted-glyph\"\n                          onMouseEnter={(e) => {\n                            if (showBoardTooltips) {\n                              showTooltip(\n                                \" Exhausted: This piece repeated the same move 3 times and is stunned for 1 turn.\"\n                              );\n                              e.stopPropagation();\n                            }\n                          }}\n                          onMouseLeave={hideTooltip}\n                        >\n                          \n                        </span>\n                      ) : (\n                        <span className=\"stun-glyph\"></span>\n                      )}\n                    </>\n                  )}\n\n                  {/* 5.5. Bell of Names Protection Indicator */}\n                  {p && p.type === \"K\" && p.color === B && p.name === \"Morcant\" && bellOfNamesExists(obstacles, boardSize) && !inFog && (\n                    <span\n                      className=\"bell-glyph\"\n                      onMouseEnter={(e) => {\n                        if (showBoardTooltips) {\n                          showTooltip(\n                            \" Protected by the Bell of Names: Morcant cannot die until the Bell of Names is destroyed.\"\n                          );\n                          e.stopPropagation();\n                        }\n                      }}\n                      onMouseLeave={hideTooltip}\n                    >\n                      \n                    </span>\n                  )}\n\n                  {/* 6. Fog Layer */}\n                  {inFog && <div className=\"fog\" />}\n\n                  {/* Dice badges (Highest Layer) */}\n                  {fx && atk && !isRerollTarget && (\n                    <span\n                      className={`badge ${\n                        fx.kind === \"piece\"\n                          ? fx.win\n                            ? \"ok\"\n                            : \"bad\"\n                          : fx.ok\n                          ? \"ok\"\n                          : \"bad\"\n                      }`}\n                    >\n                      {phase === \"base\" || phase === \"mods\" ? (\n                        <span className=\"expr\">\n                          <span className=\"term\">\n                            {fx.a.rolls.map((roll: number, i: number) => (\n                              <div key={i}>\n                                <DiceD6\n                                  rolling={\n                                    phase === \"base\" &&\n                                    rerollTarget !== \"defender\" &&\n                                    !fx.a?.forced\n                                  }\n                                  result={roll}\n                                  size={24}\n                                  seed={(fx.id ?? 0) + i}\n                                />\n                              </div>\n                            ))}\n                            {phase !== \"base\" && <strong>{fx.a.base}</strong>}\n                          </span>\n                          {sumsA.support > 0 && (\n                            <>\n                              <span className=\"plus\">+</span>\n                              <span className=\"term\">\n                                <strong>{sumsA.support}</strong> \n                              </span>\n                            </>\n                          )}\n                          {sumsA.sword > 0 && (\n                            <>\n                              <span className=\"plus\">+</span>\n                              <span className=\"term\">\n                                <strong>{sumsA.sword}</strong> \n                              </span>\n                            </>\n                          )}\n                        </span>\n                      ) : (\n                        <span className={`${bumpA ? \"pbmp\" : \"\"}`}>\n                          <strong>{dispA ?? fx.a.total}</strong>\n                        </span>\n                      )}\n                    </span>\n                  )}\n                  {fx && def && !isRerollTarget && fx.kind === \"piece\" && (\n                    <span className={`badge ${fx.win ? \"bad\" : \"ok\"}`}>\n                      {phase === \"base\" || phase === \"mods\" ? (\n                        <span className=\"expr\">\n                          <span className=\"term\">\n                            {fx.d.rolls && fx.d.rolls.length > 1 ? (\n                              // Display all rolls if defender has advantage\n                              <span className=\"flex items-center gap-0.5\">\n                                {fx.d.rolls.map((roll: number, idx: number) => (\n                                  <DiceD6\n                                    key={idx}\n                                    rolling={\n                                      phase === \"base\" &&\n                                      rerollTarget !== \"attacker\" &&\n                                      !fx.d?.forced\n                                    }\n                                    result={roll}\n                                    size={24}\n                                    seed={(fx?.id ?? 0) + 5 + idx}\n                                  />\n                                ))}\n                              </span>\n                            ) : (\n                              <DiceD6\n                                rolling={\n                                  phase === \"base\" &&\n                                  rerollTarget !== \"attacker\" &&\n                                  !(fx.kind === \"piece\" && fx.d?.forced)\n                                }\n                                result={fx?.d?.base ?? null}\n                                size={24}\n                                seed={(fx?.id ?? 0) + 5}\n                              />\n                            )}\n                            {phase !== \"base\" && <strong>{fx.d.base}</strong>}\n                          </span>\n                          {sumsD.shield > 0 && (\n                            <>\n                              <span className=\"plus\">+</span>\n                              <span className=\"term\">\n                                <strong>{sumsD.shield}</strong> \n                              </span>\n                            </>\n                          )}\n                          {/* Display terrain modifier text only if it's not zero */}\n                          {/* Add safe navigation for fx.to */}\n                          {/* Add key prop */}\n                          {sumsD.terrain !== 0 &&\n                            fx.to &&\n                            T[fx.to.y]?.[fx.to.x] && (\n                              <React.Fragment key=\"terrain-mod\">\n                                <span className=\"plus\">\n                                  {sumsD.terrain > 0 ? \"+\" : \"-\"}\n                                </span>\n                                <span className=\"term\">\n                                  <strong>{Math.abs(sumsD.terrain)}</strong>\n                                  {/* Safe navigation added */}\n                                  {T[fx.to.y]?.[fx.to.x] === \"forest\"\n                                    ? \"\"\n                                    : T[fx.to.y]?.[fx.to.x] === \"water\"\n                                    ? \"\"\n                                    : \"?\"}{\" \"}\n                                  {/* Show icon based on terrain */}\n                                </span>\n                              </React.Fragment>\n                            )}\n                        </span>\n                      ) : (\n                        <span className={`${bumpD ? \"pbmp\" : \"\"}`}>\n                          <strong>{dispD ?? fx.d.total}</strong>\n                        </span>\n                      )}\n                    </span>\n                  )}\n                </button>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n\n      {kingEscapeGuideLinePoints && boardContainerRef.current && (\n        <svg\n          width={boardContainerRef.current.offsetWidth}\n          height={boardContainerRef.current.offsetHeight}\n          style={{\n            position: \"absolute\",\n            top: \"0px\",\n            left: \"0px\",\n            pointerEvents: \"none\",\n            zIndex: 2,\n            overflow: \"visible\",\n          }}\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <line\n            x1={kingEscapeGuideLinePoints.x1}\n            y1={kingEscapeGuideLinePoints.y1}\n            x2={kingEscapeGuideLinePoints.x2}\n            y2={kingEscapeGuideLinePoints.y2}\n            stroke=\"#facc15\"\n            strokeWidth=\"21\"\n            strokeOpacity={kingEscapeGuideOpacity}\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            shapeRendering=\"geometricPrecision\"\n            style={{ transition: \"stroke-opacity 0.8s ease-in-out\" }}\n          />\n        </svg>\n      )}\n\n      {/* Supporting Attack Lines - Blue lines connecting supporting pieces to target */}\n      {hover &&\n        sel &&\n        supportingPieces.length > 0 &&\n        isL(hover.x, hover.y) &&\n        (board[hover.y]?.[hover.x] || obstacles[hover.y]?.[hover.x] !== \"none\") &&\n        chipPositions.size > 0 &&\n        boardContainerRef.current && (\n          <svg\n            width={boardContainerRef.current.offsetWidth}\n            height={boardContainerRef.current.offsetHeight}\n            style={{\n              position: \"absolute\",\n              top: \"0px\",\n              left: \"0px\",\n              pointerEvents: \"none\",\n              zIndex: 2, // Below chips (z-index 3+) but above tiles\n              overflow: \"visible\",\n            }}\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            {supportingPieces.map((support, idx) => {\n              const supportPos = chipPositions.get(`support-${support.x}-${support.y}`);\n              const targetPos = chipPositions.get(`target-${hover.x}-${hover.y}`);\n              \n              if (!supportPos || !targetPos) return null;\n              \n              // SVG strokes are centered on the path by default\n              // The stroke width extends equally on both sides of the path (10.5px each side for 21px stroke)\n              return (\n                <line\n                  key={`support-line-${support.x}-${support.y}-${idx}`}\n                  x1={supportPos.x}\n                  y1={supportPos.y}\n                  x2={targetPos.x}\n                  y2={targetPos.y}\n                  stroke=\"#3b82f6\"\n                  strokeWidth=\"21\"\n                  strokeOpacity=\"0.8\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  shapeRendering=\"geometricPrecision\"\n                />\n              );\n            })}\n          </svg>\n        )}\n\n      {/* Sell Button Overlay - Only show during market phase when not deploying an item/piece and market is enabled */}\n      {phase === \"market\" &&\n        currentLevelConfig?.marketEnabled !== false &&\n        !marketAction &&\n        sellButtonPos &&\n        board[sellButtonPos.y]?.[sellButtonPos.x]?.color === W &&\n        board[sellButtonPos.y]?.[sellButtonPos.x]?.type !== \"K\" &&\n        board[sellButtonPos.y]?.[sellButtonPos.x]?.equip !== \"curse\" && (\n          <div\n            className=\"sell-button-overlay\"\n            style={{\n              position: \"absolute\",\n              top: `${12 + (boardSize - 1 - sellButtonPos.y) * 88 - 22}px`, // Position above the piece square\n              left: `${12 + 24 + sellButtonPos.x * 88 + 88 / 2 - 32}px`, // Center horizontally (button width ~40px)\n              zIndex: 1000,\n            }}\n            onMouseLeave={(e) => {\n              const rt = (e as React.MouseEvent)\n                .relatedTarget as HTMLElement | null;\n              if (!rt || !(rt instanceof HTMLElement) || !rt.closest(\".tile\")) {\n                // If we didn't go back to a tile, dismiss\n                setSellButtonPos(null);\n              }\n            }}\n          >\n            <button\n              className=\"sell-button\"\n              onClick={(e) => {\n                e.stopPropagation();\n                sellPiece(sellButtonPos.x, sellButtonPos.y);\n              }}\n            >\n              SELL\n            </button>\n          </div>\n        )}\n    </div>\n  );\n}\n\nfunction NameInputComponent({\n  position,\n  onConfirm,\n  onCancel,\n}: {\n  position: { top: number; left: number };\n  onConfirm: (name: string) => void;\n  onCancel: () => void;\n}) {\n  const [name, setName] = useState(\"\");\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    inputRef.current?.focus();\n\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") {\n        onCancel();\n      }\n    };\n    window.addEventListener(\"keydown\", handleEscape);\n    return () => window.removeEventListener(\"keydown\", handleEscape);\n  }, [onCancel]);\n\n  const handleSubmit = (e?: React.FormEvent) => {\n    e?.preventDefault();\n    onConfirm(name.trim() || \"Unit\"); // Default name if empty\n  };\n\n  return createPortal(\n    <>\n      <div\n        className=\"fixed inset-0 bg-black/50 z-[240]\"\n        onClick={onCancel}\n      ></div>\n      <div\n        className=\"fixed z-[250]\"\n        style={{\n          top: position.top,\n          left: position.left,\n          transform: \"translate(-50%, 8px)\",\n        }}\n      >\n        <form\n          onSubmit={handleSubmit}\n          className=\"flex items-center gap-2 p-2 bg-stone-900 rounded-lg shadow-lg\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          <input\n            ref={inputRef}\n            type=\"text\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            placeholder=\"Unit Name...\"\n            maxLength={12}\n            className=\"bg-stone-950 text-white rounded px-2 py-1 text-sm w-32\"\n          />\n          <button\n            type=\"submit\"\n            className=\"px-3 py-1 rounded-md bg-emerald-600 hover:bg-emerald-500 text-white font-bold text-xs\"\n          >\n            OK\n          </button>\n        </form>\n      </div>\n    </>,\n    document.body\n  );\n}\n\n// --- Settings Dropdown Component ---\nfunction SettingsDropdown({\n  showRules,\n  setShowRules,\n  muted,\n  setMuted,\n  musicMuted,\n  setMusicMuted,\n  fastMode,\n  setFastMode,\n  showBoardTooltips,\n  setShowBoardTooltips,\n  enableTutorialPopups,\n  setEnableTutorialPopups,\n  setCampaign,\n  handleTryAgain,\n  win,\n}: {\n  showRules: boolean;\n  setShowRules: (value: boolean | ((prev: boolean) => boolean)) => void;\n  muted: boolean;\n  setMuted: (value: boolean | ((prev: boolean) => boolean)) => void;\n  musicMuted: boolean;\n  setMusicMuted: (value: boolean | ((prev: boolean) => boolean)) => void;\n  fastMode: boolean;\n  setFastMode: (value: boolean | ((prev: boolean) => boolean)) => void;\n  showBoardTooltips: boolean;\n  setShowBoardTooltips: (value: boolean | ((prev: boolean) => boolean)) => void;\n  enableTutorialPopups: boolean;\n  setEnableTutorialPopups: (value: boolean | ((prev: boolean) => boolean)) => void;\n  setCampaign: React.Dispatch<React.SetStateAction<CampaignState>>;\n  handleTryAgain: () => void;\n  win: Color | null;\n}) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"w-full px-4 py-3 rounded-xl bg-consistent-dark-brown hover:bg-amber-950 text-white font-bold text-lg shadow-lg flex items-center justify-center gap-2\"\n        title=\"Settings\"\n      >\n        <span className=\"text-2xl\"></span>\n        <span>Settings</span>\n      </button>\n      \n      {isOpen && (\n        <>\n          <div \n            className=\"fixed inset-0 z-40\" \n            onClick={() => setIsOpen(false)}\n          />\n          <div className=\"absolute top-full left-0 right-0 mt-2 bg-stone-900 rounded-xl shadow-2xl border-2 border-amber-900 overflow-hidden z-50\">\n            <div className=\"flex flex-col\">\n              <button\n                onClick={() => {\n                  setShowRules((s) => !s);\n                  setIsOpen(false);\n                }}\n                className=\"px-4 py-3 text-left hover:bg-amber-950 border-b border-amber-900\"\n              >\n                <span className=\"text-lg mr-2\"></span>\n                Game Rules\n              </button>\n              \n              <button\n                onClick={() => {\n                  setMuted((m) => !m);\n                }}\n                className=\"px-4 py-3 text-left hover:bg-amber-950 border-b border-amber-900 flex items-center justify-between\"\n              >\n                <span>\n                  <span className=\"text-lg mr-2\">{muted ? \"\" : \"\"}</span>\n                  Sound Effects\n                </span>\n                <span className={`px-2 py-1 rounded text-xs ${muted ? \"bg-amber-900\" : \"bg-emerald-600\"}`}>\n                  {muted ? \"OFF\" : \"ON\"}\n                </span>\n              </button>\n              \n              <button\n                onClick={() => {\n                  setMusicMuted((m) => !m);\n                }}\n                className=\"px-4 py-3 text-left hover:bg-amber-950 border-b border-amber-900 flex items-center justify-between\"\n              >\n                <span>\n                  <span className=\"text-lg mr-2\">{musicMuted ? \"\" : \"\"}</span>\n                  Music\n                </span>\n                <span className={`px-2 py-1 rounded text-xs ${musicMuted ? \"bg-amber-900\" : \"bg-emerald-600\"}`}>\n                  {musicMuted ? \"OFF\" : \"ON\"}\n                </span>\n              </button>\n              \n              <button\n                onClick={() => {\n                  setFastMode((f) => !f);\n                }}\n                className=\"px-4 py-3 text-left hover:bg-amber-950 border-b border-amber-900 flex items-center justify-between\"\n              >\n                <span>\n                  <span className=\"text-lg mr-2\"></span>\n                  Speed\n                </span>\n                <span className={`px-2 py-1 rounded text-xs ${fastMode ? \"bg-emerald-600\" : \"bg-amber-900\"}`}>\n                  {fastMode ? \"FAST\" : \"NORMAL\"}\n                </span>\n              </button>\n              \n              <button\n                onClick={() => {\n                  setShowBoardTooltips((s) => !s);\n                }}\n                className=\"px-4 py-3 text-left hover:bg-amber-950 border-b border-amber-900 flex items-center justify-between\"\n              >\n                <span>\n                  <span className=\"text-lg mr-2\"></span>\n                  Tooltips\n                </span>\n                <span className={`px-2 py-1 rounded text-xs ${showBoardTooltips ? \"bg-blue-600\" : \"bg-amber-900\"}`}>\n                  {showBoardTooltips ? \"ON\" : \"OFF\"}\n                </span>\n              </button>\n              \n              <button\n                onClick={() => {\n                  const newValue = !enableTutorialPopups;\n                  setEnableTutorialPopups(newValue);\n                  // Save to localStorage\n                  localStorage.setItem(\"dicechess_tutorial_popups_enabled\", String(newValue));\n                  // If enabling, clear tutorialsSeen so they trigger again\n                  if (newValue) {\n                    // Clear tutorial-related localStorage flags\n                    localStorage.removeItem(\"dicechess_first_combat_tutorial_used\");\n                    setCampaign(prev => ({\n                      ...prev,\n                      tutorialsSeen: [],\n                    }));\n                  }\n                }}\n                className=\"px-4 py-3 text-left hover:bg-amber-950 border-b border-amber-900 flex items-center justify-between\"\n              >\n                <span>\n                  <span className=\"text-lg mr-2\"></span>\n                  Tutorial Popups\n                </span>\n                <span className={`px-2 py-1 rounded text-xs ${enableTutorialPopups ? \"bg-emerald-600\" : \"bg-amber-900\"}`}>\n                  {enableTutorialPopups ? \"ON\" : \"OFF\"}\n                </span>\n              </button>\n              \n              {!win && (\n                <button\n                  onClick={() => {\n                    handleTryAgain();\n                    setIsOpen(false);\n                  }}\n                  className=\"px-4 py-3 text-left bg-red-600 hover:bg-red-700\"\n                >\n                  <span className=\"text-lg mr-2\"></span>\n                  Restart Game\n                </button>\n              )}\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\n// --- Main App Component ---\nexport default function App() {\n  const [showIntro, setShowIntro] = useState(true);\n  const [isRetryingLevel, setIsRetryingLevel] = useState(false);\n  \n  const [seed, setSeed] = useState(() => new Date().toISOString());\n  const [muted, setMuted] = useState(false);\n  const [musicMuted, setMusicMuted] = useState(false);\n  const [fastMode, setFastMode] = useState(false);\n  const musicManagerRef = useRef<MusicManagerHandle>(null);\n  const [showBoardTooltips, setShowBoardTooltips] = useState(true);\n  const [enableTutorialPopups, setEnableTutorialPopups] = useState(() => {\n    const saved = localStorage.getItem(\"dicechess_tutorial_popups_enabled\");\n    return saved !== null ? saved === \"true\" : true; // Default to enabled\n  });\n  const [needsReinit, setNeedsReinit] = useState(false); // Track when board needs re-initialization\n  \n  // ========== DEV TOOLS - COMMENT OUT BEFORE RELEASE ==========\n  const [showDevPanel, setShowDevPanel] = useState(false); // Hidden by default\n  \n  // Keyboard shortcut: Press Ctrl+D (Windows/Linux) or Cmd+D (Mac) to toggle dev panel\n  useEffect(() => {\n    const handleKeyPress = (e: KeyboardEvent) => {\n      // Check for Ctrl+D (Windows/Linux) or Cmd+D (Mac)\n      if ((e.ctrlKey || e.metaKey) && (e.key === 'd' || e.key === 'D')) {\n        // Only toggle if not typing in an input field\n        if (!(e.target instanceof HTMLInputElement) && !(e.target instanceof HTMLTextAreaElement)) {\n          e.preventDefault(); // Prevent browser default (bookmark dialog)\n          setShowDevPanel((prev) => !prev);\n        }\n      }\n    };\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, []);\n  // ============================================================\n  \n  // Clear saved game data on initial app load (when intro popup is shown)\n  useEffect(() => {\n    if (showIntro) {\n      localStorage.removeItem(\"dicechess_campaign_v1\");\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // Run only once on mount\n  const [lastMove, setLastMove] = useState<{\n    from: { x: number; y: number };\n    to: { x: number; y: number };\n  } | null>(null);\n  const [moveAnim, setMoveAnim] = useState<null | {\n    id: string;\n    from: { x: number; y: number };\n    to: { x: number; y: number };\n    glyph: string;\n    color: \"w\" | \"b\";\n    equip?: Equip;\n  }>(null);\n  const [drag, setDrag] = useState<null | {\n    id: string;\n    from: { x: number; y: number };\n    glyph: string;\n    color: \"w\" | \"b\";\n    equip?: Equip;\n    clientX: number;\n    clientY: number;\n    offsetX: number;\n    offsetY: number;\n  }>(null);\n\n  const rngRef = useRef<() => number>(() => Math.random());\n  const combatIdRef = useRef(0);\n  // Track recently said sentences per piece to avoid repetition\n  const recentSpeechRef = useRef<Map<string, string[]>>(new Map());\n  const [Bstate, setB] = useState<Board>(\n    () => Array.from({ length: 5 }, () => Array(5).fill(null)) as Board // Start with 5x5 for level 1\n  );\n  const [Tstate, setT] = useState<Terrain>(() => emptyTerrain(5)); // Start with 5x5 for level 1\n  const [obstacles, setObstacles] = useState<Obstacle>(() => emptyObstacles(5)); // Obstacles grid\n  const [turn, setTurn] = useState<Color>(W);\n  const [sel, setSel] = useState<{ x: number; y: number } | null>(null);\n  const [legal, setLegal] = useState<{ x: number; y: number }[]>([]);\n  const [win, setWin] = useState<Color | null>(null);\n  const [phrase, setPhrase] = useState<string | null>(null);\n  const [fx, setFx] = useState<any>(null); // {kind:'piece'|'obstacle',from,to,a,d?,win?,ok?,obstacleType?:ObstacleType}\n  const [phase, setPhase] = useState<Phase>(\"market\");\n  const [dispA, setDispA] = useState<number | null>(null);\n  const [dispD, setDispD] = useState<number | null>(null);\n  const [bumpA, setBumpA] = useState(false);\n  const [bumpD, setBumpD] = useState(false);\n  const [speechBubble, setSpeechBubble] = useState<{\n    text: string;\n    id: number;\n    targetId: string;\n  } | null>(null);\n  const [marketPoints, setMarketPoints] = useState(100);\n  const [showMarketConfirm, setShowMarketConfirm] = useState(false);\n  const startBattleBtnRef = useRef<HTMLButtonElement>(null);\n  const boardRef = useRef<HTMLDivElement>(null);\n\n  // Story Card state\n  const [currentStoryCard, setCurrentStoryCard] =\n    useState<StoryCardType | null>(null);\n  const currentStoryCardRef = useRef<StoryCardType | null>(null);\n  const [storyCardQueue, setStoryCardQueue] = useState<StoryCardType[]>([]);\n  const [storyOutcome, setStoryOutcome] = useState<{\n    outcomes: OutcomeData[];\n    nextCard?: StoryCardType;\n    lastCard?: StoryCardType;\n  } | null>(null);\n  const [showTransition, setShowTransition] = useState(false);\n  const [showDifficultyTransition, setShowDifficultyTransition] = useState(false);\n  const [difficultyTransitionLine, setDifficultyTransitionLine] = useState<0 | 1 | 'fade1' | 'fade2'>(0);\n  const [difficultyTransitionText, setDifficultyTransitionText] = useState(\"\");\n  const difficultyTransitionIntervalRef = useRef<NodeJS.Timeout | null>(null);\n  const difficultyTransitionTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const difficultyTransitionAudioCtxRef = useRef<AudioContext | null>(null);\n\n  const ensureDifficultyAudioContext = () => {\n    if (!difficultyTransitionAudioCtxRef.current) {\n      const Ctx: any = (window as any).AudioContext || (window as any).webkitAudioContext;\n      if (Ctx) {\n        difficultyTransitionAudioCtxRef.current = new Ctx();\n      }\n    }\n    return difficultyTransitionAudioCtxRef.current;\n  };\n\n  const playDifficultyTextBlip = () => {\n    try {\n      const ctx = ensureDifficultyAudioContext();\n      if (!ctx) return;\n      if (ctx.state === \"suspended\") ctx.resume().catch(() => {});\n      const osc = ctx.createOscillator();\n      const gain = ctx.createGain();\n      const filter = ctx.createBiquadFilter();\n      osc.type = \"square\";\n      osc.frequency.value = 380; // medieval-ish\n      filter.type = \"lowpass\";\n      filter.frequency.value = 1200;\n      const now = ctx.currentTime;\n      gain.gain.setValueAtTime(0.0001, now);\n      gain.gain.exponentialRampToValueAtTime(0.04, now + 0.01);\n      gain.gain.exponentialRampToValueAtTime(0.0001, now + 0.09);\n      osc.connect(filter);\n      filter.connect(gain);\n      gain.connect(ctx.destination);\n      osc.start(now);\n      osc.stop(now + 0.1);\n    } catch (e) {}\n  };\n\n  const playBattleTrumpet = () => {\n    try {\n      const Ctx: any =\n        (window as any).AudioContext || (window as any).webkitAudioContext;\n      if (!Ctx) return;\n      const ctx = new Ctx();\n      const now = ctx.currentTime;\n      const gain = ctx.createGain();\n      gain.gain.setValueAtTime(0.0001, now);\n      gain.gain.exponentialRampToValueAtTime(0.25, now + 0.06);\n      gain.gain.exponentialRampToValueAtTime(0.0001, now + 1.2);\n      const makeHorn = (freq: number) => {\n        const o = ctx.createOscillator();\n        const g = ctx.createGain();\n        o.type = \"square\";\n        o.frequency.setValueAtTime(freq, now);\n        g.gain.setValueAtTime(0.6, now);\n        o.connect(g);\n        g.connect(gain);\n        o.start(now);\n        o.stop(now + 1.2);\n      };\n      makeHorn(330);\n      makeHorn(392);\n      makeHorn(523.25);\n      const lp = ctx.createBiquadFilter();\n      lp.type = \"lowpass\";\n      lp.frequency.value = 1200;\n      gain.connect(lp);\n      lp.connect(ctx.destination);\n    } catch (e) {}\n  };\n\n  const [prayerDice, setPrayerDice] = useState(2); // Will be updated from campaign state\n  const [rerollState, setRerollState] = useState<{\n    from: { x: number; y: number };\n    to: { x: number; y: number };\n    kind: \"piece\" | \"obstacle\";\n    loserPos: { x: number; y: number };\n    obstacleType?: ObstacleType;\n  } | null>(null);\n  const [rerollPopupPosition, setRerollPopupPosition] = useState<{\n    top: number;\n    left: number;\n  } | null>(null);\n  const [rerollTarget, setRerollTarget] = useState<\n    \"attacker\" | \"defender\" | null\n  >(null);\n\n  const [disguisePopupState, setDisguisePopupState] = useState<{\n    x: number;\n    y: number;\n  } | null>(null);\n  const [disguisePopupPosition, setDisguisePopupPosition] = useState<{\n    top: number;\n    left: number;\n  } | null>(null);\n  const [namingState, setNamingState] = useState<{\n    id: string;\n    x: number;\n    y: number;\n  } | null>(null);\n  const [nameInputPosition, setNameInputPosition] = useState<{\n    top: number;\n    left: number;\n  } | null>(null);\n  const [destroyedPieceIds, setDestroyedPieceIds] = useState<string[]>([]);\n  const [failedAttackId, setFailedAttackId] = useState<string | null>(null);\n  const [moveHistory, setMoveHistory] = useState<MoveRecord[]>([]);\n  const [showRules, setShowRules] = useState(false);\n  const [showRulesItemInfo, setShowRulesItemInfo] = useState(false);\n\n  // Track recent moves per piece for exhaustion detection\n  const [pieceMovesHistory, setPieceMovesHistory] = useState<\n    Map<\n      string,\n      Array<{ from: { x: number; y: number }; to: { x: number; y: number } }>\n    >\n  >(new Map());\n\n  // Helper function to detect exhaustion (repetitive moves)\n  function checkExhaustion(\n    pieceId: string,\n    from: { x: number; y: number },\n    to: { x: number; y: number },\n    board: Board\n  ): boolean {\n    // Get or create move history for this piece\n    const history = pieceMovesHistory.get(pieceId) || [];\n\n    // Add current move\n    const newHistory = [...history, { from, to }];\n\n    // Keep only last 6 moves (enough to detect 3 repetitions)\n    const recentMoves = newHistory.slice(-6);\n\n    // Check if the last 6 moves form a repetitive pattern (A->B, B->A, A->B)\n    if (recentMoves.length >= 6) {\n      // Check for pattern: from1->to1, to1->from1, from1->to1, to1->from1, from1->to1, to1->from1\n      const isRepetitive =\n        recentMoves[0].from.x === recentMoves[2].from.x &&\n        recentMoves[0].from.y === recentMoves[2].from.y &&\n        recentMoves[0].to.x === recentMoves[2].to.x &&\n        recentMoves[0].to.y === recentMoves[2].to.y &&\n        recentMoves[1].from.x === recentMoves[3].from.x &&\n        recentMoves[1].from.y === recentMoves[3].from.y &&\n        recentMoves[1].to.x === recentMoves[3].to.x &&\n        recentMoves[1].to.y === recentMoves[3].to.y &&\n        recentMoves[2].from.x === recentMoves[4].from.x &&\n        recentMoves[2].from.y === recentMoves[4].from.y &&\n        recentMoves[2].to.x === recentMoves[4].to.x &&\n        recentMoves[2].to.y === recentMoves[4].to.y &&\n        recentMoves[3].from.x === recentMoves[5].from.x &&\n        recentMoves[3].from.y === recentMoves[5].from.y &&\n        recentMoves[3].to.x === recentMoves[5].to.x &&\n        recentMoves[3].to.y === recentMoves[5].to.y;\n\n      if (isRepetitive) {\n        // Apply exhaustion stun (2 turns - unified stun rule)\n        // This ensures the piece is stunned until the START of its next-next turn\n        const piece = board[to.y]?.[to.x];\n        if (piece && piece.id === pieceId) {\n          piece.stunnedForTurns = 2;\n          piece.isExhausted = true;\n        }\n        // Reset history after exhaustion\n        setPieceMovesHistory((prev) => {\n          const newMap = new Map(prev);\n          newMap.delete(pieceId);\n          return newMap;\n        });\n        return true;\n      }\n    }\n\n    // Update history\n    setPieceMovesHistory((prev) => {\n      const newMap = new Map(prev);\n      newMap.set(pieceId, recentMoves);\n      return newMap;\n    });\n\n    return false;\n  }\n\n  // Add state for unspent gold\n  const [unspentGold, setUnspentGold] = useState(0);\n  // State for the currently active market action\n  const [marketAction, setMarketAction] = useState<MarketAction>(null);\n\n  // Market view visibility state - true = market visible, false = battlefield view\n  // Start with market visible (true) by default\n  const [marketViewVisible, setMarketViewVisible] = useState(true);\n\n  // Sell button state\n  const [sellButtonPos, setSellButtonPos] = useState<{\n    x: number;\n    y: number;\n  } | null>(null);\n\n  // Campaign state for carryover roster\n  const [campaign, setCampaign] = useState<CampaignState>(() => {\n    const saved = localStorage.getItem(\"dicechess_campaign_v1\");\n    if (saved) {\n      try {\n        const parsed = JSON.parse(saved);\n        // Only restore difficulty if it was explicitly saved in campaign state\n        // Don't read from localStorage directly - difficulty must be set via selection card\n        return {\n          level: parsed.level || 1,\n          whiteRoster: parsed.whiteRoster || [],\n          prayerDice: parsed.prayerDice || 2,\n          unlockedItems:\n            parsed.unlockedItems && Array.isArray(parsed.unlockedItems)\n              ? parsed.unlockedItems\n              : [],\n          freeUnits: new Map(parsed.freeUnits || []),\n          freeItems: new Map(parsed.freeItems || []),\n          tutorialsSeen:\n            parsed.tutorialsSeen && Array.isArray(parsed.tutorialsSeen)\n              ? parsed.tutorialsSeen\n              : [],\n          difficulty: parsed.difficulty || undefined, // Only use saved difficulty, not localStorage\n        };\n      } catch (e) {\n        console.warn(\"Failed to parse saved campaign state:\", e);\n      }\n    }\n    return {\n      level: 1,\n      whiteRoster: [],\n      prayerDice: 2,\n      unlockedItems: [],\n      freeUnits: new Map(),\n      freeItems: new Map(),\n      tutorialsSeen: [],\n      difficulty: undefined, // Always start fresh - no difficulty until selection card\n    };\n  });\n\n  // Current level configuration (loaded asynchronously)\n  const [currentLevelConfig, setCurrentLevelConfig] =\n    useState<LevelConfig | null>(null);\n\n  // Load level configuration when campaign level changes\n  useEffect(() => {\n    loadLevelConfig(campaign.level).then((config) => {\n      setCurrentLevelConfig(config);\n    });\n  }, [campaign.level]);\n\n  // Get current board size from level configuration\n  const currentBoardSize = currentLevelConfig?.boardSize ?? 7;\n\n  // Track items unlocked in this level\n  const [thisLevelUnlockedItems, setThisLevelUnlockedItems] = useState<\n    Exclude<Equip, undefined>[]\n  >([]);\n\n  // Track enemy pieces killed this level for ransom\n  const [killedEnemyPieces, setKilledEnemyPieces] = useState<KilledPiece[]>([]);\n\n  // Track Courtiers destroyed this level\n  const [destroyedCourtiers, setDestroyedCourtiers] = useState<number>(0);\n\n  // Track player pieces lost this level\n  const [playerPiecesLost, setPlayerPiecesLost] = useState<Piece[]>([]);\n\n  // Optional Objectives System - imported dynamically\n  const [objectiveStates, setObjectiveStates] = useState<\n    import(\"./types\").ObjectiveState[]\n  >([]);\n  const [activeObjectiveIds, setActiveObjectiveIds] = useState<string[]>([]); // IDs of objectives active for this level\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [newlyCompletedObjectives, setNewlyCompletedObjectives] = useState<string[]>([]);\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [newlyFailedObjectives, setNewlyFailedObjectives] = useState<string[]>([]);\n  const [lastVictoryInfo, setLastVictoryInfo] = useState<{\n    pieceType: PieceType;\n    originalType?: PieceType;\n    condition?: VictoryCondition;\n  } | null>(null);\n\n  const handlePlayerPieceLost = useCallback((piece: Piece) => {\n    if (piece.color !== \"w\") return;\n    setPlayerPiecesLost((prev) => {\n      if (prev.some((p) => p.id === piece.id)) {\n        return prev;\n      }\n      return [...prev, piece];\n    });\n  }, []);\n\n  // State to save resources before starting a level (for level retry)\n  const [levelStartSnapshot, setLevelStartSnapshot] = useState<{\n    level: number;\n    gold: number;\n    whiteRoster: Piece[];\n    prayerDice: number;\n    unlockedItems: Exclude<Equip, undefined>[];\n    freeUnits: Map<PieceType, number>;\n    freeItems: Map<Exclude<Equip, undefined>, number>;\n    tutorialsSeen: TutorialType[];\n    difficulty?: Difficulty;\n  } | null>(null);\n  \n  // Create snapshot if we're in a level but don't have one (e.g., loaded from save or refreshed)\n  useEffect(() => {\n    // Only create snapshot if:\n    // 1. We don't have a snapshot yet OR the snapshot is for a different level\n    // 2. We're past the intro (game has started)\n    // 3. We're in market or playing phase (actually in a level)\n    // 4. We have a campaign level >= 1\n    const needsSnapshot = (!levelStartSnapshot || levelStartSnapshot.level !== campaign.level) \n      && !showIntro \n      && (phase === \"market\" || phase === \"playing\") \n      && campaign.level >= 1;\n      \n    if (needsSnapshot) {\n      setLevelStartSnapshot({\n        level: campaign.level,\n        gold: unspentGold,\n        whiteRoster: [...campaign.whiteRoster],\n        prayerDice: campaign.prayerDice,\n        unlockedItems: [...campaign.unlockedItems],\n        freeUnits: new Map(campaign.freeUnits),\n        freeItems: new Map(campaign.freeItems),\n        tutorialsSeen: [...campaign.tutorialsSeen],\n        difficulty: campaign.difficulty,\n      });\n    }\n  }, [levelStartSnapshot, showIntro, phase, campaign, unspentGold]);\n\n  // Tutorial state - just track which tutorial is showing\n  const [currentTutorial, setCurrentTutorial] = useState<TutorialType | null>(null);\n  const [tutorialPosition, setTutorialPosition] = useState<{ top: number; left: number } | null>(null);\n  const [pausedForTutorial, setPausedForTutorial] = useState(false);\n  // Use ref to track pause state for setTimeout checks\n  const pausedForTutorialRef = useRef(false);\n  // Store pending move history to add after tutorial closes\n  const pendingMoveHistoryRef = useRef<MoveRecord | null>(null);\n  // Store pending action to execute after tutorial closes\n  const pendingActionRef = useRef<{ from: { x: number; y: number }; to: { x: number; y: number }; isBot: boolean; isDragMove: boolean } | null>(null);\n  const [kingEscapeTutorialTriggered, setKingEscapeTutorialTriggered] = useState(false);\n  const [kingEscapeGuideLineVisible, setKingEscapeGuideLineVisible] = useState(false);\n  const [kingEscapeGuideLineOpacity, setKingEscapeGuideLineOpacity] = useState(0);\n  const kingEscapeGuideLineFadeTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const kingEscapeGuideLineHideTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  \n  // Keep ref in sync with state\n  useEffect(() => {\n    pausedForTutorialRef.current = pausedForTutorial;\n  }, [pausedForTutorial]);\n\n  // Close tutorial if tutorials are disabled\n  useEffect(() => {\n    if (!enableTutorialPopups && currentTutorial) {\n      setCurrentTutorial(null);\n      setTutorialPosition(null);\n      setPausedForTutorial(false);\n    }\n  }, [enableTutorialPopups, currentTutorial]);\n\n  // Helper function to get board center position\n  const getBoardCenterPosition = useCallback((): { top: number; left: number } | null => {\n    if (!boardRef.current) return null;\n    \n    const boardRect = boardRef.current.getBoundingClientRect();\n    return {\n      top: boardRect.top + boardRect.height / 2,\n      left: boardRect.left + boardRect.width / 2,\n    };\n  }, []);\n\n  // Helper function to calculate position above a board square (deprecated - kept for compatibility)\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const getBoardSquarePosition = useCallback((x: number, y: number): { top: number; left: number } | null => {\n    if (!boardRef.current) return null;\n    \n    const boardRect = boardRef.current.getBoundingClientRect();\n    // Board square size (88px based on CSS)\n    const tileSize = 88;\n    // Calculate position of the square's center\n    const squareLeft = boardRect.left + (x * tileSize) + (tileSize / 2);\n    const squareTop = boardRect.top + (y * tileSize);\n    \n    // Position popup above the square (offset by popup height)\n    const popupHeight = 400; // Approximate height of tutorial popup\n    const top = squareTop - popupHeight - 20; // 20px gap above square\n    \n    return {\n      left: squareLeft,\n      top: Math.max(20, top), // Ensure popup doesn't go off top of screen\n    };\n  }, []);\n\n  // Helper function to get button position for tutorial popup\n  const getButtonPosition = useCallback((selector: string): { top: number; left: number } | null => {\n    const button = document.querySelector(`[${selector}]`);\n    if (!button) return null;\n    \n    const rect = button.getBoundingClientRect();\n    return {\n      top: rect.top + rect.height / 2,\n      left: rect.left + rect.width / 2,\n    };\n  }, []);\n\n  // Helper function to get position above a button (for popups that should appear above)\n  const getButtonPositionAbove = useCallback((selector: string): { top: number; left: number } | null => {\n    const button = document.querySelector(`[${selector}]`);\n    if (!button) return null;\n    \n    const rect = button.getBoundingClientRect();\n    const popupHeight = 400; // Approximate height of tutorial popup\n    return {\n      top: rect.top - popupHeight - 20, // Position above button with 20px gap\n      left: rect.left + rect.width / 2,\n    };\n  }, []);\n\n  // Helper function to get Market component center position\n  const getMarketCenterPosition = useCallback((): { top: number; left: number } | null => {\n    const marketRoot = document.querySelector('[data-market-root]');\n    if (!marketRoot) return null;\n    \n    const rect = marketRoot.getBoundingClientRect();\n    return {\n      top: rect.top + rect.height / 2,\n      left: rect.left + rect.width / 2,\n    };\n  }, []);\n\n  // Helper function to show a tutorial if not already seen\n  // Returns true if tutorial was shown, false otherwise\n  // skipSeenCheck: if true, shows tutorial even if already seen (for chaining tutorials)\n  // positionAbove: if true, positions popup above the target element instead of at its center\n  const showTutorial = useCallback((type: TutorialType, triggerSquare?: { x: number; y: number }, selector?: string, skipSeenCheck: boolean = false, positionAbove: boolean = false): boolean => {\n    // Only show if tutorials are enabled\n    if (!enableTutorialPopups) return false;\n    if (!skipSeenCheck && campaign.tutorialsSeen.includes(type)) {\n      return false;\n    }\n    \n    // Calculate position based on tutorial type and parameters\n    let position: { top: number; left: number } | null = null;\n    \n    // Special handling for market tutorials\n    if (type === \"market_buy_pawn\") {\n      // Center the popup in the Market component\n      position = getMarketCenterPosition();\n    } else if (type === \"market_view_battlefield\") {\n      // Position above the VIEW BATTLEFIELD button\n      if (selector) {\n        position = positionAbove ? getButtonPositionAbove(selector) : getButtonPosition(selector);\n      }\n    } else {\n      // For all board-related tutorials (single_combat, supporting_units, king_advantage, etc.),\n      // center them on the board for simplicity and consistency\n      position = getBoardCenterPosition();\n    }\n    \n    // Fallback to center of screen if position calculation fails\n    if (!position) {\n      position = {\n        top: window.innerHeight / 2,\n        left: window.innerWidth / 2,\n      };\n    }\n    \n    setTutorialPosition(position);\n    setCurrentTutorial(type);\n    setPausedForTutorial(true);\n    pausedForTutorialRef.current = true;\n    \n    return true;\n  }, [campaign.tutorialsSeen, enableTutorialPopups, getBoardCenterPosition, getButtonPosition, getButtonPositionAbove, getMarketCenterPosition]);\n\n  const clearKingEscapeGuideLineTimeouts = useCallback(() => {\n    if (kingEscapeGuideLineFadeTimeoutRef.current) {\n      clearTimeout(kingEscapeGuideLineFadeTimeoutRef.current);\n      kingEscapeGuideLineFadeTimeoutRef.current = null;\n    }\n    if (kingEscapeGuideLineHideTimeoutRef.current) {\n      clearTimeout(kingEscapeGuideLineHideTimeoutRef.current);\n      kingEscapeGuideLineHideTimeoutRef.current = null;\n    }\n  }, []);\n\n  const triggerKingEscapeGuideLine = useCallback(() => {\n    clearKingEscapeGuideLineTimeouts();\n    setKingEscapeGuideLineVisible(true);\n    setKingEscapeGuideLineOpacity(0);\n\n    if (typeof window !== \"undefined\" && typeof window.requestAnimationFrame === \"function\") {\n      window.requestAnimationFrame(() => {\n        setKingEscapeGuideLineOpacity(0.85);\n      });\n    } else {\n      setKingEscapeGuideLineOpacity(0.85);\n    }\n\n    kingEscapeGuideLineFadeTimeoutRef.current = setTimeout(() => {\n      setKingEscapeGuideLineOpacity(0);\n      kingEscapeGuideLineHideTimeoutRef.current = setTimeout(() => {\n        setKingEscapeGuideLineVisible(false);\n      }, 800);\n    }, 5000);\n  }, [clearKingEscapeGuideLineTimeouts]);\n\n  // Helper function to close tutorial and mark as seen\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const closeTutorial = useCallback(() => {\n    if (currentTutorial) {\n      const closedTutorial = currentTutorial;\n      const updatedTutorialsSeen = [...campaign.tutorialsSeen, closedTutorial];\n      \n      setCampaign(prev => ({\n        ...prev,\n        tutorialsSeen: updatedTutorialsSeen,\n      }));\n      setCurrentTutorial(null);\n      setTutorialPosition(null);\n      setPausedForTutorial(false);\n      pausedForTutorialRef.current = false;\n      \n      // Add any pending move history after tutorial closes\n      if (pendingMoveHistoryRef.current) {\n        const pendingMove = pendingMoveHistoryRef.current;\n        pendingMoveHistoryRef.current = null;\n        setMoveHistory((hist) => [...hist, pendingMove]);\n      }\n      \n      // Execute any pending action after tutorial closes\n      if (pendingActionRef.current) {\n        const pendingAction = pendingActionRef.current;\n        pendingActionRef.current = null;\n        console.log(\" Tutorial closed - re-triggering stored move:\", pendingAction);\n        console.log(\" Scheduling move re-trigger in 100ms...\");\n        // Small delay to ensure UI has updated after tutorial closes\n        setTimeout(() => {\n          console.log(\" Re-triggering move NOW:\", pendingAction);\n          // Note: perform is a function declaration defined below, so it's safe to call here\n          perform(pendingAction.from, pendingAction.to, pendingAction.isBot, pendingAction.isDragMove);\n        }, 100);\n      }\n      \n      // If we just closed the first market tutorial, show the second one\n      if (closedTutorial === \"market_buy_pawn\" && \n          enableTutorialPopups &&\n          !updatedTutorialsSeen.includes(\"market_view_battlefield\") &&\n          phase === \"market\") {\n        // Small delay to ensure DOM is ready\n        setTimeout(() => {\n          // Position above the VIEW BATTLEFIELD button\n          showTutorial(\"market_view_battlefield\", undefined, \"data-view-battlefield\", true, true);\n        }, 300);\n      }\n      if (closedTutorial === \"king_escape_hint\") {\n        triggerKingEscapeGuideLine();\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentTutorial, campaign.tutorialsSeen, enableTutorialPopups, phase, showTutorial, triggerKingEscapeGuideLine]);\n\n  useEffect(() => {\n    return () => {\n      clearKingEscapeGuideLineTimeouts();\n    };\n  }, [clearKingEscapeGuideLineTimeouts]);\n\n  useEffect(() => {\n    clearKingEscapeGuideLineTimeouts();\n    setKingEscapeTutorialTriggered(false);\n    setKingEscapeGuideLineVisible(false);\n    setKingEscapeGuideLineOpacity(0);\n  }, [campaign.level, clearKingEscapeGuideLineTimeouts]);\n\n  useEffect(() => {\n    if (\n      campaign.level === 1 &&\n      phase === \"playing\" &&\n      !kingEscapeTutorialTriggered &&\n      !pausedForTutorial &&\n      !currentTutorial &&\n      enableTutorialPopups &&\n      !campaign.tutorialsSeen.includes(\"king_escape_hint\")\n    ) {\n      const shown = showTutorial(\"king_escape_hint\");\n      if (shown) {\n        setKingEscapeTutorialTriggered(true);\n      }\n    }\n  }, [\n    campaign.level,\n    phase,\n    kingEscapeTutorialTriggered,\n    pausedForTutorial,\n    currentTutorial,\n    enableTutorialPopups,\n    campaign.tutorialsSeen,\n    showTutorial,\n  ]);\n\n  // Tutorial: Exhausted Units - trigger when first exhausted piece detected\n  useEffect(() => {\n    if (enableTutorialPopups && !campaign.tutorialsSeen.includes(\"exhausted_units\") && !pausedForTutorial && phase === \"playing\") {\n      for (let y = 0; y < currentBoardSize; y++) {\n        for (let x = 0; x < currentBoardSize; x++) {\n          const piece = Bstate[y]?.[x];\n          if (piece && piece.isExhausted && piece.stunnedForTurns && piece.stunnedForTurns > 0) {\n            showTutorial(\"exhausted_units\", { x, y });\n            return;\n          }\n        }\n      }\n    }\n  }, [Bstate, campaign.tutorialsSeen, pausedForTutorial, phase, currentBoardSize, showTutorial, enableTutorialPopups]);\n\n  // Tutorial: Stunned Units - trigger when first stunned piece detected (non-exhausted)\n  useEffect(() => {\n    if (enableTutorialPopups && !campaign.tutorialsSeen.includes(\"stunned_units\") && !pausedForTutorial && phase === \"playing\") {\n      for (let y = 0; y < currentBoardSize; y++) {\n        for (let x = 0; x < currentBoardSize; x++) {\n          const piece = Bstate[y]?.[x];\n          // Only show stunned tutorial if not exhausted (exhausted has its own tutorial)\n          if (piece && piece.stunnedForTurns && piece.stunnedForTurns > 0 && !piece.isExhausted) {\n            showTutorial(\"stunned_units\", { x, y });\n            return;\n          }\n        }\n      }\n    }\n  }, [Bstate, campaign.tutorialsSeen, pausedForTutorial, phase, currentBoardSize, showTutorial, enableTutorialPopups]);\n\n  // Tutorial: Veterans - trigger when first veteran is created\n  useEffect(() => {\n    if (enableTutorialPopups && !campaign.tutorialsSeen.includes(\"veterans\") && !pausedForTutorial && phase === \"playing\") {\n      for (let y = 0; y < currentBoardSize; y++) {\n        for (let x = 0; x < currentBoardSize; x++) {\n          const piece = Bstate[y]?.[x];\n          if (piece && (piece.kills || 0) >= 5) {\n            showTutorial(\"veterans\", { x, y });\n            return;\n          }\n        }\n      }\n    }\n  }, [Bstate, campaign.tutorialsSeen, pausedForTutorial, phase, currentBoardSize, showTutorial, enableTutorialPopups]);\n\n  // Tutorial: Prayer Die - trigger when Prayer Die popup first appears\n  useEffect(() => {\n    if (enableTutorialPopups && \n        phase === \"awaiting_reroll\" && \n        rerollState &&\n        !campaign.tutorialsSeen.includes(\"prayer_dice\") && \n        !pausedForTutorial &&\n        !currentTutorial) {\n      // Show immediately - the tutorial will appear before the Roll Failed popup\n      showTutorial(\"prayer_dice\");\n    }\n  }, [phase, rerollState, campaign.tutorialsSeen, pausedForTutorial, currentTutorial, enableTutorialPopups, showTutorial]);\n\n  // Tutorial: Market Buy Pawn - trigger when Market first opens in level 2\n  useEffect(() => {\n    if (enableTutorialPopups && \n        campaign.level === 2 && \n        phase === \"market\" && \n        marketViewVisible &&\n        !campaign.tutorialsSeen.includes(\"market_buy_pawn\") && \n        !pausedForTutorial &&\n        !currentTutorial) {\n      // Small delay to ensure Market UI is rendered\n      const timer = setTimeout(() => {\n        // Center the popup in the Market component (no arrow)\n        showTutorial(\"market_buy_pawn\");\n      }, 500);\n      return () => clearTimeout(timer);\n    }\n  }, [campaign.level, phase, marketViewVisible, campaign.tutorialsSeen, pausedForTutorial, currentTutorial, enableTutorialPopups, showTutorial]);\n\n  // Track if we should show the initial victory message or main content\n  const [showVictoryDetails, setShowVictoryDetails] = useState(false);\n\n  // Auto-transition from phrase to details after 2 seconds (only for wins)\n  useEffect(() => {\n    if (win === W && phrase && !showVictoryDetails) {\n      const timer = setTimeout(() => {\n        setShowVictoryDetails(true);\n      }, 2000);\n      return () => clearTimeout(timer);\n    }\n    // For losses, show details immediately\n    if (win === B) {\n      setShowVictoryDetails(true);\n    }\n  }, [win, phrase, showVictoryDetails]);\n\n  // Save campaign state to localStorage whenever it changes\n  useEffect(() => {\n    const serialized = {\n      ...campaign,\n      freeUnits: Array.from(campaign.freeUnits.entries()),\n      freeItems: Array.from(campaign.freeItems.entries()),\n    };\n    localStorage.setItem(\"dicechess_campaign_v1\", JSON.stringify(serialized));\n  }, [campaign]);\n\n  // Sync prayer dice state with campaign state\n  useEffect(() => {\n    setPrayerDice(campaign.prayerDice);\n  }, [campaign.prayerDice]);\n\n  const TMG = fastMode ? TIMING.fast : TIMING.normal;\n  const PIECE_MOVE_MS = 150;\n  const PIECE_MOVE_EASE = \"ease-out\";\n\n  // --- Tooltip state ---\n  const [tooltipText, setTooltipText] = useState<string | null>(null);\n  const mousePos = useGlobalMousePos(!!tooltipText);\n  const tooltip = tooltipText\n    ? { text: tooltipText, x: mousePos.x, y: mousePos.y }\n    : null;\n\n  const showTooltip = (text: string) => {\n    setTooltipText(text);\n  };\n\n  const hideTooltip = () => {\n    setTooltipText(null);\n  };\n\n  // Moved check calculations before the effect that uses them\n  const kW = useMemo(\n    () => findK(Bstate, W, currentBoardSize),\n    [Bstate, currentBoardSize]\n  );\n  const kB = useMemo(\n    () => findK(Bstate, B, currentBoardSize),\n    [Bstate, currentBoardSize]\n  );\n  const wChk = useMemo(\n    () =>\n      kW\n        ? threatened(Bstate, Tstate, obstacles, { x: kW.x, y: kW.y }, B, currentBoardSize)\n        : false,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [Bstate, Tstate, obstacles, kW]\n  );\n  const bChk = useMemo(\n    () =>\n      kB\n        ? threatened(Bstate, Tstate, obstacles, { x: kB.x, y: kB.y }, W, currentBoardSize)\n        : false,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [Bstate, Tstate, obstacles, kB]\n  );\n\n  useEffect(() => {\n    const onMouseMove = (e: MouseEvent) => {\n      if (drag) {\n        setDrag((d) =>\n          d ? { ...d, clientX: e.clientX, clientY: e.clientY } : null\n        );\n      }\n    };\n\n    const onMouseUp = (e: MouseEvent) => {\n      if (drag && boardRef.current) {\n        const boardRect = boardRef.current.getBoundingClientRect();\n        const x = Math.floor((e.clientX - boardRect.left - 12 - 24) / 88);\n        const y =\n          currentBoardSize -\n          1 -\n          Math.floor((e.clientY - boardRect.top - 12) / 88);\n\n        // Handle market phase drag-and-drop\n        if (phase === \"market\" && !marketAction) {\n          const B1 = cloneB(Bstate);\n          const draggedPiece = B1[drag.from.y]?.[drag.from.x];\n          const targetPiece = B1[y]?.[x];\n          \n          // Check if drop is valid (within deployment zone)\n          if (x >= 0 && x < currentBoardSize && y >= 0 && y <= 1 && drag.from.y <= 1 && draggedPiece) {\n            // Check if dropping on another white piece (swap) or empty square (move)\n            if (targetPiece && targetPiece.color === W && !(drag.from.x === x && drag.from.y === y)) {\n              // Swap pieces\n              sfx.move();\n              B1[drag.from.y][drag.from.x] = targetPiece;\n              B1[y][x] = draggedPiece;\n              setB(B1);\n              setSel(null);\n              setDrag(null);\n              return;\n            } else if (!targetPiece && obstacles[y]?.[x] === \"none\") {\n              // Move to empty square\n              sfx.move();\n              B1[y][x] = draggedPiece;\n              B1[drag.from.y][drag.from.x] = null;\n              setB(B1);\n              setSel(null);\n              setDrag(null);\n              return;\n            }\n          }\n          // Invalid drop in market phase - just clear drag and selection\n          setDrag(null);\n          setSel(null);\n          return;\n        }\n\n        // Handle playing phase drag-and-drop (existing logic)\n        const isLegal = legal.some((m) => m.x === x && m.y === y);\n        if (isLegal) {\n          setSel(null);\n          setLegal([]);\n          perform(drag.from, { x, y }, false, true);\n          setDrag(null); // Clear drag state after performing move\n          return; // Prevent setDrag(null) below\n        }\n      }\n      setDrag(null); // Clear drag on illegal move or drop outside\n    };\n\n    const onBlur = () => {\n      setDrag(null); // Clear drag if window loses focus\n    };\n\n    window.addEventListener(\"mousemove\", onMouseMove, { passive: true });\n    window.addEventListener(\"mouseup\", onMouseUp);\n    window.addEventListener(\"blur\", onBlur); // Also clear drag if window loses focus\n    return () => {\n      window.removeEventListener(\"mousemove\", onMouseMove);\n      window.removeEventListener(\"mouseup\", onMouseUp);\n      window.removeEventListener(\"blur\", onBlur);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [drag, legal, Bstate, Tstate, phase, marketAction, obstacles, currentBoardSize]); // Added dependencies for market phase and perform closure\n\n  // useEffect now depends on seed *and* level, init is passed unspentGold\n  useEffect(() => {\n    if (currentLevelConfig) {\n      init(seed, campaign.level, unspentGold, currentLevelConfig);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [seed, campaign.level, unspentGold, currentLevelConfig]);\n\n  // Keep ref in sync with state\n  useEffect(() => {\n    currentStoryCardRef.current = currentStoryCard;\n  }, [currentStoryCard]);\n\n  // Show story cards immediately when advancing to next level (skip intro popup)\n  useEffect(() => {\n    // Only show story cards if:\n    // 1. We have story cards in the queue\n    // 2. No current story card is showing\n    // 3. Intro popup is not showing\n    if (storyCardQueue.length > 0 && !currentStoryCard && !showIntro) {\n      setCurrentStoryCard(storyCardQueue[0]);\n      setIsRetryingLevel(false);\n    }\n  }, [storyCardQueue, currentStoryCard, showIntro]);\n\n  useEffect(() => {\n    sfx.muted = muted;\n  }, [muted]);\n\n  // Bot Turn Logic - Removed bChk from dependency array\n  useEffect(() => {\n    if (!win && turn === B && phase === \"playing\") {\n      // Calculate speech bubble typing delay using the ref to avoid re-triggering when bubble clears\n      let speechDelay = 0;\n      if (speechBubbleRef.current && speechBubbleRef.current.text) {\n        // Strip ** markers to get actual character count\n        const cleanText = speechBubbleRef.current.text.replace(/\\*\\*/g, \"\");\n        // 50ms per character + 500ms extra to let player read the completed bubble\n        speechDelay = cleanText.length * 50 + 500;\n      }\n\n      const totalDelay = TMG.botThink + speechDelay;\n\n      const t = setTimeout(() => {\n        // Calculate bChk inside the effect if needed for immediate logic, or rely on the state update triggering re-render\n        const isBlackInCheck = kB\n          ? threatened(\n              Bstate,\n              Tstate,\n              obstacles,\n              { x: kB.x, y: kB.y },\n              W,\n              currentBoardSize\n            )\n          : false;\n\n        const botBehavior = currentLevelConfig?.botBehavior || \"balanced\";\n\n        const m = bot(\n          Bstate,\n          Tstate,\n          obstacles,\n          B,\n          rngRef.current,\n          currentBoardSize,\n          botBehavior\n        );\n        \n        console.log(\"=== BOT TURN CHECK ===\");\n        console.log(\"Bot found move:\", !!m);\n        \n        if (!m) {\n          // Check if king_escaped is enabled\n          const victoryConditions = currentLevelConfig?.victoryConditions || [\"king_beheaded\", \"king_captured\", \"king_dishonored\"];\n          const kingEscapedEnabled = victoryConditions.includes(\"king_escaped\");\n          \n          console.log(\"Victory conditions:\", victoryConditions);\n          console.log(\"King escaped enabled:\", kingEscapedEnabled);\n          console.log(\"Black in check:\", isBlackInCheck);\n          console.log(\"Black king exists (kB):\", !!kB);\n          \n          // Check if all black pieces are dead\n          let allBlackPiecesDead = true;\n          let blackPieceCount = 0;\n          for (let y = 0; y < currentBoardSize; y++) {\n            for (let x = 0; x < currentBoardSize; x++) {\n              const piece = Bstate[y]?.[x];\n              if (piece && piece.color === B) {\n                allBlackPiecesDead = false;\n                blackPieceCount++;\n              }\n            }\n          }\n          \n          console.log(\"All black pieces dead:\", allBlackPiecesDead);\n          console.log(\"Black piece count:\", blackPieceCount);\n          \n          // REMOVED: All enemies wiped bonus logic to see what naturally happens\n          \n          // If black is in check and has no moves  check if it's checkmate\n          if (isBlackInCheck) {\n            // Before declaring checkmate, check if the King has any escape squares available\n            // (ignoring stun status, since stun is temporary and doesn't mean checkmate)\n            let hasEscapeSquare = false;\n            if (kB) {\n              const kingEscapeSquares = kingMovesIgnoringStun(\n                Bstate,\n                Tstate,\n                obstacles,\n                kB.x,\n                kB.y,\n                currentBoardSize\n              );\n              for (const escapeSquare of kingEscapeSquares) {\n                const nb = tryMove(Bstate, Tstate, { x: kB.x, y: kB.y }, escapeSquare);\n                if (!nb) continue;\n                const k2 = findK(nb, B, currentBoardSize);\n                if (!k2) continue; // This move gets king captured, not an evasion\n                if (!threatened(nb, Tstate, obstacles, { x: k2.x, y: k2.y }, W, currentBoardSize)) {\n                  // King has an escape square available, so it's not checkmate\n                  hasEscapeSquare = true;\n                  break;\n                }\n              }\n            }\n            \n            if (!hasEscapeSquare) {\n              // No escape squares available - this is truly checkmate\n              console.log(\">>> TAKING PATH: Black in check with no moves - checkmate\");\n              sfx.winCheckmate();\n              setWin(W); // Player wins if bot has no moves and is in check\n              const deliveringPiece =\n                lastMove ? Bstate[lastMove.to.y]?.[lastMove.to.x] : null;\n              handleLevelCompletion(W, Bstate, {\n                deliverer: deliveringPiece,\n                condition: \"king_captured\",\n              });\n              setPhrase(\"King captured! Checkmate!\");\n              \n              // Track King defeat for ransom\n              if (kB) {\n                setKilledEnemyPieces((prev) => [\n                  ...prev,\n                  { piece: kB.p, defeatType: \"checkmate\" },\n                ]);\n              }\n\n              // Add '#' for checkmate\n              setMoveHistory((hist) => {\n                const newHistory = [...hist];\n                const lastMoveEntry = newHistory[newHistory.length - 1];\n                if (lastMoveEntry) {\n                  lastMoveEntry.notation += \"#\";\n                }\n                return newHistory;\n              });\n              return;\n            } else {\n              // King has escape squares but is stunned - skip turn, not checkmate\n              console.log(\">>> TAKING PATH: Black in check but King has escape squares (stunned) - skipping turn\");\n              setPhrase(\"Black skipped turn (King stunned)\");\n              setMoveHistory((hist) => {\n                const newHistory = [...hist];\n                const lastMove = newHistory[newHistory.length - 1];\n                if (lastMove) {\n                  // Only add skip notation if it's not already there\n                  if (!lastMove.notation.includes(\"(skip)\")) {\n                    lastMove.notation += \" (skip)\";\n                  }\n                }\n                return newHistory;\n              });\n              // Switch turn back to white after skipping\n              console.log(\"Setting turn back to WHITE after skip (King stunned in check)\");\n              setTurn(W);\n              return;\n            }\n          }\n          \n          // If black is NOT in check and has no moves  skip turn (continue game)\n          console.log(\">>> TAKING PATH: Black has no moves (not in check) - skipping turn\");\n          console.log(\"This will skip black's turn and continue the game\");\n          console.log(\"Black pieces remaining:\", blackPieceCount);\n          console.log(\"This path should only happen if black has pieces but can't move them\");\n          \n          setPhrase(\"Black skipped turn (no moves)\");\n          setMoveHistory((hist) => {\n            const newHistory = [...hist];\n            const lastMove = newHistory[newHistory.length - 1];\n            if (lastMove) {\n              // Only add skip notation if it's not already there\n              if (!lastMove.notation.includes(\"(Skip)\") && !lastMove.notation.includes(\"(Black skipped)\")) {\n                lastMove.notation += \" (Skip)\";\n              }\n            }\n            return newHistory;\n          });\n          // Skip black's turn and continue with white\n          console.log(\"Setting turn back to WHITE after skip\");\n          setTurn(W);\n          return;\n        }\n        \n        console.log(\">>> Bot making move from\", m.from, \"to\", m.to);\n        perform(m.from, m.to, true);\n      }, totalDelay);\n      return () => clearTimeout(t);\n    }\n    // Dependencies now only include things that should trigger the bot's turn\n    // Note: speechBubble is NOT in deps - we use speechBubbleRef to check it without re-triggering\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [turn, Bstate, Tstate, win, phase, TMG.botThink, kB]);\n\n  const vis = useMemo(\n    () => visibility(Bstate, phase, currentBoardSize, currentLevelConfig?.fogRows ?? 2, marketViewVisible, currentLevelConfig?.marketEnabled !== false),\n    [Bstate, phase, currentBoardSize, currentLevelConfig, marketViewVisible]\n  );\n\n  const startDrag = (e: React.MouseEvent, x: number, y: number) => {\n    const p = Bstate[y]?.[x]; // Safe navigation\n    \n    // Check if we're in market phase with a white piece in deployment zone\n    const isMarketDrag = phase === \"market\" && !marketAction && p?.color === W && y <= 1;\n    \n    // Check if we're in playing phase with valid piece\n    const isPlayingDrag = phase === \"playing\" && p?.color === turn && p.color === W && \n                          !(p.stunnedForTurns && p.stunnedForTurns > 0) && !moveAnim && !fx;\n    \n    if (!p || (!isMarketDrag && !isPlayingDrag))\n      return;\n\n    e.preventDefault(); //  avoid click artifacts while dragging\n\n    const tileEl = (e.target as HTMLElement).closest(\".tile\");\n    if (!tileEl) return;\n    const tileRect = tileEl.getBoundingClientRect();\n    const offsetX = e.clientX - tileRect.left;\n    const offsetY = e.clientY - tileRect.top;\n\n    // Select piece so you get legal highlights & odds preview\n    click(x, y);\n\n    const colorKey = p.color as \"w\" | \"b\";\n    // Check if GL has the type before accessing colorKey\n    const pieceGlyphSet = GL[p.type as keyof typeof GL];\n    const glyph =\n      pieceGlyphSet && colorKey in pieceGlyphSet ? pieceGlyphSet[colorKey as keyof typeof pieceGlyphSet] : \"?\";\n\n    setDrag({\n      id: p.id,\n      from: { x, y },\n      glyph: glyph,\n      color: colorKey,\n      equip: p.equip,\n      clientX: e.clientX,\n      clientY: e.clientY,\n      offsetX,\n      offsetY,\n    });\n  };\n\n  // Combat Animation Logic\n  useEffect(() => {\n    if (!fx) {\n      if (\n        phase !== \"market\" &&\n        phase !== \"playing\" &&\n        phase !== \"awaiting_reroll\" &&\n        phase !== \"awaiting_disguise_choice\"\n      ) {\n        setPhase(\"playing\");\n      }\n      return;\n    }\n\n    if (!fx.isReroll) {\n      setRerollTarget(null);\n    }\n\n    setPhase(\"base\");\n\n    if (rerollTarget === \"attacker\") {\n      if (fx.kind === \"piece\") setDispD(fx.d.total);\n    } else if (rerollTarget === \"defender\") {\n      setDispA(fx.a.total);\n    } else {\n      setDispA(null);\n      setDispD(null);\n    }\n\n    const rollDuration = TMG.roll;\n    const lingerDuration = TMG.linger;\n    const modsDuration = TMG.mods;\n    const totalDuration = TMG.total;\n\n    const hasM =\n      (fx.a.mods?.length || 0) > 0 ||\n      (fx.kind === \"piece\" && (fx.d.mods?.length || 0) > 0);\n\n    const t1 = setTimeout(() => {\n      setDispA(fx.a.base);\n      if (fx.kind === \"piece\") setDispD(fx.d.base);\n      setPhase(hasM ? \"mods\" : \"total\");\n    }, rollDuration + lingerDuration);\n\n    const t2 = setTimeout(\n      () => setPhase(\"total\"),\n      rollDuration + lingerDuration + (hasM ? modsDuration : 0)\n    );\n    const t3 = setTimeout(\n      () => setPhase(\"winner\"),\n      rollDuration + lingerDuration + (hasM ? modsDuration : 0) + totalDuration\n    );\n\n    return () => {\n      clearTimeout(t1);\n      clearTimeout(t2);\n      clearTimeout(t3);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [fx, TMG]);\n\n  useEffect(() => {\n    if (!fx || (phase !== \"total\" && phase !== \"winner\")) return;\n    const tick = (\n      s: number | null, // Allow null start value\n      e: number,\n      set: (n: number | null) => void,\n      bump: (v: boolean) => void\n    ) => {\n      // If start value is null (e.g., from previous state), use the base value from fx\n      const startVal = s ?? (set === setDispA ? fx.a.base : fx.d?.base ?? 0);\n      if (startVal === null || typeof startVal === \"undefined\") return () => {}; // Safety check and return cleanup\n\n      if (startVal === e) {\n        bump(true);\n        const tm = setTimeout(() => bump(false), 320);\n        return () => clearTimeout(tm);\n      }\n      let v = startVal;\n      const id = setInterval(() => {\n        v += v < e ? 1 : -1;\n        set(v);\n        if (v === e) {\n          clearInterval(id);\n          bump(true);\n          setTimeout(() => bump(false), 320);\n        }\n      }, 65);\n      return () => clearInterval(id);\n    };\n\n    let c1 = () => {},\n      c2 = () => {}; // Initialize cleanup functions\n\n    if (rerollTarget !== \"defender\") {\n      c1 = tick(dispA, fx.a.total, setDispA, setBumpA); // Pass current dispA\n    } else {\n      setBumpA(true);\n      const tm = setTimeout(() => setBumpA(false), 320);\n      c1 = () => clearTimeout(tm);\n    }\n\n    if (fx.kind === \"piece\") {\n      if (rerollTarget !== \"attacker\") {\n        c2 = tick(dispD, fx.d.total, setDispD, setBumpD); // Pass current dispD\n      } else {\n        setBumpD(true);\n        const tm = setTimeout(() => setBumpD(false), 320);\n        c2 = () => clearTimeout(tm);\n      }\n    }\n\n    return () => {\n      c1(); // Always call cleanup\n      c2(); // Always call cleanup\n    };\n  }, [phase, fx, rerollTarget, dispA, dispD]); // Added rerollTarget, dispA, dispD dependencies\n\n  useEffect(() => {\n    if (speechBubble) {\n      const timer = setTimeout(() => {\n        setSpeechBubble(null);\n      }, TMG.bubble); // Bubble visible for 3.5 seconds\n      return () => clearTimeout(timer);\n    }\n  }, [speechBubble, TMG.bubble]);\n\n  // Ref to track speech bubble state for timer closure\n  const speechBubbleRef = useRef(speechBubble);\n  useEffect(() => {\n    speechBubbleRef.current = speechBubble;\n  }, [speechBubble]);\n\n  // Courtier speech timer - triggers independently from piece speech\n  useEffect(() => {\n    if (\n      phase !== \"playing\" ||\n      !currentLevelConfig?.courtierSpeechLines ||\n      currentLevelConfig.courtierSpeechLines.length === 0 ||\n      win\n    ) {\n      return; // Don't run during market, story, or after game ends\n    }\n\n    const speechChance = currentLevelConfig?.courtierSpeechChance ?? 0.3;\n    const intervalConfig = currentLevelConfig?.courtierSpeechInterval ?? { min: 2000, max: 5000 };\n    \n    // Calculate random interval (either a fixed number or random between min/max)\n    const getRandomInterval = (): number => {\n      if (typeof intervalConfig === \"number\") {\n        return intervalConfig;\n      } else {\n        const min = intervalConfig.min ?? 2000;\n        const max = intervalConfig.max ?? 5000;\n        return min + Math.random() * (max - min);\n      }\n    };\n\n    let timeoutId: NodeJS.Timeout | null = null;\n    let isActive = true;\n\n    const scheduleNextCheck = () => {\n      if (!isActive) return;\n      \n      const interval = getRandomInterval();\n      timeoutId = setTimeout(() => {\n        // Check if we're still in playing phase and should continue\n        if (phase !== \"playing\" || win || !currentLevelConfig?.courtierSpeechLines) {\n          isActive = false;\n          return;\n        }\n\n        // Only trigger if there's no active speech bubble (don't interrupt piece speech)\n        if (!speechBubbleRef.current) {\n          const speakingCourtiers: { x: number; y: number; line: string }[] = [];\n          obstacles.forEach((row, y) => {\n            row.forEach((obs, x) => {\n              if (obs === \"courtier\" && Math.random() < speechChance) {\n                const randomLine = currentLevelConfig.courtierSpeechLines![Math.floor(Math.random() * currentLevelConfig.courtierSpeechLines!.length)];\n                speakingCourtiers.push({ x, y, line: randomLine });\n              }\n            });\n          });\n          \n          // Show speech bubbles for all courtiers that rolled successfully\n          // Queue them sequentially so they appear one after another\n          if (speakingCourtiers.length > 0) {\n            speakingCourtiers.forEach((courtier, idx) => {\n              setTimeout(() => {\n                // Double-check there's still no piece speech bubble before showing\n                if (!speechBubbleRef.current) {\n                  setSpeechBubble({\n                    text: courtier.line,\n                    id: Date.now() + idx,\n                    targetId: `courtier-${courtier.x}-${courtier.y}`\n                  });\n                  setTimeout(() => setSpeechBubble(null), 2000);\n                }\n              }, idx * 2500); // Stagger by 2.5 seconds each\n            });\n          }\n        }\n        \n        // Schedule next check\n        scheduleNextCheck();\n      }, interval);\n    };\n\n    // Start the first check\n    scheduleNextCheck();\n\n    return () => {\n      isActive = false;\n      if (timeoutId) clearTimeout(timeoutId);\n    };\n  }, [phase, currentLevelConfig, obstacles, win]);\n\n  // safety: hide tooltip whenever we leave Market or start an action\n  useEffect(() => {\n    if (phase !== \"market\") hideTooltip();\n  }, [phase]);\n  useEffect(() => {\n    if (marketAction) hideTooltip();\n  }, [marketAction]);\n\n  useEffect(() => {\n    if (phase === \"awaiting_reroll\" && rerollState && boardRef.current) {\n      const boardRect = boardRef.current.getBoundingClientRect();\n      const top = boardRect.top + boardRect.height / 2;\n      const left = boardRect.left + boardRect.width / 2;\n      setRerollPopupPosition({ top, left });\n    } else {\n      setRerollPopupPosition(null);\n    }\n  }, [phase, rerollState]);\n\n  useEffect(() => {\n    if (\n      phase === \"awaiting_disguise_choice\" &&\n      disguisePopupState &&\n      boardRef.current\n    ) {\n      const boardRect = boardRef.current.getBoundingClientRect();\n      const { x, y } = disguisePopupState;\n      const visualY = currentBoardSize - 1 - y;\n      const top = boardRect.top + 12 + visualY * 88 + 88 / 2;\n      const left = boardRect.left + 12 + 24 + x * 88 + 88 / 2;\n      setDisguisePopupPosition({ top, left });\n    } else {\n      setDisguisePopupPosition(null);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [phase, disguisePopupState]);\n\n  useEffect(() => {\n    if (namingState && boardRef.current) {\n      const boardRect = boardRef.current.getBoundingClientRect();\n      const { x, y } = namingState;\n      const visualY = currentBoardSize - 1 - y;\n      const top = boardRect.top + 12 + visualY * 88 + 60; // Position at the feet of the piece\n      const left = boardRect.left + 12 + 24 + x * 88 + 44;\n      setNameInputPosition({ top, left });\n    } else {\n      setNameInputPosition(null);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [namingState]);\n\n  useEffect(() => {\n    // When the game starts, always clear any pending market action.\n    if (phase === \"playing\") {\n      setMarketAction(null);\n    }\n  }, [phase]);\n\n  // Campaign level completion handler\nfunction handleLevelCompletion(\n    winner: Color,\n    board: Board,\n    options?: { deliverer?: Piece | null; condition?: VictoryCondition }\n  ) {\n    if (winner === W && options?.deliverer) {\n      const deliverer = options.deliverer;\n      setLastVictoryInfo({\n        pieceType: deliverer.originalType ?? deliverer.type,\n        originalType: deliverer.originalType,\n        condition: options.condition,\n      });\n    } else {\n      setLastVictoryInfo(null);\n    }\n    if (winner === W) {\n      // Player won - compute survivors and update campaign state\n      const survivors: Piece[] = [];\n      for (let y = 0; y < currentBoardSize; y++) {\n        for (let x = 0; x < currentBoardSize; x++) {\n          const piece = board[y][x];\n          if (piece && piece.color === W) {\n            survivors.push(serializePiece(piece));\n          }\n        }\n      }\n\n      setCampaign((prev) => ({\n        ...prev,\n        level: prev.level, // Don't increment level yet - let victory screen show first\n        whiteRoster: survivors,\n        prayerDice: prev.prayerDice, // Keep current prayer dice count\n        unlockedItems: prev.unlockedItems || [], // Preserve unlocked items\n        freeUnits: prev.freeUnits || new Map(), // Preserve free units\n        freeItems: prev.freeItems || new Map(), // Preserve free items\n        tutorialsSeen: prev.tutorialsSeen || [],\n      }));\n\n      // Check objectives one final time on victory\n      setTimeout(() => {\n        checkObjectives({ allowCompletion: true });\n      }, 100);\n    }\n    // If player lost, don't update campaign state (they'll restart from current level)\n  }\n\n  // Sell piece function\n  function sellPiece(x: number, y: number) {\n    const piece = Bstate[y]?.[x];\n    if (!piece || piece.color !== W || phase !== \"market\" || piece.type === \"K\" || piece.equip === \"curse\" || currentLevelConfig?.marketEnabled === false)\n      return; // Prevent selling King, Curse-equipped units, or when market is disabled\n\n    const sellValue = getSellValue(piece);\n    setMarketPoints((prev) => prev + sellValue);\n\n    // Play cash out sound\n    sfx.cashOut();\n\n    // Remove the piece from the board\n    const newBoard = cloneB(Bstate);\n    newBoard[y][x] = null;\n    setB(newBoard);\n\n    // Hide sell button\n    setSellButtonPos(null);\n\n    // Update campaign roster if this piece was in it\n    setCampaign((prev) => ({\n      ...prev,\n      whiteRoster: prev.whiteRoster.filter((p) => p.id !== piece.id),\n    }));\n  }\n\n  // init now accepts currentLevel and currentUnspentGold\n  // Helper function to place pieces on a row, avoiding obstacles\n  function placePiecesAvoidingObstacles(\n    board: Board,\n    obstacles: Obstacle,\n    pieces: (Piece | null)[],\n    row: number,\n    boardSize: number\n  ) {\n    // First pass: place pieces in their intended positions if not blocked by obstacles or other pieces\n    for (let x = 0; x < boardSize; x++) {\n      if (pieces[x] && board[row]?.[x] === null && obstacles[row]?.[x] === \"none\") {\n        board[row][x] = pieces[x];\n        pieces[x] = null; // Mark as placed\n      }\n    }\n\n    // Second pass: find alternative positions for pieces that couldn't be placed\n    const unplacedPieces = pieces.filter((p) => p !== null) as Piece[];\n\n    // Sort unplaced pieces to prioritize King placement (and named/preconfigured pieces)\n    unplacedPieces.sort((a, b) => {\n      if (a.type === \"K\") return -1; // King gets highest priority\n      if (b.type === \"K\") return 1;\n      if (a.isPreconfigured && !b.isPreconfigured) return -1; // Preconfigured pieces next\n      if (!a.isPreconfigured && b.isPreconfigured) return 1;\n      return 0; // Keep other pieces in original order\n    });\n\n    // Count available slots on the row (no pieces AND no obstacles)\n    let availableSlots = 0;\n    for (let x = 0; x < boardSize; x++) {\n      if (board[row]?.[x] === null && obstacles[row]?.[x] === \"none\") availableSlots++;\n    }\n\n    // If we have preconfigured pieces that need placement but not enough slots,\n    // make room by temporarily removing non-preconfigured pieces from the board\n    const preconfiguredToPlace = unplacedPieces.filter(p => p.isPreconfigured || p.type === \"K\");\n    if (preconfiguredToPlace.length > 0 && availableSlots < preconfiguredToPlace.length) {\n      // Collect non-preconfigured pieces that we can temporarily remove\n      const removablePieces: { piece: Piece; x: number }[] = [];\n      for (let x = 0; x < boardSize; x++) {\n        const piece = board[row]?.[x];\n        if (piece && !piece.isPreconfigured && piece.type !== \"K\" && obstacles[row]?.[x] === \"none\") {\n          removablePieces.push({ piece, x });\n        }\n      }\n      \n      // Remove enough pieces to make room for all preconfigured pieces\n      const piecesToRemove = Math.min(\n        removablePieces.length,\n        preconfiguredToPlace.length - availableSlots\n      );\n      for (let i = 0; i < piecesToRemove; i++) {\n        board[row][removablePieces[i].x] = null;\n        availableSlots++;\n      }\n    }\n\n    // If we have more unplaced pieces than slots, we need to sacrifice lower-priority pieces\n    const piecesToPlace = unplacedPieces.slice(0, availableSlots);\n\n    // Place pieces in available slots (King and preconfigured pieces will be placed first due to sorting)\n    for (const piece of piecesToPlace) {\n      for (let x = 0; x < boardSize; x++) {\n        if (board[row]?.[x] === null && obstacles[row]?.[x] === \"none\") {\n          board[row][x] = piece;\n          break; // Move to next piece\n        }\n      }\n    }\n  }\n\n  // Handle intro popup completion\n  function handleIntroComplete() {\n    setShowIntro(false);\n\n    // Check if there are story cards to show\n    if (storyCardQueue.length > 0) {\n      setCurrentStoryCard(storyCardQueue[0]);\n    }\n    // If no story cards, game proceeds to market normally\n  }\n\n  // Handle story outcome acknowledgment\n  function handleOutcomeAcknowledged() {\n    const nextCard = storyOutcome?.nextCard;\n    setStoryOutcome(null);\n\n    // If there's a next card, show it; otherwise show transition then go to market or playing\n    if (nextCard) {\n      setCurrentStoryCard(nextCard);\n    } else {\n      setShowTransition(true);\n      // Hide story card first\n      setCurrentStoryCard(null);\n      setStoryCardQueue([]);\n\n      // Since banners start covering the screen, we can change phase immediately\n      // The transition will reveal it when banners slide out\n      // Go to market phase or skip to playing if market disabled\n      const marketEnabled = currentLevelConfig?.marketEnabled !== false;\n      setPhase(marketEnabled ? \"market\" : \"playing\");\n      setMarketViewVisible(marketEnabled); // Start with market visible by default only if enabled\n\n      // TRIGGER: If market is disabled, battle starts immediately - trigger level music\n      if (!marketEnabled) {\n        musicManagerRef.current?.playLevelMusic(campaign.level);\n      }\n      // If market is enabled, music will trigger when user clicks \"Start Battle\" button\n\n      // Medieval transition sound via WebAudio (match 2.5s animation)\n      try {\n        const Ctx: any =\n          (window as any).AudioContext || (window as any).webkitAudioContext;\n        if (Ctx) {\n          const ctx = new Ctx();\n          const now = ctx.currentTime;\n          const horn = ctx.createOscillator();\n          const g1 = ctx.createGain();\n          horn.type = \"sawtooth\";\n          horn.frequency.setValueAtTime(420, now);\n          g1.gain.setValueAtTime(0.0001, now);\n          g1.gain.exponentialRampToValueAtTime(0.2, now + 0.05);\n          g1.gain.exponentialRampToValueAtTime(0.0001, now + 2.4);\n          horn.connect(g1);\n          g1.connect(ctx.destination);\n          horn.start(now);\n          horn.stop(now + 2.4);\n        }\n      } catch (e) {}\n\n      // After full animation completes (2.5s), hide transition to reveal market screen\n      setTimeout(() => {\n        setShowTransition(false);\n      }, 2500);\n    }\n  }\n\n  // Handle story card choice events\n  const handleStoryEvents = useCallback(\n    (events: StoryEvent[]) => {\n      const outcomes: OutcomeData[] = [];\n      let nextCard: StoryCardType | undefined = undefined;\n      let shouldStartBattle = false;\n      \n      // Accumulate all campaign changes to apply in one batch\n      let campaignUpdates: Partial<CampaignState & { pendingEnemyPawns: number; pendingEnemyItemAssignments: Array<{ item: string; count: number }>; pendingEquipmentAssignments: Array<{ pieceName: string; pieceType: PieceType; equip: Exclude<Equip, undefined> }>; pendingPieceSpawns: Array<{ pieceType: PieceType; color: \"w\" | \"b\"; x: number; y: number; equip?: Equip }>; pendingObjectiveFlags: string[] }> = {};\n      \n      // Track free units to combine consecutive events of the same type\n      let pendingFreeUnit: { pieceType: PieceType; count: number } | null = null;\n\n      for (const event of events) {\n        switch (event.type) {\n          case \"next_card\":\n            // Find the next card - first check in storyCardQueue (for end-of-story cards), then in level config\n            nextCard = storyCardQueue.find(\n              (card) => card.id === event.cardId\n            ) || currentLevelConfig?.storyCards?.find(\n              (card) => card.id === event.cardId\n            );\n            break;\n\n          case \"reset_to_title\":\n            // TRIGGER: Stop music when resetting to title\n            musicManagerRef.current?.stopMusic();\n            \n            // Reset all progress and return to title screen\n            setShowVictoryDetails(false);\n            setWin(null);\n            setKilledEnemyPieces([]);\n            setPlayerPiecesLost([]);\n            setThisLevelUnlockedItems([]);\n            setCurrentStoryCard(null);\n            setStoryCardQueue([]);\n            setStoryOutcome(null);\n            setPhase(\"market\");\n            setMarketViewVisible(true);\n            setMarketPoints(0);\n            setUnspentGold(0);\n            setCampaign({\n              level: 1,\n              whiteRoster: [],\n              prayerDice: 2,\n              unlockedItems: [],\n              freeUnits: new Map(),\n              freeItems: new Map(),\n              tutorialsSeen: [],\n              difficulty: undefined,\n            });\n            // Clear tutorial-related and difficulty localStorage flags\n            localStorage.removeItem(\"dicechess_first_combat_tutorial_used\");\n            localStorage.removeItem(\"dicechess_difficulty\");\n            // Return to title screen\n            setShowIntro(true);\n            // Trigger fresh init\n            setSeed(new Date().toISOString() + \"-newgame\");\n            return; // Exit early, no need to process other events\n\n          case \"give_gold\":\n            // Flush pending free unit before other events\n            if (pendingFreeUnit) {\n              outcomes.push({\n                message: `${pendingFreeUnit.count} Free ${PIECE_NAMES[pendingFreeUnit.pieceType]}${pendingFreeUnit.count > 1 ? 's' : ''}`,\n                glyph: \"\",\n                color: \"text-green-100\",\n                bgColor: \"bg-green-900\",\n                borderColor: \"border-green-500\",\n              });\n              pendingFreeUnit = null;\n            }\n            setMarketPoints((prev) => prev + event.amount);\n            outcomes.push({\n              message: `+${event.amount} Gold`,\n              glyph: \"\",\n              color: \"text-yellow-100\",\n              bgColor: \"bg-yellow-900\",\n              borderColor: \"border-yellow-500\",\n            });\n            break;\n\n          case \"remove_gold\":\n            // Flush pending free unit before other events\n            if (pendingFreeUnit) {\n              outcomes.push({\n                message: `${pendingFreeUnit.count} Free ${PIECE_NAMES[pendingFreeUnit.pieceType]}${pendingFreeUnit.count > 1 ? 's' : ''}`,\n                glyph: \"\",\n                color: \"text-green-100\",\n                bgColor: \"bg-green-900\",\n                borderColor: \"border-green-500\",\n              });\n              pendingFreeUnit = null;\n            }\n            setMarketPoints((prev) => Math.max(0, prev - event.amount));\n            outcomes.push({\n              message: `-${event.amount} Gold`,\n              glyph: \"\",\n              color: \"text-red-100\",\n              bgColor: \"bg-red-900\",\n              borderColor: \"border-red-500\",\n            });\n            break;\n\n          case \"give_prayer_die\":\n            // Flush pending free unit before other events\n            if (pendingFreeUnit) {\n              outcomes.push({\n                message: `${pendingFreeUnit.count} Free ${PIECE_NAMES[pendingFreeUnit.pieceType]}${pendingFreeUnit.count > 1 ? 's' : ''}`,\n                glyph: \"\",\n                color: \"text-green-100\",\n                bgColor: \"bg-green-900\",\n                borderColor: \"border-green-500\",\n              });\n              pendingFreeUnit = null;\n            }\n            campaignUpdates.prayerDice = (campaignUpdates.prayerDice ?? campaign.prayerDice) + 1;\n            setPrayerDice((prev) => prev + 1);\n            outcomes.push({\n              message: \"+1 Prayer Die\",\n              glyph: \"\",\n              color: \"text-purple-100\",\n              bgColor: \"bg-purple-900\",\n              borderColor: \"border-purple-500\",\n            });\n            break;\n\n          case \"remove_prayer_die\":\n            // Flush pending free unit before other events\n            if (pendingFreeUnit) {\n              outcomes.push({\n                message: `${pendingFreeUnit.count} Free ${PIECE_NAMES[pendingFreeUnit.pieceType]}${pendingFreeUnit.count > 1 ? 's' : ''}`,\n                glyph: \"\",\n                color: \"text-green-100\",\n                bgColor: \"bg-green-900\",\n                borderColor: \"border-green-500\",\n              });\n              pendingFreeUnit = null;\n            }\n            campaignUpdates.prayerDice = Math.max(0, (campaignUpdates.prayerDice ?? campaign.prayerDice) - 1);\n            setPrayerDice((prev) => Math.max(0, prev - 1));\n            outcomes.push({\n              message: \"-1 Prayer Die\",\n              glyph: \"\",\n              color: \"text-purple-100\",\n              bgColor: \"bg-purple-900\",\n              borderColor: \"border-purple-500\",\n            });\n            break;\n\n          case \"unlock_item\":\n            // Flush pending free unit before other events\n            if (pendingFreeUnit) {\n              outcomes.push({\n                message: `${pendingFreeUnit.count} Free ${PIECE_NAMES[pendingFreeUnit.pieceType]}${pendingFreeUnit.count > 1 ? 's' : ''}`,\n                glyph: \"\",\n                color: \"text-green-100\",\n                bgColor: \"bg-green-900\",\n                borderColor: \"border-green-500\",\n              });\n              pendingFreeUnit = null;\n            }\n            campaignUpdates.unlockedItems = [\n              ...(campaignUpdates.unlockedItems ?? campaign.unlockedItems),\n              event.item\n            ];\n            outcomes.push({\n              message: `Unlocked ${event.item}!`,\n              glyph: equipIcon(event.item) || \"\",\n              color: \"text-orange-100\",\n              bgColor: \"bg-orange-900\",\n              borderColor: \"border-orange-500\",\n            });\n            break;\n\n          case \"give_free_unit\":\n            {\n              const newFreeUnits = new Map(campaignUpdates.freeUnits ?? campaign.freeUnits);\n              const currentCount = newFreeUnits.get(event.pieceType) || 0;\n              newFreeUnits.set(event.pieceType, currentCount + 1);\n              campaignUpdates.freeUnits = newFreeUnits;\n              \n              // Accumulate consecutive free units of the same type\n              if (pendingFreeUnit && pendingFreeUnit.pieceType === event.pieceType) {\n                pendingFreeUnit.count++;\n              } else {\n                // If there's a pending unit of a different type, flush it first\n                if (pendingFreeUnit) {\n                  outcomes.push({\n                    message: `${pendingFreeUnit.count} Free ${PIECE_NAMES[pendingFreeUnit.pieceType]}${pendingFreeUnit.count > 1 ? 's' : ''}`,\n                    glyph: \"\",\n                    color: \"text-green-100\",\n                    bgColor: \"bg-green-900\",\n                    borderColor: \"border-green-500\",\n                  });\n                }\n                pendingFreeUnit = { pieceType: event.pieceType, count: 1 };\n              }\n            }\n            break;\n\n          case \"give_free_item\":\n            // Flush pending free unit before other events\n            if (pendingFreeUnit) {\n              outcomes.push({\n                message: `${pendingFreeUnit.count} Free ${PIECE_NAMES[pendingFreeUnit.pieceType]}${pendingFreeUnit.count > 1 ? 's' : ''}`,\n                glyph: \"\",\n                color: \"text-green-100\",\n                bgColor: \"bg-green-900\",\n                borderColor: \"border-green-500\",\n              });\n              pendingFreeUnit = null;\n            }\n            {\n              const count = event.count ?? 1;\n              const newFreeItems = new Map(campaignUpdates.freeItems ?? campaign.freeItems);\n              const currentCount = newFreeItems.get(event.item) || 0;\n              newFreeItems.set(event.item, currentCount + count);\n              campaignUpdates.freeItems = newFreeItems;\n              const itemIcon = equipIcon(event.item);\n              const capitalizedItemName = event.item.charAt(0).toUpperCase() + event.item.slice(1);\n              outcomes.push({\n                message: `x${count} ${itemIcon} Free ${capitalizedItemName}`,\n                glyph: \"\",\n                color: \"text-green-100\",\n                bgColor: \"bg-green-900\",\n                borderColor: \"border-green-500\",\n              });\n            }\n            break;\n\n          case \"increase_prayer_cost\":\n            // Flush pending free unit before other events\n            if (pendingFreeUnit) {\n              outcomes.push({\n                message: `${pendingFreeUnit.count} Free ${PIECE_NAMES[pendingFreeUnit.pieceType]}${pendingFreeUnit.count > 1 ? 's' : ''}`,\n                glyph: \"\",\n                color: \"text-green-100\",\n                bgColor: \"bg-green-900\",\n                borderColor: \"border-green-500\",\n              });\n              pendingFreeUnit = null;\n            }\n            campaignUpdates.prayerDiceCost = 100;\n            outcomes.push({\n              message: \"Prayer Dice now cost 100g\",\n              glyph: \"\",\n              color: \"text-purple-100\",\n              bgColor: \"bg-purple-900\",\n              borderColor: \"border-purple-500\",\n            });\n            break;\n\n          case \"attach_item_to_units\":\n            // Flush pending free unit before other events\n            if (pendingFreeUnit) {\n              outcomes.push({\n                message: `${pendingFreeUnit.count} Free ${PIECE_NAMES[pendingFreeUnit.pieceType]}${pendingFreeUnit.count > 1 ? 's' : ''}`,\n                glyph: \"\",\n                color: \"text-green-100\",\n                bgColor: \"bg-green-900\",\n                borderColor: \"border-green-500\",\n              });\n              pendingFreeUnit = null;\n            }\n            \n            // Determine if we're targeting player or enemy\n            const targetColor = event.target === \"player\" ? W : B;\n            \n            // If targeting player and they're not on the board yet (story phase),\n            // attach items to the roster instead\n            if (event.target === \"player\" && campaign.whiteRoster && campaign.whiteRoster.length > 0) {\n              // Count how many player pieces are currently on the board\n              let playerPiecesOnBoard = 0;\n              for (let y = 0; y < currentBoardSize; y++) {\n                for (let x = 0; x < currentBoardSize; x++) {\n                  if (Bstate[y]?.[x]?.color === W) {\n                    playerPiecesOnBoard++;\n                  }\n                }\n              }\n              \n              // If no player pieces on board, we're in story phase - modify roster\n              if (playerPiecesOnBoard === 0) {\n                const updatedRoster = [...campaign.whiteRoster];\n                // Randomly select pieces from roster to attach items to\n                const indicesToModify = updatedRoster\n                  .map((_, idx) => idx)\n                  .sort(() => rngRef.current() - 0.5)\n                  .slice(0, Math.min(event.count, updatedRoster.length));\n                \n                indicesToModify.forEach((idx) => {\n                  updatedRoster[idx] = { ...updatedRoster[idx], equip: event.item };\n                });\n                \n                campaignUpdates.whiteRoster = updatedRoster;\n                \n                const itemEmoji = equipIcon(event.item);\n                const isNegativeItem = event.item === \"curse\" || event.item === \"skull\";\n                const itemName = event.item === \"curse\" ? \"Cursed\" : event.item.charAt(0).toUpperCase() + event.item.slice(1);\n                const glyphEmoji = event.item === \"curse\" ? itemEmoji : (event.item === \"skull\" ? \"\" : \"\");\n                outcomes.push({\n                  message: `${event.count} of your units are ${itemName}!`,\n                  glyph: glyphEmoji,\n                  color: isNegativeItem ? \"text-red-100\" : \"text-blue-100\",\n                  bgColor: isNegativeItem ? \"bg-red-900\" : \"bg-blue-900\",\n                  borderColor: isNegativeItem ? \"border-red-500\" : \"border-blue-500\",\n                });\n                break;\n              }\n            }\n            \n            // Otherwise, use the existing board-based logic (for enemy or in-battle player targeting)\n            const targetPieces: { x: number; y: number; piece: Piece }[] = [];\n            \n            // Find all pieces of the target color on the board\n            for (let y = 0; y < currentBoardSize; y++) {\n              for (let x = 0; x < currentBoardSize; x++) {\n                const piece = Bstate[y]?.[x];\n                if (piece && piece.color === targetColor) {\n                  targetPieces.push({ x, y, piece });\n                }\n              }\n            }\n\n            // Randomly select pieces to attach items to\n            const piecesToModify = targetPieces\n              .sort(() => rngRef.current() - 0.5)\n              .slice(0, Math.min(event.count, targetPieces.length));\n\n            // Attach the item to selected pieces\n            const newBoard = Bstate.map(row => row.slice()) as Board;\n            piecesToModify.forEach(({ x, y, piece }) => {\n              if (newBoard[y]?.[x]) {\n                newBoard[y][x] = { ...piece, equip: event.item };\n              }\n            });\n            setB(newBoard);\n\n            const itemEmoji = equipIcon(event.item);\n            const isNegativeItem = event.item === \"curse\" || event.item === \"skull\";\n            const itemName = event.item === \"curse\" ? \"Cursed\" : event.item.charAt(0).toUpperCase() + event.item.slice(1);\n            // Use item emoji for curse, skull emoji for skull item, or sparkle for others\n            const glyphEmoji = event.item === \"curse\" ? itemEmoji : (event.item === \"skull\" ? \"\" : \"\");\n            outcomes.push({\n              message: event.target === \"player\"\n                ? `${event.count} of your units are ${itemName}!`\n                : `${event.count} enemy units are ${itemName}!`,\n              glyph: glyphEmoji,\n              color: isNegativeItem ? \"text-red-100\" : \"text-blue-100\",\n              bgColor: isNegativeItem ? \"bg-red-900\" : \"bg-blue-900\",\n              borderColor: isNegativeItem ? \"border-red-500\" : \"border-blue-500\",\n            });\n            break;\n\n          case \"spawn_enemy_pawns\":\n            // Flush pending free unit before other events\n            if (pendingFreeUnit) {\n              outcomes.push({\n                message: `${pendingFreeUnit.count} Free ${PIECE_NAMES[pendingFreeUnit.pieceType]}${pendingFreeUnit.count > 1 ? 's' : ''}`,\n                glyph: \"\",\n                color: \"text-green-100\",\n                bgColor: \"bg-green-900\",\n                borderColor: \"border-green-500\",\n              });\n              pendingFreeUnit = null;\n            }\n            // Store the count to spawn when battle starts\n            campaignUpdates.pendingEnemyPawns = \n              (campaignUpdates.pendingEnemyPawns ?? ((campaign as any).pendingEnemyPawns || 0)) + event.count;\n            outcomes.push({\n              message: \"Extra enemies added\",\n              glyph: \"\",\n              color: \"text-red-100\",\n              bgColor: \"bg-red-900\",\n              borderColor: \"border-red-500\",\n            });\n            break;\n\n          case \"assign_item_to_enemy\":\n            // Flush pending free unit before other events\n            if (pendingFreeUnit) {\n              outcomes.push({\n                message: `${pendingFreeUnit.count} Free ${PIECE_NAMES[pendingFreeUnit.pieceType]}${pendingFreeUnit.count > 1 ? 's' : ''}`,\n                glyph: \"\",\n                color: \"text-green-100\",\n                bgColor: \"bg-green-900\",\n                borderColor: \"border-green-500\",\n              });\n              pendingFreeUnit = null;\n            }\n            // Store to process after board is initialized\n            campaignUpdates.pendingEnemyItemAssignments = [\n              ...(campaignUpdates.pendingEnemyItemAssignments ?? ((campaign as any).pendingEnemyItemAssignments || [])),\n              { item: event.item, count: event.count }\n            ];\n            outcomes.push({\n              message: `Enemy equips ${event.count} ${event.item === \"bow\" ? \"\" : \"\"}`,\n              glyph: event.item === \"bow\" ? \"\" : \"\",\n              color: \"text-orange-100\",\n              bgColor: \"bg-orange-900\",\n              borderColor: \"border-orange-500\",\n            });\n            break;\n\n          case \"give_item\":\n          case \"give_unit\":\n            // Flush pending free unit before other events\n            if (pendingFreeUnit) {\n              outcomes.push({\n                message: `${pendingFreeUnit.count} Free ${PIECE_NAMES[pendingFreeUnit.pieceType]}${pendingFreeUnit.count > 1 ? 's' : ''}`,\n                glyph: \"\",\n                color: \"text-green-100\",\n                bgColor: \"bg-green-900\",\n                borderColor: \"border-green-500\",\n              });\n              pendingFreeUnit = null;\n            }\n            // These will be handled when the battle starts (adds to initial boards)\n            outcomes.push({\n              message: event.type === \"give_item\" \n                ? `Item granted to ${event.target}` \n                : `Unit granted to ${event.target}`,\n              glyph: \"\",\n              color: \"text-amber-100\",\n              bgColor: \"bg-amber-900\",\n              borderColor: \"border-amber-600\",\n            });\n            break;\n\n          case \"equip_item_to_named_piece\":\n            {\n              // Store equipment assignment to apply during init\n              if (!campaignUpdates.pendingEquipmentAssignments) {\n                campaignUpdates.pendingEquipmentAssignments = [];\n              }\n              campaignUpdates.pendingEquipmentAssignments.push({\n                pieceName: event.pieceName,\n                pieceType: event.pieceType,\n                equip: event.item,\n              });\n              \n              // Show outcome message\n              const itemEmoji = equipIcon(event.item);\n              const capitalizedItemName = event.item.charAt(0).toUpperCase() + event.item.slice(1);\n              outcomes.push({\n                message: `x1 ${itemEmoji} ${event.pieceName} ${capitalizedItemName}`,\n                glyph: \"\",\n                color: \"text-green-100\",\n                bgColor: \"bg-green-900\",\n                borderColor: \"border-green-500\",\n              });\n            }\n            break;\n\n          case \"spawn_piece_at_position\":\n            {\n              // Store piece spawn to apply during battle initialization\n              if (!campaignUpdates.pendingPieceSpawns) {\n                campaignUpdates.pendingPieceSpawns = [];\n              }\n              campaignUpdates.pendingPieceSpawns.push({\n                pieceType: event.pieceType,\n                color: event.color,\n                x: event.x,\n                y: event.y,\n                equip: event.equip,\n              });\n              \n              // Show outcome message\n              const equipEmoji = event.equip ? equipIcon(event.equip) : \"\";\n              const equipName = event.equip ? event.equip.charAt(0).toUpperCase() + event.equip.slice(1) : \"\";\n              const equipText = event.equip ? ` with ${equipEmoji} ${equipName}` : \"\";\n              outcomes.push({\n                message: `x1 Scout${equipText}`,\n                glyph: \"\",\n                color: \"text-green-100\",\n                bgColor: \"bg-green-900\",\n                borderColor: \"border-green-500\",\n              });\n            }\n            break;\n\n          case \"set_difficulty\":\n            // Set difficulty level for the campaign\n            campaignUpdates.difficulty = event.difficulty;\n            campaignUpdates.pendingDifficultyReinit = true;\n            setNeedsReinit(true);\n            // Store in localStorage for persistence\n            localStorage.setItem(\"dicechess_difficulty\", event.difficulty);\n            break;\n\n          case \"show_difficulty_transition\":\n            // Hide current story card and show automatic transition\n            setCurrentStoryCard(null);\n            setShowDifficultyTransition(true);\n            setDifficultyTransitionLine(0);\n            setDifficultyTransitionText(\"\");\n            // TRIGGER: Start main menu music\n            musicManagerRef.current?.playMainMenuMusic();\n            // Find the first real story card (skip difficulty-selection)\n            const firstRealCard = currentLevelConfig?.storyCards?.find(\n              (card) => card.id !== \"difficulty-selection\"\n            );\n            if (firstRealCard) {\n              // After transition completes (allowing time for both lines + fades), show the first real story card\n              setTimeout(() => {\n                setShowDifficultyTransition(false);\n                setDifficultyTransitionLine(0);\n                setDifficultyTransitionText(\"\");\n                setCurrentStoryCard(firstRealCard);\n              }, 8500); // ~8.5 seconds total: line1 animation + longer pause + fade + line2 animation + longer pause + fade + spiral\n            }\n            break;\n\n          case \"set_objective_flag\": {\n            const existingFlags =\n              campaignUpdates.pendingObjectiveFlags ??\n              ((campaign as any).pendingObjectiveFlags\n                ? [...((campaign as any).pendingObjectiveFlags as string[])]\n                : []);\n            if (!existingFlags.includes(event.flag)) {\n              existingFlags.push(event.flag);\n            }\n            campaignUpdates.pendingObjectiveFlags = existingFlags;\n            break;\n          }\n\n          case \"start_battle\":\n            shouldStartBattle = true;\n            break;\n        }\n      }\n      \n      // Flush any pending free unit at the end\n      if (pendingFreeUnit) {\n        outcomes.push({\n          message: `${pendingFreeUnit.count} Free ${PIECE_NAMES[pendingFreeUnit.pieceType]}${pendingFreeUnit.count > 1 ? 's' : ''}`,\n          glyph: \"\",\n          color: \"text-green-100\",\n          bgColor: \"bg-green-900\",\n          borderColor: \"border-green-500\",\n        });\n      }\n      \n      // Apply all campaign updates in one batch to avoid race conditions\n      if (Object.keys(campaignUpdates).length > 0) {\n        setCampaign((prev) => ({ ...prev, ...campaignUpdates }));\n      }\n\n      // If there are outcomes, show them\n      if (outcomes.length > 0) {\n        // If there's a nextCard, that's the card we want to display WITH outcomes\n        // We set it as lastCard so it's displayed, and set nextCard to undefined\n        // since we've already \"arrived\" at that card\n        const cardToDisplay = nextCard || currentStoryCardRef.current;\n        \n        // Hide current card\n        setCurrentStoryCard(null);\n        \n        setStoryOutcome({\n          outcomes,\n          nextCard: undefined, // Already showing the destination card, no further transition needed\n          lastCard: cardToDisplay || undefined,\n        });\n      } else {\n        // No outcome to show, proceed immediately\n        if (nextCard) {\n          // Directly transition to next card without clearing\n          setCurrentStoryCard(nextCard);\n        } else if (shouldStartBattle) {\n          // Save snapshot of resources before starting the level (for level retry)\n          setLevelStartSnapshot({\n            level: campaign.level,\n            gold: unspentGold,\n            whiteRoster: [...campaign.whiteRoster],\n            prayerDice: campaign.prayerDice,\n            unlockedItems: [...campaign.unlockedItems],\n            freeUnits: new Map(campaign.freeUnits),\n            freeItems: new Map(campaign.freeItems),\n            tutorialsSeen: [...campaign.tutorialsSeen],\n            difficulty: campaign.difficulty,\n          });\n          \n          // Clear card and go to market or skip to playing if market disabled\n          setCurrentStoryCard(null);\n          setStoryCardQueue([]);\n          // Go to market phase or skip to playing if market disabled\n          const marketEnabled = currentLevelConfig?.marketEnabled !== false;\n          setPhase(marketEnabled ? \"market\" : \"playing\");\n          setMarketViewVisible(marketEnabled); // Start with market visible by default only if enabled\n          \n          // TRIGGER: If market is disabled, battle starts immediately - trigger level music\n          if (!marketEnabled) {\n            musicManagerRef.current?.playLevelMusic(campaign.level);\n          }\n          // If market is enabled, music will trigger when user clicks \"Start Battle\" button\n        }\n      }\n      \n      // If battle should start, trigger re-init to process pending events\n      if (shouldStartBattle) {\n        setNeedsReinit(true);\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [campaign.level, currentLevelConfig, Bstate, currentBoardSize, storyCardQueue, campaign, setMarketPoints, setPrayerDice, setCampaign, setB, rngRef]\n  );\n  \n  // Re-initialize board when pending events need to be processed\n  useEffect(() => {\n    if (needsReinit && currentLevelConfig) {\n      // Only call init if there are actually pending events in the campaign state\n      // This ensures we wait for the campaign state to be updated before initializing\n      const hasPendingEvents =\n        (campaign as any).pendingEnemyPawns ||\n        (campaign as any).pendingEnemyItemAssignments ||\n        (campaign as any).pendingEquipmentAssignments ||\n        (campaign as any).pendingPieceSpawns ||\n        (campaign as any).pendingObjectiveFlags ||\n        (campaign as any).pendingDifficultyReinit;\n      if (hasPendingEvents) {\n        init(seed, campaign.level, unspentGold, currentLevelConfig, {\n          preserveStoryState: true,\n        });\n        setNeedsReinit(false);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [needsReinit, campaign, currentLevelConfig, seed, unspentGold]);\n\n  // Animate difficulty transition text sequentially (line 1 -> fade -> line 2 -> fade)\n  useEffect(() => {\n    if (!showDifficultyTransition) {\n      // Clear any existing interval and timeout when transition is hidden\n      if (difficultyTransitionIntervalRef.current) {\n        clearInterval(difficultyTransitionIntervalRef.current);\n        difficultyTransitionIntervalRef.current = null;\n      }\n      if (difficultyTransitionTimeoutRef.current) {\n        clearTimeout(difficultyTransitionTimeoutRef.current);\n        difficultyTransitionTimeoutRef.current = null;\n      }\n      return;\n    }\n\n    // Only start animation when transition first appears and we're at the initial state\n    if (difficultyTransitionLine !== 0 || difficultyTransitionText !== \"\") {\n      return;\n    }\n\n    const line1 = \"Murky Kingdoms' Highkeep.\";\n    const line2 = \"Year of the See, 1165.\";\n\n    // Clear any existing interval\n    if (difficultyTransitionIntervalRef.current) {\n      clearInterval(difficultyTransitionIntervalRef.current);\n      difficultyTransitionIntervalRef.current = null;\n    }\n\n    // Animate line 1\n    let currentIndex = 0;\n    const animateLine1 = () => {\n      const interval = setInterval(() => {\n        if (currentIndex < line1.length) {\n          setDifficultyTransitionText(line1.substring(0, currentIndex + 1));\n          currentIndex++;\n          \n          // Play sound every 3 characters\n          if (currentIndex % 3 === 0) {\n            playDifficultyTextBlip();\n          }\n        } else {\n          clearInterval(interval);\n          difficultyTransitionIntervalRef.current = null;\n          // After line 1 completes, wait longer before fading it\n          setTimeout(() => {\n            setDifficultyTransitionLine('fade1');\n            // After fade completes, start line 2\n            setTimeout(() => {\n              setDifficultyTransitionLine(1);\n              setDifficultyTransitionText(\"\");\n              // Animate line 2\n              let currentIndex2 = 0;\n              const animateLine2 = () => {\n                const interval2 = setInterval(() => {\n                  if (currentIndex2 < line2.length) {\n                    setDifficultyTransitionText(line2.substring(0, currentIndex2 + 1));\n                    currentIndex2++;\n                    \n                    // Play sound every 3 characters\n                    if (currentIndex2 % 3 === 0) {\n                      playDifficultyTextBlip();\n                    }\n                  } else {\n                    clearInterval(interval2);\n                    difficultyTransitionIntervalRef.current = null;\n                    // After line 2 completes, wait longer before fading it\n                    setTimeout(() => {\n                      setDifficultyTransitionLine('fade2');\n                    }, 2000); // Longer pause before fade\n                  }\n                }, 30); // 30ms per character\n                difficultyTransitionIntervalRef.current = interval2;\n              };\n              animateLine2();\n            }, 500); // Fade duration\n          }, 2000); // Longer pause before fade (was 800)\n        }\n      }, 30); // 30ms per character\n      difficultyTransitionIntervalRef.current = interval;\n    };\n\n    // Add 2-second delay before starting the animation\n    difficultyTransitionTimeoutRef.current = setTimeout(() => {\n      animateLine1();\n      difficultyTransitionTimeoutRef.current = null;\n    }, 2000);\n\n    return () => {\n      if (difficultyTransitionIntervalRef.current) {\n        clearInterval(difficultyTransitionIntervalRef.current);\n        difficultyTransitionIntervalRef.current = null;\n      }\n      if (difficultyTransitionTimeoutRef.current) {\n        clearTimeout(difficultyTransitionTimeoutRef.current);\n        difficultyTransitionTimeoutRef.current = null;\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [showDifficultyTransition]); // Only depend on showDifficultyTransition\n\n  // Helper function to check and update objectives\n  const checkObjectives = useCallback(\n    (options?: { allowCompletion?: boolean }) => {\n    if (!currentLevelConfig?.optionalObjectives || currentLevelConfig.optionalObjectives.length === 0 || activeObjectiveIds.length === 0) {\n      return;\n    }\n    \n    // Filter to only active objectives\n    const activeObjectives = currentLevelConfig.optionalObjectives.filter(\n      obj => activeObjectiveIds.includes(obj.id)\n    );\n\n    // Build tracking data from current game state\n    const tracking: ObjectiveTracking = {\n      turnNumber: moveHistory.length,\n      whiteTurnCount: moveHistory.reduce(\n        (count, record) => (record.color === W ? count + 1 : count),\n        0\n      ),\n      playerPiecesLost,\n      enemyPiecesKilled: killedEnemyPieces,\n      pieceConversions: 0, // Will be tracked via combat logic (staff conversions)\n      courtiersDestroyed: destroyedCourtiers,\n      itemsUsed: new Set(), // Will need to track this separately\n      kingPosition: null,\n      kingDisguiseActive: false,\n      victoryDelivererType: lastVictoryInfo?.pieceType,\n      victoryDelivererOriginalType: lastVictoryInfo?.originalType,\n      victoryCondition: lastVictoryInfo?.condition,\n      difficulty: campaign.difficulty,\n    };\n\n    // Find white king position (handles disguised kings via originalType)\n    outer: for (let y = 0; y < Bstate.length; y++) {\n      for (let x = 0; x < Bstate[y].length; x++) {\n        const piece = Bstate[y][x];\n        if (!piece || piece.color !== \"w\") continue;\n        const isKing = isKingPiece(piece);\n        if (isKing) {\n          tracking.kingPosition = { x, y };\n          tracking.kingDisguiseActive = piece.equip === \"disguise\";\n          break outer;\n        }\n      }\n    }\n\n    // Check objectives and get newly completed/failed ones\n    const { newlyCompleted, newlyFailed } = checkAllObjectives(\n      activeObjectives,\n      objectiveStates,\n      tracking,\n      Bstate,\n      options\n    );\n\n    // If any objectives were newly completed, show notification and play sound\n    if (newlyCompleted.length > 0) {\n      setNewlyCompletedObjectives(prev => [...prev, ...newlyCompleted]);\n      // Play success sound\n      if (!muted) {\n        sfx.purchase(); // Reuse purchase sound for now\n      }\n      // Force update objective states\n      setObjectiveStates([...objectiveStates]);\n    }\n    \n    // If any objectives were newly failed, show notification and play sound\n    if (newlyFailed.length > 0) {\n      setNewlyFailedObjectives(prev => [...prev, ...newlyFailed]);\n      // Play failure sound\n      if (!muted) {\n        sfx.combatLose(); // Reuse combat lose sound for failures\n      }\n      // Force update objective states\n      setObjectiveStates([...objectiveStates]);\n    }\n  },\n  [currentLevelConfig, activeObjectiveIds, objectiveStates, killedEnemyPieces, destroyedCourtiers, playerPiecesLost, campaign.difficulty, Bstate, moveHistory, muted, lastVictoryInfo]\n  );\n\n  // Check objectives whenever a turn completes (after board state settles)\n  useEffect(() => {\n    if (phase === \"playing\" && !win) {\n      // Small delay to let board state settle after animations\n      const timer = setTimeout(() => {\n        checkObjectives();\n      }, 300);\n      return () => clearTimeout(timer);\n    }\n  }, [turn, checkObjectives, phase, win]);\n\n  function init(\n    s: string,\n    currentLevel: number,\n    currentUnspentGold: number,\n    levelConfig: LevelConfig,\n    options?: { preserveStoryState?: boolean }\n  ) {\n    const preserveStoryState = options?.preserveStoryState ?? false;\n    const r = rngFrom(s + currentLevel); // Use level in seed for variation\n    rngRef.current = r;\n\n    // Get level configuration first to get board size\n    const boardSize = levelConfig.boardSize;\n\n    const B0 = Array.from({ length: boardSize }, () =>\n      Array(boardSize).fill(null)\n    ) as Board;\n    const T0 = emptyTerrain(boardSize);\n    const O0 = emptyObstacles(boardSize);\n    const pendingObjectiveFlags: string[] =\n      ((campaign as any).pendingObjectiveFlags as string[] | undefined) ?? [];\n    const objectiveFlagSet = new Set(pendingObjectiveFlags);\n\n    // Check if king_escaped is enabled - if so, skip terrain on escape row (top row)\n    const victoryConditions = levelConfig.victoryConditions || [\"king_beheaded\", \"king_captured\", \"king_dishonored\"];\n    const kingEscapedEnabled = victoryConditions.includes(\"king_escaped\");\n    const escapeRow = kingEscapedEnabled ? boardSize - 1 : undefined;\n\n    placeFeatures(B0, T0, O0, r, boardSize, levelConfig.terrainMatrix, escapeRow, levelConfig.randomTerrainPool);\n\n    // Use level configuration - separate gold pools if specified\n    // If specific gold pools aren't set, fall back to legacy enemyArmyGold/playerArmyGold, or default to 0\n    let enemyPieceGold = levelConfig.enemyPieceGold ?? levelConfig.enemyArmyGold ?? 0;\n    let playerPieceGold = levelConfig.playerPieceGold ?? levelConfig.playerArmyGold ?? 0;\n    let enemyEquipmentGold = levelConfig.enemyEquipmentGold ?? levelConfig.enemyArmyGold ?? 0;\n    let playerEquipmentGold = levelConfig.playerEquipmentGold ?? levelConfig.playerArmyGold ?? 0;\n\n    // Apply difficulty-specific gold overrides if difficulty is set and settings exist\n    // IMPORTANT: Only use campaign.difficulty (set by difficulty selection card), NOT localStorage\n    // This ensures difficulty is only applied after the player explicitly chooses it\n    // For level 1, always require explicit selection (don't use localStorage fallback)\n    const currentDifficulty = campaign.difficulty;\n    \n    // Debug logging (can be removed later)\n    // Difficulty debug removed\n    // Difficulty debug removed\n    \n    if (currentDifficulty && levelConfig.difficultySettings?.[currentDifficulty]) {\n      const diffSettings = levelConfig.difficultySettings[currentDifficulty]!;\n      if (diffSettings.enemyPieceGold !== undefined) enemyPieceGold = diffSettings.enemyPieceGold;\n      if (diffSettings.playerPieceGold !== undefined) playerPieceGold = diffSettings.playerPieceGold;\n      if (diffSettings.enemyEquipmentGold !== undefined) enemyEquipmentGold = diffSettings.enemyEquipmentGold;\n      if (diffSettings.playerEquipmentGold !== undefined) playerEquipmentGold = diffSettings.playerEquipmentGold;\n      \n      // Difficulty debug removed\n    } else {\n      // Difficulty debug removed\n    }\n\n    // Campaign logic: handle white army based on level and survivors\n    if (campaign.level <= 1 || campaign.whiteRoster.length === 0) {\n      // Level 1 or no survivors: generate fresh white army (use playerPieceGold from config)\n      // Convert string array to object array if needed for backward compatibility\n      const rawGuaranteedWhite = levelConfig.guaranteedPieces?.white || [];\n      const guaranteedWhitePieces = rawGuaranteedWhite.map(item => \n        typeof item === 'string' ? { type: item as PieceType } : item\n      );\n      const w = build(\n        W,\n        r,\n        playerPieceGold,\n        true,\n        levelConfig.availableItems.whiteRandomization,\n        boardSize,\n        levelConfig.namedWhitePieces,\n        levelConfig.whiteKingName,\n        B0, // Pass board to count available slots\n        0, // White back rank\n        1, // White front rank\n        false, // Don't skip King for white\n        [], // No guaranteed items for white\n        levelConfig.randomizationPieces?.white, // Allowed piece types for white randomization\n        guaranteedWhitePieces, // Guaranteed pieces for white\n        playerEquipmentGold, // Equipment gold for white\n        O0, // Obstacles grid to check blocked slots\n        levelConfig.playerPawnBudget // Pawn budget percentage for white\n      );\n      // Place white pieces, avoiding obstacles\n      placePiecesAvoidingObstacles(B0, O0, w.back, 0, boardSize);\n      placePiecesAvoidingObstacles(B0, O0, w.front, 1, boardSize);\n      // After placing, update campaign.whiteRoster with all current white pieces\n      const allWhitePieces: Piece[] = [];\n      for (let y = 0; y < boardSize; y++) {\n        for (let x = 0; x < boardSize; x++) {\n          const piece = B0[y][x];\n          if (piece && piece.color === W) {\n            allWhitePieces.push(piece);\n          }\n        }\n      }\n      setCampaign((prev) => ({ ...prev, whiteRoster: allWhitePieces }));\n    } else {\n      // Level 2+: Hybrid approach - place survivors, then add guaranteed pieces, then random pieces\n      \n      // Step 1: Place carried over survivors first\n      const deserializedRoster = campaign.whiteRoster.map(deserializePiece);\n      placeRoster(B0, O0, deserializedRoster, boardSize);\n      \n      // Step 1.5: Update speech lines and properties of existing roster pieces from namedWhitePieces\n      // This allows level designers to add new speech lines without creating duplicate pieces\n      if (levelConfig.namedWhitePieces && levelConfig.namedWhitePieces.length > 0) {\n        for (const namedPiece of levelConfig.namedWhitePieces) {\n          // Find matching piece on the board (by name and type)\n          let foundMatch = false;\n          for (let y = 0; y < boardSize && !foundMatch; y++) {\n            for (let x = 0; x < boardSize && !foundMatch; x++) {\n              const boardPiece = B0[y][x];\n              if (\n                boardPiece &&\n                boardPiece.color === W &&\n                boardPiece.name === namedPiece.name &&\n                (boardPiece.type === namedPiece.type ||\n                  boardPiece.originalType === namedPiece.type)\n              ) {\n                // Found a match - update its properties\n                if (namedPiece.speechLines) {\n                  boardPiece.speechLines = namedPiece.speechLines;\n                }\n                if (namedPiece.equip && !boardPiece.equip) {\n                  // Only add equipment if the piece doesn't already have any\n                  boardPiece.equip = namedPiece.equip;\n                }\n                foundMatch = true;\n              }\n            }\n          }\n        }\n      }\n      \n      // Step 1.6: Apply pending equipment assignments from story events\n      const pendingEquipmentAssignments = (campaign as any).pendingEquipmentAssignments || [];\n      if (pendingEquipmentAssignments.length > 0) {\n        for (const assignment of pendingEquipmentAssignments) {\n          // Find the target piece on the board\n          for (let y = 0; y < boardSize; y++) {\n            for (let x = 0; x < boardSize; x++) {\n              const boardPiece = B0[y][x];\n              if (boardPiece && \n                  boardPiece.color === W && \n                  boardPiece.type === assignment.pieceType && \n                  boardPiece.name === assignment.pieceName) {\n                // Found the target piece - equip the item\n                if (assignment.equip === \"disguise\") {\n                  if (boardPiece.type !== \"P\") {\n                    boardPiece.originalType = boardPiece.type;\n                    boardPiece.type = \"P\";\n                  }\n                  boardPiece.equip = assignment.equip;\n                } else {\n                  boardPiece.equip = assignment.equip;\n                }\n              }\n            }\n          }\n        }\n      }\n      \n      // Step 1.7: Spawn pieces at specific positions from story events\n      const pendingPieceSpawns = (campaign as any).pendingPieceSpawns || [];\n      if (pendingPieceSpawns.length > 0) {\n        for (const spawn of pendingPieceSpawns) {\n          // Create the piece and place it at the specified position\n          if (spawn.y >= 0 && spawn.y < boardSize && spawn.x >= 0 && spawn.x < boardSize) {\n            const color = spawn.color === \"w\" ? W : B;\n            const newPiece: Piece = {\n              id: `${spawn.color}${spawn.pieceType}-${Math.random().toString(36).slice(2, 8)}`,\n              type: spawn.pieceType,\n              color: color,\n              equip: spawn.equip,\n            };\n            B0[spawn.y][spawn.x] = newPiece;\n          }\n        }\n      }\n      \n      // Step 2: Filter out namedWhitePieces that already exist in roster (to avoid duplicates)\n      const namedPiecesToAdd =\n        levelConfig.namedWhitePieces?.filter((namedPiece) => {\n          // Check if this named piece already exists on the board\n          for (let y = 0; y < boardSize; y++) {\n            for (let x = 0; x < boardSize; x++) {\n              const boardPiece = B0[y][x];\n              if (\n                boardPiece &&\n                boardPiece.color === W &&\n                boardPiece.name === namedPiece.name &&\n                (boardPiece.type === namedPiece.type ||\n                  boardPiece.originalType === namedPiece.type)\n              ) {\n                return false; // Already exists, don't add\n              }\n            }\n          }\n          return true; // Doesn't exist, add it\n        }) || [];\n      \n      // Step 3: Add guaranteed pieces from level config (if any)\n      // Get guaranteed pieces - check difficulty-specific override first, then fall back to base config\n      let rawGuaranteedWhite = levelConfig.guaranteedPieces?.white || [];\n      if (currentDifficulty && levelConfig.difficultySettings?.[currentDifficulty]?.guaranteedPieces?.white) {\n        // Use difficulty-specific guaranteed pieces if available\n        const diffSettings = levelConfig.difficultySettings[currentDifficulty];\n        if (diffSettings?.guaranteedPieces?.white) {\n          rawGuaranteedWhite = diffSettings.guaranteedPieces.white;\n        }\n      }\n      const guaranteedWhitePieces = rawGuaranteedWhite.map(item => \n        typeof item === 'string' ? { type: item as PieceType } : item\n      );\n      \n      if (guaranteedWhitePieces.length > 0 || playerPieceGold > 0 || namedPiecesToAdd.length > 0) {\n        // Generate guaranteed pieces and random pieces with remaining budget\n        const w = build(\n          W,\n          r,\n          playerPieceGold, // Use full playerPieceGold for random generation\n          true,\n          levelConfig.availableItems.whiteRandomization,\n          boardSize,\n          namedPiecesToAdd, // Only add named pieces that don't already exist\n          undefined, // No custom king name (King already exists from survivors)\n          B0, // Pass board to count available slots\n          0, // White back rank\n          1, // White front rank\n          true, // Skip King generation (King already exists from survivors)\n          [], // No guaranteed items for white\n          levelConfig.randomizationPieces?.white, // Allowed piece types for white randomization\n          guaranteedWhitePieces, // Guaranteed pieces to add\n          playerEquipmentGold, // Equipment gold for white\n          O0, // Obstacles grid to check blocked slots\n          levelConfig.playerPawnBudget // Pawn budget percentage for white\n        );\n        \n        // Place the new pieces (back rank and front rank)\n        placePiecesAvoidingObstacles(B0, O0, w.back, 0, boardSize);\n        placePiecesAvoidingObstacles(B0, O0, w.front, 1, boardSize);\n      }\n      \n      // Update campaign roster with all current white pieces (survivors + new pieces)\n      const allWhitePieces: Piece[] = [];\n      for (let y = 0; y < boardSize; y++) {\n        for (let x = 0; x < boardSize; x++) {\n          const piece = B0[y][x];\n          if (piece && piece.color === W) {\n            allWhitePieces.push(piece);\n          }\n        }\n      }\n      setCampaign((prev) => ({ ...prev, whiteRoster: allWhitePieces }));\n    }\n\n    // Black army: always generate fresh each level\n    // Check if king_escaped is the ONLY victory condition\n    const kingEscapedOnly = victoryConditions.length === 1 && victoryConditions[0] === \"king_escaped\";\n    \n    // Check for pending items to add to black item pool (from story events)\n    const pendingAssignments = (campaign as any).pendingEnemyItemAssignments || [];\n    let blackItemPool = [...(levelConfig.availableItems.blackRandomization || [])];\n    \n    // Extract guaranteed items that MUST be equipped\n    const guaranteedItems: Exclude<Equip, undefined>[] = [];\n    for (const assignment of pendingAssignments) {\n      for (let i = 0; i < assignment.count; i++) {\n        guaranteedItems.push(assignment.item);\n      }\n    }\n    \n    // Difficulty debug removed\n    // Difficulty debug removed\n    // Difficulty debug removed\n    \n    // Check for pending pawns (from story events) - add them to guaranteed pieces\n    const pendingPawns = (campaign as any).pendingEnemyPawns || 0;\n    // Difficulty debug removed\n    \n    // Get guaranteed pieces - check difficulty-specific override first, then fall back to base config\n    let rawGuaranteedBlack = levelConfig.guaranteedPieces?.black || [];\n    if (currentDifficulty && levelConfig.difficultySettings?.[currentDifficulty]?.guaranteedPieces?.black) {\n      // Use difficulty-specific guaranteed pieces if available\n      const diffSettings = levelConfig.difficultySettings[currentDifficulty];\n      if (diffSettings?.guaranteedPieces?.black) {\n        rawGuaranteedBlack = diffSettings.guaranteedPieces.black;\n        // Difficulty debug removed\n      }\n    }\n    \n    // Convert string array to object array if needed for backward compatibility\n    const guaranteedBlackPieces = rawGuaranteedBlack.map(item => \n      typeof item === 'string' ? { type: item as PieceType } : item\n    );\n    \n    // Add pending pawns from story events as guaranteed pieces\n    for (let i = 0; i < pendingPawns; i++) {\n      guaranteedBlackPieces.push({ type: \"P\" });\n    }\n    \n    // Difficulty debug removed\n    \n    // console.log(\"[Difficulty Debug] Calling build with:\", {\n    //   enemyPieceGold,\n    //   enemyEquipmentGold,\n    //   guaranteedItemsCount: guaranteedItems.length,\n    //   guaranteedPiecesCount: guaranteedBlackPieces.length,\n    //   randomizationPieces: levelConfig.randomizationPieces?.black\n    // });\n    \n    const bl = build(\n      B,\n      r,\n      enemyPieceGold,\n      false,\n      blackItemPool, // Regular randomization pool\n      boardSize,\n      levelConfig.namedBlackPieces,\n      undefined, // No custom king name for black (optional for future)\n      B0, // Pass board to count available slots\n      boardSize - 1, // Black back rank\n      boardSize - 2, // Black front rank\n      kingEscapedOnly, // Pass flag to skip black King\n      guaranteedItems, // Guaranteed items that MUST be equipped\n      levelConfig.randomizationPieces?.black, // Allowed piece types for black randomization\n      guaranteedBlackPieces, // Guaranteed pieces for black (including pending pawns)\n      enemyEquipmentGold, // Equipment gold for black\n      O0, // Obstacles grid to check blocked slots\n      levelConfig.enemyPawnBudget // Pawn budget percentage for black\n    );\n    \n    // Difficulty debug removed\n    // Difficulty debug removed\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const totalEquipped = [...bl.back, ...bl.front].filter(p => p && p.equip).length;\n    // Difficulty debug removed\n    \n    // Place black pieces, avoiding obstacles\n    placePiecesAvoidingObstacles(B0, O0, bl.back, boardSize - 1, boardSize);\n    placePiecesAvoidingObstacles(B0, O0, bl.front, boardSize - 2, boardSize);\n\n    // Clear pending events after processing\n    setCampaign((prev) => {\n      const newCampaign = { ...prev };\n      delete (newCampaign as any).pendingEnemyPawns;\n      delete (newCampaign as any).pendingEnemyItemAssignments;\n      delete (newCampaign as any).pendingEquipmentAssignments;\n      delete (newCampaign as any).pendingPieceSpawns;\n      delete (newCampaign as any).pendingObjectiveFlags;\n      delete (newCampaign as any).pendingDifficultyReinit;\n      return newCampaign;\n    });\n    \n    setB(B0);\n    setT(T0);\n    setObstacles(O0);\n    setTurn(W);\n    setSel(null);\n    setLegal([]);\n    setWin(null);\n    setPhrase(null);\n    setFx(null);\n\n    // Don't show story cards yet - wait for intro popup to be dismissed\n    // Story cards will be shown after intro via handleIntroComplete\n    if (!preserveStoryState) {\n      setCurrentStoryCard(null);\n      setStoryCardQueue(levelConfig.storyCards || []);\n    }\n    // Default phase: market or playing (skip market if disabled)\n    const marketEnabled = levelConfig.marketEnabled !== false;\n    setPhase(marketEnabled ? \"market\" : \"playing\");\n    setMarketViewVisible(marketEnabled); // Start with market visible by default only if enabled\n\n    // Set starting gold with carry-over (level-specific starting gold + unspent gold from previous level)\n    setMarketPoints(levelConfig.startingGold + currentUnspentGold);\n    setMarketAction(null);\n    // Prayer dice are now managed by campaign state - don't reset them here\n    setPrayerDice(campaign.prayerDice); // Set prayer dice from campaign state\n    setRerollState(null);\n    setDisguisePopupState(null);\n    setDestroyedPieceIds([]);\n    setFailedAttackId(null);\n    setLastMove(null);\n    setMoveHistory([]);\n    setThisLevelUnlockedItems([]); // Reset unlocked items for new level\n    setKilledEnemyPieces([]); // Reset killed enemies for new level\n    setPlayerPiecesLost([]);\n    setDestroyedCourtiers(0); // Reset Courtiers counter for new level\n    setShowVictoryDetails(false); // Reset victory details for new level\n    setLastVictoryInfo(null);\n    \n    // Initialize optional objectives for this level\n    if (levelConfig.optionalObjectives && levelConfig.optionalObjectives.length > 0) {\n      const eligibleObjectives = levelConfig.optionalObjectives.filter((objective) => {\n        if (objective.requiredFlags && objective.requiredFlags.length > 0) {\n          return objective.requiredFlags.every((flag) => objectiveFlagSet.has(flag));\n        }\n        return true;\n      });\n\n      if (eligibleObjectives.length > 0) {\n        // Randomly select 1 or 2 objectives from the eligible pool\n        const desiredCount = r() < 0.5 ? 1 : 2; // 50% chance for 1 or 2 objectives\n        const numToSelect = Math.min(desiredCount, eligibleObjectives.length);\n        const shuffled = [...eligibleObjectives].sort(() => r() - 0.5);\n        const selectedObjectives = shuffled.slice(0, numToSelect);\n        const selectedIds = selectedObjectives.map((obj) => obj.id);\n\n        setActiveObjectiveIds(selectedIds);\n\n        const initialStates = selectedObjectives.map((obj) => ({\n          objectiveId: obj.id,\n          isCompleted: false,\n          isFailed: false,\n          progress: obj.progress ? { ...obj.progress } : undefined,\n          completedOnTurn: undefined,\n          failedOnTurn: undefined,\n        }));\n        setObjectiveStates(initialStates);\n      } else {\n        setActiveObjectiveIds([]);\n        setObjectiveStates([]);\n      }\n    } else {\n      setActiveObjectiveIds([]);\n      setObjectiveStates([]);\n    }\n    setNewlyCompletedObjectives([]);\n    setNewlyFailedObjectives([]);\n    setPlayerPiecesLost([]);\n  }\n\n  function click(x: number, y: number) {\n    if (drag) return;\n    if (phase === \"market\") {\n      const B1 = cloneB(Bstate);\n      let actionCompleted = false;\n\n      if (marketAction?.type === \"piece\") {\n        if (y <= 1 && !B1[y]?.[x] && obstacles[y]?.[x] === \"none\") {\n          // Safe navigation\n          // Valid placement (no piece and no obstacle)\n          sfx.deploy();\n          const newPieceId = `${W}${marketAction.name}-${Math.random()\n            .toString(36)\n            .slice(2, 8)}`;\n          B1[y][x] = {\n            id: newPieceId,\n            type: marketAction.name as PieceType,\n            color: W,\n          };\n          setB(B1);\n          \n          // Deduct gold or consume free unit\n          if (marketAction.isFree) {\n            // Consume the free unit\n            setCampaign((prev) => {\n              const newFreeUnits = new Map(prev.freeUnits);\n              const currentCount = newFreeUnits.get(marketAction.name as PieceType) || 0;\n              if (currentCount > 1) {\n                newFreeUnits.set(marketAction.name as PieceType, currentCount - 1);\n              } else {\n                newFreeUnits.delete(marketAction.name as PieceType);\n              }\n              return { ...prev, freeUnits: newFreeUnits };\n            });\n          } else {\n            setMarketPoints(\n              prev => prev - (VAL[marketAction.name as keyof typeof VAL] || 10)\n            );\n          }\n          \n          actionCompleted = true;\n          setNamingState({ id: newPieceId, x, y });\n          setMarketAction(null); // Clear action to prevent multiple placements\n        }\n      } else if (marketAction?.type === \"item\") {\n        const piece = B1[y]?.[x]; // Safe navigation\n        // Check if the piece exists, is white, doesn't have an equip, and is NOT a King trying to get Disguise\n        if (\n          piece &&\n          piece.color === W &&\n          !piece.equip &&\n          !(piece.type === \"K\" && marketAction.name === \"disguise\")\n        ) {\n          sfx.equip();\n          if (\n            marketAction.name === \"disguise\" &&\n            piece.type !== \"P\" // Already checked King above\n          ) {\n            piece.originalType = piece.type;\n            piece.type = \"P\";\n            piece.equip = marketAction.name;\n          } else {\n            // Handle non-disguise items or disguise for pawns\n            piece.equip = marketAction.name;\n          }\n          setB(B1);\n          \n          // Deduct gold or consume free item\n          if (marketAction.isFree) {\n            // Consume the free item\n            setCampaign((prev) => {\n              const newFreeItems = new Map(prev.freeItems);\n              const currentCount = newFreeItems.get(marketAction.name) || 0;\n              if (currentCount > 1) {\n                newFreeItems.set(marketAction.name, currentCount - 1);\n              } else {\n                newFreeItems.delete(marketAction.name);\n              }\n              return { ...prev, freeItems: newFreeItems };\n            });\n          } else {\n            setMarketPoints(prev => prev - ITEM_COSTS[marketAction.name]);\n          }\n          \n          actionCompleted = true;\n        }\n      }\n\n      if (actionCompleted) {\n        setMarketAction(null);\n      } else if (marketAction) {\n        // If an action was selected but the click was invalid, cancel the action.\n        setMarketAction(null);\n      } else {\n        // No market action - handle piece selection and movement/swapping\n        const clickedPiece = B1[y]?.[x];\n        \n        if (sel) {\n          // A piece is already selected\n          const selectedPiece = B1[sel.y]?.[sel.x];\n          \n          if (!selectedPiece) {\n            // Selected piece no longer exists, clear selection\n            setSel(null);\n            return;\n          }\n          \n          // Check if clicking on another white piece (swap) or empty square (move)\n          if (clickedPiece && clickedPiece.color === W) {\n            // Swap the two white pieces\n            if (y <= 1 && sel.y <= 1) {\n              sfx.move();\n              B1[sel.y][sel.x] = clickedPiece;\n              B1[y][x] = selectedPiece;\n              setB(B1);\n              setSel(null);\n            } else {\n              // Can't swap - one piece is outside deployment zone\n              setSel(null);\n            }\n          } else if (!clickedPiece && y <= 1 && obstacles[y]?.[x] === \"none\") {\n            // Move piece to empty square in deployment zone\n            if (sel.y <= 1) {\n              sfx.move();\n              B1[y][x] = selectedPiece;\n              B1[sel.y][sel.x] = null;\n              setB(B1);\n              setSel(null);\n            } else {\n              // Can't move - selected piece is outside deployment zone\n              setSel(null);\n            }\n          } else {\n            // Invalid move, clear selection\n            setSel(null);\n          }\n        } else {\n          // No piece selected - try to select a white piece in deployment zone\n          if (clickedPiece && clickedPiece.color === W && y <= 1) {\n            setSel({ x, y });\n          }\n        }\n      }\n      return;\n    }\n\n    if (\n      fx ||\n      win ||\n      phase === \"awaiting_reroll\" ||\n      phase === \"awaiting_disguise_choice\"\n    )\n      return;\n    const p = Bstate[y]?.[x]; // Safe navigation\n    if (sel && legal.some((s) => s.x === x && s.y === y)) {\n      perform(sel, { x, y }, false);\n      setSel(null);\n      setLegal([]);\n      return;\n    }\n    if (\n      !p ||\n      p.color !== turn ||\n      p.color !== W ||\n      (p.stunnedForTurns && p.stunnedForTurns > 0)\n    ) {\n      setSel(null);\n      setLegal([]);\n      return;\n    }\n\n    if (p.equip === \"disguise\") {\n      setPhase(\"awaiting_disguise_choice\");\n      setDisguisePopupState({ x, y });\n      return;\n    }\n\n    setSel({ x, y });\n    setLegal(moves(Bstate, Tstate, obstacles, x, y, currentBoardSize));\n  }\n\n  const handleNameConfirm = (name: string) => {\n    if (!namingState) return;\n    const { id } = namingState;\n\n    setB((currentBoard) => {\n      const newBoard = cloneB(currentBoard);\n      const pieceLocation = findPieceById(newBoard, id, currentBoardSize);\n      if (pieceLocation) {\n        const piece = newBoard[pieceLocation.y]?.[pieceLocation.x]; // Safe navigation\n        if (piece) {\n          piece.name = name;\n        }\n      }\n      return newBoard;\n    });\n    setNamingState(null);\n  };\n\n  const handleNameCancel = () => {\n    setNamingState(null);\n  };\n\n  function perform(\n    from: { x: number; y: number },\n    to: { x: number; y: number },\n    isBot: boolean,\n    isDragMove = false\n  ) {\n    console.log(\"=== PERFORM CALLED ===\");\n    console.log(\"[PERFORM] Move requested:\", { from, to, isBot, currentBoardSize });\n    console.log(\"[PERFORM] Current turn:\", turn);\n    console.log(\"[PERFORM] Win state:\", win);\n    console.log(\"[PERFORM] Phase:\", phase);\n    \n    // Count pieces on board\n    let whiteCount = 0, blackCount = 0;\n    for (let y = 0; y < currentBoardSize; y++) {\n      for (let x = 0; x < currentBoardSize; x++) {\n        const piece = Bstate[y]?.[x];\n        if (piece) {\n          if (piece.color === W) whiteCount++;\n          else if (piece.color === B) blackCount++;\n        }\n      }\n    }\n    console.log(\"[PERFORM] Pieces on board - White:\", whiteCount, \"Black:\", blackCount);\n    \n    setDrag(null);\n    if (fx || win || moveAnim) return;\n    // Block new actions while tutorial is showing (but allow bot moves to complete)\n    // Use ref instead of state to avoid race conditions when re-triggering moves\n    if (!isBot && pausedForTutorialRef.current) {\n      console.log(\" Move blocked: tutorial is showing\");\n      return;\n    }\n    const p = Bstate[from.y]?.[from.x]; // Safe navigation\n    console.log(\"[PERFORM] Piece at from:\", p);\n    if (!p) return;\n    const t = Bstate[to.y]?.[to.x]; // Safe navigation\n\n    const currentCombatId = ++combatIdRef.current;\n    const nextTurn = isBot ? W : B;\n\n    const turnNumber = Math.floor(moveHistory.length / 2) + 1;\n\n    // Crystal Ball Swap with piece\n    if (p.equip === \"crystal_ball\" && t && t.color === p.color) {\n      sfx.crystalBall();\n      const B1 = cloneB(Bstate);\n      const userPiece = { ...p, equip: undefined };\n      const targetPiece = { ...t };\n      B1[to.y][to.x] = userPiece;\n      B1[from.y][from.x] = targetPiece;\n\n      // Check for exhaustion\n      checkExhaustion(p.id, from, to, B1);\n\n      // Pawn promotion check for crystal ball swaps\n      // White promotes at top (boardSize-1), Black promotes at bottom (0)\n      if (userPiece.type === \"P\") {\n        const shouldPromote = \n          (userPiece.color === W && to.y === currentBoardSize - 1) ||\n          (userPiece.color === B && to.y === 0);\n        console.log(\"[SWAP-PROMOTION-CHECK]\", { piece: \"user\", color: userPiece.color, toY: to.y, boardSize: currentBoardSize, shouldPromote, config: currentLevelConfig?.pawnPromotionType });\n        if (shouldPromote) {\n          let promotionType: PieceType = currentLevelConfig?.pawnPromotionType || \"Q\";\n          // Safeguard: never promote to Pawn or King\n          if (promotionType === \"P\" || promotionType === \"K\") promotionType = \"Q\";\n          console.log(\"[PAWN-PROMOTED-SWAP]\", { color: userPiece.color === W ? \"white\" : \"black\", to: promotionType });\n          B1[to.y][to.x] = { ...userPiece, type: promotionType };\n        }\n      }\n      if (targetPiece.type === \"P\") {\n        const shouldPromote = \n          (targetPiece.color === W && from.y === currentBoardSize - 1) ||\n          (targetPiece.color === B && from.y === 0);\n        console.log(\"[SWAP-PROMOTION-CHECK]\", { piece: \"target\", color: targetPiece.color, fromY: from.y, boardSize: currentBoardSize, shouldPromote, config: currentLevelConfig?.pawnPromotionType });\n        if (shouldPromote) {\n          let promotionType: PieceType = currentLevelConfig?.pawnPromotionType || \"Q\";\n          // Safeguard: never promote to Pawn or King\n          if (promotionType === \"P\" || promotionType === \"K\") promotionType = \"Q\";\n          console.log(\"[PAWN-PROMOTED-SWAP]\", { color: targetPiece.color === W ? \"white\" : \"black\", to: promotionType });\n          B1[from.y][from.x] = { ...targetPiece, type: promotionType };\n        }\n      }\n\n      setB(B1);\n      setLastMove({ from, to });\n      decrementStunFor(turn, B1, currentBoardSize); // tick down the mover's stun at END of their turn\n      setTurn(nextTurn);\n      setPhase(\"playing\");\n      \n      const notation = getChessNotation(from, to, p, false);\n      setMoveHistory((hist) => [\n        ...hist,\n        {\n          turnNumber,\n          color: p.color as Color,\n          notation: `${notation} (swap)`,\n          piece: { type: p.type, color: p.color as Color },\n          inFog: !vis[to.y]?.[to.x], // Safe navigation\n        },\n      ]);\n      return;\n    }\n\n    // Crystal Ball Swap with Courtier\n    const targetObstacle = obstacles[to.y]?.[to.x];\n    if (p.equip === \"crystal_ball\" && targetObstacle === \"courtier\" && !t) {\n      sfx.crystalBall();\n      const B1 = cloneB(Bstate);\n      const userPiece = { ...p, equip: undefined };\n      B1[to.y][to.x] = userPiece;\n      B1[from.y][from.x] = null;\n\n      // Swap the Courtier to the piece's original position\n      const O1 = obstacles.map((row) => [...row]); // Clone obstacles\n      O1[to.y][to.x] = \"none\"; // Remove Courtier from target\n      O1[from.y][from.x] = \"courtier\"; // Place Courtier at original position\n\n      // Check for exhaustion\n      checkExhaustion(p.id, from, to, B1);\n\n      // Pawn promotion check for crystal ball swaps with Courtiers\n      if (userPiece.type === \"P\") {\n        const shouldPromote = \n          (userPiece.color === W && to.y === currentBoardSize - 1) ||\n          (userPiece.color === B && to.y === 0);\n        if (shouldPromote) {\n          let promotionType: PieceType = currentLevelConfig?.pawnPromotionType || \"Q\";\n          // Safeguard: never promote to Pawn or King\n          if (promotionType === \"P\" || promotionType === \"K\") promotionType = \"Q\";\n          B1[to.y][to.x] = { ...userPiece, type: promotionType };\n        }\n      }\n\n      setB(B1);\n      setObstacles(O1);\n      setLastMove({ from, to });\n      decrementStunFor(turn, B1, currentBoardSize); // tick down the mover's stun at END of their turn\n      setTurn(nextTurn);\n      setPhase(\"playing\");\n      \n      const notation = getChessNotation(from, to, p, false);\n      setMoveHistory((hist) => [\n        ...hist,\n        {\n          turnNumber,\n          color: p.color as Color,\n          notation: `${notation} (swap with courtier)`,\n          piece: { type: p.type, color: p.color as Color },\n          inFog: !vis[to.y]?.[to.x], // Safe navigation\n        },\n      ]);\n      return;\n    }\n\n    // Check for obstacle attack\n    if (targetObstacle !== \"none\" && !t) {\n      const dir = p.color === W ? 1 : -1;\n      const lanceLungeUsed =\n        p.equip === \"lance\" && to.y === from.y + 2 * dir && to.x === from.x;\n      if (lanceLungeUsed) sfx.spear();\n\n      const out = resolveObstacle(\n        rngRef.current,\n        p,\n        Bstate,\n        Tstate,\n        obstacles,\n        from,\n        to,\n        lanceLungeUsed,\n        currentBoardSize\n      );\n      setFx({\n        kind: \"obstacle\",\n        from,\n        to,\n        a: out.a,\n        ok: out.ok,\n        id: currentCombatId,\n        adv: out.adv,\n        obstacleType: targetObstacle, // Store actual obstacle type\n      });\n\n      const notation = getChessNotation(from, to, p, true);\n      const winPct = obstacleWinPercent(\n        Bstate,\n        Tstate,\n        obstacles,\n        p,\n        from,\n        to,\n        currentBoardSize\n      );\n      const sup = supportCount(Bstate, Tstate, obstacles, p, from, to, currentBoardSize);\n      const moveRec: MoveRecord = {\n        turnNumber,\n        color: p.color as Color,\n        notation,\n        piece: { type: p.type, color: p.color as Color },\n        combat: {\n          isSupported: sup > 0,\n          winPercent: winPct,\n          attackerRolls: out.a.rolls,\n          defenderRolls: null, // Explicitly null for obstacle combat\n          obstacleType: targetObstacle, // Store obstacle type for display\n        },\n        inFog: !vis[to.y]?.[to.x], // Safe navigation\n      };\n      setMoveHistory((hist) => [...hist, moveRec]);\n\n      const delay =\n        TMG.roll +\n        TMG.linger +\n        (out.a.mods?.length ? TMG.mods : 0) +\n        TMG.total +\n        TMG.winnerHold;\n\n      setTimeout(() => {\n        if (combatIdRef.current !== currentCombatId) return;\n\n        if (!out.ok && p.color === W && prayerDice > 0) {\n          // Check if prayer_dice tutorial should show - if so, show it BEFORE entering awaiting_reroll\n          // This prevents the Roll Failed popup from flashing before the tutorial\n          if (!campaign.tutorialsSeen.includes(\"prayer_dice\") && !pausedForTutorial && enableTutorialPopups) {\n            showTutorial(\"prayer_dice\");\n          }\n          \n          setPhase(\"awaiting_reroll\");\n          setRerollState({ from, to, kind: \"obstacle\", loserPos: from, obstacleType: targetObstacle });\n          return;\n        }\n\n        if (!out.ok) {\n          sfx.combatLose();\n          setFailedAttackId(p.id);\n          setTimeout(() => setFailedAttackId(null), 400);\n        }\n        finishRockCombat(out.ok, lanceLungeUsed, from, to);\n      }, delay);\n      return;\n    }\n\n    // Piece vs piece\n    if (t) {\n      // Check for tutorials BEFORE executing combat\n      let tutorialShown = false;\n      \n      // Check if this is the first rigged combat in level 1 (tutorial combat)\n      const tutorialUsed = localStorage.getItem(\"dicechess_first_combat_tutorial_used\") === \"true\";\n      const isFirstCombatTutorial = \n        !tutorialUsed && \n        campaign.level === 1 && \n        (p.color === W || t.color === W); // White is either attacking or defending\n      \n      // Check if white is involved in this combat (either attacking or defending)\n      const whiteInvolved = p.color === W || t.color === W;\n      \n      // Show tutorials if:\n      // 1. It's a player move (white attacking), OR\n      // 2. It's the first combat tutorial (rigged combat in level 1), OR\n      // 3. White is defending and single_combat tutorial hasn't been seen yet\n      const shouldShowTutorials = \n        (!isBot || isFirstCombatTutorial || (whiteInvolved && !campaign.tutorialsSeen.includes(\"single_combat\"))) &&\n        !pausedForTutorial && \n        t.color !== p.color;\n      \n      if (shouldShowTutorials) {\n        // Tutorial: Single Combat (first combat involving white - either attacking or defending)\n        // Show on the first rigged combat OR first combat where white is involved\n        if (!campaign.tutorialsSeen.includes(\"single_combat\")) {\n          tutorialShown = showTutorial(\"single_combat\", to) || tutorialShown;\n        }\n        \n        // Tutorial: King Advantage (first King attack - only when white is attacking)\n        if (p.type === \"K\" && p.color === W) {\n          tutorialShown = showTutorial(\"king_advantage\", to) || tutorialShown;\n        }\n\n        // Tutorial: Supporting Units (first supported attack - only when white is attacking)\n        if (p.color === W) {\n          const sup = supportCount(Bstate, Tstate, obstacles, p, from, to, currentBoardSize);\n          if (sup > 0) {\n            tutorialShown = showTutorial(\"supporting_units\", to) || tutorialShown;\n          }\n        }\n      }\n      \n      // If a tutorial was shown, store this action to execute after tutorial closes\n      if (tutorialShown) {\n        console.log(\" Tutorial shown - storing move to re-trigger after tutorial closes:\", { from, to, isBot });\n        pendingActionRef.current = { from, to, isBot, isDragMove };\n        console.log(\" Returning early from perform() - move will execute after tutorial closes\");\n        return;\n      }\n\n      const dir = p.color === W ? 1 : -1;\n      const lanceLungeUsed =\n        p.equip === \"lance\" && to.y === from.y + 2 * dir && to.x === from.x;\n      \n      if (lanceLungeUsed) sfx.spear();\n      const out = resolve(\n        rngRef.current,\n        p,\n        t,\n        Bstate,\n        Tstate,\n        obstacles,\n        from,\n        to,\n        currentBoardSize,\n        lanceLungeUsed,\n        campaign.level // Pass current level for tutorial mechanics\n      );\n      setFx({\n        kind: \"piece\",\n        from,\n        to,\n        a: out.a,\n        d: out.d,\n        win: out.win,\n        id: currentCombatId,\n        adv: out.adv,\n      });\n\n      const notation = getChessNotation(from, to, p, true);\n      \n      // FOG OF WAR FIX: Calculate win% as the player saw it (without hidden equipment)\n      const defenderInFog = !vis[to.y]?.[to.x];\n      let defenderForWinPct = t;\n      if (defenderInFog && t.equip) {\n        // Strip equipment if defender was in fog\n        defenderForWinPct = { ...t, equip: undefined };\n      }\n      const winPct = winPercent(\n        Bstate,\n        Tstate,\n        obstacles,\n        p,\n        defenderForWinPct,\n        from,\n        to,\n        currentBoardSize\n      );\n      \n      const sup = supportCount(Bstate, Tstate, obstacles, p, from, to, currentBoardSize);\n      const moveRec: MoveRecord = {\n        turnNumber,\n        color: p.color as Color,\n        notation,\n        piece: { type: p.type, color: p.color as Color },\n        combat: {\n          isSupported: sup > 0,\n          winPercent: winPct,\n          attackerRolls: out.a.rolls, // Store initial rolls\n          defenderRolls: out.d.rolls, // Store initial rolls\n        },\n        inFog: defenderInFog, // Safe navigation\n      };\n      // If tutorial is showing, defer move history update to prevent flickering\n      if (pausedForTutorialRef.current) {\n        pendingMoveHistoryRef.current = moveRec;\n      } else {\n        setMoveHistory((hist) => [...hist, moveRec]);\n      }\n\n      const delay =\n        TMG.roll +\n        TMG.linger +\n        (out.a.mods?.length || out.d.mods?.length ? TMG.mods : 0) +\n        TMG.total +\n        TMG.winnerHold;\n\n      const continueCombat = () => {\n        if (combatIdRef.current !== currentCombatId) return;\n        // Check if still paused - if so, wait and check again\n        if (pausedForTutorialRef.current) {\n          setTimeout(continueCombat, 100);\n          return;\n        }\n\n        const playerLost =\n          (p.color === W && !out.win) || (t.color === W && out.win);\n\n        const forcedAttacker = !!out.a.forced;\n        const forcedDefender = !!out.d.forced;\n        const forcedForPlayer =\n          (p.color === \"w\" && forcedAttacker) ||\n          (t.color === \"w\" && forcedDefender);\n\n        if (playerLost && prayerDice > 0 && !forcedForPlayer) {\n          const loserPos = p.color === W ? from : to;\n          \n          // Check if prayer_dice tutorial should show - if so, show it BEFORE entering awaiting_reroll\n          // This prevents the Roll Failed popup from flashing before the tutorial\n          if (!campaign.tutorialsSeen.includes(\"prayer_dice\") && !pausedForTutorial && enableTutorialPopups) {\n            showTutorial(\"prayer_dice\");\n          }\n          \n          setPhase(\"awaiting_reroll\");\n          setRerollState({ from, to, kind: \"piece\", loserPos });\n          return;\n        }\n\n        const loser = out.win ? t : p;\n        const winner = out.win ? p : t;\n\n        const prefersReducedMotion = window.matchMedia(\n          \"(prefers-reduced-motion: reduce)\"\n        ).matches;\n\n        const postAnimation = () => {\n          if (loser?.id) {\n            let idsToDestroy = [loser.id];\n            if (loser.equip === \"skull\" && winner) {\n              idsToDestroy.push(winner.id);\n            }\n            setDestroyedPieceIds(idsToDestroy);\n          }\n          if (!out.win) {\n            setFailedAttackId(p.id);\n            setTimeout(() => setFailedAttackId(null), 400);\n          }\n          setTimeout(() => {\n            finishPieceCombat(out, lanceLungeUsed, from, to);\n          }, 400);\n        };\n\n        if (out.win && !prefersReducedMotion) {\n          setDestroyedPieceIds([t.id]);\n          setTimeout(() => {\n            const colorKey = p.color as \"w\" | \"b\";\n            // Check if GL has the type before accessing colorKey\n            const pieceGlyphSet = GL[p.type as keyof typeof GL];\n            const glyph =\n              pieceGlyphSet && colorKey in pieceGlyphSet\n                ? pieceGlyphSet[colorKey as keyof typeof pieceGlyphSet]\n                : \"?\";\n\n            setMoveAnim({\n              id: p.id,\n              from,\n              to,\n              glyph: glyph,\n              color: colorKey,\n              equip: p.equip,\n            });\n            setTimeout(() => {\n              finishPieceCombat(out, lanceLungeUsed, from, to);\n              setMoveAnim(null);\n            }, PIECE_MOVE_MS);\n          }, 150);\n        } else {\n          postAnimation();\n        }\n      };\n      \n      setTimeout(continueCombat, delay);\n      return;\n    }\n\n    // Quiet move\n    const notation = getChessNotation(from, to, p, false);\n    const moveRec: MoveRecord = {\n      turnNumber,\n      color: p.color as Color,\n      notation,\n      piece: { type: p.type, color: p.color as Color },\n      inFog: !vis[to.y]?.[to.x], // Safe navigation\n    };\n    setMoveHistory((hist) => [...hist, moveRec]);\n\n    const prefersReducedMotion = window.matchMedia(\n      \"(prefers-reduced-motion: reduce)\"\n    ).matches;\n    const commitQuietMove = () => {\n      sfx.move();\n      const B1 = cloneB(Bstate);\n      const moved: Piece = { ...p };\n      B1[to.y][to.x] = moved;\n      B1[from.y][from.x] = null;\n\n      // Check for exhaustion after the move\n      checkExhaustion(p.id, from, to, B1);\n\n      // Pawn promotion check for normal moves\n      // White promotes at top (boardSize-1), Black promotes at bottom (0)\n      const pieceAtDestination = B1[to.y]?.[to.x];\n      if (pieceAtDestination && pieceAtDestination.type === \"P\") {\n        const isWhitePawn = pieceAtDestination.color === W;\n        const isBlackPawn = pieceAtDestination.color === B;\n        const atTopRow = to.y === currentBoardSize - 1;\n        const atBottomRow = to.y === 0;\n        const shouldPromote = \n          (isWhitePawn && atTopRow) ||\n          (isBlackPawn && atBottomRow);\n        \n        if (isBlackPawn) {\n          console.log(\"[BLACK-PAWN-CHECK]\", {\n            color: pieceAtDestination.color,\n            toY: to.y,\n            boardSize: currentBoardSize,\n            atBottomRow,\n            shouldPromote\n          });\n        }\n        \n        if (shouldPromote) {\n          let promotionType: PieceType = currentLevelConfig?.pawnPromotionType || \"Q\";\n          // Safeguard: never promote to Pawn or King\n          if (promotionType === \"P\" || promotionType === \"K\") promotionType = \"Q\";\n          console.log(\"[PAWN-PROMOTED]\", { color: pieceAtDestination.color === W ? \"white\" : \"black\", to: promotionType });\n          B1[to.y][to.x] = { ...pieceAtDestination, type: promotionType };\n        }\n      }\n\n      // Check for King Crossing victory condition\n      const victoryConditions = currentLevelConfig?.victoryConditions || [\"king_beheaded\", \"king_captured\", \"king_dishonored\"];\n      if (victoryConditions.includes(\"king_escaped\") && isKingPiece(moved) && moved.color === W && to.y === currentBoardSize - 1) {\n        sfx.winCheckmate();\n        setB(B1);\n        setWin(W);\n        handleLevelCompletion(W, B1, { deliverer: moved, condition: \"king_escaped\" });\n        setPhrase(\"King Crossing!\");\n        setMoveHistory((hist) => {\n          const newHistory = [...hist];\n          const lastMoveEntry = newHistory[newHistory.length - 1];\n          if (lastMoveEntry) lastMoveEntry.notation += \" (Escaped!)\";\n          return newHistory;\n        });\n        setPhase(\"playing\");\n        return;\n      }\n\n      setB(B1);\n      setLastMove({ from, to });\n      decrementStunFor(turn, B1, currentBoardSize); // tick down the mover's stun at END of their turn\n      setTurn(nextTurn);\n      setPhase(\"playing\");\n    };\n\n    const moveIsInFog = !(vis[from.y]?.[from.x] || vis[to.y]?.[to.x]); // Safe navigation\n\n    if (prefersReducedMotion || isDragMove || moveIsInFog) {\n      commitQuietMove();\n    } else {\n      const colorKey = p.color as \"w\" | \"b\";\n      // Check if GL has the type before accessing colorKey\n      const pieceGlyphSet = GL[p.type as keyof typeof GL];\n      const glyph =\n        pieceGlyphSet && colorKey in pieceGlyphSet\n          ? pieceGlyphSet[colorKey as keyof typeof pieceGlyphSet]\n          : \"?\";\n\n      setMoveAnim({\n        id: p.id,\n        from,\n        to,\n        glyph: glyph,\n        color: colorKey,\n        equip: p.equip,\n      });\n\n      setTimeout(() => {\n        commitQuietMove();\n        setMoveAnim(null);\n      }, PIECE_MOVE_MS);\n    }\n  }\n\n  function finishRockCombat(\n    isSuccess: boolean,\n    lanceLungeUsed: boolean,\n    from: { x: number; y: number },\n    to: { x: number; y: number }\n  ) {\n    if (isSuccess) sfx.rockDestroy();\n    const B1 = cloneB(Bstate);\n    const O1 = obstacles.map(row => [...row]); // Clone obstacles\n    const mv = B1[from.y]?.[from.x]; // Safe navigation\n    if (!mv) {\n      setFx(null);\n      setPhase(\"playing\");\n      return;\n    }\n\n    const attackerState = lanceLungeUsed\n      ? { ...mv, equip: undefined }\n      : { ...mv };\n\n    if (isSuccess) {\n      // Check if we're destroying the Bell of Names\n      const wasBellDestroyed = O1[to.y][to.x] === \"bell\";\n      \n      // Track Courtiers destroyed by player\n      const destroyedType = O1[to.y][to.x];\n      if (destroyedType === \"courtier\" && mv.color === W) {\n        setDestroyedCourtiers((prev) => prev + 1);\n      }\n      \n      B1[to.y][to.x] = attackerState;\n      B1[from.y][from.x] = null;\n      O1[to.y][to.x] = \"none\"; // Remove the obstacle\n      setObstacles(O1); // Update obstacles state\n      setLastMove({ from, to }); // Set last move only on success\n      \n      // Special message when the bell is destroyed\n      if (wasBellDestroyed) {\n        setSpeechBubble({ \n          text: \"**The bell shatters! Morcant is now vulnerable!**\", \n          id: Date.now(), \n          targetId: \"bell_destroyed\" \n        });\n      }\n\n      // Check for exhaustion\n      if (mv) checkExhaustion(mv.id, from, to, B1);\n\n      // Pawn promotion check after destroying obstacle\n      // White promotes at top (boardSize-1), Black promotes at bottom (0)\n      const pieceAtDestination = B1[to.y]?.[to.x];\n      if (pieceAtDestination && pieceAtDestination.type === \"P\") {\n        const shouldPromote = \n          (pieceAtDestination.color === W && to.y === currentBoardSize - 1) ||\n          (pieceAtDestination.color === B && to.y === 0);\n        console.log(\"[OBSTACLE-PROMOTION-CHECK]\", { \n          color: pieceAtDestination.color, \n          toY: to.y, \n          boardSize: currentBoardSize, \n          shouldPromote,\n          config: currentLevelConfig?.pawnPromotionType \n        });\n        if (shouldPromote) {\n          let promotionType: PieceType = currentLevelConfig?.pawnPromotionType || \"Q\";\n          // Safeguard: never promote to Pawn or King\n          if (promotionType === \"P\" || promotionType === \"K\") promotionType = \"Q\";\n          console.log(\"[PAWN-PROMOTED-OBSTACLE]\", { color: pieceAtDestination.color === W ? \"white\" : \"black\", to: promotionType });\n          B1[to.y][to.x] = { ...pieceAtDestination, type: promotionType };\n        }\n      }\n\n      // Check for King Crossing victory condition\n      const victoryConditions = currentLevelConfig?.victoryConditions || [\"king_beheaded\", \"king_captured\", \"king_dishonored\"];\n      if (victoryConditions.includes(\"king_escaped\") && isKingPiece(mv) && mv.color === W && to.y === currentBoardSize - 1) {\n        sfx.winCheckmate();\n        setB(B1);\n        setWin(W);\n        handleLevelCompletion(W, B1, { deliverer: mv, condition: \"king_escaped\" });\n        setPhrase(\"King Crossing!\");\n        setMoveHistory((hist) => {\n          const newHistory = [...hist];\n          const lastMoveEntry = newHistory[newHistory.length - 1];\n          if (lastMoveEntry) lastMoveEntry.notation += \" (Escaped!)\";\n          return newHistory;\n        });\n        setFx(null);\n        setRerollState(null);\n        setPhase(\"playing\");\n        return;\n      }\n    } else {\n      B1[from.y][from.x] = attackerState;\n      setLastMove(null); // No move occurred visually\n    }\n    setB(B1);\n    decrementStunFor(turn, B1, currentBoardSize); // tick down the mover's stun at END of their turn\n    setTurn(turn === W ? B : W);\n    setFx(null);\n    setRerollState(null);\n    setPhase(\"playing\");\n  }\n\n  function finishPieceCombat(\n    out: any,\n    lanceLungeUsed: boolean,\n    from: { x: number; y: number },\n    to: { x: number; y: number }\n  ) {\n    let B1 = cloneB(Bstate);\n    const mv = B1[from.y]?.[from.x]; // Safe navigation\n    const tg = B1[to.y]?.[to.x]; // Safe navigation\n\n    // Safety: if either missing, bail cleanly\n    if (!mv || !tg) {\n      setFx(null);\n      setRerollState(null);\n      setPhase(\"playing\");\n      return;\n    }\n\n    if (out.win) {\n      // Attacker wins  defender dies (unless Staff converts)\n      // Compute the post-move attacker state (Spear breaks)\n      const moved: Piece = { ...mv };\n      if (lanceLungeUsed) moved.equip = undefined;\n\n      if (mv.equip === \"staff\") {\n        // Convert defender instead of killing them\n        sfx.convert();\n        const conv: Piece = { ...tg, color: mv.color };\n        B1[to.y][to.x] = conv;\n        B1[from.y][from.x] = { ...moved, equip: undefined };\n        \n        // Pawn promotion check after staff conversion (attacker stays at from position)\n        // White promotes at top (boardSize-1), Black promotes at bottom (0)\n        const attackerAtFrom = B1[from.y]?.[from.x];\n        if (attackerAtFrom && attackerAtFrom.type === \"P\") {\n          const shouldPromote = \n            (attackerAtFrom.color === W && from.y === currentBoardSize - 1) ||\n            (attackerAtFrom.color === B && from.y === 0);\n          console.log(\"[STAFF-PROMOTION-CHECK]\", { color: attackerAtFrom.color, fromY: from.y, boardSize: currentBoardSize, shouldPromote, config: currentLevelConfig?.pawnPromotionType });\n          if (shouldPromote) {\n            let promotionType: PieceType = currentLevelConfig?.pawnPromotionType || \"Q\";\n            // Safeguard: never promote to Pawn or King\n            if (promotionType === \"P\" || promotionType === \"K\") promotionType = \"Q\";\n            console.log(\"[PAWN-PROMOTED-STAFF]\", { color: attackerAtFrom.color === W ? \"white\" : \"black\", to: promotionType });\n            B1[from.y][from.x] = { ...attackerAtFrom, type: promotionType };\n          }\n        }\n        \n        // Check if we unlocked an item (converted piece = \"killed\" for unlock purposes)\n        checkUnlockItem(\n          tg,\n          mv.color as Color,\n          setThisLevelUnlockedItems,\n          setCampaign,\n          campaign,\n          setKilledEnemyPieces,\n          setMarketPoints,\n          setUnspentGold,\n          tg.type === \"K\" ? \"beheaded\" : undefined,\n          { killerPiece: mv, killerPosition: from, terrain: Tstate }\n        );\n        // If defender was a King, check victory conditions\n        if (tg.type === \"K\") {\n          // Check for Bell of Names protection (protects black king only)\n          if (tg.color === B && bellOfNamesExists(obstacles, currentBoardSize)) {\n            // Black king is protected by the Bell of Names - conversion fails\n            const bellPhrase = \"The Bell of Names shields Morcant!\";\n            setPhrase(bellPhrase);\n            setSpeechBubble({ \n              text: \"**The bell protects me!**\", \n              id: Date.now(), \n              targetId: tg.id \n            });\n            \n            setMoveHistory((hist) => {\n              const newHistory = [...hist];\n              const lastMove = newHistory[newHistory.length - 1];\n              if (lastMove) lastMove.notation += ` (${bellPhrase})`;\n              return newHistory;\n            });\n            \n            // Apply shadow visual effect to the king for 1 turn\n            const B1 = cloneB(Bstate);\n            const shadowKing = B1[to.y]?.[to.x];\n            if (shadowKing) {\n              shadowKing.shadowForTurns = 1;\n            }\n            // Staff is still consumed, but conversion fails\n            B1[from.y][from.x] = { ...mv, equip: undefined };\n            setB(B1);\n            setFx(null);\n            setRerollState(null);\n            setPhase(\"playing\");\n            return;\n          }\n          \n          // Check victory conditions - only declare victory if king_beheaded is allowed\n          const victoryConditions = currentLevelConfig?.victoryConditions || [\"king_beheaded\", \"king_captured\", \"king_dishonored\"];\n          if (victoryConditions.includes(\"king_beheaded\")) {\n            // No death  no stun\n            if (mv.color === W) {\n              sfx.winCheckmate();\n            } else {\n              sfx.loseCheckmate();\n            }\n            setB(B1);\n            setWin(mv.color as Color);\n            handleLevelCompletion(mv.color as Color, B1, {\n              deliverer: mv,\n              condition: \"king_beheaded\",\n            });\n            const endPhrase = \"Regicide!\";\n            setPhrase(endPhrase);\n            setMoveHistory((hist) => {\n              const newHistory = [...hist];\n              const lastMove = newHistory[newHistory.length - 1];\n              if (lastMove) lastMove.notation += ` (${endPhrase})`;\n              return newHistory;\n            });\n            setFx(null);\n            setRerollState(null);\n            setPhase(\"playing\");\n            return;\n          } else {\n            // King beheaded but it's not a valid victory condition\n            // If the enemy king died, player loses (can't achieve checkmate anymore)\n            if (tg.color === B) {\n              // Enemy king killed - player loses\n              B1[to.y][to.x] = null;\n              setB(B1);\n              sfx.loseCheckmate();\n              setWin(B);\n              handleLevelCompletion(B, B1);\n              setPhrase(\"You killed the King! Victory condition failed!\");\n              setMoveHistory((hist) => {\n                const newHistory = [...hist];\n                const lastMove = newHistory[newHistory.length - 1];\n                if (lastMove) lastMove.notation += \" (Victory condition failed!)\";\n                return newHistory;\n              });\n              setFx(null);\n              setRerollState(null);\n              setPhase(\"playing\");\n              return;\n            } else {\n              // Player's own king was converted - this shouldn't happen, but continue\n              B1[to.y][to.x] = null;\n              setB(B1);\n              setFx(null);\n              setRerollState(null);\n              setPhase(\"playing\");\n              return;\n            }\n          }\n        }\n      } else {\n        // Normal capture path\n        if (tg.equip === \"skull\") {\n          // Both die\n          sfx.combatLose(); // Play sound for attacker dying to skull\n          const deadDefender = B1[to.y][to.x];\n          const deadAttacker = B1[from.y][from.x];\n          \n          // Check for Bell of Names protection (protects black king only)\n          if (deadDefender?.type === \"K\" && deadDefender.color === B && bellOfNamesExists(obstacles, currentBoardSize)) {\n            // Black king is protected by the Bell of Names - only attacker dies\n            B1[from.y][from.x] = null;\n            onPieceDeath(B1, deadAttacker, from, turn, handlePlayerPieceLost); //  attacker's death\n            \n            // Track killed attacker for ransom (defender's color is the killer)\n            checkUnlockItem(\n              deadAttacker,\n              deadDefender.color as Color,\n              setThisLevelUnlockedItems,\n              setCampaign,\n              campaign,\n              setKilledEnemyPieces,\n              setMarketPoints,\n              setUnspentGold,\n          deadAttacker?.type === \"K\" ? \"beheaded\" : undefined,\n          { killerPiece: deadDefender ?? null, killerPosition: to, terrain: Tstate }\n            );\n            \n            // Check if the attacker that died is the white King - always a loss\n            if (deadAttacker?.type === \"K\" && deadAttacker.color === W) {\n              setB(B1);\n              sfx.loseCheckmate();\n              setWin(B);\n              handleLevelCompletion(B, B1);\n              setPhrase(\"Your King has fallen!\");\n              setMoveHistory((hist) => {\n                const newHistory = [...hist];\n                const lastMove = newHistory[newHistory.length - 1];\n                if (lastMove) lastMove.notation += \" (Your King has fallen!)\";\n                return newHistory;\n              });\n              setFx(null);\n              setRerollState(null);\n              setPhase(\"playing\");\n              return;\n            }\n            \n            const bellPhrase = \"The Bell of Names shields Morcant!\";\n            setPhrase(bellPhrase);\n            setSpeechBubble({ \n              text: \"**The bell protects me!**\", \n              id: Date.now(), \n              targetId: tg.id \n            });\n            \n            setMoveHistory((hist) => {\n              const newHistory = [...hist];\n              const lastMove = newHistory[newHistory.length - 1];\n              if (lastMove) lastMove.notation += ` (${bellPhrase})`;\n              return newHistory;\n            });\n            \n            // Apply shadow visual effect to the king for 1 turn\n            const shadowKing = B1[to.y]?.[to.x];\n            if (shadowKing) {\n              shadowKing.shadowForTurns = 1;\n            }\n            \n            setB(B1);\n            setFx(null);\n            setRerollState(null);\n            setPhase(\"playing\");\n            return;\n          }\n          \n          B1[to.y][to.x] = null;\n          B1[from.y][from.x] = null;\n          onPieceDeath(B1, deadDefender, to, turn, handlePlayerPieceLost); //  defender's death\n          onPieceDeath(B1, deadAttacker, from, turn, handlePlayerPieceLost); //  attacker's death\n          // Check if we unlocked an item from defender\n          checkUnlockItem(\n            deadDefender,\n            mv.color as Color,\n            setThisLevelUnlockedItems,\n            setCampaign,\n            campaign,\n            setKilledEnemyPieces,\n            setMarketPoints,\n            setUnspentGold,\n          deadDefender?.type === \"K\" ? \"beheaded\" : undefined,\n          { killerPiece: mv, killerPosition: from, terrain: Tstate }\n          );\n          \n          // Check if we unlocked an item from attacker (when both die)\n          checkUnlockItem(\n            deadAttacker,\n            tg.color as Color,\n            setThisLevelUnlockedItems,\n            setCampaign,\n            campaign,\n            setKilledEnemyPieces,\n            setMarketPoints,\n            setUnspentGold,\n            deadAttacker?.type === \"K\" ? \"beheaded\" : undefined\n          );\n\n          // Both pieces die, so award a \"kill\" to both if they had any kills\n          // (attacker doesn't get credit since they also die)\n\n          // Early king checks after stuns\n          if (deadAttacker?.type === \"K\") {\n            console.log(\"=== KING DIED IN SKULL COMBAT (ATTACKER) ===\");\n            console.log(\"Dead attacker color:\", deadAttacker.color);\n            console.log(\"Is player king:\", deadAttacker.color === W);\n            \n            // Check victory conditions - only declare victory if king_dishonored is allowed (for enemy king)\n            // If player's king dies, it's always a loss regardless of victory conditions\n            const victoryConditions = currentLevelConfig?.victoryConditions || [\"king_beheaded\", \"king_captured\", \"king_dishonored\"];\n            const isPlayerKing = deadAttacker.color === W;\n            \n            console.log(\"Victory conditions:\", victoryConditions);\n            console.log(\"Should end game:\", isPlayerKing || victoryConditions.includes(\"king_dishonored\"));\n            \n            if (isPlayerKing || victoryConditions.includes(\"king_dishonored\")) {\n              console.log(\">>> ENDING GAME - King died in skull combat\");\n              // Player king died (always loss) OR enemy king died dishonored (check victory condition)\n              if (tg.color === B) sfx.loseCheckmate();\n              else sfx.winCheckmate();\n              setB(B1);\n              setWin(tg.color as Color);\n              handleLevelCompletion(tg.color as Color, B1, {\n                deliverer: tg.color === W ? tg : undefined,\n                condition: \"king_dishonored\",\n              });\n              const endPhrase = isPlayerKing ? \"King's soul is forfeit!\" : \"King dishonored!\";\n              setPhrase(endPhrase);\n              setMoveHistory((hist) => {\n                const newHistory = [...hist];\n                const lastMove = newHistory[newHistory.length - 1];\n                if (lastMove) lastMove.notation += ` (${endPhrase})`;\n                return newHistory;\n              });\n              setFx(null);\n              setRerollState(null);\n              setPhase(\"playing\");\n              return;\n            } else {\n              // Enemy king died dishonored but it's not a valid victory condition\n              // Player loses because they can't achieve checkmate anymore\n              setB(B1);\n              sfx.loseCheckmate();\n              setWin(B);\n              handleLevelCompletion(B, B1);\n              setPhrase(\"You killed the King! Victory condition failed!\");\n              setMoveHistory((hist) => {\n                const newHistory = [...hist];\n                const lastMove = newHistory[newHistory.length - 1];\n                if (lastMove) lastMove.notation += \" (Victory condition failed!)\";\n                return newHistory;\n              });\n              setFx(null);\n              setRerollState(null);\n              setPhase(\"playing\");\n              return;\n            }\n          }\n          if (deadDefender?.type === \"K\") {\n            // Check victory conditions - only declare victory if king_beheaded is allowed\n            const victoryConditions = currentLevelConfig?.victoryConditions || [\"king_beheaded\", \"king_captured\", \"king_dishonored\"];\n            if (victoryConditions.includes(\"king_beheaded\")) {\n              if (mv.color === W) sfx.winCheckmate();\n              else sfx.loseCheckmate();\n              setB(B1);\n              setWin(mv.color as Color);\n              handleLevelCompletion(mv.color as Color, B1, {\n                deliverer: mv,\n                condition: \"king_beheaded\",\n              });\n              const endPhrase = \"Regicide!\";\n              setPhrase(endPhrase);\n              setMoveHistory((hist) => {\n                const newHistory = [...hist];\n                const lastMove = newHistory[newHistory.length - 1];\n                if (lastMove) lastMove.notation += ` (${endPhrase})`;\n                return newHistory;\n              });\n              setFx(null);\n              setRerollState(null);\n              setPhase(\"playing\");\n              return;\n            } else {\n              // King beheaded but it's not a valid victory condition\n              // If the enemy king died, player loses (can't achieve checkmate anymore)\n              if (deadDefender?.color === B) {\n                // Enemy king killed - player loses\n                setB(B1);\n                sfx.loseCheckmate();\n                setWin(B);\n                handleLevelCompletion(B, B1);\n                setPhrase(\"You killed the King! Victory condition failed!\");\n                setMoveHistory((hist) => {\n                  const newHistory = [...hist];\n                  const lastMove = newHistory[newHistory.length - 1];\n                  if (lastMove) lastMove.notation += \" (Victory condition failed!)\";\n                  return newHistory;\n                });\n                setFx(null);\n                setRerollState(null);\n                setPhase(\"playing\");\n                return;\n              } else {\n                // Player's king died - this is ALWAYS a loss regardless of victory conditions\n                setB(B1);\n                sfx.loseCheckmate();\n                setWin(B);\n                handleLevelCompletion(B, B1);\n                setPhrase(\"Your King has fallen!\");\n                setMoveHistory((hist) => {\n                  const newHistory = [...hist];\n                  const lastMove = newHistory[newHistory.length - 1];\n                  if (lastMove) lastMove.notation += \" (Your King has fallen!)\";\n                  return newHistory;\n                });\n                setFx(null);\n                setRerollState(null);\n                setPhase(\"playing\");\n                return;\n              }\n            }\n          }\n        } else {\n          // Defender actually dies here\n          if (tg.type !== \"K\") {\n            sfx.capture();\n          }\n          onPieceDeath(B1, tg, to, turn, handlePlayerPieceLost); //  if defender had Curse\n          // Check if we unlocked an item\n          checkUnlockItem(\n            tg,\n            mv.color as Color,\n            setThisLevelUnlockedItems,\n            setCampaign,\n            campaign,\n            setKilledEnemyPieces,\n            setMarketPoints,\n            setUnspentGold,\n          tg.type === \"K\" ? \"beheaded\" : undefined,\n          { killerPiece: mv, killerPosition: from, terrain: Tstate }\n          );\n\n          // Award kill to attacker (track for veteran status)\n          const newKills = (moved.kills || 0) + 1;\n          moved.kills = newKills;\n\n          B1[to.y][to.x] = moved;\n          B1[from.y][from.x] = null;\n\n          // Check for exhaustion\n          checkExhaustion(mv.id, from, to, B1);\n\n          // Pawn promotion check after combat win (must happen before early returns for king kills)\n          const pieceAtDestination = B1[to.y]?.[to.x];\n          if (pieceAtDestination && pieceAtDestination.type === \"P\") {\n            const shouldPromote = \n              (pieceAtDestination.color === W && to.y === currentBoardSize - 1) ||\n              (pieceAtDestination.color === B && to.y === 0);\n            if (shouldPromote) {\n              let promotionType: PieceType = currentLevelConfig?.pawnPromotionType || \"Q\";\n              // Safeguard: never promote to Pawn or King\n              if (promotionType === \"P\" || promotionType === \"K\") promotionType = \"Q\";\n              B1[to.y][to.x] = { ...pieceAtDestination, type: promotionType };\n            }\n          }\n\n          if (tg.type === \"K\") {\n            // Check for Bell of Names protection (protects black king only)\n            if (tg.color === B && bellOfNamesExists(obstacles, currentBoardSize)) {\n              // Black king is protected by the Bell of Names - he cannot be killed\n              // The attacker's attack fails completely (as if blocked)\n              const bellPhrase = \"The Bell of Names shields Morcant!\";\n              setPhrase(bellPhrase);\n              setSpeechBubble({ \n                text: \"**The bell protects me!**\", \n                id: Date.now(), \n                targetId: tg.id \n              });\n              \n              setMoveHistory((hist) => {\n                const newHistory = [...hist];\n                const lastMove = newHistory[newHistory.length - 1];\n                if (lastMove) lastMove.notation += ` (${bellPhrase})`;\n                return newHistory;\n              });\n              \n              // Apply shadow visual effect to the king for 1 turn\n              const B1 = cloneB(Bstate);\n              const shadowKing = B1[to.y]?.[to.x];\n              if (shadowKing) {\n                shadowKing.shadowForTurns = 1;\n                setB(B1);\n              } else {\n                setB(Bstate); // Fallback if king not found\n              }\n              setFx(null);\n              setRerollState(null);\n              setPhase(\"playing\");\n              return;\n            }\n            \n            // Check victory conditions - only declare victory if king_beheaded is allowed\n            const victoryConditions = currentLevelConfig?.victoryConditions || [\"king_beheaded\", \"king_captured\", \"king_dishonored\"];\n            if (victoryConditions.includes(\"king_beheaded\")) {\n              if (moved.color === W) {\n                sfx.winCheckmate();\n              } else {\n                sfx.loseCheckmate();\n              }\n              setB(B1);\n              setWin(moved.color as Color);\n              handleLevelCompletion(moved.color as Color, B1, {\n                deliverer: moved,\n                condition: \"king_beheaded\",\n              });\n              const endPhrase = \"Regicide!\";\n              setPhrase(endPhrase);\n              setMoveHistory((hist) => {\n                const newHistory = [...hist];\n                const lastMove = newHistory[newHistory.length - 1];\n                if (lastMove) lastMove.notation += ` (${endPhrase})`;\n                return newHistory;\n              });\n              setFx(null);\n              setRerollState(null);\n              setPhase(\"playing\");\n              return;\n            } else {\n              // King beheaded but it's not a valid victory condition\n              // If the enemy king died, player loses (can't achieve checkmate anymore)\n              if (tg.color === B) {\n                // Enemy king killed - player loses\n                setB(B1);\n                sfx.loseCheckmate();\n                setWin(B);\n                handleLevelCompletion(B, B1);\n                setPhrase(\"You killed the King! Victory condition failed!\");\n                setMoveHistory((hist) => {\n                  const newHistory = [...hist];\n                  const lastMove = newHistory[newHistory.length - 1];\n                  if (lastMove) lastMove.notation += \" (Victory condition failed!)\";\n                  return newHistory;\n                });\n                setFx(null);\n                setRerollState(null);\n                setPhase(\"playing\");\n                return;\n              } else {\n                // Player's own king was killed - this is ALWAYS a loss regardless of victory conditions\n                setB(B1);\n                sfx.loseCheckmate();\n                setWin(B);\n                handleLevelCompletion(B, B1);\n                setPhrase(\"Your King has fallen!\");\n                setMoveHistory((hist) => {\n                  const newHistory = [...hist];\n                  const lastMove = newHistory[newHistory.length - 1];\n                  if (lastMove) lastMove.notation += \" (Your King has fallen!)\";\n                  return newHistory;\n                });\n                setFx(null);\n                setRerollState(null);\n                setPhase(\"playing\");\n                return;\n              }\n            }\n          }\n\n          // Check for King Crossing victory condition\n          const victoryConditions = currentLevelConfig?.victoryConditions || [\"king_beheaded\", \"king_captured\", \"king_dishonored\"];\n      if (victoryConditions.includes(\"king_escaped\") && isKingPiece(moved) && moved.color === W && to.y === currentBoardSize - 1) {\n        sfx.winCheckmate();\n        setB(B1);\n        setWin(W);\n        handleLevelCompletion(W, B1, { deliverer: moved, condition: \"king_escaped\" });\n        setPhrase(\"King Crossing!\");\n        setMoveHistory((hist) => {\n          const newHistory = [...hist];\n          const lastMoveEntry = newHistory[newHistory.length - 1];\n          if (lastMoveEntry) lastMoveEntry.notation += \" (Escaped!)\";\n          return newHistory;\n        });\n        setFx(null);\n        setRerollState(null);\n        setPhase(\"playing\");\n        return;\n      }\n        }\n\n        setLastMove({ from, to });\n      }\n      // (end attacker win)\n    } else {\n      // Attacker loses  attacker dies unless Bow saves them\n      const attackerState = lanceLungeUsed\n        ? { ...mv, equip: undefined }\n        : { ...mv };\n\n      if (attackerState.equip === \"bow\") {\n        // Bow breaks  no death => no stun\n        sfx.bowBreak();\n        B1[from.y][from.x] = { ...attackerState, equip: undefined };\n        setLastMove(null); // No move occurred visually\n      } else {\n        // Attacker actually dies here\n        if (mv.type !== \"K\") {\n          sfx.combatLose();\n        }\n        const deadAttacker = B1[from.y][from.x];\n        B1[from.y][from.x] = null;\n        onPieceDeath(B1, deadAttacker, from, turn, handlePlayerPieceLost); //  attacker's death\n        \n        // Track killed attacker for ransom (defender's color is the killer)\n        checkUnlockItem(\n          deadAttacker,\n          tg.color as Color,\n          setThisLevelUnlockedItems,\n          setCampaign,\n          campaign,\n          setKilledEnemyPieces,\n          setMarketPoints,\n          setUnspentGold,\n          deadAttacker?.type === \"K\" ? \"beheaded\" : undefined,\n          { killerPiece: tg ?? null, killerPosition: to, terrain: Tstate }\n        );\n\n        if (attackerState.equip === \"skull\") {\n          // Kill defender too\n          const deadDefender = B1[to.y][to.x];\n          \n          // Check for Bell of Names protection (protects black king only)\n          if (deadDefender?.type === \"K\" && deadDefender.color === B && bellOfNamesExists(obstacles, currentBoardSize)) {\n            // Black king is protected by the Bell of Names - skull fails to kill him\n            \n            // Check if the attacker that died is the white King - always a loss\n            if (deadAttacker?.type === \"K\" && deadAttacker.color === W) {\n              setB(B1);\n              sfx.loseCheckmate();\n              setWin(B);\n              handleLevelCompletion(B, B1);\n              setPhrase(\"Your King has fallen!\");\n              setMoveHistory((hist) => {\n                const newHistory = [...hist];\n                const lastMove = newHistory[newHistory.length - 1];\n                if (lastMove) lastMove.notation += \" (Your King has fallen!)\";\n                return newHistory;\n              });\n              setFx(null);\n              setRerollState(null);\n              setPhase(\"playing\");\n              return;\n            }\n            \n            const bellPhrase = \"The Bell of Names shields Morcant!\";\n            setPhrase(bellPhrase);\n            setSpeechBubble({ \n              text: \"**The bell protects me!**\", \n              id: Date.now(), \n              targetId: tg.id \n            });\n            \n            setMoveHistory((hist) => {\n              const newHistory = [...hist];\n              const lastMove = newHistory[newHistory.length - 1];\n              if (lastMove) lastMove.notation += ` (${bellPhrase})`;\n              return newHistory;\n            });\n            \n            // Apply shadow visual effect to the king for 1 turn\n            const shadowKing = B1[to.y]?.[to.x];\n            if (shadowKing) {\n              shadowKing.shadowForTurns = 1;\n            }\n            \n            setB(B1);\n            setFx(null);\n            setRerollState(null);\n            setPhase(\"playing\");\n            return;\n          }\n          \n          sfx.combatLose(); // Play sound for defender dying to attacker's skull\n          B1[to.y][to.x] = null;\n          onPieceDeath(B1, deadDefender, to, turn, handlePlayerPieceLost); //  defender's death\n          // Check if we unlocked an item from defender\n          checkUnlockItem(\n            deadDefender,\n            mv.color as Color,\n            setThisLevelUnlockedItems,\n            setCampaign,\n            campaign,\n            setKilledEnemyPieces,\n            setMarketPoints,\n            setUnspentGold,\n            deadDefender?.type === \"K\" ? \"beheaded\" : undefined,\n            { killerPiece: mv, killerPosition: from, terrain: Tstate }\n          );\n\n          // Defender died (to skull), award kill to dead attacker's kill count\n          // Note: attacker is dead so this won't be visible, but helps with consistency\n          \n          // Check if defender king died - need to check victory conditions\n          if (deadDefender?.type === \"K\") {\n            const victoryConditions = currentLevelConfig?.victoryConditions || [\"king_beheaded\", \"king_captured\", \"king_dishonored\"];\n            if (victoryConditions.includes(\"king_beheaded\")) {\n              if (mv.color === W) {\n                sfx.winCheckmate();\n              } else {\n                sfx.loseCheckmate();\n              }\n              setB(B1);\n              setWin(mv.color as Color); // Attacker's color wins\n              handleLevelCompletion(mv.color as Color, B1, {\n                deliverer: mv,\n                condition: \"king_beheaded\",\n              });\n              setPhrase(\"Regicide!\");\n              setMoveHistory((hist) => {\n                const newHistory = [...hist];\n                const lastMove = newHistory[newHistory.length - 1];\n                if (lastMove) lastMove.notation += \" (Regicide!)\";\n                return newHistory;\n              });\n              setFx(null);\n              setRerollState(null);\n              setPhase(\"playing\");\n              return;\n            } else {\n              // King beheaded but it's not a valid victory condition\n              // If the enemy king died, player loses (can't achieve checkmate anymore)\n              if (deadDefender?.color === B) {\n                // Enemy king killed - player loses\n                setB(B1);\n                sfx.loseCheckmate();\n                setWin(B);\n                handleLevelCompletion(B, B1);\n                setPhrase(\"You killed the King! Victory condition failed!\");\n                setMoveHistory((hist) => {\n                  const newHistory = [...hist];\n                  const lastMove = newHistory[newHistory.length - 1];\n                  if (lastMove) lastMove.notation += \" (Victory condition failed!)\";\n                  return newHistory;\n                });\n                setFx(null);\n                setRerollState(null);\n                setPhase(\"playing\");\n                return;\n              } else {\n                // Player's king died - this is ALWAYS a loss regardless of victory conditions\n                setB(B1);\n                sfx.loseCheckmate();\n                setWin(B);\n                handleLevelCompletion(B, B1);\n                setPhrase(\"Your King has fallen!\");\n                setMoveHistory((hist) => {\n                  const newHistory = [...hist];\n                  const lastMove = newHistory[newHistory.length - 1];\n                  if (lastMove) lastMove.notation += \" (Your King has fallen!)\";\n                  return newHistory;\n                });\n                setFx(null);\n                setRerollState(null);\n                setPhase(\"playing\");\n                return;\n              }\n            }\n          }\n        }\n\n        // Early king checks after stuns\n        if (tg.type === \"K\" && B1[to.y]?.[to.x] === null) {\n          // Safe navigation\n          // if defender also died\n          const victoryConditions = currentLevelConfig?.victoryConditions || [\"king_beheaded\", \"king_captured\", \"king_dishonored\"];\n          if (victoryConditions.includes(\"king_beheaded\")) {\n            if (mv.color === W) {\n              sfx.winCheckmate();\n            } else {\n              sfx.loseCheckmate();\n            }\n            setB(B1);\n            setWin(mv.color as Color); // Attacker's color wins\n            handleLevelCompletion(mv.color as Color, B1, {\n              deliverer: mv,\n              condition: \"king_beheaded\",\n            });\n            setPhrase(\"King's soul is forfeit!\");\n            setMoveHistory((hist) => {\n              const newHistory = [...hist];\n              const lastMove = newHistory[newHistory.length - 1];\n              if (lastMove) lastMove.notation += \" (King's soul is forfeit!)\";\n              return newHistory;\n            });\n            setFx(null);\n            setRerollState(null);\n            setPhase(\"playing\");\n            return;\n          } else {\n            // King beheaded but it's not a valid victory condition\n            // Check if defender king died (enemy king)\n            if (tg.type === \"K\" && B1[to.y]?.[to.x] === null && tg.color === B) {\n              // Enemy king killed - player loses\n              setB(B1);\n              sfx.loseCheckmate();\n              setWin(B);\n              handleLevelCompletion(B, B1);\n              setPhrase(\"You killed the King! Victory condition failed!\");\n              setMoveHistory((hist) => {\n                const newHistory = [...hist];\n                const lastMove = newHistory[newHistory.length - 1];\n                if (lastMove) lastMove.notation += \" (Victory condition failed!)\";\n                return newHistory;\n              });\n              setFx(null);\n              setRerollState(null);\n              setPhase(\"playing\");\n              return;\n            } else {\n              // Player's king died - this is ALWAYS a loss regardless of victory conditions\n              setB(B1);\n              sfx.loseCheckmate();\n              setWin(B);\n              handleLevelCompletion(B, B1);\n              setPhrase(\"Your King has fallen!\");\n              setMoveHistory((hist) => {\n                const newHistory = [...hist];\n                const lastMove = newHistory[newHistory.length - 1];\n                if (lastMove) lastMove.notation += \" (Your King has fallen!)\";\n                return newHistory;\n              });\n              setFx(null);\n              setRerollState(null);\n              setPhase(\"playing\");\n              return;\n            }\n          }\n        }\n        if (deadAttacker?.type === \"K\") {\n          console.log(\"=== KING DIED AS ATTACKER (BOW FAILED) ===\");\n          console.log(\"Dead attacker color:\", deadAttacker.color);\n          console.log(\"Is player king:\", deadAttacker.color === W);\n          \n          // Attacker king died - check if player's king or enemy king\n          const isPlayerKing = deadAttacker.color === W;\n          const victoryConditions = currentLevelConfig?.victoryConditions || [\"king_beheaded\", \"king_captured\", \"king_dishonored\"];\n          \n          console.log(\"Victory conditions:\", victoryConditions);\n          console.log(\"Should end game:\", isPlayerKing || victoryConditions.includes(\"king_dishonored\"));\n          \n          // If player's king died, it's always a loss regardless of victory conditions\n          // If enemy king died dishonored, check if king_dishonored is a valid victory condition\n          if (isPlayerKing || victoryConditions.includes(\"king_dishonored\")) {\n            console.log(\">>> ENDING GAME - King died as attacker\");\n            const endPhrase = \"King dishonored!\";\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const winner = mv.color === W ? B : W;\n\n            // Track King defeat for ransom if it's the enemy king (black) that died\n            if (deadAttacker.color === W) {\n              // Player king died, so black wins - but we don't track white king defeats for ransom\n            } else if (deadAttacker.color === B) {\n              // Black king died attacking, track for ransom\n              trackKingDefeat(deadAttacker, \"dishonored\", setKilledEnemyPieces);\n            }\n\n            // Set phrase and move history BEFORE handleLevelCompletion\n            setPhrase(endPhrase);\n            setMoveHistory((hist) => {\n              const newHistory = [...hist];\n              const lastMove = newHistory[newHistory.length - 1];\n              if (lastMove && !lastMove.notation.includes(endPhrase)) {\n                lastMove.notation += ` (${endPhrase})`;\n              }\n              return newHistory;\n            });\n\n            if (mv.color === W) {\n              sfx.loseCheckmate();\n              setWin(B);\n              handleLevelCompletion(B, B1);\n            } else {\n              sfx.winCheckmate();\n              setWin(W);\n          handleLevelCompletion(W, B1, {\n            deliverer: tg?.color === W ? tg : undefined,\n            condition: \"king_dishonored\",\n          });\n            }\n\n            setB(B1);\n            setFx(null);\n            setRerollState(null);\n            setPhase(\"playing\");\n            return;\n          } else {\n            // Enemy king died dishonored but it's not a valid victory condition\n            // Track the defeat for gold purposes even if not a victory\n            if (deadAttacker.color === B) {\n              trackKingDefeat(deadAttacker, \"dishonored\", setKilledEnemyPieces);\n              // Enemy king killed - player loses (can't achieve checkmate anymore)\n              setB(B1);\n              sfx.loseCheckmate();\n              setWin(B);\n              handleLevelCompletion(B, B1);\n              setPhrase(\"You killed the King! Victory condition failed!\");\n              setMoveHistory((hist) => {\n                const newHistory = [...hist];\n                const lastMove = newHistory[newHistory.length - 1];\n                if (lastMove && !lastMove.notation.includes(\"Victory condition failed\")) {\n                  lastMove.notation += \" (Victory condition failed!)\";\n                }\n                return newHistory;\n              });\n              setFx(null);\n              setRerollState(null);\n              setPhase(\"playing\");\n              return;\n            } else {\n              // Player's king died - this is ALWAYS a loss regardless of victory conditions\n              setB(B1);\n              sfx.loseCheckmate();\n              setWin(B);\n              handleLevelCompletion(B, B1);\n              setPhrase(\"Your King has fallen!\");\n              setMoveHistory((hist) => {\n                const newHistory = [...hist];\n                const lastMove = newHistory[newHistory.length - 1];\n                if (lastMove) lastMove.notation += \" (Your King has fallen!)\";\n                return newHistory;\n              });\n              setFx(null);\n              setRerollState(null);\n              setPhase(\"playing\");\n              return;\n            }\n          }\n        }\n        setLastMove(null); // No move occurred visually\n      }\n      // (end attacker lose)\n    }\n\n    // Pawn promotion (check both positions - winner might be at 'to' or 'from')\n    // White promotes at top (boardSize-1), Black promotes at bottom (0)\n    const winnerFinalPos = out.win ? to : from;\n    const winnerFinalPiece = B1[winnerFinalPos.y]?.[winnerFinalPos.x];\n    if (winnerFinalPiece?.type === \"P\") {\n      const shouldPromoteWinner = \n        (winnerFinalPiece.color === W && winnerFinalPos.y === currentBoardSize - 1) ||\n        (winnerFinalPiece.color === B && winnerFinalPos.y === 0);\n      console.log(\"[COMBAT-PROMOTION-CHECK]\", { \n        piece: \"winner\", \n        color: winnerFinalPiece.color, \n        posY: winnerFinalPos.y, \n        boardSize: currentBoardSize, \n        shouldPromote: shouldPromoteWinner,\n        config: currentLevelConfig?.pawnPromotionType\n      });\n      if (shouldPromoteWinner) {\n        let promotionType: PieceType = currentLevelConfig?.pawnPromotionType || \"Q\";\n        // Safeguard: never promote to Pawn or King\n        if (promotionType === \"P\" || promotionType === \"K\") promotionType = \"Q\";\n        console.log(\"[PAWN-PROMOTED-COMBAT]\", { color: winnerFinalPiece.color === W ? \"white\" : \"black\", to: promotionType });\n        B1[winnerFinalPos.y][winnerFinalPos.x] = { ...winnerFinalPiece, type: promotionType };\n      }\n    }\n    \n    // Also check if loser ended up at promotion square (shouldn't happen, but just in case)\n    const loserFinalPos = out.win ? from : to;\n    const loserFinalPiece = B1[loserFinalPos.y]?.[loserFinalPos.x];\n    if (loserFinalPiece?.type === \"P\") {\n      const shouldPromoteLoser = \n        (loserFinalPiece.color === W && loserFinalPos.y === currentBoardSize - 1) ||\n        (loserFinalPiece.color === B && loserFinalPos.y === 0);\n      console.log(\"[COMBAT-PROMOTION-CHECK]\", { \n        piece: \"loser\", \n        color: loserFinalPiece.color, \n        posY: loserFinalPos.y, \n        boardSize: currentBoardSize, \n        shouldPromote: shouldPromoteLoser,\n        config: currentLevelConfig?.pawnPromotionType\n      });\n      if (shouldPromoteLoser) {\n        let promotionType: PieceType = currentLevelConfig?.pawnPromotionType || \"Q\";\n        // Safeguard: never promote to Pawn or King\n        if (promotionType === \"P\" || promotionType === \"K\") promotionType = \"Q\";\n        console.log(\"[PAWN-PROMOTED-COMBAT]\", { color: loserFinalPiece.color === W ? \"white\" : \"black\", to: promotionType });\n        B1[loserFinalPos.y][loserFinalPos.x] = { ...loserFinalPiece, type: promotionType };\n      }\n    }\n\n    // Helper function to select a random sentence avoiding recently used ones\n    const randWithoutRecent = <T extends string>(\n      r: () => number,\n      array: T[],\n      pieceId: string\n    ): T => {\n      const recent = recentSpeechRef.current.get(pieceId) || [];\n      const available = array.filter((item) => !recent.includes(item));\n      \n      // If all sentences have been used, reset and use all of them\n      const candidates = available.length > 0 ? available : array;\n      const selected = candidates[Math.floor(r() * candidates.length)];\n      \n      // Track this sentence as recently used\n      // If we've used all sentences, keep only the last (array.length - 1) to ensure we can still avoid repeats\n      // Otherwise, just add to the list\n      let newRecent: string[];\n      if (recent.length >= array.length - 1) {\n        // We've used most/all sentences, keep only the last (array.length - 1) unique sentences\n        // Remove the selected one if it's already in recent, then add it at the end\n        const filtered = recent.filter((item) => item !== selected);\n        newRecent = [...filtered, selected].slice(-(array.length - 1));\n      } else {\n        // Still have unused sentences, just add to the list\n        newRecent = [...recent, selected];\n      }\n      recentSpeechRef.current.set(pieceId, newRecent);\n      \n      return selected;\n    };\n\n    // Flavor text: Decide on the speech bubble content in one atomic step to prevent potential flickering.\n    const getSpeechBubbleContent = () => {\n      const winner = out.win ? mv : tg;\n      const loser = out.win ? tg : mv;\n      const winnerColor = winner.color as Color;\n      const loserColor = loser.color as Color;\n      const swingValue = val(loser);\n      // Safe navigation for winnerFinalPiece\n      const winnerFinalPiece =\n        B1[winner === mv ? to.y : from.y]?.[winner === mv ? to.x : from.x];\n      const winnerFinalId = winnerFinalPiece?.id ?? winner.id; // Use ID of piece on board, or original if gone (trade)\n\n      // Priority 1: High-impact swing move\n      if (swingValue >= 40 && rngRef.current() < 0.75) {\n        const king = findK(B1, winnerColor);\n        const kingVisible =\n          king && visibility(B1, \"playing\", currentBoardSize, currentLevelConfig?.fogRows ?? 2)[king.y]?.[king.x]; // Safe navigation\n        const targetId = king && kingVisible ? king.p.id : winnerFinalId;\n        const text = randWithoutRecent(rngRef.current, SWING_PHRASES[winnerColor], targetId);\n        return { text, targetId };\n      }\n\n      // Priority 2: A named unit was involved (ALWAYS triggers)\n      if (winner.name || loser.name) {\n        // Check if winner is a featured piece with custom speech lines\n        if (\n          winner.isPreconfigured &&\n          winner.speechLines &&\n          winner.speechLines.length > 0\n        ) {\n          const text = randWithoutRecent(rngRef.current, winner.speechLines, winnerFinalId);\n          return { text, targetId: winnerFinalId };\n        }\n\n        // Check if loser is a featured piece with custom speech lines (for defeat quotes)\n        if (\n          !out.win &&\n          loser.isPreconfigured &&\n          loser.speechLines &&\n          loser.speechLines.length > 0\n        ) {\n          const loserFinalPiece =\n            B1[loser === mv ? from.y : to.y]?.[loser === mv ? from.x : to.x];\n          const loserFinalId = loserFinalPiece?.id ?? loser.id;\n          const text = randWithoutRecent(rngRef.current, loser.speechLines, loserFinalId);\n          return { text, targetId: loserFinalId };\n        }\n\n        const shouldTaunt = loser.name && rngRef.current() < 0.5; // 50% chance for winner to taunt loser if loser has a name\n\n        if (shouldTaunt) {\n          // Winner taunts the named loser\n          const king = findK(B1, winnerColor);\n          const kingVisible =\n            king && visibility(B1, \"playing\", currentBoardSize, currentLevelConfig?.fogRows ?? 2)[king.y]?.[king.x]; // Safe navigation\n          const targetId = king && kingVisible ? king.p.id : winnerFinalId; // Speaker is the winner or their king\n          const text = randWithoutRecent(\n            rngRef.current,\n            NAMED_PHRASES[winnerColor].taunt,\n            targetId\n          ).replace(\"[UnitName]\", loser.name!);\n          return { text, targetId };\n        } else if (winner.name) {\n          // Winner praises themself\n          const text = randWithoutRecent(\n            rngRef.current,\n            NAMED_PHRASES[winnerColor].win,\n            winnerFinalId\n          ).replace(\"[UnitName]\", winner.name);\n          return { text, targetId: winnerFinalId }; // Speaker is the winner (final piece)\n        } else if (loser.name) {\n          // Ensure loser name exists before proceeding\n          // This case handles when only the loser is named and we didn't taunt\n          // Find the winner's king or the winner piece to speak\n          const king = findK(B1, winnerColor);\n          const kingVisible =\n            king && visibility(B1, \"playing\", currentBoardSize, currentLevelConfig?.fogRows ?? 2)[king.y]?.[king.x]; // Safe navigation\n          const speakerId = king && kingVisible ? king.p.id : winnerFinalId;\n          const text = randWithoutRecent(\n            rngRef.current,\n            NAMED_PHRASES[loserColor].lose, // Use loser's lament phrase\n            speakerId\n          ).replace(\"[UnitName]\", loser.name!); // Referencing the loser by name\n          return { text, targetId: speakerId }; // Winner/King speaks the lament\n        }\n      }\n\n      // Priority 3: Generic phrase (50% chance if no swing and no named units)\n      if (rngRef.current() < 0.5) {\n        const king = findK(B1, winnerColor);\n        const kingVisible =\n          king && visibility(B1, \"playing\", currentBoardSize, currentLevelConfig?.fogRows ?? 2)[king.y]?.[king.x]; // Safe navigation\n        const targetId = king && kingVisible ? king.p.id : winnerFinalId;\n        const text = randWithoutRecent(rngRef.current, PHRASES[winnerColor].win, targetId);\n        return { text, targetId };\n      }\n\n      return null; // No speech bubble this time\n    };\n\n    const speechContent = getSpeechBubbleContent();\n    if (speechContent) {\n      setSpeechBubble({ ...speechContent, id: Math.random() });\n    }\n\n    setB(B1);\n    decrementStunFor(turn, B1, currentBoardSize); // tick down the mover's stun at END of their turn\n    \n    console.log(\"=== FINISH PIECE COMBAT ===\");\n    console.log(\"Current turn:\", turn);\n    console.log(\"Switching turn to:\", turn === W ? \"BLACK\" : \"WHITE\");\n    \n    setTurn(turn === W ? B : W);\n    setFx(null);\n    setRerollState(null);\n    setDestroyedPieceIds([]);\n    setPhase(\"playing\");\n  }\n\n  const handleStartBattle = () => {\n    // TRIGGER: Start level music when battle actually begins\n    musicManagerRef.current?.playLevelMusic(campaign.level);\n    \n    // Start battle immediately - no confirmation needed (confirmation happens on COMPLETE DEPLOYMENT)\n    setPhase(\"playing\");\n    setMarketViewVisible(true); // Reset to market visible for next market phase\n  };\n\n  // Shared rules content component\n  const RulesContent = ({ \n    showItemInfo, \n    setShowItemInfo,\n    className = \"bg-stone-950/95 rounded-2xl p-6 max-h-[80vh] overflow-y-auto\",\n    headingClass = \"text-lg\"\n  }: { \n    showItemInfo: boolean; \n    setShowItemInfo: (val: boolean | ((prev: boolean) => boolean)) => void;\n    className?: string;\n    headingClass?: string;\n  }) => {\n    const itemOrder: (keyof typeof ITEM_DESCRIPTIONS)[] = [\n      \"sword\",\n      \"shield\",\n      \"lance\",\n      \"torch\",\n      \"bow\",\n      \"staff\",\n      \"crystal_ball\",\n      \"disguise\",\n      \"scythe\",\n      \"banner\",\n      \"curse\",\n      \"skull\",\n    ];\n\n    return (\n      <div className={className}>\n        <div className={`font-semibold mb-2 ${headingClass}`}>Combat</div>\n        <ul className=\"ml-5 list-disc space-y-1 text-sm mb-4\">\n          <li>Pieces roll 1d6. Attacker wins on  roll.</li>\n          <li>\n            Support: +1 for each friendly piece also attacking the square.\n          </li>\n          <li>\n            King always attacks with Advantage (roll 2, keep highest).\n          </li>\n          <li>Stunned pieces always roll 1.</li>\n          <li>\n             Veterans: Units that kill 5+ enemy units always roll with\n            advantage (both attacking and defending).\n          </li>\n        </ul>\n        <div className={`font-semibold mt-3 mb-1 ${headingClass}`}>Terrain</div>\n        <ul className=\"ml-5 list-disc space-y-1 text-sm mb-4\">\n          <li>Forest (): Defender gets +1 to their roll.</li>\n          <li>Water (): Defender gets -1 to their roll.</li>\n          <li>Rock (): Blocks movement. Destroy with a roll of 5+.</li>\n        </ul>\n        <div className={`font-semibold mt-3 mb-1 flex justify-between items-center ${headingClass}`}>\n          Items\n          <button\n            onClick={() => setShowItemInfo((s) => !s)}\n            className=\"px-2 py-1 text-xs bg-amber-950 hover:bg-amber-900 rounded\"\n          >\n            {showItemInfo ? \"Hide\" : \"Show\"}\n          </button>\n        </div>\n        {showItemInfo && (\n          <ul className=\"ml-5 list-disc space-y-1 text-sm mb-4\">\n            {itemOrder.map((key) => (\n              <li key={key}>{ITEM_DESCRIPTIONS[key]}</li>\n            ))}\n          </ul>\n        )}\n        <div className={`font-semibold mt-3 mb-1 ${headingClass}`}>Blessings</div>\n        <ul className=\"ml-5 list-disc space-y-1 text-sm\">\n          <li>{ITEM_DESCRIPTIONS[\"prayer_die\"]}</li>\n        </ul>\n      </div>\n    );\n  };\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const GameInfo = () => {\n    const [showItemInfo, setShowItemInfo] = useState(false);\n\n    return (\n      <div className=\"space-y-3\">\n        <h1 className=\"text-2xl font-semibold\">Game Info</h1>\n        {showRules && (\n          <RulesContent \n            showItemInfo={showItemInfo} \n            setShowItemInfo={setShowItemInfo}\n            className=\"bg-stone-950/70 rounded-2xl p-3\"\n            headingClass=\"\"\n          />\n        )}\n      </div>\n    );\n  };\n\n  const MoveHistoryLog = ({\n    history,\n    phase,\n    turn,\n    win,\n    phrase,\n  }: {\n    history: MoveRecord[];\n    phase: Phase;\n    turn: Color;\n    win: Color | null;\n    phrase: string | null;\n  }) => {\n    const logRef = useRef<HTMLDivElement>(null);\n    const prevHistoryLengthRef = useRef<number>(0);\n\n    useEffect(() => {\n      if (logRef.current) {\n        const currentLength = history.length;\n        const prevLength = prevHistoryLengthRef.current;\n        \n        // Only auto-scroll when history length actually increased (new moves added)\n        // This prevents scroll resets when speech bubbles cause re-renders\n        if (currentLength > prevLength) {\n          logRef.current.scrollTop = logRef.current.scrollHeight;\n        }\n        \n        prevHistoryLengthRef.current = currentLength;\n      }\n    }, [history]);\n\n    const movePairs: { turn: number; w?: MoveRecord; b?: MoveRecord }[] = [];\n    // Filter out any null/undefined entries before processing\n    history.filter((move): move is MoveRecord => move != null).forEach((move) => {\n      let pair = movePairs.find((p) => p.turn === move.turnNumber);\n      if (!pair) {\n        pair = { turn: move.turnNumber };\n        movePairs.push(pair);\n      }\n      if (move.color === \"w\") pair.w = move;\n      else pair.b = move;\n    });\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const lastTurnNumber =\n      movePairs.length > 0 ? movePairs[movePairs.length - 1].turn : 0;\n\n    // Polyfill findLastIndex if it's not present (for environments < ES2023)\n    function findLastIndex<T>(\n      arr: T[],\n      predicate: (value: T, index: number, obj: T[]) => boolean\n    ): number {\n      for (let i = arr.length - 1; i >= 0; i--) {\n        if (predicate(arr[i], i, arr)) return i;\n      }\n      return -1;\n    }\n\n    const lastWhiteMoveIndex = findLastIndex(history, (m) => m != null && m.color === \"w\");\n    const lastBlackMoveIndex = findLastIndex(history, (m) => m != null && m.color === \"b\");\n\n    return (\n      <div className=\"mt-4 bg-consistent-dark-brown rounded-2xl p-3\" style={{\n        width: '296px'\n      }}>\n        {/* Your Turn indicator at top */}\n        <div className=\"mb-2 w-full flex justify-center\">\n          <div\n            className={`px-3 py-1 rounded-full font-semibold text-sm ${\n              win\n                ? \"bg-gray-200 text-black\"\n                : turn === W\n                ? \"bg-white text-black\"\n                : \"bg-gray-700 text-white\"\n            }`}\n          >\n            {win\n              ? `Winner: ${win === W ? \"White\" : \"Black\"}${phrase ? \"  \" + phrase : \"\"}`\n              : turn === W\n              ? \"Your Turn  White\"\n              : \"Bot Turn  Black\"}\n          </div>\n        </div>\n        <div ref={logRef} className=\"max-h-96 overflow-y-auto pr-2\">\n          {movePairs.map((pair, index) => {\n            const isLastWhiteAnimating =\n              phase === \"base\" &&\n              !!pair.w &&\n              history[lastWhiteMoveIndex]?.turnNumber === pair.turn &&\n              history[lastBlackMoveIndex]?.turnNumber !== pair.turn;\n            const isLastBlackAnimating =\n              phase === \"base\" &&\n              !!pair.b &&\n              history[lastBlackMoveIndex]?.turnNumber === pair.turn;\n\n            return (\n              <div\n                key={pair.turn}\n                className=\"grid grid-cols-[2rem_1fr_1fr] gap-x-2 items-start border-b border-amber-900 py-1.5\"\n              >\n                <div className=\"text-sm text-amber-200 pt-1\">{pair.turn}.</div>\n                <MoveCell move={pair.w} isAnimating={isLastWhiteAnimating} />\n                <MoveCell move={pair.b} isAnimating={isLastBlackAnimating} />\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  const MoveCell = ({\n    move,\n    isAnimating,\n  }: {\n    move?: MoveRecord;\n    isAnimating: boolean;\n  }) => {\n    if (!move) return <div />;\n\n    // Ensure move.piece exists and type is valid before accessing GL\n    const pieceType = move.piece?.type;\n    const pieceColor = move.piece?.color as \"w\" | \"b\";\n    const glyphSet = GL[pieceType as keyof typeof GL];\n    const glyph = glyphSet && pieceColor in glyphSet ? glyphSet[pieceColor as keyof typeof glyphSet] : \"?\";\n\n    const showGlyph = move.piece.type !== \"P\";\n\n    const pctColorClass = move.combat\n      ? move.combat.isSupported\n        ? \"text-blue-400\"\n        : move.combat.winPercent < 50\n        ? \"text-orange-400\"\n        : \"text-green-400\"\n      : \"\";\n\n    return (\n      <div className=\"flex items-center gap-2 flex-wrap\">\n        <div\n          className=\"font-bold text-white text-base flex items-center shrink-0\"\n          title={move.piece ? `${PIECE_NAMES[move.piece.type]}` : \"\"} // Check if move.piece exists\n        >\n          {showGlyph && (\n            <span\n              className=\"text-xl mr-0.5\"\n              style={{\n                fontFamily:\n                  '\"Noto Sans Symbols 2\", \"Segoe UI Symbol\", \"DejaVu Sans\", system-ui, sans-serif',\n              }}\n            >\n              {glyph}\n            </span>\n          )}\n          {/* Show fog icon only for opponent's moves ending in fog */}\n          <span>{move.inFog && move.color === B ? \"\" : move.notation}</span>\n        </div>\n        {move.combat && (\n          <div className=\"flex items-center gap-1.5\">\n            <span className={`text-xs font-semibold ${pctColorClass}`}>\n              {move.combat.winPercent}%\n            </span>\n            <div className=\"flex items-center gap-1 ok px-1.5 py-0.5 rounded-md\">\n              {move.combat.attackerRolls.map((roll, i) => (\n                <DiceD6 key={i} rolling={isAnimating} result={roll} size={16} />\n              ))}\n            </div>\n            {move.rerolledBy === \"attacker\" && (\n              <span className=\"text-sm\"></span>\n            )}\n            {\n              move.combat.defenderRolls === null ? ( // Obstacle combat check\n                <div className=\"flex items-center gap-1\">\n                  <span className=\"text-xs text-amber-300\">vs</span>\n                  <span\n                    className=\"text-xl\"\n                    style={{\n                      fontFamily:\n                        '\"Noto Sans Symbols 2\", \"Segoe UI Symbol\", \"DejaVu Sans\", system-ui, sans-serif',\n                    }}\n                  >\n                    {(() => {\n                      const obstacleType = move.combat?.obstacleType || \"rock\";\n                      if (obstacleType === \"rock\") return GL.ROCK.n;\n                      if (obstacleType === \"courtier\") return GL.COURTIER.n;\n                      if (obstacleType === \"column\") return GL.COLUMN.n;\n                      if (obstacleType === \"gate\") return GL.GATE.n;\n                      if (obstacleType === \"bell\") return GL.BELL.n;\n                      return GL.ROCK.n; // Fallback\n                    })()}\n                  </span>\n                </div>\n              ) : move.combat.defenderRolls ? ( // Piece combat\n                <>\n                  <span className=\"text-xs text-amber-300\">vs</span>\n                  <div className=\"flex items-center gap-1 bad px-1.5 py-0.5 rounded-md\">\n                    {move.combat.defenderRolls.map((roll, i) => (\n                      <DiceD6\n                        key={i}\n                        rolling={isAnimating}\n                        result={roll}\n                        size={16}\n                      />\n                    ))}\n                  </div>\n                  {move.rerolledBy === \"defender\" && (\n                    <span className=\"text-sm\"></span>\n                  )}\n                </>\n              ) : null /* Handles cases where defenderRolls might be undefined just in case */\n            }\n          </div>\n        )}\n      </div>\n    );\n  };\n\n\n\n  const [modalPosition, setModalPosition] = useState<{\n    top: number;\n    left: number;\n  } | null>(null);\n  const [winModalPosition, setWinModalPosition] = useState<{\n    top: number;\n    left: number;\n  } | null>(null);\n\n  useEffect(() => {\n    if (showMarketConfirm && startBattleBtnRef.current) {\n      const buttonRect = startBattleBtnRef.current.getBoundingClientRect();\n      // Calculate center of the button\n      const top = buttonRect.top + buttonRect.height / 2;\n      const left = buttonRect.left + buttonRect.width / 2;\n      setModalPosition({ top, left });\n    } else {\n      setModalPosition(null);\n    }\n  }, [showMarketConfirm, phase]); // Re-calculate if showMarketConfirm or phase changes\n\n  useEffect(() => {\n    if (win && boardRef.current) {\n      const boardRect = boardRef.current.getBoundingClientRect();\n      const top = boardRect.top + boardRect.height / 2;\n      const left = boardRect.left + boardRect.width / 2;\n      setWinModalPosition({ top, left });\n    } else {\n      setWinModalPosition(null);\n    }\n  }, [win]);\n\n  const handleReroll = (useReroll: boolean) => {\n    if (!rerollState) return;\n\n    const { from, to, kind } = rerollState;\n    const p = Bstate[from.y]?.[from.x]; // Safe navigation\n    if (!p) return;\n\n    if (useReroll) {\n      setPrayerDice(prayerDice - 1);\n      // Update campaign state\n      setCampaign((prev) => ({ ...prev, prayerDice: prev.prayerDice - 1 }));\n      sfx.prayer();\n\n      const isPlayerAttacking = p.color === W;\n\n      // Both dice will be rerolled, so set reroll target to null to animate both\n      setRerollTarget(null);\n\n      if (kind === \"obstacle\") {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const obstacleType = rerollState?.obstacleType || obstacles[to.y]?.[to.x] || \"rock\";\n        const lanceLungeUsed =\n          p.equip === \"lance\" &&\n          to.y === from.y + (p.color === W ? 1 : -1) * 2 &&\n          to.x === from.x;\n        const out = resolveObstacle(\n          rngRef.current,\n          p,\n          Bstate,\n          Tstate,\n          obstacles,\n          from,\n          to,\n          lanceLungeUsed,\n          currentBoardSize\n        );\n\n        // Update history AFTER getting new rolls\n        setMoveHistory((hist) => {\n          const newHistory = [...hist];\n          const lastMove = newHistory[newHistory.length - 1];\n          if (lastMove && lastMove.combat) {\n            lastMove.combat.attackerRolls = out.a.rolls; // Update with NEW rolls\n            lastMove.rerolledBy = \"attacker\";\n          }\n          return newHistory;\n        });\n\n        setFx({ ...fx, a: out.a, ok: out.ok, adv: out.adv, isReroll: true });\n\n        // Update display value to show the new roll\n        setDispA(out.a.total);\n\n        setTimeout(\n          () => finishRockCombat(out.ok, lanceLungeUsed, from, to),\n          TMG.rerollFinish\n        );\n      } else {\n        // 'piece'\n        const t = Bstate[to.y]?.[to.x]; // Safe navigation\n        if (!t) return;\n        const lanceLungeUsed =\n          p.equip === \"lance\" &&\n          to.y === from.y + (p.color === W ? 1 : -1) * 2 &&\n          to.x === from.x;\n\n        // Reroll BOTH attacker and defender dice\n        let newA: number, newD: number, newRollsA: number[], newRollsD: number[];\n\n        const attackerHadAdvantage =\n          fx?.kind === \"piece\" &&\n          Array.isArray(fx.a?.rolls) &&\n          fx.a.rolls.length > 1;\n        const defenderHadAdvantage =\n          fx?.kind === \"piece\" &&\n          Array.isArray(fx.d?.rolls) &&\n          fx.d.rolls.length > 1;\n\n        // Reroll attacker's dice\n        const useAdvA = attackerHadAdvantage || p.type === \"K\" || lanceLungeUsed;\n        newRollsA = [d6(rngRef.current)];\n        if (useAdvA) newRollsA.push(d6(rngRef.current));\n        newA = useAdvA ? Math.max(...newRollsA) : newRollsA[0];\n\n        // Reroll defender's dice (preserve veteran advantage if present)\n        newRollsD = [d6(rngRef.current)];\n        if (defenderHadAdvantage) newRollsD.push(d6(rngRef.current));\n        newD = defenderHadAdvantage ? Math.max(...newRollsD) : newRollsD[0];\n\n        // Update history AFTER getting new rolls (both attacker and defender rerolled)\n        setMoveHistory((hist) => {\n          const newHistory = [...hist];\n          const lastMove = newHistory[newHistory.length - 1];\n          if (lastMove && lastMove.combat) {\n            lastMove.combat.attackerRolls = newRollsA; // Update with NEW rolls\n            lastMove.combat.defenderRolls = newRollsD; // Update with NEW rolls\n            lastMove.rerolledBy = isPlayerAttacking ? \"attacker\" : \"defender\";\n          }\n          return newHistory;\n        });\n\n        // Update both attacker and defender fx since both are rerolled\n        const newFxA = {\n          ...fx.a,\n          base: newA,\n          total: newA + fx.a.mods.reduce((s: number, m: any) => s + m.value, 0),\n          rolls: newRollsA,\n        };\n        const newFxD = {\n          ...fx.d,\n          base: newD,\n          total: newD + fx.d.mods.reduce((s: number, m: any) => s + m.value, 0),\n          rolls: newRollsD,\n        };\n        const newWin = newFxA.total >= newFxD.total;\n\n        setFx({ ...fx, a: newFxA, d: newFxD, win: newWin, adv: useAdvA, isReroll: true });\n\n        // Update display values to trigger animation for both dice\n        // The rerolled dice will show the new value, the other will bump/settle\n        setDispA(newFxA.total);\n        setDispD(newFxD.total);\n\n        setTimeout(() => {\n          const loser = newWin\n            ? isPlayerAttacking\n              ? t\n              : p\n            : isPlayerAttacking\n            ? p\n            : t;\n          const winner = newWin\n            ? isPlayerAttacking\n              ? p\n              : t\n            : isPlayerAttacking\n            ? t\n            : p;\n\n          if (loser) {\n            let idsToDestroy = [loser.id];\n            if (newWin && loser.equip === \"skull\" && winner) {\n              idsToDestroy.push(winner.id);\n            }\n            setDestroyedPieceIds(idsToDestroy);\n          }\n          if (newWin) {\n            sfx.capture();\n          } else {\n            sfx.combatLose();\n          }\n\n          setTimeout(() => {\n            finishPieceCombat({ win: newWin }, lanceLungeUsed, from, to);\n          }, 400);\n        }, TMG.rerollFinish);\n      }\n    } else {\n      // Player chose not to reroll\n      const lanceLungeUsed =\n        p.equip === \"lance\" &&\n        to.y === from.y + (p.color === W ? 1 : -1) * 2 &&\n        to.x === from.x;\n      if (kind === \"obstacle\") {\n        finishRockCombat(fx.ok, lanceLungeUsed, from, to);\n      } else {\n        const loser = fx.win ? Bstate[to.y]?.[to.x] : Bstate[from.y]?.[from.x]; // Safe navigation\n        const winner = fx.win ? Bstate[from.y]?.[from.x] : Bstate[to.y]?.[to.x]; // Safe navigation\n        if (loser) {\n          let idsToDestroy = [loser.id];\n          if (fx.win && loser.equip === \"skull\" && winner) {\n            idsToDestroy.push(winner.id);\n          }\n          setDestroyedPieceIds(idsToDestroy);\n          if (loser.color === W) {\n            sfx.combatLose();\n          } // Play sound only if player lost\n          // Skull death sound is handled in finishPieceCombat now\n          setTimeout(() => {\n            finishPieceCombat(fx, lanceLungeUsed, from, to);\n          }, 400);\n        } else {\n          // Should not happen in piece vs piece, but just in case\n          finishPieceCombat(fx, lanceLungeUsed, from, to);\n        }\n      }\n    }\n    setRerollState(null);\n    setPhase(\"playing\");\n  };\n\n  const handleDisguiseChoice = (breakDisguise: boolean) => {\n    if (!disguisePopupState) return;\n\n    const { x, y } = disguisePopupState;\n    const B1 = cloneB(Bstate);\n    const p = B1[y]?.[x]; // Safe navigation\n\n    if (!p || !p.originalType) return;\n\n    if (breakDisguise) {\n      sfx.reveal();\n      p.type = p.originalType;\n      p.originalType = undefined;\n      p.equip = undefined;\n      setB(B1);\n      setSel({ x, y });\n      // We need to calculate moves based on the *newly revealed* piece on the new board state\n      setLegal(moves(B1, Tstate, obstacles, x, y, currentBoardSize));\n    } else {\n      setSel({ x, y });\n      setLegal(moves(B1, Tstate, obstacles, x, y, currentBoardSize));\n    }\n\n    setDisguisePopupState(null);\n    setPhase(\"playing\");\n  };\n\n  const disguisedPiece = disguisePopupState\n    ? Bstate[disguisePopupState.y]?.[disguisePopupState.x] // Safe navigation\n    : null;\n  const originalPieceType = disguisedPiece?.originalType;\n\n  // --- Roguelike handlers ---\n  const handleTryAgain = () => {\n    // TRIGGER: Stop music when resetting game\n    musicManagerRef.current?.stopMusic();\n    \n    // Fully reset run and return to Intro popup\n    // Clear localStorage to remove all saved data\n    localStorage.removeItem(\"dicechess_campaign_v1\");\n    \n    setIsRetryingLevel(false);\n    setShowIntro(true);\n    setShowTransition(false);\n    setCurrentStoryCard(null);\n    setStoryCardQueue([]);\n    setStoryOutcome(null);\n    setPhase(\"market\");\n    setMarketViewVisible(true); // Reset to market visible when entering market phase\n    setWin(null);\n    setMarketPoints(0);\n    setUnspentGold(0);\n    setKilledEnemyPieces([]);\n    setPlayerPiecesLost([]);\n    setThisLevelUnlockedItems([]);\n    setObjectiveStates([]);\n    setActiveObjectiveIds([]);\n    setNewlyCompletedObjectives([]);\n    setNewlyFailedObjectives([]);\n    setLastVictoryInfo(null);\n    setCampaign({\n      level: 1,\n      whiteRoster: [],\n      prayerDice: 2,\n      unlockedItems: [],\n      freeUnits: new Map(),\n      freeItems: new Map(),\n      tutorialsSeen: [],\n    });\n    // Clear tutorial-related localStorage flags for new game\n    localStorage.removeItem(\"dicechess_first_combat_tutorial_used\");\n    // Trigger fresh init\n    setSeed(new Date().toISOString() + \"-newgame\");\n  };\n\n  const handleRetryLevel = () => {\n    if (!levelStartSnapshot) {\n      handleTryAgain();\n      return;\n    }\n\n    setIsRetryingLevel(true);\n    localStorage.setItem(\n      \"dicechess_campaign_v1\",\n      JSON.stringify({\n        ...levelStartSnapshot,\n        freeUnits: Array.from(levelStartSnapshot.freeUnits.entries()),\n        freeItems: Array.from(levelStartSnapshot.freeItems.entries()),\n      })\n    );\n\n    setShowIntro(false);\n    setShowTransition(false);\n    setStoryOutcome(null);\n    setCurrentStoryCard(null);\n    setStoryCardQueue([]);\n    setWin(null);\n    setKilledEnemyPieces([]);\n    setThisLevelUnlockedItems([]);\n    setDestroyedCourtiers(0);\n    setObjectiveStates([]);\n    setActiveObjectiveIds([]);\n    setNewlyCompletedObjectives([]);\n    setNewlyFailedObjectives([]);\n    setLastVictoryInfo(null);\n    setMarketPoints(0);\n    setShowVictoryDetails(false);\n    setUnspentGold(levelStartSnapshot.gold);\n\n    loadLevelConfig(levelStartSnapshot.level).then((config) => {\n      setCurrentLevelConfig(config);\n      setCampaign({\n        level: levelStartSnapshot.level,\n        whiteRoster: [...levelStartSnapshot.whiteRoster],\n        prayerDice: levelStartSnapshot.prayerDice,\n        unlockedItems: [...levelStartSnapshot.unlockedItems],\n        freeUnits: new Map(levelStartSnapshot.freeUnits),\n        freeItems: new Map(levelStartSnapshot.freeItems),\n        tutorialsSeen: [...levelStartSnapshot.tutorialsSeen],\n        difficulty: levelStartSnapshot.difficulty,\n      });\n      setSeed(new Date().toISOString() + \"-retry\");\n    });\n  };\n\n  // Comprehensive reset function for dev tools - resets everything to fresh state\n  const handleResetEverything = () => {\n    // TRIGGER: Stop music when resetting everything (dev tool)\n    musicManagerRef.current?.stopMusic();\n    \n    // Clear all localStorage items\n    localStorage.removeItem(\"dicechess_campaign_v1\");\n    localStorage.removeItem(\"dicechess_first_combat_tutorial_used\");\n    localStorage.removeItem(\"dicechess_tutorial_popups_enabled\");\n    \n    // Reset all game state\n    setIsRetryingLevel(false);\n    setShowTransition(false);\n    setShowIntro(true);\n    setCurrentStoryCard(null);\n    setStoryCardQueue([]);\n    setStoryOutcome(null);\n    setPhase(\"market\");\n    setMarketViewVisible(true);\n    setWin(null);\n    setMarketPoints(100); // Reset to starting gold\n    setUnspentGold(0);\n    setKilledEnemyPieces([]);\n    setThisLevelUnlockedItems([]);\n    setObjectiveStates([]);\n    setActiveObjectiveIds([]);\n    setNewlyCompletedObjectives([]);\n    setNewlyFailedObjectives([]);\n    setLastVictoryInfo(null);\n    setCampaign({\n      level: 1,\n      whiteRoster: [],\n      prayerDice: 2,\n      unlockedItems: [],\n      freeUnits: new Map(),\n      freeItems: new Map(),\n      tutorialsSeen: [],\n    });\n    \n    // Reset tutorial settings to default (enabled)\n    setEnableTutorialPopups(true);\n    \n    // Reset other UI state\n    setShowVictoryDetails(false);\n    setShowDevPanel(false);\n    \n    // Trigger fresh init\n    setSeed(new Date().toISOString() + \"-newgame\");\n  };\n\n  // Function to show end-of-demo cards (used by both handleNextLevel and dev tools)\n  const showEndOfDemoCards = () => {\n    // Create End-of-Story story cards\n    const endOfStoryCard: StoryCardType = {\n      id: \"end_of_story\",\n      bodyText: \"The King's enemies are **scattered**, his dominion restored.\",\n      image: `${process.env.PUBLIC_URL}/demo_end_EdranWins.png`,\n      leftChoice: {\n        text: \"Sounds too good to be true...!\",\n        events: [{ type: \"next_card\", cardId: \"middle_card\" }],\n        overlayColor: \"rgba(101, 67, 33, 0.85)\",\n      },\n      rightChoice: {\n        text: \"Peace at last!\",\n        events: [{ type: \"next_card\", cardId: \"middle_card\" }],\n        overlayColor: \"rgba(101, 67, 33, 0.85)\",\n      },\n    };\n\n    const middleCard: StoryCardType = {\n      id: \"middle_card\",\n      bodyText: \"But with the Bell of Names destroyed... deep within the vaults beneath the castle, **something** stirs... calling out.. **Eoohhmeerr**.\",\n      image: `${process.env.PUBLIC_URL}/demo_end_horror.png`,\n      leftChoice: {\n        text: \"...maybe Morcant was onto something.\",\n        events: [{ type: \"next_card\", cardId: \"thanks_for_playing\" }],\n        overlayColor: \"rgba(101, 67, 33, 0.85)\",\n      },\n      rightChoice: {\n        text: \"...Dad?!\",\n        events: [{ type: \"next_card\", cardId: \"thanks_for_playing\" }],\n        overlayColor: \"rgba(101, 67, 33, 0.85)\",\n      },\n    };\n\n    const thanksForPlayingCard: StoryCardType = {\n      id: \"thanks_for_playing\",\n      bodyText: \"Thank **you** for playing this demo!\",\n      image: `${process.env.PUBLIC_URL}/demo_end_sunpowder.png`,\n      leftChoice: {\n        text: \"It was mid\",\n        events: [{ type: \"reset_to_title\" }],\n        overlayColor: \"rgba(147, 51, 234, 0.85)\",\n      },\n      rightChoice: {\n        text: \"I enjoyed it!\",\n        events: [{ type: \"reset_to_title\" }],\n      },\n    };\n\n    // Clear victory popup and queue the end-of-story cards\n    setShowVictoryDetails(false);\n    setWin(null);\n    setKilledEnemyPieces([]);\n    setThisLevelUnlockedItems([]);\n    \n    // Queue the story cards\n    setStoryCardQueue([endOfStoryCard, middleCard, thanksForPlayingCard]);\n    // Show the first card immediately\n    setCurrentStoryCard(endOfStoryCard);\n    \n    // TRIGGER: Start end game music\n    musicManagerRef.current?.playEndGameMusic();\n  };\n\n  const handleNextLevel = () => {\n    // Check if this is level 5 - if so, show end-of-story cards instead of progressing\n    if (campaign.level === 5) {\n      showEndOfDemoCards();\n      return;\n    }\n\n    // Normal level progression (for levels 1-4)\n    // Calculate ransom gold (35% of regular pieces and items, excluding Kings)\n    // Count purses separately (25g each, not subject to ransom %)\n    const purseCount = killedEnemyPieces.filter((kp) => kp.piece.equip === \"purse\").length;\n    const purseGold = purseCount * 25;\n\n    const regularValue = killedEnemyPieces.reduce((sum, killedPiece) => {\n      const piece = killedPiece.piece;\n\n      // Skip Kings - they get full value, not ransom percentage\n      if (piece.type === \"K\") return sum;\n\n      // Regular piece values\n      const pieceValue = VAL[piece.type as keyof typeof VAL] || 0;\n\n      let itemValue = 0;\n      if (piece.equip) {\n        if (piece.equip !== \"purse\") {\n          itemValue = ITEM_COSTS[piece.equip as keyof typeof ITEM_COSTS] || 0;\n        }\n      }\n      return sum + pieceValue + itemValue;\n    }, 0);\n    const ransomGold = Math.floor(regularValue * 0.35);\n\n    // Calculate King gold (full value, not ransom percentage)\n    const kingGold = killedEnemyPieces.reduce((sum, killedPiece) => {\n      const piece = killedPiece.piece;\n      if (piece.type === \"K\" && killedPiece.defeatType) {\n        switch (killedPiece.defeatType) {\n          case \"beheaded\":\n            return sum + 20;\n          case \"dishonored\":\n            return sum + 10;\n          case \"checkmate\":\n            return sum + 40;\n        }\n      }\n      return sum;\n    }, 0);\n\n    // Calculate objective bonus gold (only for active objectives)\n    const activeObjectives = currentLevelConfig?.optionalObjectives?.filter(\n      obj => activeObjectiveIds.includes(obj.id)\n    ) || [];\n    const objectiveBonus = calculateObjectiveBonus(\n      activeObjectives,\n      objectiveStates,\n      campaign.difficulty\n    );\n\n    const totalGoldEarned = ransomGold + purseGold + kingGold + objectiveBonus;\n\n    // Total gold to carry over = current unspent + ransom + king gold + objective bonus\n    const totalGoldToCarry = marketPoints + totalGoldEarned;\n\n    setUnspentGold(totalGoldToCarry); // Carry over all gold to next level\n    setShowVictoryDetails(false); // Reset for next level\n    setWin(null); // Clear win state\n    setKilledEnemyPieces([]); // Clear killed pieces for next level\n    setThisLevelUnlockedItems([]); // Clear unlocked items for next level\n    setObjectiveStates([]); // Clear objectives for next level\n    setActiveObjectiveIds([]); // Clear active objectives\n    setNewlyCompletedObjectives([]); // Clear completed objectives\n    setNewlyFailedObjectives([]); // Clear failed objectives\n    setPlayerPiecesLost([]);\n    setLastVictoryInfo(null);\n    \n    // TRIGGER: Stop music when transitioning to next level's story cards\n    musicManagerRef.current?.stopMusic();\n    \n    const nextLevel = campaign.level + 1;\n    setCampaign((prev) => ({\n      ...prev,\n      level: nextLevel,\n      unlockedItems: prev.unlockedItems || [], // Preserve unlocked items\n    }));\n    // Generate a new seed that incorporates the level to ensure variation\n    setSeed(new Date().toISOString() + `-level-${nextLevel}`);\n    // useEffect watching seed AND campaign.level will call init with the correct (new) level and the saved unspentGold\n    // init will load story cards into storyCardQueue, and we'll show the first one immediately\n  };\n\n  return (\n    <div className=\"min-h-screen text-white p-6 flex items-center justify-center relative\">\n      <MusicManager\n        ref={musicManagerRef}\n        musicMuted={musicMuted}\n      />\n      {showIntro && !isRetryingLevel && <MainMenu onEnter={handleIntroComplete} />}\n      {showDifficultyTransition && (\n        <div className=\"difficulty-transition-overlay\">\n          <div className=\"difficulty-transition-spiral\" />\n          <div className=\"difficulty-transition-text-container\">\n            {(difficultyTransitionLine === 0 || difficultyTransitionLine === 'fade1') && (\n              <div className={`difficulty-transition-line difficulty-transition-line-1 ${difficultyTransitionLine === 'fade1' ? 'fading' : ''}`}>\n                {difficultyTransitionLine === 0 ? difficultyTransitionText : \"Murky Kingdoms' Highkeep.\"}\n              </div>\n            )}\n            {(difficultyTransitionLine === 1 || difficultyTransitionLine === 'fade2') && (\n              <div className={`difficulty-transition-line difficulty-transition-line-2 ${difficultyTransitionLine === 'fade2' ? 'fading' : ''}`}>\n                {difficultyTransitionLine === 1 ? difficultyTransitionText : \"Year of the See, 1165.\"}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n      {showTransition && (\n        <div className=\"transition-overlay\">\n          <div className=\"transition-banner left\" />\n          <div className=\"transition-banner right\" />\n          <div className=\"transition-seal\">\n            <div className=\"transition-text\">To Arms!</div>\n          </div>\n        </div>\n      )}\n\n      {/* Game Rules Modal */}\n      {showRules && (\n        <div \n          className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[2000] p-4\"\n          onClick={(e) => {\n            // Close modal when clicking the backdrop\n            if (e.target === e.currentTarget) {\n              setShowRules(false);\n            }\n          }}\n        >\n          <div className=\"relative w-full max-w-2xl\" onClick={(e) => e.stopPropagation()}>\n            <button\n              onClick={() => setShowRules(false)}\n              className=\"absolute top-4 right-4 text-white hover:text-gray-300 text-2xl font-bold bg-stone-900 rounded-full w-8 h-8 flex items-center justify-center z-10\"\n              aria-label=\"Close Game Rules\"\n            >\n              \n            </button>\n            <div className=\"bg-stone-950 rounded-2xl p-6 max-h-[85vh] overflow-y-auto border-2 border-amber-900\">\n              <h2 className=\"text-3xl font-bold mb-6 text-center\">Game Rules</h2>\n              <RulesContent \n                showItemInfo={showRulesItemInfo}\n                setShowItemInfo={setShowRulesItemInfo}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Story Card System - only show if intro is dismissed and transition is not active */}\n      {!showIntro && !showDifficultyTransition && (currentStoryCard || storyOutcome) && (\n        <StoryCard\n          card={\n            currentStoryCard ||\n            storyOutcome?.lastCard || {\n              id: \"temp\",\n              bodyText: \"\",\n              leftChoice: { text: \"\", events: [] },\n              rightChoice: { text: \"\", events: [] },\n            }\n          }\n          onChoice={handleStoryEvents}\n          outcomeMode={\n            storyOutcome\n              ? {\n                  outcomes: storyOutcome.outcomes,\n                  onContinue: handleOutcomeAcknowledged,\n                }\n              : undefined\n          }\n          enableIdleAnimation={campaign.level === 1}\n        />\n      )}\n\n      <div style={{ display: (showIntro || showTransition || showDifficultyTransition || currentStoryCard || storyOutcome) ? \"none\" : \"block\" }}>\n        <div className=\"max-w-[2000px] mx-auto flex gap-8 justify-center flex-wrap md:flex-nowrap\">\n          <div className=\"order-1 w-full max-w-lg\">\n            {/* Market removed from here - now positioned over the board */}\n          </div>\n\n          {/* Quest Panel Column - Left side of board, always visible */}\n          <div className=\"order-2 w-80 flex-shrink-0 self-start\" style={{ marginTop: '84px' }}>\n            <div className=\"sticky top-4 flex flex-col gap-4\">\n              {/* Quest Panel with perspective - aligned with chessboard */}\n              <div className=\"stand\">\n                <div className=\"bg-gradient-to-b from-amber-900/40 via-stone-950/90 to-stone-950/95 rounded-lg shadow-2xl border-4 border-amber-700/50 backdrop-blur-sm overflow-hidden\">\n                {/* Decorative Top Border */}\n                <div className=\"h-2 bg-gradient-to-r from-amber-600 via-yellow-500 to-amber-600\"></div>\n                \n                {/* Quest Header */}\n                <div className=\"px-6 py-4 bg-gradient-to-r from-amber-800/30 to-amber-900/30 border-b-2 border-amber-700/40\">\n                  <h2 className=\"text-2xl font-bold text-center text-amber-200 tracking-wide\" style={{ fontFamily: 'serif', textShadow: '2px 2px 4px rgba(0,0,0,0.8)' }}>\n                     QUEST \n                  </h2>\n                </div>\n                \n                {/* Quest Narration */}\n                <div className=\"px-6 py-4 bg-gradient-to-b from-stone-950/50 to-stone-950/70\">\n                  <p className=\"text-amber-100 text-sm leading-relaxed text-center italic\" style={{ fontFamily: 'serif' }}>\n                    {currentLevelConfig?.questNarration || \"Secure victory through cunning and valor.\"}\n                  </p>\n                </div>\n                \n                {/* Divider */}\n                <div className=\"h-px bg-gradient-to-r from-transparent via-amber-600 to-transparent mx-6\"></div>\n                \n                {/* Victory Conditions */}\n                <div className=\"px-6 py-4\">\n                  <h3 className=\"text-amber-300 font-bold text-center mb-3 tracking-wider\" style={{ fontFamily: 'serif' }}>\n                    Victory Conditions\n                  </h3>\n                  <div className=\"flex flex-col gap-2 text-sm text-white\">\n                    {(currentLevelConfig?.displayedVictoryConditions || currentLevelConfig?.victoryConditions || []).map((condition: string, idx: number) => {\n                      const formatVictoryCondition = (condition: string) => {\n                        switch (condition) {\n                          case \"king_beheaded\":\n                            return \"Regicide\";\n                          case \"king_captured\":\n                            return \"King Captured (Checkmate)\";\n                          case \"king_dishonored\":\n                            return \"King Dishonored\";\n                          case \"king_escaped\":\n                            return \"King Crossing\";\n                          default:\n                            return condition;\n                        }\n                      };\n                      const getDescription = (condition: string) => {\n                        // Check for level-specific description first\n                        if (currentLevelConfig?.victoryConditionDescriptions?.[condition as keyof typeof currentLevelConfig.victoryConditionDescriptions]) {\n                          return currentLevelConfig.victoryConditionDescriptions[condition as keyof typeof currentLevelConfig.victoryConditionDescriptions];\n                        }\n                        // Default descriptions\n                        switch (condition) {\n                          case \"king_beheaded\":\n                            return \"Capture the enemy King in combat\";\n                          case \"king_captured\":\n                            return \"Checkmate the enemy King\";\n                          case \"king_dishonored\":\n                            return \"Capture the enemy King with a Staff\";\n                          case \"king_escaped\":\n                            return \"Bring your King to the golden squares\";\n                          default:\n                            return \"\";\n                        }\n                      };\n                      const description = getDescription(condition);\n                      const isConditionFulfilled = win === W && lastVictoryInfo?.condition === condition;\n                      return (\n                        <div key={idx} className=\"flex flex-col gap-1 bg-black/20 rounded p-2 border border-amber-700/30\">\n                          <div className=\"flex items-center gap-2\">\n                            <span\n                              className={`text-lg quest-objective-text ${isConditionFulfilled ? \"text-emerald-400\" : \"text-amber-400\"}`}\n                              aria-hidden=\"true\"\n                            >\n                              {isConditionFulfilled ? \"\" : \"\"}\n                            </span>\n                            <span className=\"font-semibold text-amber-100 quest-objective-text\">\n                              {formatVictoryCondition(condition)}\n                            </span>\n                          </div>\n                          {description && (\n                            <span className=\"text-gray-300 italic text-xs ml-6 quest-objective-text\">\n                              {description}\n                            </span>\n                          )}\n                        </div>\n                      );\n                    })}\n                  </div>\n                </div>\n                \n                {/* Optional Objectives Section */}\n                {currentLevelConfig?.optionalObjectives && activeObjectiveIds.length > 0 && (\n                  <>\n                    {/* Divider */}\n                    <div className=\"h-px bg-gradient-to-r from-transparent via-amber-600/50 to-transparent mx-6\"></div>\n                    \n                    <div className=\"px-6 py-4\">\n                      <h3 className=\"text-amber-300 font-bold text-center mb-3 tracking-wider\" style={{ fontFamily: 'serif' }}>\n                        Optional Objectives\n                      </h3>\n                      <div className=\"flex flex-col gap-2 text-sm text-white\">\n                        {currentLevelConfig.optionalObjectives\n                          .filter(obj => activeObjectiveIds.includes(obj.id))\n                          .map((objective, idx) => {\n                          const objectiveState = objectiveStates.find(s => s.objectiveId === objective.id);\n                          const isCompleted = objectiveState?.isCompleted || false;\n                          const isFailed = objectiveState?.isFailed || false;\n                          \n                          // Format description with dynamic parameters and progress\n                          const displayDescription = formatObjectiveDescription(\n                            objective,\n                            objectiveState,\n                            { difficulty: campaign.difficulty }\n                          );\n                          \n                          // Get reward based on difficulty\n                          const reward = campaign.difficulty && objective.rewardByDifficulty?.[campaign.difficulty] !== undefined\n                            ? objective.rewardByDifficulty[campaign.difficulty]\n                            : objective.reward;\n                          \n                          const frameClasses = isCompleted\n                            ? \"bg-blue-900/20 border-blue-500/40\"\n                            : isFailed\n                            ? \"bg-red-900/20 border-red-500/40\"\n                            : \"bg-black/20 border-amber-700/30\";\n\n                          return (\n                            <div \n                              key={idx} \n                              className={`flex flex-col gap-1 rounded p-2 border transition-all duration-300 ${frameClasses}`}\n                              style={{\n                                animation: isCompleted\n                                  ? 'objective-complete 0.5s ease-out'\n                                  : isFailed\n                                  ? 'objective-failed 0.5s ease-out'\n                                  : 'none'\n                              }}\n                            >\n                              <div className=\"flex items-center justify-between gap-2\">\n                                <div className=\"flex items-center gap-2\">\n                                <span \n                                  className={`text-lg transition-all duration-300 ${\n                                    isCompleted\n                                      ? 'text-blue-400'\n                                      : isFailed\n                                      ? 'text-red-400'\n                                      : 'text-orange-500'\n                                  }`}\n                                >\n                                  {isCompleted ? '' : isFailed ? '' : ''}\n                                </span>\n                                  <span\n                                    className={`font-semibold quest-objective-text ${\n                                      isCompleted\n                                        ? 'text-blue-200'\n                                        : isFailed\n                                        ? 'text-red-200 line-through'\n                                        : 'text-amber-100'\n                                    }`}\n                                  >\n                                    {displayDescription}\n                                  </span>\n                                </div>\n                                <span\n                                  className={`text-xs font-semibold quest-objective-reward ${\n                                    isFailed ? 'text-red-200 line-through' : 'text-yellow-300'\n                                  }`}\n                                >\n                                  +{reward}g\n                                </span>\n                              </div>\n                            </div>\n                          );\n                        })}\n                      </div>\n                    </div>\n                  </>\n                )}\n                \n                {/* Start Battle Button */}\n                {phase === \"market\" && currentLevelConfig?.marketEnabled !== false && (\n                  <div className=\"px-6 pb-6\">\n                    <button\n                      ref={startBattleBtnRef}\n                      onClick={() => {\n                        // Check for unspent gold and show confirmation if needed\n                        const marketEnabled = currentLevelConfig?.marketEnabled !== false;\n                        // Only show popup if market is enabled AND there's more than 20g unspent\n                        if (marketPoints > 20 && marketEnabled) {\n                          setShowMarketConfirm(true);\n                        } else {\n                          playBattleTrumpet();\n                          handleStartBattle();\n                        }\n                      }}\n                      className=\"w-full px-8 py-4 rounded-xl bg-emerald-600 hover:bg-emerald-500 text-white font-bold text-xl shadow-lg relative overflow-hidden\"\n                      style={{\n                        animation: 'pulse-glow 2s ease-in-out infinite',\n                        boxShadow: '0 0 20px rgba(16, 185, 129, 0.5), 0 0 40px rgba(16, 185, 129, 0.3)',\n                      }}\n                    >\n                      <span className=\"relative z-10\">START BATTLE</span>\n                    </button>\n                  </div>\n                )}\n                \n                {/* Decorative Bottom Border */}\n                <div className=\"h-2 bg-gradient-to-r from-amber-600 via-yellow-500 to-amber-600\"></div>\n                </div>\n              </div>\n\n              {/* Settings Dropdown - Below Quest Panel */}\n              <SettingsDropdown\n                showRules={showRules}\n                setShowRules={setShowRules}\n                muted={muted}\n                setMuted={setMuted}\n                musicMuted={musicMuted}\n                setMusicMuted={setMusicMuted}\n                fastMode={fastMode}\n                setFastMode={setFastMode}\n                showBoardTooltips={showBoardTooltips}\n                setShowBoardTooltips={setShowBoardTooltips}\n                enableTutorialPopups={enableTutorialPopups}\n                setEnableTutorialPopups={setEnableTutorialPopups}\n                setCampaign={setCampaign}\n                handleTryAgain={handleTryAgain}\n                win={win}\n              />\n            </div>\n          </div>\n\n          <div className=\"order-3 flex flex-col items-center\">\n            {/* Chapter title and player resources above chessboard */}\n            <div className=\"w-full flex justify-between items-center mb-2 px-4\" style={{ maxWidth: '100%' }}>\n              {/* Chapter title - left aligned */}\n              <div className=\"text-2xl font-bold text-white\" style={{ fontFamily: 'serif', textShadow: '2px 2px 4px rgba(0,0,0,0.8)' }}>\n                {currentLevelConfig?.name || `Level ${campaign.level}`}\n              </div>\n              {/* Player resources - right aligned */}\n              <div className=\"flex items-center gap-3 font-bold text-2xl\">\n                <span></span>\n                <span className=\"text-purple-400\">x{prayerDice}</span>\n                <span></span>\n                <span className=\"text-amber-400\">{marketPoints}g</span>\n              </div>\n            </div>\n            <div className=\"stand\" ref={boardRef} style={{ position: 'relative' }}>\n              <BoardComponent\n                board={Bstate}\n                T={Tstate}\n                obstacles={obstacles}\n                V={vis}\n                sel={sel}\n                legal={legal}\n                click={click}\n                fx={fx}\n                phase={phase}\n                dispA={dispA}\n                dispD={dispD}\n                bumpA={bumpA}\n                bumpD={bumpD}\n                wChk={wChk}\n                bChk={bChk}\n                speechBubble={speechBubble}\n                marketAction={marketAction}\n                rerollState={rerollState}\n                rerollTarget={rerollTarget}\n                combatId={combatIdRef.current}\n                destroyedPieceIds={destroyedPieceIds}\n                failedAttackId={failedAttackId}\n                showBoardTooltips={showBoardTooltips}\n                showTooltip={showTooltip}\n                hideTooltip={hideTooltip}\n                drag={drag}\n                startDrag={startDrag}\n                lastMove={lastMove}\n                moveAnim={moveAnim}\n                sellPiece={sellPiece}\n                sellButtonPos={sellButtonPos}\n                setSellButtonPos={setSellButtonPos}\n                boardSize={currentBoardSize}\n                victoryConditions={currentLevelConfig?.victoryConditions || [\"king_beheaded\", \"king_captured\", \"king_dishonored\"]}\n                setSpeechBubble={setSpeechBubble}\n                currentLevelConfig={currentLevelConfig}\n                kingEscapeGuideActive={kingEscapeGuideLineVisible}\n                kingEscapeGuideOpacity={kingEscapeGuideLineOpacity}\n              />\n              \n              {/* Market Overlay - positioned over the board during market phase */}\n              {phase === \"market\" && currentLevelConfig?.marketEnabled !== false && (\n                <>\n                  {marketViewVisible && (\n                    <div className=\"market-overlay\" style={{\n                      position: 'absolute',\n                      top: '0',\n                      left: '0',\n                      right: '0',\n                      bottom: '176px', // Leave space for bottom 2 rows (2 * 88px)\n                      zIndex: 100,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      padding: '20px',\n                      pointerEvents: 'none'\n                    }}>\n                      <div style={{ pointerEvents: 'auto', maxWidth: '500px', width: '100%' }}>\n                        <Market\n                          showTooltip={showTooltip}\n                          hideTooltip={hideTooltip}\n                          levelConfig={currentLevelConfig}\n                          campaign={campaign}\n                          marketPoints={marketPoints}\n                          setMarketPoints={setMarketPoints}\n                          setMarketAction={setMarketAction}\n                          setPrayerDice={setPrayerDice}\n                          setCampaign={setCampaign}\n                          sfx={sfx}\n                          setMarketViewVisible={setMarketViewVisible}\n                        />\n                      </div>\n                    </div>\n                  )}\n                  \n                </>\n              )}\n            </div>\n            \n            {/* Market View / Battlefield View Buttons - Under chessboard */}\n            {phase === \"market\" && currentLevelConfig?.marketEnabled !== false && (\n              <div className=\"mt-4 flex justify-center w-full\">\n                {marketViewVisible ? (\n                  <button\n                    data-view-battlefield=\"true\"\n                    onClick={() => setMarketViewVisible(false)}\n                    className=\"px-4 py-3 rounded-lg bg-blue-700 hover:bg-blue-600 text-white font-bold text-lg shadow-lg transition-colors\"\n                  >\n                     VIEW BATTLEFIELD\n                  </button>\n                ) : (\n                  <button\n                    onClick={() => setMarketViewVisible(true)}\n                    className=\"px-4 py-3 rounded-lg bg-amber-700 hover:bg-amber-600 text-white font-bold text-lg shadow-lg transition-colors\"\n                  >\n                     MARKET VIEW\n                  </button>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Move History Column - Right side */}\n          {phase !== \"market\" && (\n            <div className=\"order-4 w-96 flex-shrink-0 self-start\" style={{ marginTop: '70px' }}>\n              <div className=\"sticky top-4\" style={{\n                transform: 'perspective(900px) rotateX(3deg)',\n                transformOrigin: 'center top'\n              }}>\n                <MoveHistoryLog history={moveHistory} phase={phase} turn={turn} win={win} phrase={phrase} />\n              </div>\n            </div>\n          )}\n        </div>\n\n        {showMarketConfirm && modalPosition && (\n          <TutorialPopup\n            message=\"You have unspent gold!\"\n            subMessage=\"Are you sure you want to start the battle?\"\n            onCancel={() => setShowMarketConfirm(false)}\n            onConfirm={() => {\n              setShowMarketConfirm(false);\n              playBattleTrumpet();\n              handleStartBattle();\n            }}\n            cancelText=\"GO BACK\"\n            confirmText=\"START BATTLE\"\n            position={modalPosition}\n          />\n        )}\n\n        {/* Mechanic Tutorial Popups */}\n        {currentTutorial && tutorialPosition && (() => {\n          const content = getTutorialContent(currentTutorial);\n          // Market tutorials use button positioning, all board tutorials are centered\n          const isMarketButtonTutorial = currentTutorial === \"market_view_battlefield\";\n          // All board-related tutorials (single_combat, supporting_units, king_advantage, etc.) are centered\n          const shouldCenter = !isMarketButtonTutorial;\n          return (\n            <TutorialPopup\n              message={content.title}\n              subMessage={content.body}\n              onConfirm={closeTutorial}\n              confirmText=\"ONWARD\"\n              imageBanner={content.imageBanner}\n              position={shouldCenter ? undefined : tutorialPosition}\n              centered={shouldCenter}\n            />\n          );\n        })()}\n\n        {/* Updated Win/Loss Modal */}\n        <VictoryPopup\n          win={win}\n          showVictoryDetails={showVictoryDetails}\n          phrase={phrase}\n          thisLevelUnlockedItems={thisLevelUnlockedItems}\n          killedEnemyPieces={killedEnemyPieces}\n          destroyedCourtiers={destroyedCourtiers}\n          handleNextLevel={handleNextLevel}\n          handleTryAgain={handleTryAgain}\n          handleRetryLevel={handleRetryLevel}\n          winModalPosition={winModalPosition}\n          currentLevelConfig={currentLevelConfig}\n          objectiveStates={objectiveStates}\n          activeObjectiveIds={activeObjectiveIds}\n          difficulty={campaign.difficulty}\n        />\n\n        {phase === \"awaiting_reroll\" && rerollState && rerollPopupPosition && !pausedForTutorial && (\n          <div\n            className=\"fixed inset-0 bg-black/70 z-[2000]\"\n            onClick={() => handleReroll(false)}\n          >\n            <div\n              className=\"bg-stone-950/90 backdrop-blur rounded-2xl shadow-2xl text-white text-center absolute border-2 border-amber-900/50 overflow-hidden\"\n              style={{\n                top: `${rerollPopupPosition.top}px`,\n                left: `${rerollPopupPosition.left}px`,\n                transform: \"translate(-50%, -50%)\",\n                zIndex: 2100,\n                fontFamily: 'Georgia, serif',\n                boxShadow: '0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 2px rgba(212, 175, 55, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1)',\n              }}\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"w-full overflow-hidden\">\n                <img src={`${process.env.PUBLIC_URL}/popup_PrayerDice.png`} alt=\"Prayer Die\" className=\"w-full h-auto object-contain block\" />\n              </div>\n              <div className=\"p-6\">\n                <h3 className=\"text-xl font-bold mb-3 text-amber-200\" style={{ fontFamily: 'Georgia, serif', textShadow: '2px 2px 4px rgba(0,0,0,0.8)' }}>\n                  Roll Failed!\n                </h3>\n                <p className=\"mb-5 text-gray-200 italic\" style={{ fontFamily: 'Georgia, serif' }}>\n                  Pray to the Eye for divine intervention?\n                  <br />\n                  <span className=\"text-purple-400 font-semibold\">( x{prayerDice} remaining)</span>\n                </p>\n                <div className=\"flex justify-center gap-4\">\n                  <button\n                    onClick={() => handleReroll(false)}\n                    className=\"px-6 py-2.5 rounded-lg bg-amber-900/80 hover:bg-amber-800/90 font-bold border border-amber-700/50 transition-colors\"\n                    style={{ fontFamily: 'Georgia, serif' }}\n                  >\n                    Decline\n                  </button>\n                  <button\n                    onClick={() => handleReroll(true)}\n                    className=\"px-6 py-2.5 rounded-lg bg-purple-400 hover:bg-purple-300 text-purple-950 font-bold border border-purple-500/50 transition-colors shadow-lg\"\n                    style={{ fontFamily: 'Georgia, serif', boxShadow: '0 4px 12px rgba(167, 139, 250, 0.4)' }}\n                  >\n                    Pray \n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {phase === \"awaiting_disguise_choice\" &&\n          disguisePopupState &&\n          disguisePopupPosition && (\n            <div\n              className=\"fixed inset-0 bg-black/60 z-50\"\n              onClick={() => {\n                setDisguisePopupState(null);\n                setPhase(\"playing\");\n              }}\n            >\n              <div\n                className=\"bg-stone-900 rounded-2xl p-5 shadow-lg text-white text-center absolute\"\n                style={{\n                  top: `${disguisePopupPosition.top}px`,\n                  left: `${disguisePopupPosition.left}px`,\n                  transform: \"translate(-50%, -110%)\",\n                  zIndex: 100,\n                }}\n                onClick={(e) => e.stopPropagation()}\n              >\n                <h3 className=\"text-lg font-bold mb-3\">Break Disguise?</h3>\n                <div className=\"flex justify-center gap-4 mt-4\">\n                  <button\n                    onClick={() => handleDisguiseChoice(false)}\n                    className=\"px-5 py-2 rounded-lg bg-amber-900 hover:bg-amber-800 font-bold\"\n                  >\n                    Move as Pawn\n                  </button>\n                  {originalPieceType && PIECE_NAMES[originalPieceType as keyof typeof PIECE_NAMES] && (\n                    <button\n                      onClick={() => handleDisguiseChoice(true)}\n                      className=\"px-5 py-2 rounded-lg bg-sky-600 hover:bg-sky-500 font-bold\"\n                    >\n                      Reveal {PIECE_NAMES[originalPieceType as keyof typeof PIECE_NAMES]} (\n                      {/* Ensure originalPieceType is a valid key before accessing GL */}\n                      {(() => {\n                        const glyphSet = GL[originalPieceType as keyof typeof GL];\n                        return glyphSet && W in glyphSet ? glyphSet[W as keyof typeof glyphSet] : \"?\";\n                      })()})\n                    </button>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n\n        {moveAnim &&\n          (() => {\n            if (!boardRef.current) return null;\n            const boardRect = boardRef.current.getBoundingClientRect();\n            const fromVisualY = currentBoardSize - 1 - moveAnim.from.y;\n            const fromPos = {\n              left: boardRect.left + 12 + 24 + moveAnim.from.x * 88,\n              top: boardRect.top + 12 + fromVisualY * 88,\n            };\n            const toVisualY = currentBoardSize - 1 - moveAnim.to.y;\n            const toPos = {\n              left: boardRect.left + 12 + 24 + moveAnim.to.x * 88 + 6,\n              top: boardRect.top + 12 + toVisualY * 88 + 2,\n            };\n            const dx = toPos.left - fromPos.left;\n            const dy = toPos.top - fromPos.top;\n\n            return createPortal(\n              <div\n                className=\"moving-piece\"\n                style={{\n                  position: \"fixed\",\n                  top: fromPos.top,\n                  left: fromPos.left,\n                  transform: `translate3d(${dx}px, ${dy}px, 0)`,\n                  transition: `transform ${PIECE_MOVE_MS}ms ${PIECE_MOVE_EASE}`,\n                  pointerEvents: \"none\",\n                  zIndex: 80,\n                  width: \"88px\",\n                  height: \"88px\",\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                }}\n              >\n                <span\n                  className={`chip ${moveAnim.color === \"w\" ? \"pw\" : \"pb\"}`}\n                >\n                  {moveAnim.glyph}\n                </span>\n                {moveAnim.equip && (\n                  <span className=\"equip-icon\">\n                    {equipIcon(moveAnim.equip)}\n                  </span>\n                )}\n              </div>,\n              document.body\n            );\n          })()}\n        {drag &&\n          createPortal(\n            <div\n              style={{\n                position: \"fixed\",\n                left: drag.clientX - drag.offsetX,\n                top: drag.clientY - drag.offsetY,\n                pointerEvents: \"none\",\n                zIndex: 80,\n                width: \"88px\",\n                height: \"88px\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                transform: \"scale(1.1)\",\n                transformOrigin: `${drag.offsetX}px ${drag.offsetY}px`,\n              }}\n            >\n              <span className={`chip ${drag.color === \"w\" ? \"pw\" : \"pb\"}`}>\n                {drag.glyph}\n              </span>\n              {drag.equip && (\n                <span className=\"equip-icon\">{equipIcon(drag.equip)}</span>\n              )}\n            </div>,\n            document.body\n          )}\n      </div>\n\n      <TooltipLayer tip={tooltip} />\n      {namingState && nameInputPosition && (\n        <NameInputComponent\n          position={nameInputPosition}\n          onConfirm={handleNameConfirm}\n          onCancel={handleNameCancel}\n        />\n      )}\n      \n      {/* ========== DEV TOOLS - COMMENT OUT BEFORE RELEASE ========== */}\n      {showDevPanel && (\n        <div\n          style={{\n            position: \"fixed\",\n            top: 10,\n            right: 10,\n            zIndex: 10000,\n            background: \"rgba(0, 0, 0, 0.9)\",\n            color: \"#00ff00\",\n            padding: \"12px\",\n            borderRadius: \"8px\",\n            fontFamily: \"monospace\",\n            fontSize: \"12px\",\n            border: \"2px solid #00ff00\",\n            minWidth: \"180px\",\n          }}\n        >\n          <div style={{ marginBottom: \"8px\", fontWeight: \"bold\", fontSize: \"14px\" }}>\n             DEV TOOLS <span style={{ fontSize: \"10px\", opacity: 0.6 }}>(Ctrl/Cmd+D)</span>\n          </div>\n          <div style={{ marginBottom: \"8px\", fontSize: \"11px\", opacity: 0.8 }}>\n            Current Level: <strong>{campaign.level}</strong>\n          </div>\n          <div style={{ marginBottom: \"8px\", fontSize: \"10px\", opacity: 0.6 }}>\n            Jump to Level:\n          </div>\n          <div style={{ display: \"flex\", gap: \"6px\", flexWrap: \"wrap\", marginBottom: \"8px\" }}>\n            {[1, 2, 3, 4, 5].map((level) => (\n              <button\n                key={level}\n                onClick={() => {\n                  setCampaign((prev) => ({\n                    ...prev,\n                    level,\n                    whiteRoster: [], // Reset roster when jumping levels\n                  }));\n                  setShowIntro(true); // Show intro popup which leads to story cards\n                  setWin(null);\n                  // Let init() handle phase setting - don't override it here\n                  // Generate new seed to trigger re-init\n                  setSeed(new Date().toISOString() + `-level-${level}`);\n                }}\n                style={{\n                  background: campaign.level === level ? \"#00ff00\" : \"#222\",\n                  color: campaign.level === level ? \"#000\" : \"#00ff00\",\n                  border: \"1px solid #00ff00\",\n                  padding: \"6px 12px\",\n                  cursor: \"pointer\",\n                  borderRadius: \"4px\",\n                  fontFamily: \"monospace\",\n                  fontSize: \"12px\",\n                  fontWeight: \"bold\",\n                  transition: \"all 0.2s\",\n                }}\n                onMouseEnter={(e) => {\n                  if (campaign.level !== level) {\n                    e.currentTarget.style.background = \"#333\";\n                  }\n                }}\n                onMouseLeave={(e) => {\n                  if (campaign.level !== level) {\n                    e.currentTarget.style.background = \"#222\";\n                  }\n                }}\n              >\n                Level {level}\n              </button>\n            ))}\n          </div>\n          <div style={{ marginBottom: \"8px\", fontSize: \"10px\", opacity: 0.6 }}>\n            Quick Actions:\n          </div>\n          <button\n            onClick={() => {\n              showEndOfDemoCards();\n              setShowDevPanel(false);\n            }}\n            style={{\n              background: \"#9932cc\",\n              color: \"#fff\",\n              border: \"1px solid #9932cc\",\n              padding: \"6px 12px\",\n              cursor: \"pointer\",\n              borderRadius: \"4px\",\n              fontFamily: \"monospace\",\n              fontSize: \"12px\",\n              fontWeight: \"bold\",\n              width: \"100%\",\n              marginBottom: \"8px\",\n              transition: \"all 0.2s\",\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.background = \"#ba55d3\";\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.background = \"#9932cc\";\n            }}\n          >\n            End\n          </button>\n          <button\n            onClick={() => {\n              handleResetEverything();\n            }}\n            style={{\n              background: \"#ff6b00\",\n              color: \"#fff\",\n              border: \"1px solid #ff6b00\",\n              padding: \"6px 12px\",\n              cursor: \"pointer\",\n              borderRadius: \"4px\",\n              fontFamily: \"monospace\",\n              fontSize: \"12px\",\n              fontWeight: \"bold\",\n              width: \"100%\",\n              marginBottom: \"8px\",\n              transition: \"all 0.2s\",\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.background = \"#ff8800\";\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.background = \"#ff6b00\";\n            }}\n          >\n            Reset Everything\n          </button>\n          <button\n            onClick={() => setShowDevPanel(false)}\n            style={{\n              background: \"#ff0000\",\n              color: \"#fff\",\n              border: \"none\",\n              padding: \"6px 10px\",\n              cursor: \"pointer\",\n              borderRadius: \"4px\",\n              fontSize: \"11px\",\n              width: \"100%\",\n              fontWeight: \"bold\",\n            }}\n          >\n            Hide Panel\n          </button>\n        </div>\n      )}\n      {/* ============================================================ */}\n    </div>\n  );\n}\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom/client\";\r\nimport App from \"./Dice_Chess\";\r\n\r\nconst rootElement = document.getElementById(\"root\")!;\r\nconst root = ReactDOM.createRoot(rootElement);\r\n\r\nroot.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n);\r\n"],"names":["module","exports","f","require","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","Fragment","jsx","jsxs","r","t","u","v","w","x","y","z","iterator","B","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","C","assign","D","E","this","context","refs","updater","F","G","isReactComponent","setState","Error","forceUpdate","H","constructor","isPureReactComponent","I","Array","isArray","J","K","L","M","arguments","length","children","O","P","Q","replace","escape","toString","R","N","push","A","next","done","value","String","keys","join","S","T","_status","_result","then","default","U","V","transition","W","ReactCurrentDispatcher","ReactCurrentBatchConfig","X","Children","map","forEach","apply","count","toArray","only","Component","Profiler","PureComponent","StrictMode","Suspense","act","cloneElement","createContext","_currentValue","_currentValue2","_threadCount","Provider","Consumer","_defaultValue","_globalName","_context","createElement","createFactory","bind","createRef","forwardRef","render","isValidElement","lazy","_payload","_init","memo","compare","startTransition","unstable_act","useCallback","useContext","useDebugValue","useDeferredValue","useEffect","useId","useImperativeHandle","useInsertionEffect","useLayoutEffect","useMemo","useReducer","useRef","useState","useSyncExternalStore","useTransition","version","pop","sortIndex","id","performance","now","unstable_now","Date","setTimeout","clearTimeout","setImmediate","callback","startTime","expirationTime","priorityLevel","navigator","scheduling","isInputPending","MessageChannel","port2","port1","onmessage","postMessage","unstable_IdlePriority","unstable_ImmediatePriority","unstable_LowPriority","unstable_NormalPriority","unstable_Profiling","unstable_UserBlockingPriority","unstable_cancelCallback","unstable_continueExecution","unstable_forceFrameRate","console","error","Math","floor","unstable_getCurrentPriorityLevel","unstable_getFirstCallbackNode","unstable_next","unstable_pauseExecution","unstable_requestPaint","unstable_runWithPriority","unstable_scheduleCallback","delay","unstable_shouldYield","unstable_wrapCallback","createRoot","hydrateRoot","aa","ca","encodeURIComponent","da","Set","ea","fa","ha","add","ia","window","document","ja","ka","la","ma","acceptsBooleans","attributeName","attributeNamespace","mustUseProperty","propertyName","sanitizeURL","removeEmptyString","split","toLowerCase","ra","sa","toUpperCase","ta","slice","pa","isNaN","qa","test","oa","removeAttribute","setAttribute","setAttributeNS","xlinkHref","ua","va","wa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Ia","Ja","Ka","La","Ma","stack","trim","match","Na","Oa","prepareStackTrace","defineProperty","set","Reflect","construct","displayName","includes","name","Pa","tag","Qa","Ra","Sa","Ta","nodeName","Va","_valueTracker","getOwnPropertyDescriptor","get","configurable","enumerable","getValue","setValue","stopTracking","Ua","Wa","checked","Xa","activeElement","body","Ya","defaultChecked","defaultValue","_wrapperState","initialChecked","Za","initialValue","controlled","ab","bb","cb","db","ownerDocument","eb","fb","options","selected","defaultSelected","disabled","gb","dangerouslySetInnerHTML","hb","ib","jb","textContent","kb","lb","mb","nb","namespaceURI","innerHTML","valueOf","firstChild","removeChild","appendChild","MSApp","execUnsafeLocalFunction","ob","lastChild","nodeType","nodeValue","pb","animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","qb","rb","sb","style","indexOf","setProperty","charAt","substring","tb","menuitem","area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","ub","vb","is","wb","xb","target","srcElement","correspondingUseElement","parentNode","yb","zb","Ab","Bb","Cb","stateNode","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","addEventListener","removeEventListener","Nb","onError","Ob","Pb","Qb","Rb","Sb","Tb","Vb","alternate","return","flags","Wb","memoizedState","dehydrated","Xb","Zb","child","sibling","Yb","$b","ac","bc","cc","dc","ec","fc","gc","hc","ic","jc","kc","lc","oc","clz32","pc","qc","log","LN2","rc","sc","tc","uc","pendingLanes","suspendedLanes","pingedLanes","entangledLanes","entanglements","vc","xc","yc","zc","Ac","eventTimes","Cc","Dc","Ec","Fc","Gc","Hc","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Map","Pc","Qc","Rc","Sc","delete","pointerId","Tc","nativeEvent","blockedOn","domEventName","eventSystemFlags","targetContainers","Vc","Wc","priority","isDehydrated","containerInfo","Xc","Yc","dispatchEvent","shift","Zc","$c","ad","bd","cd","dd","ed","fd","gd","hd","Uc","stopPropagation","jd","kd","ld","md","nd","od","keyCode","charCode","pd","qd","rd","_reactName","_targetInst","currentTarget","isDefaultPrevented","defaultPrevented","returnValue","isPropagationStopped","preventDefault","cancelBubble","persist","isPersistent","wd","xd","yd","sd","eventPhase","bubbles","cancelable","timeStamp","isTrusted","td","ud","view","detail","vd","Ad","screenX","screenY","clientX","clientY","pageX","pageY","ctrlKey","shiftKey","altKey","metaKey","getModifierState","zd","button","buttons","relatedTarget","fromElement","toElement","movementX","movementY","Bd","Dd","dataTransfer","Fd","Hd","animationName","elapsedTime","pseudoElement","Id","clipboardData","Jd","Ld","data","Md","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","Nd","Od","Alt","Control","Meta","Shift","Pd","Qd","fromCharCode","code","location","repeat","locale","which","Rd","Td","width","height","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","Vd","touches","targetTouches","changedTouches","Xd","Yd","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","Zd","$d","ae","be","documentMode","ce","de","ee","fe","ge","he","ie","le","color","date","datetime","email","month","number","password","range","search","tel","text","time","url","week","me","ne","oe","event","listeners","pe","qe","re","se","te","ue","ve","we","xe","ye","ze","oninput","Ae","detachEvent","Be","Ce","attachEvent","De","Ee","Fe","He","Ie","Je","Ke","node","offset","nextSibling","Le","contains","compareDocumentPosition","Me","HTMLIFrameElement","contentWindow","href","Ne","contentEditable","Oe","focusedElem","selectionRange","documentElement","start","end","selectionStart","selectionEnd","min","defaultView","getSelection","extend","rangeCount","anchorNode","anchorOffset","focusNode","focusOffset","createRange","setStart","removeAllRanges","addRange","setEnd","element","left","scrollLeft","top","scrollTop","focus","Pe","Qe","Re","Se","Te","Ue","Ve","We","animationend","animationiteration","animationstart","transitionend","Xe","Ye","Ze","animation","$e","af","bf","cf","df","ef","ff","gf","hf","lf","mf","concat","nf","Ub","instance","listener","of","has","pf","qf","rf","random","sf","capture","passive","tf","uf","parentWindow","vf","wf","na","xa","$a","ba","je","char","ke","unshift","xf","yf","zf","Af","Bf","Cf","Df","Ef","__html","Ff","Gf","Hf","Promise","Jf","queueMicrotask","resolve","catch","If","Kf","Lf","Mf","previousSibling","Nf","Of","Pf","Qf","Rf","Sf","Tf","Uf","Vf","Wf","Xf","Yf","contextTypes","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","Zf","childContextTypes","$f","ag","bg","getChildContext","cg","__reactInternalMemoizedMergedChildContext","dg","eg","fg","gg","hg","jg","kg","lg","mg","ng","og","pg","qg","rg","sg","tg","ug","vg","wg","xg","yg","zg","Ag","Bg","elementType","deletions","Cg","pendingProps","overflow","treeContext","retryLane","Dg","mode","Eg","Fg","Gg","memoizedProps","Hg","Ig","Jg","Kg","Lg","_stringRef","Mg","Ng","Og","index","Pg","Qg","Rg","implementation","Sg","Tg","Ug","Vg","Wg","Xg","Yg","Zg","$g","ah","bh","childLanes","ch","dependencies","firstContext","lanes","dh","eh","memoizedValue","fh","gh","hh","interleaved","ih","jh","kh","updateQueue","baseState","firstBaseUpdate","lastBaseUpdate","shared","pending","effects","lh","mh","eventTime","lane","payload","nh","oh","ph","qh","rh","sh","th","uh","vh","wh","xh","yh","tagName","zh","Ah","Bh","Ch","revealOrder","Dh","Eh","_workInProgressVersionPrimary","Fh","Gh","Hh","Ih","Jh","Kh","Lh","Mh","Nh","Oh","Ph","Qh","Rh","Sh","Th","baseQueue","queue","Uh","Vh","Wh","lastRenderedReducer","action","hasEagerState","eagerState","lastRenderedState","dispatch","Xh","Yh","Zh","$h","ai","getSnapshot","bi","ci","di","lastEffect","stores","ei","fi","gi","hi","ii","create","destroy","deps","ji","ki","li","mi","ni","oi","pi","qi","ri","si","ti","ui","vi","wi","xi","yi","zi","Ai","Bi","readContext","useMutableSource","unstable_isNewReconciler","identifierPrefix","Ci","Di","Ei","_reactInternals","Fi","shouldComponentUpdate","Gi","contextType","state","Hi","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","Ii","getDerivedStateFromProps","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","Ji","message","digest","Ki","Li","Mi","WeakMap","Ni","Oi","Pi","Qi","getDerivedStateFromError","componentDidCatch","Ri","componentStack","Si","pingCache","Ti","Ui","Vi","Wi","Xi","Yi","Zi","$i","aj","bj","cj","dj","baseLanes","cachePool","transitions","ej","fj","gj","hj","ij","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","jj","kj","pendingContext","lj","zj","Aj","Bj","Cj","mj","nj","oj","fallback","pj","qj","sj","dataset","dgst","tj","uj","_reactRetry","rj","subtreeFlags","vj","wj","isBackwards","rendering","renderingStartTime","last","tail","tailMode","xj","Dj","Ej","Fj","wasMultiple","multiple","suppressHydrationWarning","onClick","onclick","size","createElementNS","autoFocus","createTextNode","Gj","Hj","Ij","Jj","Kj","WeakSet","Lj","Mj","Nj","Pj","Qj","Rj","Sj","Tj","Uj","Vj","insertBefore","_reactRootContainer","Wj","Xj","Yj","Zj","onCommitFiberUnmount","componentWillUnmount","ak","bk","ck","dk","ek","isHidden","fk","gk","display","hk","ik","jk","kk","__reactInternalSnapshotBeforeUpdate","src","Vk","lk","ceil","mk","nk","ok","Y","Z","pk","qk","rk","sk","tk","Infinity","uk","vk","wk","xk","yk","zk","Ak","Bk","Ck","Dk","callbackNode","expirationTimes","expiredLanes","wc","callbackPriority","ig","Ek","Fk","Gk","Hk","Ik","Jk","Kk","Lk","Mk","Nk","Ok","finishedWork","finishedLanes","Pk","timeoutHandle","Qk","Rk","Sk","Tk","Uk","mutableReadLanes","Bc","Oj","onCommitFiberRoot","mc","onRecoverableError","Wk","onPostCommitFiberRoot","Xk","Yk","$k","pendingChildren","al","mutableSourceEagerHydrationData","bl","cache","pendingSuspenseBoundaries","dl","el","fl","gl","hl","il","yj","Zk","kl","reportError","ll","_internalRoot","ml","nl","ol","pl","rl","ql","unmount","unstable_scheduleHydration","splice","querySelectorAll","JSON","stringify","form","sl","usingClientEntryPoint","Events","tl","findFiberByHostInstance","bundleType","rendererPackageName","ul","rendererConfig","overrideHookState","overrideHookStateDeletePath","overrideHookStateRenamePath","overrideProps","overridePropsDeletePath","overridePropsRenamePath","setErrorHandler","setSuspenseHandler","scheduleUpdate","currentDispatcherRef","findHostInstanceByFiber","findHostInstancesForRefresh","scheduleRefresh","scheduleRoot","setRefreshHandler","getCurrentFiber","reconcilerVersion","__REACT_DEVTOOLS_GLOBAL_HOOK__","vl","isDisabled","supportsFiber","inject","createPortal","cl","unstable_strictMode","findDOMNode","flushSync","hydrate","hydratedSources","_getVersion","_source","unmountComponentAtNode","unstable_batchedUpdates","unstable_renderSubtreeIntoContainer","checkDCE","err","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","_typeof","o","toPropertyKey","i","toPrimitive","TypeError","Number","_defineProperty","writable","ownKeys","getOwnPropertySymbols","filter","_objectSpread2","getOwnPropertyDescriptors","defineProperties","ALL_ITEMS","WHITE_ITEMS","item","configCache","async","loadLevelConfig","level","response","fetch","process","statusText","config","json","boardSize","warn","fallbackConfig","startingGold","enemyArmyGold","playerArmyGold","botBehavior","availableItems","blackRandomization","whiteRandomization","whitePurchase","marketEnabled","availablePieces","VAL","PIECE_COSTS","ITEM_COSTS","sword","shield","lance","torch","bow","staff","crystal_ball","prayer_die","disguise","scythe","banner","curse","skull","purse","TIMING","normal","roll","linger","mods","total","winnerHold","botThink","bubble","rerollFinish","fast","GL","ROCK","COURTIER","COLUMN","GATE","BELL","PHRASES","win","lose","NAMED_PHRASES","taunt","SWING_PHRASES","ITEM_DESCRIPTIONS","PIECE_DESCRIPTIONS","PIECE_NAMES","_ref","_card$character","_card$character2","card","onChoice","outcomeMode","enableIdleAnimation","dragX","setDragX","isDragging","setIsDragging","startX","setStartX","dragXRef","displayedText","setDisplayedText","isAnimating","setIsAnimating","audioCtxRef","animationIntervalRef","ensureAudioContext","Ctx","AudioContext","webkitAudioContext","playSwipeSound","ctx","resume","duration","sr","sampleRate","buffer","createBuffer","getChannelData","createBufferSource","createBiquadFilter","frequency","gain","createGain","currentTime","setValueAtTime","exponentialRampToValueAtTime","connect","destination","stop","outcomes","playRewardSound","freq","osc","createOscillator","completeTextAnimation","clearInterval","fullText","bodyText","currentIndex","interval","setInterval","playTextBlip","parseText","displayText","parts","currentPos","elements","part","idx","startsWith","endsWith","innerText","partLength","visibleLength","max","_jsx","className","letter","animationDelay","handleDocumentMouseMove","diff","clampedDrag","abs","handleDocumentMouseUp","currentDragX","leftChoice","events","rightChoice","leftOpacity","rightOpacity","_jsxs","onMouseDown","_ensureAudioContext","character","getCharacterDisplay","pieceGlyphSet","colorKey","glyph","equip","outcome","isCompact","bgColor","borderColor","fontFamily","textShadow","_Fragment","transform","cursor","image","alt","draggable","onDragStart","userSelect","pointerEvents","overlayColor","background","playButtonClickSound","audio","Audio","volume","play","onContinue","viewBox","fill","stroke","strokeLinecap","strokeLinejoin","x1","y1","x2","y2","points","MainMenu","onEnter","showChangelog","setShowChangelog","Changelog","s","border","borderImage","boxShadow","playButtonSound","letterSpacing","MUSIC_FILES","mainMenu","level1","level2","level3","level4","level5","endGame","MusicManager","musicMuted","currentAudioRef","currentPlaylistRef","currentPlaylistIndexRef","fadeIntervalRef","playlistActiveRef","currentMusicTypeRef","fadeOut","onComplete","volumeStep","currentStep","pause","fadeDuration","playTrack","loop","playPromise","stopAllMusic","playMainMenuMusic","_currentMusicTypeRef$","paused","playLevelMusic","_currentMusicTypeRef$2","_currentMusicTypeRef$3","playlist","playNext","playPlaylist","playEndGameMusic","_currentMusicTypeRef$4","stopMusic","Market","_campaign$prayerDiceC","_campaign$prayerDiceC3","showTooltip","hideTooltip","levelConfig","campaign","marketPoints","setMarketPoints","setMarketAction","setPrayerDice","setCampaign","sfx","setMarketViewVisible","pieces","levelItems","unlockedItems","freeItemsList","freeItems","from","items","itemName","onMouseLeave","onMouseMove","closest","cost","freeCount","freeUnits","hasFree","canAfford","onMouseEnter","purchase","isFree","glyphSet","prayerDiceCost","_campaign$prayerDiceC2","prayerCost","prev","prayerDice","_objectSpread","_ref2","getEffectiveConditionParams","condition","difficulty","_condition$params","_condition$difficulty","baseParams","params","difficultyParams","overrides","fallbackDifficulty","easy","hard","evaluateTemplateCommand","rawContent","segments","depth","nextChar","splitTemplateSegments","command","args","resolved","paramName","singular","plural","zero","suffix","singularSuffix","zeroValue","elseValue","oneValue","findNextTemplateToken","fromIndex","startIndex","pair","endIndex","content","getObjectiveDescription","objective","_objective$descriptio","originalDescription","description","hasTemplate","templated","template","result","iteration","searchIndex","resolvedAny","token","originalToken","beforeLength","applyDescriptionTemplate","maxLosses","maxCourtiers","maxTurns","term","checkAllObjectives","objectives","objectiveStates","tracking","board","_options$allowComplet","newlyCompleted","newlyFailed","allowCompletion","isCompleted","isFailed","find","obj","objectiveId","pieceType","pieceName","lostPieces","playerPiecesLost","found","piece","isMet","isPermanentlyMet","progress","_tracking$whiteTurnCo","turnCount","whiteTurnCount","turnNumber","kingPosition","targetRank","rank","targetFile","file","targetArea","targetCount","pieceConversions","comparison","killerPieceType","killerName","killerTerrain","victimStunned","kills","enemyPiecesKilled","killerType","targetStunned","killCount","itemType","itemsUsed","hasDisguise","kingDisguiseActive","_tracking$victoryDeli","requiredType","delivererType","victoryDelivererOriginalType","victoryDelivererType","courtiersDestroyed","checkObjectiveCondition","canCompleteNow","completedOnTurn","failedOnTurn","equipIcon","VictoryPopup","showVictoryDetails","phrase","thisLevelUnlockedItems","killedEnemyPieces","destroyedCourtiers","handleNextLevel","handleTryAgain","handleRetryLevel","winModalPosition","currentLevelConfig","activeObjectiveIds","formatVictoryCondition","getVictoryConditionDescription","_currentLevelConfig$v","victoryConditionDescriptions","victoryConditions","displayedVictoryConditions","fulfilledCondition","getFulfilledVictoryCondition","defeatedKing","kp","defeatType","showDetails","frameBorderClass","topBottomBarClass","headerGradientClass","headerTitle","questNarration","summaryContent","questDescription","fallbackVictoryText","victoryDisplayText","minWidth","maxWidth","title","_currentLevelConfig$o","purseCount","purseGold","regularValue","reduce","sum","killedPiece","pieceValue","itemValue","ransomGold","kingGold","casualtiesPenalty","activeObjectives","optionalObjectives","completedObjectives","objectiveBonus","_objective$rewardByDi","rewardByDifficulty","reward","totalGold","fontSize","_","TUTORIAL_CONTENT","single_combat","imageBanner","supporting_units","king_advantage","king_escape_hint","stunned_units","exhausted_units","veterans","market_buy_pawn","market_view_battlefield","prayer_dice","TutorialPopup","subMessage","onCancel","onConfirm","cancelText","confirmText","position","centered","isMechanicTutorial","shouldCenter","alignItems","justifyContent","margin","TooltipLayer","_ref3","tip","role","muted","audioContext","_play","vol","deploy","move","combatLose","convert","reveal","crystalBall","spear","bowBreak","rockDestroy","prayer","winCheckmate","loseCheckmate","cashOut","unlock","rngFrom","seed","imul","charCodeAt","xmur3","rand","inb","inBounds","cheb","manhattan","cloneB","isKingPiece","originalType","serializePiece","isPreconfigured","isExhausted","speechLines","deserializePiece","stunnedForTurns","FILES","getChessNotation","to","isCapture","notation","onPieceDeath","pos","turn","onPlayerPieceLost","dy","dx","_b$ny","nx","ny","adj","_adj$stunnedForTurns","cur","turns","applyStunAround","trackKingDefeat","setKilledEnemies","checkUnlockItem","killerColor","setUnlocked","setUnspentGold","killerPiece","terrainGrid","terrain","killerPosition","row","_row$killerPosition$x","killerId","decrementStunFor","side","_b$y","shadowForTurns","isProtectedByBanner","pieceColor","_b$y2","specPool","allowedPieceTypes","allowed","maxQ","maxR","maxB","maxN","back","remainingGold","build","_s","initialGold","isPlayer","namedPieces","kingName","backRankRow","frontRankRow","skipKing","guaranteedItems","guaranteedPieces","equipmentGold","obstacles","pawnBudget","EQ","EQ_FOR_PAWNS","EQ_FOR_BACK_RANK","availableBackSlots","availableFrontSlots","blockedBackSlots","blockedFrontSlots","_obstacles$backRankRo","_obstacles$frontRankR","_board$backRankRow","_board$backRankRow2","_board$frontRankRow","_board$frontRankRow2","_board$backRankRow3","_board$frontRankRow3","backHasObstacle","frontHasObstacle","backHasPiece","frontHasPiece","namedBackRankPieces","namedFrontRankPieces","kingFromNamedPieces","namedPiece","kingCreated","king","guaranteedBackRankPieces","guaranteedFrontRankPieces","overflowPawnsCount","gp","totalFrontRankPieces","remainingBackSlots","P_COST","pawnGold","backRankGold","pawnCount","BACK_SPECS","backSpec","SPECS","defaultSpec","addedPieces","overflowPawns","sort","fr","slots","remainingEquipmentGold","EQ_AVAILABLE","EQ_FOR_PAWNS_AVAILABLE","EQ_FOR_BACK_RANK_AVAILABLE","availableItemCosts","averageItemCost","maxPawnItemsToEquip","slotIndex","remainingPawnSlots","actualPawnsToGenerate","allUnequippedPawns","pawnsToEquipCount","pawnIndicesToEquip","randomItem","itemCost","unequippedBackRank","backItemsToEquipCount","attempts","allPieces","front","emptyTerrain","emptyObstacles","parseTerrainCell","cell","obstacle","moves","_b$y3","dir","out","slide","_b$ny2","_O$ny","_b$ny3","_O$ny2","_ref4","_b$ny4","_O$ny3","_O$ny4","_b$ny5","_b$cy","_O$cy","cx","cy","diagObstacle","_O$midY","_b$midY","midY","targetY","midObstacle","_b$targetY","_O$targetY","targetPiece","targetObstacle","_b$ny6","_O$ny5","kingMovesIgnoringStun","_b$y4","_b$ny7","_O$ny6","attacks","sx","sy","tx","ty","_b$sy","some","supportCount","_b$y5","findK","_b$y6","findPieceById","_b$y7","threatened","sq","by","_b$y8","visibility","phase","fogRows","marketViewVisible","_b$y9","yy","xx","d6","sumMods","acc","_ref5","kind","support","bellOfNamesExists","_obstacles$y","resolveObstacle","adv","_O$to$y","obstacleType","threshold","useAdv","rolls","am","sup","at","val","tryMove","_nb$from$y","mv","advPMF","winPercent","BD","TD","OD","att","def","_TD$to$y","_TD$to$y2","_TD$to$y3","aSup","aMod","terrainMod","dMod","lanceLungeUsed","isTorchAdvantage","aPMF","dPMF","round","obstacleWinPercent","_OD$to$y","probSingleLessThan","AnimatedSpeechBubble","_ref6","charCount","setCharCount","cleanText","intervalId","parseEmphasis","str","displayedChars","regex","lastIndex","charsProcessed","exec","beforeText","visibleChars","emphasized","emphasizedText","remainingText","charIdx","DiceD6","_ref7","rolling","face","setFace","setT","rafRef","runningRef","startRef","lastTickRef","rng","spinMs","step","elapsed","eased","c1","pow","easeOutBack","minDelta","lerp","nextFace","requestAnimationFrame","cancelAnimationFrame","spin","rotZ","rotX","rotY","bob","sin","PI","squash","jitter","pip","perspective","rx","ry","renderPips","dot","TL","TR","BL","BR","ML","MR","mid","BoardComponent","_ref8","_board$rerollState$fr","_board$rerollState$fr2","_board$hover$y3","_obstacles$hover$y3","_board$sellButtonPos$","_board$sellButtonPos$2","_board$sellButtonPos$3","_board$sellButtonPos$4","_board$sellButtonPos$5","_board$sellButtonPos$6","sel","legal","click","fx","dispA","dispD","bumpA","bumpD","wChk","bChk","speechBubble","marketAction","rerollState","rerollTarget","combatId","destroyedPieceIds","failedAttackId","showBoardTooltips","drag","startDrag","lastMove","moveAnim","sellPiece","sellButtonPos","setSellButtonPos","setSpeechBubble","kingEscapeGuideActive","kingEscapeGuideOpacity","hover","setHover","chipPositions","setChipPositions","boardContainerRef","React","isL","sumsA","sumsD","supportingPieces","_board$sel$y","_board$hover$y","_obstacles$hover$y","_board$sel$y2","selectedPiece","supporting","_board$y","positions","visualY","centerX","tileSize","centerY","entries","prevValue","kingEscapeGuideLinePoints","kingPos","_board$y2","kingVisualY","targetVisualY","speechBubbleTarget","speechBubbleObstaclePos","targetId","_obstacles$y2","parseInt","rerollTargetPos","gridTemplateColumns","gridTemplateRows","_board$y3","_obstacles$y3","_V$y","_board$y4","_obstacles$y4","_T$y","_board$sel$y3","_board$hover$y2","_obstacles$hover$y2","_board$sel$y4","_board$sel$y$sel$x","_board$sel$y$sel$x2","_obstacles$y5","_obstacles$y6","_obstacles$y7","_V$y3","_fx$d2","_fx$d$base","_fx$d3","_fx$id3","_T$fx$to$y","_T$fx$to$y2","_T$fx$to$y3","currentObstacle","hasObstacle","light","isSel","isMove","inFog","show","willCap","isObstacleAttack","currentTerrain","forest","water","attacker","obstaclePct","atk","kingAura","isCrystalBallSwap","isCrystalBallSwapTarget","showPct","pct","_V$y2","isAttack","currentPct","ringClass","hoveredAttackTarget","isSupporting","showSpeechBubble","isMarketPlacement","isMarketEquipTarget","isMarketMoveTarget","isMarketSwapTarget","isRerollTarget","isHovered","isPlayerDisguisedPiece","showAsOriginalOnHover","isDestroyed","hasFailedAttack","isEscapeRow","isBannerProtected","isLastMoveFrom","isLastMoveTo","isOriginHidden","isTargetHidden","terrainGlyph","terrainTooltip","_board$y5","_board$y5$x","_board$y6","_board$y6$x","rt","HTMLElement","inset","typeToShow","getPieceSymbol","scrollWidth","clientWidth","_fx$a","_fx$id","forced","_fx$d","_fx$id2","offsetWidth","offsetHeight","xmlns","shapeRendering","supportPos","targetPos","NameInputComponent","_ref9","setName","inputRef","_inputRef$current","handleEscape","onSubmit","onChange","placeholder","maxLength","SettingsDropdown","_ref0","showRules","setShowRules","setMuted","setMusicMuted","fastMode","setFastMode","setShowBoardTooltips","enableTutorialPopups","setEnableTutorialPopups","isOpen","setIsOpen","newValue","localStorage","setItem","removeItem","tutorialsSeen","App","_currentLevelConfig$b","_Bstate$disguisePopup","showIntro","setShowIntro","isRetryingLevel","setIsRetryingLevel","setSeed","toISOString","musicManagerRef","saved","getItem","needsReinit","setNeedsReinit","showDevPanel","setShowDevPanel","handleKeyPress","HTMLInputElement","HTMLTextAreaElement","setLastMove","setMoveAnim","setDrag","rngRef","combatIdRef","recentSpeechRef","Bstate","setB","Tstate","setObstacles","setTurn","setSel","setLegal","setWin","setPhrase","setFx","setPhase","setDispA","setDispD","setBumpA","setBumpD","showMarketConfirm","setShowMarketConfirm","startBattleBtnRef","boardRef","currentStoryCard","setCurrentStoryCard","currentStoryCardRef","storyCardQueue","setStoryCardQueue","storyOutcome","setStoryOutcome","showTransition","setShowTransition","showDifficultyTransition","setShowDifficultyTransition","difficultyTransitionLine","setDifficultyTransitionLine","difficultyTransitionText","setDifficultyTransitionText","difficultyTransitionIntervalRef","difficultyTransitionTimeoutRef","difficultyTransitionAudioCtxRef","playDifficultyTextBlip","ensureDifficultyAudioContext","playBattleTrumpet","makeHorn","lp","setRerollState","rerollPopupPosition","setRerollPopupPosition","setRerollTarget","disguisePopupState","setDisguisePopupState","disguisePopupPosition","setDisguisePopupPosition","namingState","setNamingState","nameInputPosition","setNameInputPosition","setDestroyedPieceIds","setFailedAttackId","moveHistory","setMoveHistory","showRulesItemInfo","setShowRulesItemInfo","pieceMovesHistory","setPieceMovesHistory","checkExhaustion","pieceId","recentMoves","_board$to$y","newMap","unspentGold","parsed","parse","whiteRoster","setCurrentLevelConfig","currentBoardSize","setThisLevelUnlockedItems","setKilledEnemyPieces","setDestroyedCourtiers","setPlayerPiecesLost","setObjectiveStates","setActiveObjectiveIds","newlyCompletedObjectives","setNewlyCompletedObjectives","newlyFailedObjectives","setNewlyFailedObjectives","lastVictoryInfo","setLastVictoryInfo","handlePlayerPieceLost","levelStartSnapshot","setLevelStartSnapshot","gold","currentTutorial","setCurrentTutorial","tutorialPosition","setTutorialPosition","pausedForTutorial","setPausedForTutorial","pausedForTutorialRef","pendingMoveHistoryRef","pendingActionRef","kingEscapeTutorialTriggered","setKingEscapeTutorialTriggered","kingEscapeGuideLineVisible","setKingEscapeGuideLineVisible","kingEscapeGuideLineOpacity","setKingEscapeGuideLineOpacity","kingEscapeGuideLineFadeTimeoutRef","kingEscapeGuideLineHideTimeoutRef","getBoardCenterPosition","boardRect","getBoundingClientRect","getButtonPosition","squareLeft","selector","querySelector","rect","getButtonPositionAbove","getMarketCenterPosition","marketRoot","showTutorial","triggerSquare","positionAbove","innerHeight","innerWidth","clearKingEscapeGuideLineTimeouts","triggerKingEscapeGuideLine","closeTutorial","closedTutorial","updatedTutorialsSeen","pendingMove","hist","pendingAction","perform","isBot","isDragMove","_Bstate$y","_Bstate$y2","_Bstate$y3","timer","setShowVictoryDetails","serialized","TMG","PIECE_MOVE_MS","tooltipText","setTooltipText","mousePos","enabled","setPos","onMove","useGlobalMousePos","tooltip","kW","kB","onMouseUp","_B1$drag$from$y","_B1$y","B1","draggedPiece","_obstacles$y8","onBlur","init","speechDelay","speechBubbleRef","totalDelay","isBlackInCheck","behavior","opp","ms","isAggressive","isDefensive","isBalanced","_b$y0","_b$t$y","_O$t$y","cap","winProb","riskProb","valueGain","afterCapture","myKingAfter","myKingNow","distToKingBefore","distToKingAfter","advancementScore","isSafeNow","wasThreatenedBefore","hangingPenalty","center","direction","forwardProgress","enemyKing","enemyKingPos","distToKing","backRank","adjacentAllies","_nb","neighbor","myKing","myKingBefore","kingThreatenedAfter","kingThreatenedBefore","enemyAttackers","_nb$yy","enemy","blocksAttack","_b$yy","couldAttackBefore","canAttackAfter","_b","ally","score","ev","k2","best","kingEscapeSquares","escapeSquare","movePool","kingAttackMoves","_b$m$to$y","_b$m$to$y2","_b$m$to$y2$m$to$x","toFixed","parseFloat","safeMoves","sensibleMoves","tolerance","bestMoves","bot","kingEscapedEnabled","allBlackPiecesDead","blackPieceCount","_Bstate$y4","hasEscapeSquare","newHistory","_Bstate$lastMove$to$y","deliveringPiece","handleLevelCompletion","deliverer","lastMoveEntry","vis","_currentLevelConfig$f","_fx$a$mods","_fx$d$mods","isReroll","rollDuration","lingerDuration","modsDuration","totalDuration","hasM","t1","t2","t3","tick","bump","_fx$d$base2","_fx$d4","startVal","tm","c2","winner","_deliverer$originalTy","survivors","checkObjectives","placePiecesAvoidingObstacles","_board$row","_obstacles$row","unplacedPieces","availableSlots","_board$row2","_obstacles$row2","preconfiguredToPlace","removablePieces","_board$row3","_obstacles$row3","piecesToRemove","piecesToPlace","_board$row4","_obstacles$row4","_currentLevelConfig$c","_currentLevelConfig$c2","courtierSpeechLines","speechChance","courtierSpeechChance","intervalConfig","courtierSpeechInterval","timeoutId","isActive","scheduleNextCheck","getRandomInterval","_intervalConfig$min","_intervalConfig$max","speakingCourtiers","obs","randomLine","line","courtier","handleStoryEvents","_currentLevelConfig$s","_musicManagerRef$curr2","_campaignUpdates$pray","_campaignUpdates$pray2","_campaignUpdates$unlo","_campaignUpdates$pend","_campaignUpdates$pend2","_musicManagerRef$curr3","_currentLevelConfig$s2","nextCard","shouldStartBattle","campaignUpdates","pendingFreeUnit","cardId","storyCards","amount","_campaignUpdates$free","newFreeUnits","currentCount","_event$count","_campaignUpdates$free2","newFreeItems","itemIcon","capitalizedItemName","targetColor","playerPiecesOnBoard","_Bstate$y7","_Bstate$y7$x","updatedRoster","itemEmoji","isNegativeItem","glyphEmoji","targetPieces","_Bstate$y8","piecesToModify","newBoard","_ref1","_newBoard$y","pendingEnemyPawns","pendingEnemyItemAssignments","pendingEquipmentAssignments","pendingPieceSpawns","equipEmoji","equipName","equipText","pendingDifficultyReinit","firstRealCard","_campaignUpdates$pend3","existingFlags","pendingObjectiveFlags","flag","cardToDisplay","lastCard","_musicManagerRef$curr4","preserveStoryState","line1","line2","animateLine1","currentIndex2","animateLine2","interval2","record","victoryCondition","outer","currentLevel","currentUnspentGold","_options$preserveStor","_ref10","_ref11","_levelConfig$enemyPie","_ref12","_levelConfig$playerPi","_ref13","_levelConfig$enemyEqu","_ref14","_levelConfig$playerEq","_levelConfig$difficul","_levelConfig$guarante3","_levelConfig$difficul5","_levelConfig$difficul6","_levelConfig$difficul7","_levelConfig$randomiz3","B0","T0","O0","objectiveFlagSet","escapeRow","terrainMatrix","skipTerrainRow","randomTerrainPool","occupied","waterCoords","placeFeature","terrainType","getValidNeighbors","neighbors","randomCells","_randomTerrainPool$ro","_randomTerrainPool$fo","_randomTerrainPool$wa","rockCount","rock","forestCount","waterCount","availableCells","getRandomAvailableCell","cells","removeAvailableCell","CLUSTER_CHANCE","waterPlaced","allNeighbors","coord","_T$neighbor$y","uniqueNeighbors","values","rockPlaced","rockTries","forestPlaced","forestTries","fy","placementTries","wx","wy","placeFeatures","enemyPieceGold","playerPieceGold","enemyEquipmentGold","playerEquipmentGold","currentDifficulty","difficultySettings","diffSettings","_levelConfig$guarante","_levelConfig$randomiz","guaranteedWhitePieces","white","namedWhitePieces","whiteKingName","randomizationPieces","playerPawnBudget","allWhitePieces","_levelConfig$namedWhi","_levelConfig$guarante2","_levelConfig$difficul2","_levelConfig$difficul3","_levelConfig$difficul4","deserializedRoster","roster","sortedRoster","kingIndex","findIndex","xCandidates","placedKing","obstacleRow","pieceIndex","_B$y","_O$y","placeRoster","foundMatch","boardPiece","assignment","spawn","newPiece","namedPiecesToAdd","rawGuaranteedWhite","_diffSettings$guarant","_levelConfig$randomiz2","kingEscapedOnly","pendingAssignments","blackItemPool","pendingPawns","rawGuaranteedBlack","black","_diffSettings$guarant2","guaranteedBlackPieces","namedBlackPieces","enemyPawnBudget","newCampaign","eligibleObjectives","requiredFlags","every","desiredCount","numToSelect","selectedObjectives","selectedIds","initialStates","_Bstate$y9","actionCompleted","_B1$y2","_obstacles$y9","newPieceId","_B1$y3","_B1$y4","clickedPiece","_B1$sel$y","_obstacles$y0","_Bstate$from$y","_Bstate$to$y","_obstacles$to$y","_vis$to$y5","_vis$from$y","_vis$to$y6","whiteCount","blackCount","_Bstate$y0","currentCombatId","nextTurn","userPiece","shouldPromote","toY","pawnPromotionType","promotionType","fromY","_vis$to$y","O1","_vis$to$y2","_vis$to$y3","_out$a$mods","winPct","moveRec","combat","isSupported","attackerRolls","defenderRolls","loserPos","finishRockCombat","_vis$to$y4","_out$a$mods2","_out$d$mods","tutorialShown","isFirstCombatTutorial","whiteInvolved","_T$to$y","terrainAtTarget","isVeteranAttacker","isVeteranDefender","rollsA","aForced","rollsD","dForced","dm","dt","defAdv","defenderInFog","defenderForWinPct","continueCombat","playerLost","forcedAttacker","forcedDefender","forcedForPlayer","loser","prefersReducedMotion","matchMedia","matches","finishPieceCombat","postAnimation","idsToDestroy","commitQuietMove","_B1$to$y","moved","pieceAtDestination","isWhitePawn","isBlackPawn","atTopRow","atBottomRow","moveIsInFog","isSuccess","_B1$from$y","attackerState","_B1$to$y2","wasBellDestroyed","_B1$from$y2","_B1$to$y3","_B1$winnerFinalPos$y","_B1$loserFinalPos$y","_B1$from$y3","conv","attackerAtFrom","_B1$to$y4","bellPhrase","shadowKing","endPhrase","deadDefender","deadAttacker","_B1$to$y5","isPlayerKing","_B1$to$y6","newKills","_B1$to$y7","_B1$to$y9","_B1$to$y8","_B1$to$y0","winnerFinalPos","winnerFinalPiece","shouldPromoteWinner","posY","loserFinalPos","loserFinalPiece","shouldPromoteLoser","randWithoutRecent","array","recent","available","candidates","newRecent","speechContent","getSpeechBubbleContent","_B","_winnerFinalPiece$id","winnerColor","loserColor","swingValue","winnerFinalId","_visibility$king$y","_currentLevelConfig$f2","kingVisible","_B2","_loserFinalPiece$id","loserFinalId","_visibility$king$y2","_currentLevelConfig$f3","_visibility$king$y3","_currentLevelConfig$f4","speakerId","_visibility$king$y4","_currentLevelConfig$f5","handleStartBattle","_musicManagerRef$curr5","RulesContent","_ref15","showItemInfo","setShowItemInfo","headingClass","MoveHistoryLog","_ref16","history","logRef","prevHistoryLengthRef","currentLength","scrollHeight","movePairs","findLastIndex","arr","predicate","lastWhiteMoveIndex","lastBlackMoveIndex","_history$lastWhiteMov","_history$lastBlackMov","_history$lastBlackMov2","isLastWhiteAnimating","isLastBlackAnimating","MoveCell","_ref17","_move$piece","_move$piece2","showGlyph","pctColorClass","rerolledBy","_move$combat","modalPosition","setModalPosition","setWinModalPosition","buttonRect","handleReroll","useReroll","_Bstate$from$y2","isPlayerAttacking","_obstacles$to$y2","_Bstate$to$y2","_fx$a2","_fx$d5","newA","newD","newRollsA","newRollsD","attackerHadAdvantage","defenderHadAdvantage","useAdvA","newFxA","newFxD","newWin","_Bstate$to$y3","_Bstate$from$y3","_Bstate$from$y4","_Bstate$to$y4","handleDisguiseChoice","breakDisguise","_B1$y5","disguisedPiece","originalPieceType","_musicManagerRef$curr6","showEndOfDemoCards","_musicManagerRef$curr8","endOfStoryCard","middleCard","thanksForPlayingCard","StoryCard","_musicManagerRef$curr","horn","g1","marginTop","_currentLevelConfig$v2","getDescription","isConditionFulfilled","objectiveState","displayDescription","includeProgress","formatObjectiveDescription","frameClasses","_Bstate$y5","isMarketDrag","isPlayingDrag","tileEl","tileRect","offsetX","offsetY","_Bstate$y6","sellValue","equipmentValue","getSellValue","right","bottom","padding","transformOrigin","_musicManagerRef$curr9","_objective$rewardByDi2","_objective$rewardByDi3","_objective$rewardByDi4","getObjectiveReward","calculateObjectiveBonus","nextLevel","fromVisualY","fromPos","toVisualY","toPos","currentBoard","pieceLocation","_newBoard$pieceLocati","handleNameCancel","borderRadius","marginBottom","gap","flexWrap","handleResetEverything","_musicManagerRef$curr7","rootElement","getElementById","ReactDOM"],"ignoreList":[],"sourceRoot":""}